// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401026: Register word32 fn00401026(Register byte al, Register word32 ebx)
word32 fn00401026(byte al, word32 ebx)
{
l00401026:
	word32 esp_7;
	bool D_8;
	byte CZ_9;
	bu8 al_10;
	word16 ax_11;
	ptr32 ebx_12;
	byte SCZO_13;
	word32 eax_14;
	fn00400FEF();
	return eax_14;
}

// 00411079: Register Eq_23 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	GetCurrentThreadId();
	Eq_27 eax_11 = GetModuleHandleA(&globals->t435624);
	GetCurrentProcessId();
	Eq_36 eax_20 = GetProcAddress(eax_11, &globals->t43562E);
	GetCurrentProcessId();
	GetProcessHeap();
	SizeofResource(0x00, eax_11);
	GetCommandLineA();
	Eq_57 eax_41 = eax_20();
	<anonymous> * eax_49 = (eax_41 ^ 0xC0000005) + 0x004110F5;
	ptr32 esp_51;
	word32 ebp_52;
	byte SCZO_53;
	word32 eax_54;
	byte SZO_55;
	bool C_56;
	byte al_57;
	word32 ebx_58;
	eax_49();
	*(esp_51 - 0x04) = (FARPROC *) eax_20;
	*(esp_51 - 0x08) = 0x00;
	SizeofResource(*(esp_51 - 0x08), *(esp_51 - 0x04));
	*(esp_51 - 0x04) = (FARPROC *) eax_20;
	GetFileType(*(esp_51 - 0x04));
	*(esp_51 - 0x04) = fp - 0x10;
	*(esp_51 - 0x08) = 0x40;
	*(esp_51 - 0x0C) = 0xFDA7;
	GetVersion();
	*(esp_51 - 0x10) = 0x00401000;
	VirtualProtect(*(esp_51 - 0x10), *(esp_51 - 0x0C), *(esp_51 - 0x08), *(esp_51 - 0x04));
	*(esp_51 - 0x04) = (union Eq_57 *) eax_41;
	GetCurrentProcessId();
	*(esp_51 - 0x08) = 0xFDA7;
	GetACP();
	*(esp_51 - 0x0C) = 0x00401000;
	GetCommandLineA();
	word32 esp_99;
	word32 ebp_100;
	byte SCZO_101;
	word32 eax_102;
	byte SZO_103;
	bool C_104;
	byte al_105;
	word32 ebx_106;
	(eax_41 - ~0x40411182)();
	GetCommandLineA();
	return fn00401026((byte) GetACP(), ebx_106);
}

