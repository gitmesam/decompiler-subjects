// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040409D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if (eax_12 == 0x00)
		eax_12 = fn004040D9((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 0xF3, fp - 0x04), 0xF3);
	return eax_12;
}

// 004040D9: Register word32 fn004040D9(Register byte bl, Stack word32 dwArg00)
word32 fn004040D9(byte bl, word32 dwArg00)
{
	word32 ecx_19 = 0x01E3;
	word32 * esp_114 = fp - 0x04;
	union Eq_38 * esi_24 = dwArg00 + 0xA8;
	Eq_41 edi_25 = VirtualAlloc(0x00, 0x0001491C, 0x3000, 0x40);
	uint32 edx_30 = DPB(0x454CDC1C, bl + 0x1C, 0);
	word32 ebp_103 = 0x00;
l00404115:
	uint32 * esp_44 = esp_114 - 0x04;
	*esp_44 = edx_30;
	*(esp_44 - 0x04) = ecx_19;
	*edi_25 = (word32) *edi_25 + (byte) ((char *) (*esi_24) + *esp_44);
	word32 ebp_67 = ebp_103 + 259622;
	uint32 edx_60 = *esp_44;
	word32 ecx_57 = *(esp_44 - 0x04);
	esp_114 = esp_44 + 0x01;
	esi_24 = (union Eq_38 *) ((char *) esi_24 + 0x01);
	edi_25 = edi_25 + 0x01;
	ebp_103 = ebp_67 - 259621;
	uint32 edx_100 = edx_60 >> 0x08;
	byte dl_101 = (byte) (edx_60 >> 0x08);
	if (0x04 == ebp_67 - 259621)
	{
		*esp_44 = 0x454CDC1C;
		edx_100 = *esp_44;
		dl_101 = (byte) edx_100;
		esp_114 = esp_44 + 0x01;
		ebp_103 = 0x00;
	}
	do
	{
		byte dl_83 = dl_101 + bl;
		word32 ecx_85 = ecx_57 - 0x00045E41;
		edx_30 = DPB(edx_100, dl_83, 0);
		ecx_19 = ecx_85 + 286272;
		if (ecx_85 != 286272)
			goto l00404115;
		<anonymous> * eax_91 = *esp_114;
		word32 eax_95;
		byte SCZO_97;
		byte cl_104;
		byte SZO_105;
		bool C_106;
		bool Z_107;
		eax_91();
	} while (false);
	return eax_95;
}

