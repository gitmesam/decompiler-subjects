// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010DA: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 SCZO_7 = cond(fp - 0x20);
	if (false)
	{
		ebx = ebx - (edx + 0x0CC8);
		bl = (byte) ebx;
	}
	Eq_3 SCZDOP_143 = SCZO_7;
	Eq_3 SZO_141 = SCZO_7;
	Eq_3 edx_29 = eax;
	int32 ebx_33 = DPB(ebx, bl, 8);
	ptr32 esp_137 = fp - 0x24;
	while (true)
	{
		struct Eq_37 * esp_45 = esp_137 - 0x04;
		esp_45->t0000 = 0x02;
		*(esp_45 - 0x04) = 0x00401000;
		EnumSystemLanguageGroupsA(*(esp_45 - 0x04), esp_45->t0000, esp_45->t0004);
		Eq_73 ecx_51 = (word32) edx_29 + ((word32) edx_29 + 0x1A54A4D1);
		esp_45->t0004 = SCZDOP_143;
		edx_29 = esp_45->t0004;
		word16 ax_59 = esp_45->w0008;
		esp_45->t0004.u0 = 432040460;
		byte ch_52 = SLICE(ecx_51, byte, 8);
		word16 dx_56 = (word16) edx_29;
		struct Eq_26 * eax_60 = DPB(&esp_45->w0008, ax_59, 0);
		byte al_62 = (byte) ax_59;
		ebx_33 = DPB(ebx_33, 0xA4, 8);
		if (!SZO_141)
			break;
		byte v30_138 = eax_60->b000C + ch_52;
		eax_60->b000C = v30_138;
		Eq_3 SCZO_140 = cond(v30_138);
		esp_137 = (char *) &esp_45->t0004 + 0x01;
		SZO_141 = SCZO_140;
		SCZDOP_143 = SCZO_140;
	}
	esp_45->t0000 = esi;
	__frstor(*edx_29);
	*(esp_45 - 0x02) = (struct Eq_51 **) ss;
	word32 * ebx_83 = DPB(ebx_33, edi + ebx_33, 0);
	__outb(dx_56, al_62);
	word32 v25_90 = Mem81[edx_29 + 0x00:word32] + ecx_51;
	*edx_29 = v25_90;
	struct Eq_78 * eax_74 = DPB(eax_60, cond(rArg0 - rArg0), 8);
	if (OVERFLOW(v25_90))
	{
		__lock();
		__hlt();
	}
	else if (v25_90 < 0x00)
	{
		*((word32) ecx_51 + (eax_74 * 0x04 + 0x004C)) = *((word32) ecx_51 + (eax_74 * 0x04 + 0x004C)) ^ ebx_83;
		*(esp_45 - 0x06) = esp_45 - 0x02;
		if (OVERFLOW(edx_29 - 0x01))
			__syscall(0x04);
		*(esp_45 - 0x0A) = (struct Eq_78 **) eax_74;
		*(esp_45 - 0x0E) = ebx_83;
		*(ecx_51 - 0x23) = ~0x58;
		(byte *) 0x66ABD0FD = (byte *) al_62;
		*ebx_83 = *ebx_83 + ~0x29;
	}
}

