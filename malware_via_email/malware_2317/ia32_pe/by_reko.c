// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010DA: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 SCZO_7 = cond(fp - 0x20);
	if (false)
	{
		ebx = ebx - (edx + 0x0CC8);
		bl = (byte) ebx;
	}
	Eq_3 SCZDOP_142 = SCZO_7;
	Eq_3 SZO_140 = SCZO_7;
	union Eq_48 * edx_29 = eax;
	int32 ebx_33 = DPB(ebx, bl, 8);
	ptr32 esp_136 = fp - 0x24;
	while (true)
	{
		struct Eq_37 * esp_45 = esp_136 - 0x04;
		esp_45->t0000 = 0x02;
		*(esp_45 - 0x04) = 0x00401000;
		EnumSystemLanguageGroupsA(*(esp_45 - 0x04), esp_45->t0000, esp_45->t0004);
		word32 ecx_50 = edx_29 + 441754833 + edx_29;
		*(esp_45 - 0x08) = (union Eq_3 *) SCZDOP_142;
		edx_29 = (union Eq_48 *) *(esp_45 - 0x08);
		word16 ax_58 = *(esp_45 - 0x04);
		*(esp_45 - 0x08) = 432040460;
		byte ch_51 = SLICE(ecx_50, byte, 8);
		word16 dx_55 = (word16) edx_29;
		struct Eq_26 * eax_59 = DPB(esp_45 - 0x04, ax_58, 0);
		byte al_61 = (byte) ax_58;
		ebx_33 = DPB(ebx_33, 0xA4, 8);
		if (!SZO_140)
			break;
		byte v30_137 = eax_59->b000C + ch_51;
		eax_59->b000C = v30_137;
		Eq_3 SCZO_139 = cond(v30_137);
		esp_136 = esp_45 - 0x07;
		SZO_140 = SCZO_139;
		SCZDOP_142 = SCZO_139;
	}
	*(esp_45 - 0x0C) = esi;
	__frstor(*edx_29);
	*(esp_45 - 0x0E) = (struct Eq_53 **) ss;
	word32 * ebx_82 = DPB(ebx_33, edi + ebx_33, 0);
	__outb(dx_55, al_61);
	word32 v25_89 = Mem80[edx_29 + 0x00:word32] + ecx_50;
	*edx_29 = (union Eq_48 *) v25_89;
	struct Eq_80 * eax_73 = DPB(eax_59, cond(rArg0 - rArg0), 8);
	if (OVERFLOW(v25_89))
	{
		__lock();
		__hlt();
	}
	else if (v25_89 < 0x00)
	{
		*((word32) ecx_50 + (eax_73 * 0x04 + 0x004C)) = *((word32) ecx_50 + (eax_73 * 0x04 + 0x004C)) ^ ebx_82;
		*(esp_45 - 0x12) = esp_45 - 0x0E;
		if (!OVERFLOW(edx_29 - 0x01))
		{
			*(esp_45 - 22) = (struct Eq_80 **) eax_73;
			*(esp_45 - 0x1A) = ebx_82;
			*(ecx_50 - 0x23) = ~0x58;
			(byte *) 0x66ABD0FD = (byte *) al_61;
			*ebx_82 = *ebx_82 + ~0x29;
		}
	}
}

