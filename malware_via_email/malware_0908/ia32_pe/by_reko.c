// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010CE: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_6;
	ui16 * ebp_7;
	word32 esi_8;
	struct Eq_6 * edi_9;
	fn004010DF(edx, ebp, dwLoc04, dwArg00, out edx_6, out ebp_7, out esi_8, out edi_9);
	edi_9->bA8A421 = edi_9->bA8A421 + dl;
	*ebp_7 = (word16) FPUF << 0x08;
	*(fp - 0x02) = (struct Eq_6 **) edi_9;
	word32 edx_24;
	word32 ebp_25;
	word32 esi_26;
	word32 edi_27;
	return fn004010DF(edx_6, ebp_7, dwLoc04, dwArg00, out edx_24, out ebp_25, out esi_26, out edi_27);
}

// 004010DF: Register ui32 fn004010DF(Register word32 edx, Register (ptr32 ui16) ebp, Stack int32 dwArg00, Stack (ptr32 Eq_12) dwArg04, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
ui32 fn004010DF(word32 edx, ui16 * ebp, int32 dwArg00, Eq_12 * dwArg04, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	word16 si_5 = (word16) ((char *) dwArg04 + 0x08);
	if (*((char *) dwArg04 + 0x08) == 0x90)
	{
		__ror(si_5, 0x04);
		__rol((word16) ((dwArg00 >> 0x06) + 0x01 >> 0x10), 0x09);
		struct Eq_85 * esi_28 = DPB(1201891, (word16) ((word32) fp + 0x04), 0) + 0x00;
		word32 ecx_33 = globals->dw4010C8;
		do
			esi_28 = esi_28 - ~0x00;
		while (esi_28->dw0000 - ecx_33 != 0x00);
		word32 eax_56 = esi_28->dwFFFFFFFB;
		Eq_110 edx_64 = (word32) fp + 0x04;
		union Eq_12 * edi_72 = dwArg04;
		word32 ecx_74 = 0x00401018;
		Eq_110 esi_77 = globals->t40101D;
		do
		{
			word32 eax_85 = *edi_72;
			__rol(edx_64, 0x15);
			edi_72 = (union Eq_12 *) ((char *) edi_72 + 0x01);
			ecx_74 = (word32) esi_77 + ecx_74;
			edx_64 = eax_85 ^ esi_77;
		} while (edx_64 != 0x00);
		__rol(esi_77, 0x15);
		word32 edi_120;
		*ediOut = __rol(ebp & (char *) dwArg04 + ecx_74, 0x17);
		ptr32 edx_122 = fs->ptr0000;
		fs->ptr0000 = fp - 0x04;
		__rol(0x00, 0x09);
		word32 esi_135;
		*esiOut = fp - 0x04 >> 0x0E;
		word32 edx_138;
		*edxOut = edi_72;
		word32 ebp_140;
		*ebpOut = DPB(edx_122, (word16) edx_122 + ~0x75, 0);
		return (-(eax_56 + 2856355455) & 0x00) - 3506075533;
	}
}

