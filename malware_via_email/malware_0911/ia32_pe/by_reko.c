// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401004: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	word32 ebx_104;
	word32 ebp_105;
	word32 edi_106;
	Eq_2 eax_107 = fn004010D0(edx_39 + 0xC0F03508, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebx_104, out ebp_105, out edi_106);
	word32 ebx_108;
	word32 ebp_109;
	word32 edi_110;
	return fn004010D0(eax_107, ebx_104, ebp_105, edi_106, dwLoc2C, dwLoc16, esi, out ebx_108, out ebp_109, out edi_110);
}

// 004010D0: Register Eq_2 fn004010D0(Register Eq_2 eax, Register word32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
DWORD fn004010D0(DWORD eax, word32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_132;
	struct Eq_50 * ebx_133;
	word32 eax_134 = fn00401698(ebx, dwLoc32, fp - 0x2A, out ecx_132, out ebx_133);
	*(fp - 0x22) = fp - 0x2A;
	*(fp - 0x26) = eax_134;
	*(fp - 0x2A) = eax_134;
	*(fp - 0x2E) = eax_134;
	*(fp - 0x32) = eax_134;
	word32 esp_155;
	word32 eax_156;
	byte SZO_157;
	word32 ebp_158;
	word32 edx_159;
	bool C_160;
	word16 ax_161;
	word16 cx_162;
	word32 ecx_163;
	byte SCZO_164;
	word32 esi_165;
	struct Eq_103 * ebx_166;
	word32 edi_167;
	word16 si_168;
	struct Eq_106 * fs_169;
	byte al_170;
	bool Z_171;
	byte dh_172;
	byte dl_173;
	byte bh_174;
	word16 bx_175;
	byte CZ_176;
	byte ah_177;
	byte cl_178;
	byte bl_179;
	ebx_133->ptr0018();
	ptr32 esp_184;
	word32 eax_185;
	byte SZO_186;
	word32 ebp_187;
	word32 edx_188;
	bool C_189;
	word16 ax_190;
	word16 cx_191;
	word32 ecx_192;
	byte SCZO_193;
	word32 esi_194;
	<anonymous> ** ebx_195;
	word32 edi_196;
	word16 si_197;
	struct Eq_134 * fs_198;
	byte al_199;
	bool Z_200;
	byte dh_201;
	byte dl_202;
	byte bh_203;
	word16 bx_204;
	byte CZ_205;
	byte ah_206;
	byte cl_207;
	byte bl_208;
	ebx_166->ptr001C();
	*(esp_184 - 0x04) = eax_185 + 0x06;
	*(esp_184 - 0x08) = eax_185 + 0x06;
	struct Eq_161 * esp_228;
	word32 eax_229;
	byte SZO_230;
	word32 ebp_231;
	word32 edx_232;
	bool C_233;
	word16 ax_234;
	word16 cx_235;
	word32 ecx_236;
	byte SCZO_237;
	word32 esi_238;
	word32 ebx_239;
	word32 edi_240;
	word16 si_241;
	struct Eq_175 * fs_242;
	byte al_243;
	bool Z_244;
	byte dh_245;
	byte dl_246;
	byte bh_247;
	word16 bx_248;
	byte CZ_249;
	byte ah_250;
	byte cl_251;
	byte bl_252;
	(*ebx_195)();
	esp_228->dw0038 = ebx_239;
	esp_228->dw003C = esi_238;
	*(esp_228 - 0x04) = ebx_239;
	*(esp_228 - 0x04) = *(esp_228 - 0x04) - 0x04;
	struct Eq_210 * edi_269 = *(esp_228 - 0x04);
	*(esp_228 - 0x04) = eax_229;
	*(esp_228 - 0x08) = ecx_236;
	*(esp_228 - 0x0C) = esp_228 - 0x08;
	*(esp_228 - 0x10) = 0x40;
	*(esp_228 - 0x14) = esp_228->dw0020;
	*(esp_228 - 0x18) = esp_228->dw0014;
	esp_228->dw0018 = 0x00;
	*(esp_228 - 0x1C) = ~0x00;
	struct Eq_263 * esp_304;
	struct Eq_264 Eq_276::* eax_305;
	byte SZO_306;
	word32 edx_308;
	bool C_309;
	word16 ax_310;
	word16 cx_311;
	word32 ecx_312;
	byte SCZO_313;
	word32 esi_314;
	word32 ebx_315;
	word32 edi_316;
	word16 si_317;
	struct Eq_276 * fs_318;
	byte al_319;
	bool Z_320;
	byte dh_321;
	byte dl_322;
	byte bh_323;
	word16 bx_324;
	byte CZ_325;
	byte ah_326;
	byte cl_327;
	byte bl_328;
	ptr32 ebp_1201;
	edi_269->ptr0010();
	struct Eq_291 * eax_329 = eax_305 + (fs_318->*eax_305).dw002F / 0x0033;
	word32 ecx_334 = eax_329->dw0003;
	esp_304->dw0030 = esp_304->dw0030 + ecx_334;
	*(esp_304 - 0x04) = (struct Eq_291 **) eax_329;
	esp_304->ptr0000 = (struct Eq_315 *) *(esp_304 - 0x04);
	struct Eq_315 * eax_350 = esp_304->ptr0000;
	word32 edi_357 = esp_304->dw0008;
	word32 ebx_1209 = esp_304->dw000C;
	word32 * esi_1208 = esp_304->ptr0010;
	word32 ecx_376 = eax_350->dw0003;
	esp_304->ptr0010 = (word32 *) &eax_350->dw0003;
	word32 * eax_380 = esp_304->ptr0010;
	esp_304->dw003C = esp_304->dw003C ^ ecx_376;
	esp_304->ptr0010 = eax_380;
	esp_304->ptr0010 = esp_304->ptr001C;
	word32 ecx_396 = esp_304->dw002C;
	esp_304->ptr0010 = esp_304->ptr0010;
	word32 * eax_402 = esp_304->ptr0010;
	*(esp_304 - 244) = eax_402;
	*(esp_304 - 0xF0) = ecx_396;
	*(esp_304 - 0xF8) = edi_357;
	*(esp_304 - 252) = 0x00;
	int32 eax_419 = *(esp_304 - 252);
	byte al_421 = (byte) eax_419;
	do
	{
		byte * edi_431 = esp_304 - 0xEC + eax_419;
		*edi_431 = al_421;
		*(esp_304 - 252) = eax_419 + 0x01;
		up32 eax_438 = *(esp_304 - 252);
		*(esp_304 - 252) = eax_438;
		eax_419 = *(esp_304 - 252);
		al_421 = (byte) eax_419;
	} while (eax_438 < 0x0100);
	*(esp_304 - 252) = eax_419;
	word32 edi_1210 = *(esp_304 - 0xF8);
	*(esp_304 - 0xF8) = *(esp_304 - 252);
	ptr32 esp_1259 = esp_304 - 244;
	ptr32 eax_1255 = &esp_304->b0044;
	byte SCZO_466 = cond(esp_304->b0044 - 121);
	byte CZ_1219 = SCZO_466;
	if (esp_304->b0044 != 121)
	{
		struct Eq_517 * edi_976 = esp_304->ptr0040;
		*(esp_304 - 0xF8) = (byte **) &esp_304->b0044;
		do
		{
			ptr32 esp_985;
			word32 eax_986;
			byte SZO_987;
			word32 ebp_988;
			word32 edx_989;
			bool C_990;
			word16 ax_991;
			word16 cx_992;
			word32 ecx_993;
			byte SCZO_994;
			word32 esi_995;
			word32 ebx_996;
			struct Eq_586 * edi_997;
			word16 si_998;
			struct Eq_588 * fs_999;
			byte al_1000;
			bool Z_1001;
			byte dh_1002;
			byte dl_1003;
			byte bh_1004;
			word16 bx_1005;
			byte CZ_1006;
			byte ah_1007;
			byte cl_1008;
			byte bl_1009;
			edi_976->ptr0018();
			*(esp_985 - 0x04) = eax_986;
			ptr32 esp_1015;
			word32 eax_1016;
			byte SZO_1017;
			word32 ebp_1018;
			word32 edx_1019;
			bool C_1020;
			word16 ax_1021;
			word16 cx_1022;
			word32 ecx_1023;
			byte SCZO_1024;
			word32 esi_1025;
			word32 ebx_1026;
			struct Eq_619 * edi_1027;
			word16 si_1028;
			struct Eq_621 * fs_1029;
			byte al_1030;
			bool Z_1031;
			byte dh_1032;
			byte dl_1033;
			byte bh_1034;
			word16 bx_1035;
			byte CZ_1036;
			byte ah_1037;
			byte cl_1038;
			byte bl_1039;
			edi_997->ptr0010();
			*(esp_1015 - 0x04) = eax_1016;
			ptr32 esp_1045;
			word32 eax_1046;
			byte SZO_1047;
			word32 ebp_1048;
			word32 edx_1049;
			bool C_1050;
			word16 ax_1051;
			word16 cx_1052;
			word32 ecx_1053;
			byte SCZO_1054;
			word32 esi_1055;
			word32 ebx_1056;
			struct Eq_652 * edi_1057;
			word16 si_1058;
			struct Eq_654 * fs_1059;
			byte al_1060;
			bool Z_1061;
			byte dh_1062;
			byte dl_1063;
			byte bh_1064;
			word16 bx_1065;
			byte CZ_1066;
			byte ah_1067;
			byte cl_1068;
			byte bl_1069;
			edi_1027->ptr0018();
			*(esp_1045 - 0x04) = eax_1046;
			ptr32 esp_1075;
			word32 eax_1076;
			byte SZO_1077;
			word32 ebp_1078;
			word32 edx_1079;
			bool C_1080;
			word16 ax_1081;
			word16 cx_1082;
			word32 ecx_1083;
			byte SCZO_1084;
			word32 esi_1085;
			word32 ebx_1086;
			struct Eq_685 * edi_1087;
			word16 si_1088;
			struct Eq_687 * fs_1089;
			byte al_1090;
			bool Z_1091;
			byte dh_1092;
			byte dl_1093;
			byte bh_1094;
			word16 bx_1095;
			byte CZ_1096;
			byte ah_1097;
			byte cl_1098;
			byte bl_1099;
			edi_1057->ptr0018();
			*(esp_1075 - 0x04) = eax_1076;
			ptr32 esp_1105;
			word32 eax_1106;
			byte SZO_1107;
			word32 ebp_1108;
			word32 edx_1109;
			bool C_1110;
			word16 ax_1111;
			word16 cx_1112;
			word32 ecx_1113;
			byte SCZO_1114;
			word32 esi_1115;
			word32 ebx_1116;
			struct Eq_718 * edi_1117;
			word16 si_1118;
			struct Eq_720 * fs_1119;
			byte al_1120;
			bool Z_1121;
			byte dh_1122;
			byte dl_1123;
			byte bh_1124;
			word16 bx_1125;
			byte CZ_1126;
			byte ah_1127;
			byte cl_1128;
			byte bl_1129;
			edi_1087->ptr0018();
			*(esp_1105 - 0x04) = eax_1106;
			ptr32 esp_1135;
			word32 eax_1136;
			byte SZO_1137;
			word32 ebp_1138;
			word32 edx_1139;
			bool C_1140;
			word16 ax_1141;
			word16 cx_1142;
			word32 ecx_1143;
			byte SCZO_1144;
			word32 esi_1145;
			word32 ebx_1146;
			struct Eq_751 * edi_1147;
			word16 si_1148;
			struct Eq_753 * fs_1149;
			byte al_1150;
			bool Z_1151;
			byte dh_1152;
			byte dl_1153;
			byte bh_1154;
			word16 bx_1155;
			byte CZ_1156;
			byte ah_1157;
			byte cl_1158;
			byte bl_1159;
			edi_1117->ptr0018();
			*(esp_1135 - 0x04) = eax_1136;
			ptr32 esp_1165;
			word32 eax_1166;
			byte SZO_1167;
			word32 ebp_1168;
			word32 edx_1169;
			bool C_1170;
			word16 ax_1171;
			word16 cx_1172;
			word32 ecx_1173;
			byte SCZO_1174;
			word32 esi_1175;
			word32 ebx_1176;
			struct Eq_784 * edi_1177;
			word16 si_1178;
			struct Eq_786 * fs_1179;
			byte al_1180;
			bool Z_1181;
			byte dh_1182;
			byte dl_1183;
			byte bh_1184;
			word16 bx_1185;
			byte CZ_1186;
			byte ah_1187;
			byte cl_1188;
			byte bl_1189;
			edi_1147->ptr0018();
			*(esp_1165 - 0x04) = eax_1166;
			ptr32 esp_1198;
			word32 eax_1199;
			byte SZO_1200;
			word32 edx_1202;
			bool C_1203;
			word16 ax_1204;
			word16 cx_1205;
			word32 ecx_1206;
			byte SCZO_1207;
			word16 si_1211;
			struct Eq_812 * fs_1212;
			byte al_1213;
			bool Z_1214;
			byte dh_1215;
			byte dl_1216;
			byte bh_1217;
			word16 bx_1218;
			byte ah_1220;
			byte cl_1221;
			byte bl_1222;
			edi_1177->ptr0010();
			*(esp_1198 - 0x04) = eax_1199;
			*(esp_1198 - 0x04) = *(esp_1198 - 0x04) + 0x01;
			word32 eax_1237 = *(esp_1198 - 0x04);
			cup16 ax_1240 = (word16) eax_1237 - cx_1205;
			*(esp_1198 - 0x04) = DPB(eax_1237, ax_1240, 0);
			word32 eax_1247 = *(esp_1198 - 0x04);
		} while (ax_1240 < 0x00);
		*(esp_1198 - 0x04) = eax_1247;
		eax_1255 = *(esp_1198 - 0x04);
		esp_1259 = esp_1198;
	}
	struct Eq_469 * esp_496 = esp_1259 - 0x04;
	esp_496->ptr0000 = eax_1255;
	ptr32 eax_499 = esp_496->ptr0000;
	esp_496->ptr0000 = ebp_1201;
	*(esp_496 - 0x04) = eax_499;
	word32 eax_506 = *(esp_496 - 0x04);
	*(esp_496 - 0x04) = esi_1208;
	*(esp_496 - 0x08) = eax_506;
	word32 eax_513 = *(esp_496 - 0x08);
	*(esp_496 - 0x08) = edi_1210;
	*(esp_496 - 0x0C) = eax_513;
	up32 edi_523 = esp_496->dw011C;
	int32 esi_530 = 0x00;
	*(esp_496 - 0x0C) = 0x00;
	word32 eax_538 = *(esp_496 - 0x0C);
	*(esp_496 - 0x0C) = ebx_1209;
	*(esp_496 - 0x10) = eax_538;
	int32 ebp_532 = 0x00;
	word32 eax_545 = *(esp_496 - 0x10);
	do
	{
		struct Eq_869 * esp_561 = esp_1259 - 0x10;
		word32 ebx_562 = (word32) esp_561->a0018[ebp_532];
		*(esp_561 - 0x04) = eax_545;
		ptr32 edx_571 = esp_561->ptr0014;
		*(esp_561 - 0x04) = *(esp_561 - 0x04);
		int32 eax_575 = *(esp_561 - 0x04);
		word16 bx_564 = (word16) ebx_562;
		word32 edx_580 = (word32) (edx_571 + eax_575);
		word32 ecx_586 = ebx_562 + esi_530;
		word32 edx_590 = edx_580 + ecx_586;
		*(esp_561 - 0x04) = eax_575;
		*(esp_561 - 0x04) = *(esp_561 - 0x04) + 0x01;
		*(esp_561 - 0x04) = *(esp_561 - 0x04);
		up32 eax_611 = *(esp_561 - 0x04);
		*(esp_561 - 0x04) = eax_611;
		int32 edx_594 = DPB(edx_590, 0x00, 8);
		esi_530 = edx_594;
		ui32 eax_618 = *(esp_561 - 0x04);
		if (eax_611 >= edi_523)
		{
			*(esp_561 - 0x04) = eax_618;
			*(esp_561 - 0x04) = 0x00;
			eax_618 = *(esp_561 - 0x04);
		}
		byte dl_630 = esp_561->a0018[edx_594];
		esp_561->a0018[ebp_532] = dl_630;
		ebp_532 = ebp_532 + 0x01;
		ptr32 edx_635 = esp_561->a0018 + edx_594;
		ptr32 edx_638 = edx_635 - eax_618;
		word16 bx_643 = DPB(bx_564, eax_618 + 0x01 + edx_638, 8);
		*(esp_561 - 0x04) = eax_618;
		int32 eax_647 = *(esp_561 - 0x04);
		eax_647 + edx_638 = (word16 *) bx_643;
		*(esp_561 - 0x04) = eax_647;
		*(esp_561 - 0x04) = *(esp_561 - 0x04);
		*(esp_561 - 0x04) = *(esp_561 - 0x04);
		*(esp_561 - 0x04) = *(esp_561 - 0x04);
		eax_545 = *(esp_561 - 0x04);
	} while (SLICE(ebp_532, byte, 8) != 0x01);
	*(esp_561 - 0x04) = eax_545;
	*(esp_561 - 0x04) = *(esp_561 - 0x04);
	word32 esi_684 = 0x00;
	int32 ebx_697 = esp_561->dw0000;
	word32 ebp_702 = esp_561->dw012C;
	esp_561->dw0000 = 0x00;
	ptr32 edi_708 = esp_561->ptr0010;
	esp_561->dw0000 = esp_561->dw0000;
	esp_561->dw0000 = esp_561->dw0000;
	esp_561->dw0000 = esp_561->dw0000;
	int32 edx_714 = ebx_697;
	int32 eax_728 = esp_561->dw0000;
	if (!DPB(CZ_1219, false, 0))
	{
		esp_561->dw0000 = eax_728;
		eax_728 = esp_561->dw0000;
		do
		{
			esp_561->dw0000 = eax_728 + 0x01;
			int32 eax_838 = DPB(esp_561->dw0000, 0x00, 8);
			byte cl_841 = esp_561->a0018[eax_838];
			word32 ebx_848 = (word32) cl_841;
			esp_561->dw0000 = eax_838;
			esp_561->dw0000 = esp_561->dw0000;
			esp_561->dw0000 = esp_561->dw0000;
			word32 ebx_857 = DPB(ebx_848 + esi_684, 0x00, 8);
			byte dh_872 = (&esp_561->dw0000 + 0x01)[(ebx_857 + 0x14) / 0x0130];
			esp_561->dw0000 = esp_561->dw0000;
			int32 eax_877 = esp_561->dw0000;
			esp_561->a0018[eax_877] = dh_872;
			esp_561->dw0000 = eax_877;
			int32 eax_883 = esp_561->dw0000;
			esp_561->dw0000 = eax_883;
			*(esp_561 - 0x04) = eax_883;
			*(esp_561 - 0x04) = &esp_561->dw0000 + 0x01 + (ebx_857 + 0x14) / 0x0130;
			byte * eax_896 = *(esp_561 - 0x04);
			*eax_896 = cl_841;
			*(esp_561 - 0x04) = (byte **) eax_896;
			int32 eax_904 = esp_561->dw0000;
			word32 edx_909 = (word32) dh_872;
			byte dl_910 = (byte) edx_909;
			word32 edx_912 = DPB(edx_909, dl_910 + cl_841, 0);
			edx_714 = edx_912 + 0x14;
			ui32 ecx_918 = (&esp_561->dw0000 + 0x01)[(edx_912 + 0x14) / 0x0130];
			esp_561->dw0000 = eax_904;
			esp_561->dw0000 = esp_561->dw0000;
			int32 eax_932 = esp_561->dw0000;
			*(edi_708 - 0x01) = *(edi_708 - 0x01) ^ (word16) (ecx_918 << 0x08);
			esp_561->dw0000 = eax_932;
			esp_561->dw0000 = esp_561->dw0000;
			esp_561->dw0000 = esp_561->dw0000;
			esi_684 = ebx_857;
			edi_708 = edi_708 + 0x01;
			ebp_702 = ebp_702 - 0x01;
			eax_728 = esp_561->dw0000;
		} while (ebp_702 != 0x00);
	}
	struct Eq_1081 * esp_750 = esp_1259 - 0x0C;
	word32 edi_755;
	*ediOut = esp_750->dw0000;
	esp_750->dw0004 = eax_728;
	word32 ebp_764;
	*ebpOut = esp_750->dw0008;
	esp_750->dw0008 = esp_750->dw0004;
	esp_750->dw0114 = esp_750->dw0008;
	esp_750->t0118 = esp_750->t0118;
	esp_750->t0140 = esp_750->t0118;
	Eq_2 eax_789 = esp_750->t0140;
	esp_750->t0140 = eax_789;
	word32 ebx_796;
	*ebxOut = edx_714;
	return eax_789;
}

// 00401258: Register ptr32 fn00401258(Register ptr32 eax, Register (ptr32 Eq_1300) ecx, Register word32 ebx, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
ptr32 fn00401258(ptr32 eax, Eq_1300 * ecx, word32 ebx, ptr32 & ecxOut, ptr32 & ebxOut)
{
	int32 ecx_38 = eax + (ecx->dw002B + eax)->dw0080;
	*ecxOut = ecx_38;
	ptr32 eax_44 = eax + ecx_38;
	word32 ebx_58;
	*ebxOut = eax_44 + 0x04;
	fn00401776();
	return eax_44 + 0x04;
}

// 00401698: Register word32 fn00401698(Register word32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
word32 fn00401698(word32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 * eax_47 = DPB(eax_24, 0x00, 0);
		word16 ax_57 = *eax_47;
		word32 eax_60 = DPB(eax_24, ax_57 + 42421, 0);
		if (ax_57 == 42419)
			break;
		eax_24 = eax_60 - 0x00010000;
	}
	ptr32 eax_93;
	__btc(eax_60, 0x01, out eax_93);
	word32 ecx_109;
	word32 ebx_110;
	return fn00401258(eax_93, eax_93 + 0x11, ebx, out ecx_109, out ebx_110);
}

// 00401776: void fn00401776()
void fn00401776()
{
}

