// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401004: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	fn004010D0(edx_39 + 0xC0F03508, ebx, ebp, edi, dwLoc2C, dwLoc16, esi);
	fn004010D0(edx_39 + 0xC0F03508, ebx, ebp, edi, ebp, dwArg12, dwArg20);
	return edx_39 + 0xC0F03508;
}

// 004010D0: void fn004010D0(Register word32 eax, Register (ptr Eq_17) ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24)
void fn004010D0(word32 eax, Eq_17 * ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24)
{
	fn00401698(dwLoc32, fp - 0x2A);
	word32 esp_142;
	word32 eax_143;
	byte SZO_144;
	word32 ebp_145;
	word32 edx_146;
	byte C_147;
	word16 ax_148;
	word16 cx_149;
	word32 ecx_150;
	byte SCZO_151;
	word32 esi_152;
	struct Eq_57 * ebx_153;
	word32 edi_154;
	word16 si_155;
	struct Eq_60 * fs_156;
	ebx->ptr0018();
	word32 esp_159;
	<type-error> Eq_78::* eax_160;
	byte SZO_161;
	word32 ebp_162;
	word32 edx_163;
	byte C_164;
	word16 ax_165;
	word16 cx_166;
	word32 ecx_167;
	byte SCZO_168;
	word32 esi_169;
	<anonymous> ** ebx_170;
	word32 edi_171;
	word16 si_172;
	struct Eq_78 * fs_173;
	ebx_153->ptr001C();
	word32 esi_178 = DPB(esi_169, si_172 + (&(fs_173->*((char *) eax_160 + 0x04)))[((char *) eax_160 + 0x06) * 0x08], 0);
	word32 ebx_180;
	word32 ebp_181;
	word32 edi_182;
	fn00401720((char *) eax_160 + 0x06, ecx_167, ebx_170, ebp_162, esi_178, out ebx_180, out ebp_181, out edi_182);
}

// 00401698: void fn00401698(Stack word32 dwArg00, Stack ptr32 dwArg04)
void fn00401698(word32 dwArg00, ptr32 dwArg04)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 * eax_47 = DPB(eax_24, 0x00, 0);
		word16 ax_57 = *eax_47;
		word32 eax_60 = DPB(eax_24, ax_57 + 42421, 0);
		if (ax_57 == 42419)
			break;
		eax_24 = eax_60 - 0x00010000;
	}
}

// 00401720: Register (memptr (ptr Eq_78) Eq_98) fn00401720(Register (memptr (ptr Eq_78) Eq_98) eax, Register word32 ecx, Register (ptr (ptr code)) ebx, Register word32 ebp, Register word32 esi, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
 Eq_78::*fn00401720( Eq_78::*eax, word32 ecx, code * * ebx, word32 ebp, word32 esi, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	struct Eq_127 * esp_16;
	word32 esi_17;
	byte SZO_18;
	word32 eax_19;
	word32 ebx_20;
	byte SCZO_21;
	word32 edi_22;
	word32 ecx_23;
	struct Eq_135 * fs_24;
	word16 ax_25;
	byte C_26;
	byte al_27;
	byte Z_28;
	word32 ebp_29;
	word16 cx_30;
	word32 edx_31;
	byte dh_32;
	byte dl_33;
	byte bh_34;
	word16 bx_35;
	byte CZ_36;
	byte ah_37;
	byte cl_38;
	byte bl_39;
	(*ebx)();
	esp_16->dw0038 = ebx_20;
	esp_16->dw003C = esi_17;
	*(esp_16 - 0x04) = ebx_20;
	*(esp_16 - 0x04) = *(esp_16 - 0x04) - 0x04;
	struct Eq_175 * edi_56 = *(esp_16 - 0x04);
	*(esp_16 - 0x04) = eax_19;
	*(esp_16 - 0x08) = ecx_23;
	*(esp_16 - 0x0C) = esp_16 - 0x08;
	*(esp_16 - 0x10) = 0x40;
	*(esp_16 - 0x14) = esp_16->dw0020;
	*(esp_16 - 0x18) = esp_16->dw0014;
	esp_16->dw0018 = 0x00;
	*(esp_16 - 0x1C) = ~0x00;
	struct Eq_228 * esp_91;
	word32 esi_92;
	byte SZO_93;
	struct Eq_231 Eq_236::* eax_94;
	word32 ebx_95;
	byte SCZO_96;
	word32 edi_97;
	word32 ecx_98;
	struct Eq_236 * fs_99;
	word16 ax_100;
	byte C_101;
	byte al_102;
	byte Z_103;
	word16 cx_105;
	word32 edx_106;
	byte dh_107;
	byte dl_108;
	byte bh_109;
	word16 bx_110;
	byte CZ_111;
	byte ah_112;
	byte cl_113;
	byte bl_114;
	ptr32 ebp_104;
	edi_56->ptr0010();
	struct Eq_255 * eax_115 = eax_94 + (fs_99->*eax_94).dw002F / 0x0033;
	word32 ecx_120 = eax_115->dw0003;
	esp_91->dw0030 = esp_91->dw0030 + ecx_120;
	*(esp_91 - 0x04) = (struct Eq_255 **) eax_115;
	esp_91->ptr0000 = (struct Eq_279 *) *(esp_91 - 0x04);
	struct Eq_279 * eax_136 = esp_91->ptr0000;
	word32 edi_143 = esp_91->dw0008;
	word32 ebx_145 = esp_91->dw000C;
	word32 * esi_150 = esp_91->ptr0010;
	word32 ecx_161 = eax_136->dw0003;
	esp_91->ptr0010 = (word32 *) &eax_136->dw0003;
	word32 * eax_165 = esp_91->ptr0010;
	esp_91->dw003C = esp_91->dw003C ^ ecx_161;
	esp_91->ptr0010 = eax_165;
	esp_91->ptr0010 = esp_91->ptr001C;
	word32 ecx_181 = esp_91->dw002C;
	esp_91->ptr0010 = esp_91->ptr0010;
	word32 * eax_187 = esp_91->ptr0010;
	*(esp_91 - 244) = eax_187;
	*(esp_91 - 0xF0) = ecx_181;
	*(esp_91 - 0xF8) = edi_143;
	*(esp_91 - 252) = 0x00;
	int32 eax_204 = *(esp_91 - 252);
	byte al_206 = (byte) eax_204;
	do
	{
		byte * edi_216 = esp_91 - 0xEC + eax_204;
		*edi_216 = al_206;
		*(esp_91 - 252) = eax_204 + 0x01;
		up32 eax_223 = *(esp_91 - 252);
		*(esp_91 - 252) = eax_223;
		eax_204 = *(esp_91 - 252);
		al_206 = (byte) eax_204;
	} while (eax_223 < 0x0100);
	*(esp_91 - 252) = eax_204;
	word32 edi_240 = *(esp_91 - 0xF8);
	*(esp_91 - 0xF8) = *(esp_91 - 252);
	ptr32 esp_1028 = esp_91 - 244;
	ptr32 eax_1024 = &esp_91->b0044;
	if (esp_91->b0044 != 121)
	{
		struct Eq_474 * edi_753 = esp_91->ptr0040;
		*(esp_91 - 0xF8) = (byte **) &esp_91->b0044;
		do
		{
			ptr32 esp_762;
			word32 esi_763;
			byte SZO_764;
			word32 eax_765;
			word32 ebx_766;
			byte SCZO_767;
			struct Eq_537 * edi_768;
			word32 ecx_769;
			struct Eq_539 * fs_770;
			word16 ax_771;
			byte C_772;
			byte al_773;
			byte Z_774;
			word32 ebp_775;
			word16 cx_776;
			word32 edx_777;
			byte dh_778;
			byte dl_779;
			byte bh_780;
			word16 bx_781;
			byte CZ_782;
			byte ah_783;
			byte cl_784;
			byte bl_785;
			edi_753->ptr0018();
			*(esp_762 - 0x04) = eax_765;
			ptr32 esp_791;
			word32 esi_792;
			byte SZO_793;
			word32 eax_794;
			word32 ebx_795;
			byte SCZO_796;
			struct Eq_569 * edi_797;
			word32 ecx_798;
			struct Eq_571 * fs_799;
			word16 ax_800;
			byte C_801;
			byte al_802;
			byte Z_803;
			word32 ebp_804;
			word16 cx_805;
			word32 edx_806;
			byte dh_807;
			byte dl_808;
			byte bh_809;
			word16 bx_810;
			byte CZ_811;
			byte ah_812;
			byte cl_813;
			byte bl_814;
			edi_768->ptr0010();
			*(esp_791 - 0x04) = eax_794;
			ptr32 esp_820;
			word32 esi_821;
			byte SZO_822;
			word32 eax_823;
			word32 ebx_824;
			byte SCZO_825;
			struct Eq_601 * edi_826;
			word32 ecx_827;
			struct Eq_603 * fs_828;
			word16 ax_829;
			byte C_830;
			byte al_831;
			byte Z_832;
			word32 ebp_833;
			word16 cx_834;
			word32 edx_835;
			byte dh_836;
			byte dl_837;
			byte bh_838;
			word16 bx_839;
			byte CZ_840;
			byte ah_841;
			byte cl_842;
			byte bl_843;
			edi_797->ptr0018();
			*(esp_820 - 0x04) = eax_823;
			ptr32 esp_849;
			word32 esi_850;
			byte SZO_851;
			word32 eax_852;
			word32 ebx_853;
			byte SCZO_854;
			struct Eq_633 * edi_855;
			word32 ecx_856;
			struct Eq_635 * fs_857;
			word16 ax_858;
			byte C_859;
			byte al_860;
			byte Z_861;
			word32 ebp_862;
			word16 cx_863;
			word32 edx_864;
			byte dh_865;
			byte dl_866;
			byte bh_867;
			word16 bx_868;
			byte CZ_869;
			byte ah_870;
			byte cl_871;
			byte bl_872;
			edi_826->ptr0018();
			*(esp_849 - 0x04) = eax_852;
			ptr32 esp_878;
			word32 esi_879;
			byte SZO_880;
			word32 eax_881;
			word32 ebx_882;
			byte SCZO_883;
			struct Eq_665 * edi_884;
			word32 ecx_885;
			struct Eq_667 * fs_886;
			word16 ax_887;
			byte C_888;
			byte al_889;
			byte Z_890;
			word32 ebp_891;
			word16 cx_892;
			word32 edx_893;
			byte dh_894;
			byte dl_895;
			byte bh_896;
			word16 bx_897;
			byte CZ_898;
			byte ah_899;
			byte cl_900;
			byte bl_901;
			edi_855->ptr0018();
			*(esp_878 - 0x04) = eax_881;
			ptr32 esp_907;
			word32 esi_908;
			byte SZO_909;
			word32 eax_910;
			word32 ebx_911;
			byte SCZO_912;
			struct Eq_697 * edi_913;
			word32 ecx_914;
			struct Eq_699 * fs_915;
			word16 ax_916;
			byte C_917;
			byte al_918;
			byte Z_919;
			word32 ebp_920;
			word16 cx_921;
			word32 edx_922;
			byte dh_923;
			byte dl_924;
			byte bh_925;
			word16 bx_926;
			byte CZ_927;
			byte ah_928;
			byte cl_929;
			byte bl_930;
			edi_884->ptr0018();
			*(esp_907 - 0x04) = eax_910;
			ptr32 esp_936;
			word32 esi_937;
			byte SZO_938;
			word32 eax_939;
			word32 ebx_940;
			byte SCZO_941;
			struct Eq_729 * edi_942;
			word32 ecx_943;
			struct Eq_731 * fs_944;
			word16 ax_945;
			byte C_946;
			byte al_947;
			byte Z_948;
			word32 ebp_949;
			word16 cx_950;
			word32 edx_951;
			byte dh_952;
			byte dl_953;
			byte bh_954;
			word16 bx_955;
			byte CZ_956;
			byte ah_957;
			byte cl_958;
			byte bl_959;
			edi_913->ptr0018();
			*(esp_936 - 0x04) = eax_939;
			ptr32 esp_968;
			byte SZO_970;
			word32 eax_971;
			byte SCZO_973;
			word32 ecx_975;
			struct Eq_758 * fs_976;
			word16 ax_977;
			byte C_978;
			byte al_979;
			byte Z_980;
			word16 cx_982;
			word32 edx_983;
			byte dh_984;
			byte dl_985;
			byte bh_986;
			word16 bx_987;
			byte CZ_988;
			byte ah_989;
			byte cl_990;
			byte bl_991;
			edi_942->ptr0010();
			*(esp_968 - 0x04) = eax_971;
			*(esp_968 - 0x04) = *(esp_968 - 0x04) + 0x01;
			word32 eax_1006 = *(esp_968 - 0x04);
			cup16 ax_1009 = (word16) eax_1006 - cx_982;
			*(esp_968 - 0x04) = DPB(eax_1006, ax_1009, 0);
			word32 eax_1016 = *(esp_968 - 0x04);
		} while (ax_1009 < 0x00);
		*(esp_968 - 0x04) = eax_1016;
		eax_1024 = *(esp_968 - 0x04);
		esp_1028 = esp_968;
	}
	struct Eq_426 * esp_280 = esp_1028 - 0x04;
	esp_280->ptr0000 = eax_1024;
	ptr32 eax_283 = esp_280->ptr0000;
	esp_280->ptr0000 = ebp_104;
	*(esp_280 - 0x04) = eax_283;
	word32 eax_290 = *(esp_280 - 0x04);
	*(esp_280 - 0x04) = esi_150;
	*(esp_280 - 0x08) = eax_290;
	word32 eax_297 = *(esp_280 - 0x08);
	*(esp_280 - 0x08) = edi_240;
	*(esp_280 - 0x0C) = eax_297;
	up32 edi_307 = esp_280->dw011C;
	int32 esi_314 = 0x00;
	*(esp_280 - 0x0C) = 0x00;
	word32 eax_321 = *(esp_280 - 0x0C);
	*(esp_280 - 0x0C) = ebx_145;
	*(esp_280 - 0x10) = eax_321;
	int32 ebp_315 = 0x00;
	word32 eax_328 = *(esp_280 - 0x10);
	do
	{
		struct Eq_819 * esp_343 = esp_1028 - 0x10;
		word32 ebx_344 = (word32) esp_343->a0018[ebp_315];
		*(esp_343 - 0x04) = eax_328;
		ptr32 edx_353 = esp_343->ptr0014;
		*(esp_343 - 0x04) = *(esp_343 - 0x04);
		int32 eax_357 = *(esp_343 - 0x04);
		word16 bx_346 = (word16) ebx_344;
		word32 edx_362 = (word32) (edx_353 + eax_357);
		word32 ecx_368 = ebx_344 + esi_314;
		word32 edx_372 = edx_362 + ecx_368;
		*(esp_343 - 0x04) = eax_357;
		*(esp_343 - 0x04) = *(esp_343 - 0x04) + 0x01;
		*(esp_343 - 0x04) = *(esp_343 - 0x04);
		up32 eax_392 = *(esp_343 - 0x04);
		*(esp_343 - 0x04) = eax_392;
		int32 edx_376 = DPB(edx_372, 0x00, 8);
		esi_314 = edx_376;
		ui32 eax_399 = *(esp_343 - 0x04);
		if (eax_392 >= edi_307)
		{
			*(esp_343 - 0x04) = eax_399;
			*(esp_343 - 0x04) = 0x00;
			eax_399 = *(esp_343 - 0x04);
		}
		byte dl_411 = esp_343->a0018[edx_376];
		esp_343->a0018[ebp_315] = dl_411;
		ebp_315 = ebp_315 + 0x01;
		ptr32 edx_416 = esp_343->a0018 + edx_376;
		ptr32 edx_419 = edx_416 - eax_399;
		word16 bx_424 = DPB(bx_346, eax_399 + 0x01 + edx_419, 8);
		*(esp_343 - 0x04) = eax_399;
		int32 eax_428 = *(esp_343 - 0x04);
		eax_428 + edx_419 = (word16 *) bx_424;
		*(esp_343 - 0x04) = eax_428;
		*(esp_343 - 0x04) = *(esp_343 - 0x04);
		*(esp_343 - 0x04) = *(esp_343 - 0x04);
		*(esp_343 - 0x04) = *(esp_343 - 0x04);
		eax_328 = *(esp_343 - 0x04);
	} while (SLICE(ebp_315, byte, 8) != 0x01);
	*(esp_343 - 0x04) = eax_328;
	*(esp_343 - 0x04) = *(esp_343 - 0x04);
	word32 esi_465 = 0x00;
	int32 ebx_477 = esp_343->dw0000;
	word32 ebp_482 = esp_343->dw012C;
	esp_343->dw0000 = 0x00;
	ptr32 edi_488 = esp_343->ptr0010;
	esp_343->dw0000 = esp_343->dw0000;
	esp_343->dw0000 = esp_343->dw0000;
	esp_343->dw0000 = esp_343->dw0000;
	int32 edx_494 = ebx_477;
	int32 eax_508 = esp_343->dw0000;
	if (true)
	{
		esp_343->dw0000 = eax_508;
		eax_508 = esp_343->dw0000;
		do
		{
			esp_343->dw0000 = eax_508 + 0x01;
			int32 eax_616 = DPB(esp_343->dw0000, 0x00, 8);
			byte cl_619 = esp_343->a0018[eax_616];
			word32 ebx_626 = (word32) cl_619;
			esp_343->dw0000 = eax_616;
			esp_343->dw0000 = esp_343->dw0000;
			esp_343->dw0000 = esp_343->dw0000;
			word32 ebx_635 = DPB(ebx_626 + esi_465, 0x00, 8);
			byte dh_649 = (&esp_343->dw0000 + 0x01)[(ebx_635 + 0x14) / 0x0130];
			esp_343->dw0000 = esp_343->dw0000;
			int32 eax_654 = esp_343->dw0000;
			esp_343->a0018[eax_654] = dh_649;
			esp_343->dw0000 = eax_654;
			int32 eax_660 = esp_343->dw0000;
			esp_343->dw0000 = eax_660;
			*(esp_343 - 0x04) = eax_660;
			*(esp_343 - 0x04) = &esp_343->dw0000 + 0x01 + (ebx_635 + 0x14) / 0x0130;
			byte * eax_673 = *(esp_343 - 0x04);
			*eax_673 = cl_619;
			*(esp_343 - 0x04) = (byte **) eax_673;
			int32 eax_681 = esp_343->dw0000;
			word32 edx_686 = (word32) dh_649;
			byte dl_687 = (byte) edx_686;
			word32 edx_689 = DPB(edx_686, dl_687 + cl_619, 0);
			edx_494 = edx_689 + 0x14;
			ui32 ecx_695 = (&esp_343->dw0000 + 0x01)[(edx_689 + 0x14) / 0x0130];
			esp_343->dw0000 = eax_681;
			esp_343->dw0000 = esp_343->dw0000;
			int32 eax_709 = esp_343->dw0000;
			*(edi_488 - 0x01) = *(edi_488 - 0x01) ^ (word16) (ecx_695 << 0x08);
			esp_343->dw0000 = eax_709;
			esp_343->dw0000 = esp_343->dw0000;
			esp_343->dw0000 = esp_343->dw0000;
			esi_465 = ebx_635;
			edi_488 = edi_488 + 0x01;
			ebp_482 = ebp_482 - 0x01;
			eax_508 = esp_343->dw0000;
		} while (ebp_482 != 0x00);
	}
	struct Eq_1030 * esp_529 = esp_1028 - 0x0C;
	word32 edi_534;
	*ediOut = esp_529->dw0000;
	esp_529->dw0004 = eax_508;
	word32 ebp_543;
	*ebpOut = esp_529->dw0008;
	esp_529->dw0008 = esp_529->dw0004;
	esp_529->dw0114 = esp_529->dw0008;
	esp_529->ptr0118 = esp_529->ptr0118;
	esp_529->ptr0140 = esp_529->ptr0118;
	<type-error> Eq_78::* eax_568 = esp_529->ptr0140;
	esp_529->ptr0140 = eax_568;
	word32 ebx_575;
	*ebxOut = edx_494;
	return eax_568;
}

