// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register word32 fn00401000(Register ptr32 ebp)
word32 fn00401000(ptr32 ebp)
{
	Eq_4 eax_19 = LoadLibraryA(&globals->t404031);
	int32 eax_21 = 0x08;
	do
		eax_21 = eax_21 - 0x04;
	while (eax_21 >= 0x00);
	word32 ebx_58;
	globals->ptr405688 = fn00401FB5(eax_19, 3608399437, out ebx_58);
	Eq_4 ebx_85;
	globals->ptr40568C = fn00401FB5(null, 194903084, out ebx_85);
	int32 eax_89 = 0x00;
	do
		eax_89 = eax_89 + 0x04;
	while (eax_89 <= 0x06);
	Eq_4 ebx_104;
	globals->ptr405690 = fn00401FB5(ebx_85, 451423767, out ebx_104);
	int32 eax_108 = 0x00;
	do
		eax_108 = eax_108 + 0x02;
	while (eax_108 <= 0x03);
	word32 ebx_145;
	globals->ptr405694 = fn00401FB5(ebx_104, 994013453, out ebx_145);
	Eq_4 ebx_164;
	globals->ptr405698 = fn00401FB5(null, 994007309, out ebx_164);
	int32 eax_168 = 0x00;
	do
		eax_168 = eax_168 + 0x02;
	while (eax_168 <= 0x0A);
	Eq_4 ebx_182;
	globals->ptr40569C = fn00401FB5(ebx_164, ~0x43F5044D, out ebx_182);
	int32 eax_186 = 0x07;
	do
		eax_186 = eax_186 - 0x02;
	while (eax_186 >= 0x00);
	word32 ebx_215;
	globals->ptr4056A0 = fn00401FB5(ebx_182, 387765065, out ebx_215);
	int32 eax_219 = 0x00;
	do
		eax_219 = eax_219 + 0x03;
	while (eax_219 <= 0x08);
	word32 ebx_240;
	globals->ptr4056A4 = fn00401FB5(null, 254723247, out ebx_240);
	int32 eax_244 = 0x00;
	do
		eax_244 = eax_244 + 0x02;
	while (eax_244 <= 0x0A);
	ptr32 esp_258;
	word32 ebp_259;
	byte SCZO_260;
	word32 ebx_261;
	word32 esi_262;
	word32 edi_263;
	word32 eax_264;
	word32 edx_265;
	word32 ecx_266;
	byte cl_267;
	byte C_268;
	byte SZO_269;
	byte SO_270;
	globals->ptr4056A4();
	int32 eax_272 = 0x03;
	do
		eax_272 = eax_272 - 0x03;
	while (eax_272 >= 0x00);
	*(esp_258 - 0x04) = 3858419593;
	*(esp_258 - 0x08) = eax_264;
	word32 ebx_291;
	globals->ptr4056A8 = fn00401FB5(dwArg00, dwArg04, out ebx_291);
	int32 eax_295 = 0x05;
	do
		eax_295 = eax_295 - 0x05;
	while (eax_295 >= 0x00);
	*(esp_258 - 0x04) = 3380312414;
	*(esp_258 - 0x08) = 0x00;
	word32 ebx_308;
	globals->ptr4056AC = fn00401FB5(dwArg00, dwArg04, out ebx_308);
	int32 eax_312 = 0x03;
	do
		eax_312 = eax_312 - 0x04;
	while (eax_312 >= 0x00);
	*(esp_258 - 0x04) = 0x295F2C44;
	*(esp_258 - 0x08) = 0x00;
	word32 ebx_331;
	globals->ptr4056B0 = fn00401FB5(dwArg00, dwArg04, out ebx_331);
	int32 eax_335 = 0x00;
	do
		eax_335 = eax_335 + 0x04;
	while (eax_335 <= 0x06);
	*(esp_258 - 0x04) = 0x8B03B840;
	*(esp_258 - 0x08) = 0x00;
	word32 ebx_364;
	globals->ptr4056B4 = fn00401FB5(dwArg00, dwArg04, out ebx_364);
	int32 eax_368 = 0x00;
	do
		eax_368 = eax_368 + 0x04;
	while (eax_368 <= 0x0A);
	*(esp_258 - 0x04) = 1465674292;
	*(esp_258 - 0x08) = 0x00;
	word32 ebx_406;
	globals->ptr4056B8 = fn00401FB5(dwArg00, dwArg04, out ebx_406);
	int32 eax_410 = 0x08;
	do
		eax_410 = eax_410 - 0x04;
	while (eax_410 >= 0x00);
	*(esp_258 - 0x04) = 0x00404019;
	ptr32 esp_420;
	word32 ebp_421;
	byte SCZO_422;
	word32 ebx_423;
	word32 esi_424;
	word32 edi_425;
	word32 eax_426;
	word32 edx_427;
	word32 ecx_428;
	byte cl_429;
	byte C_430;
	byte SZO_431;
	byte SO_432;
	globals->ptr4056A4();
	int32 eax_434 = 0x04;
	do
		eax_434 = eax_434 - 0x02;
	while (eax_434 >= 0x00);
	*(esp_420 - 0x04) = 2519305232;
	*(esp_420 - 0x08) = eax_426;
	word32 ebx_465;
	globals->ptr4056BC = fn00401FB5(dwArg00, dwArg04, out ebx_465);
	int32 eax_469 = 0x00;
	do
		eax_469 = eax_469 + 0x04;
	while (eax_469 <= 0x09);
	fn00401735();
	return 0x00;
}

// 00401735: void fn00401735()
void fn00401735()
{
	GetModuleFileNameA(null, 0x00405AC0, 0x0104);
	int32 eax_24 = 0x0A;
	do
		eax_24 = eax_24 - 0x05;
	while (eax_24 >= 0x00);
	lstrcpyA(0x00405BC4, &globals->t40400C);
	lstrcatA(0x00405BC4, &globals->t405AC0);
	int32 eax_100 = 0x01;
	do
		eax_100 = eax_100 - 0x03;
	while (eax_100 >= 0x00);
	globals->dw405CC8 = 0x44;
	globals->dw405CF4 = 0x01;
	globals->w405CF8 = 0x02;
	GetModuleHandleA(null);
	int32 eax_172 = 0x01;
	do
		eax_172 = eax_172 - 0x01;
	while (eax_172 >= 0x00);
	ptr32 esp_231;
	word32 ebp_232;
	byte SCZO_233;
	word32 ebx_234;
	struct Eq_370 * esi_235;
	word32 edi_236;
	word32 eax_237;
	word32 edx_238;
	byte SO_239;
	word32 ecx_240;
	byte cl_241;
	byte SZO_242;
	byte C_243;
	globals->ptr405688();
	*(esp_231 - 0x04) = 0x40;
	*(esp_231 - 0x08) = 0x3000;
	*(esp_231 - 0x0C) = esi_235->dw0050;
	*(esp_231 - 0x10) = ebx_234;
	*(esp_231 - 0x14) = globals->dw405D0C;
	ptr32 esp_272;
	word32 ebp_273;
	byte SCZO_274;
	word32 ebx_275;
	struct Eq_417 * esi_276;
	word32 edi_277;
	word32 eax_278;
	word32 edx_279;
	byte SO_280;
	word32 ecx_281;
	byte cl_282;
	byte SZO_283;
	byte C_284;
	globals->ptr40568C();
	int32 dwLoc38_287 = dwLoc38 & 0x00;
	do
	{
		int32 v19_321 = dwLoc38_287 + 0x02;
		dwLoc38_287 = v19_321;
	} while (v19_321 <= 0x04);
	int32 edx_325 = 0x00;
	do
		edx_325 = edx_325 + 0x02;
	while (edx_325 <= 0x05);
	*(esp_272 - 0x04) = fp - 0x14;
	*(esp_272 - 0x08) = esi_276->dw0050;
	*(esp_272 - 0x0C) = ebx_275;
	*(esp_272 - 0x10) = eax_278;
	*(esp_272 - 0x14) = globals->dw405D0C;
	ptr32 esp_355;
	word32 ebp_356;
	byte SCZO_357;
	word32 ebx_358;
	word32 esi_359;
	word32 edi_360;
	word32 eax_361;
	word32 edx_362;
	byte SO_363;
	word32 ecx_364;
	byte cl_365;
	byte SZO_366;
	byte C_367;
	globals->ptr405690();
	int32 eax_368 = 0x00;
	do
		eax_368 = eax_368 + 0x05;
	while (eax_368 <= 0x02);
	globals->dw405D1C = 0x00010007;
	*(esp_355 - 0x04) = 4218140;
	*(esp_355 - 0x08) = globals->dw405D10;
	ptr32 esp_427;
	word32 ebp_428;
	byte SCZO_429;
	word32 ebx_430;
	word32 esi_431;
	word32 edi_432;
	word32 eax_433;
	word32 edx_434;
	byte SO_435;
	word32 ecx_436;
	byte cl_437;
	byte SZO_438;
	byte C_439;
	globals->ptr405694();
	globals->dw405DD4 = 0x00401471;
	int32 eax_452 = 0x06;
	do
		eax_452 = eax_452 - 0x02;
	while (eax_452 >= 0x00);
	*(esp_427 - 0x04) = 4218140;
	*(esp_427 - 0x08) = globals->dw405D10;
	ptr32 esp_479;
	word32 ebp_480;
	byte SCZO_481;
	word32 ebx_482;
	word32 esi_483;
	word32 edi_484;
	word32 eax_485;
	word32 edx_486;
	byte SO_487;
	word32 ecx_488;
	byte cl_489;
	byte SZO_490;
	byte C_491;
	globals->ptr405698();
	*(esp_479 - 0x04) = globals->dw405D10;
	word32 esp_498;
	word32 ebp_499;
	byte SCZO_500;
	word32 ebx_501;
	word32 esi_502;
	word32 edi_503;
	word32 eax_504;
	word32 edx_505;
	byte SO_506;
	word32 ecx_507;
	byte cl_508;
	byte SZO_509;
	byte C_510;
	globals->ptr40569C();
}

// 00401FB5: Register word32 fn00401FB5(Stack Eq_4 dwArg04, Stack uint32 dwArg08, Register out ptr32 ebxOut)
word32 fn00401FB5(HMODULE dwArg04, uint32 dwArg08, ptr32 & ebxOut)
{
}

// 00402120: Register Eq_315 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	globals->t405034 = fn00402CF0(0x02000000);
	ptr32 ebp_118 = fp - 0x04;
	if (fn004024E0() == 0x00)
	{
		*(fp - 116) = 0x01;
		fn004025D0(dwArg00);
	}
	fn004025E0(edx, ebx);
	fn00402650();
	fn004026A0(fp - 0x04);
	fn00402A80(fp - 0x04);
	fn00402B20(fp - 0x04);
	ptr32 esp_137 = fp - 0x70;
	<anonymous> ** ebx_150 = (<anonymous> **) 0x004040DC;
	while (ebx_150 < (<anonymous> **) 0x004040DC)
	{
		byte SCZO_140;
		word32 ebx_141;
		word32 esi_142;
		word32 edi_143;
		word32 ecx_144;
		word32 eax_145;
		byte SZO_146;
		byte C_147;
		byte Z_148;
		word32 edx_149;
		(*ebx_150)();
		ebx_150 = ebx_141 + 0x04;
	}
	word32 edx_133;
	LPSTARTUPINFOA * esp_62 = esp_137 - 0x04;
	*esp_62 = (LPSTARTUPINFOA *) (fp - 100);
	GetStartupInfoA(*esp_62);
	*(esp_62 - 0x04) = 0x00;
	Eq_4 eax_66 = GetModuleHandleA(*(esp_62 - 0x04));
	word32 eax_68 = fn00402BE0();
	if (0x00 != 0x00)
		edx_133 = (word32) wLoc34;
	else
		edx_133 = 0x0A;
	*(esp_62 - 0x08) = edx_133;
	*(esp_62 - 0x0C) = eax_68;
	*(esp_62 - 0x10) = 0x00;
	*(esp_62 - 0x14) = (HMODULE *) eax_66;
	Eq_315 eax_125 = fn00401000(ebp_118);
	ptr32 esp_117 = esp_62 - 0x04;
	Eq_315 ebx_121 = eax_125;
	<anonymous> ** esi_130 = (<anonymous> **) 0x004040DC;
	while (esi_130 < (<anonymous> **) 0x004040DC)
	{
		byte SCZO_120;
		word32 esi_122;
		word32 edi_123;
		word32 ecx_124;
		byte SZO_126;
		byte C_127;
		byte Z_128;
		word32 edx_129;
		(*esi_130)();
		esi_130 = esi_122 + 0x04;
	}
	*(esp_117 - 0x04) = (uint32) ebx_121;
	fn00402C20(ebx_121, dwArg00);
	*(ebp_118 - 0x04) = *(ebp_118 - 0x04) | ~0x00;
	fs->ptr0000 = *(ebp_118 - 0x10);
	return eax_125;
}

// 004024E0: Register word32 fn004024E0()
word32 fn004024E0()
{
	Eq_899 eax_8 = HeapCreate(0x01, 0x1000, 0x00);
	globals->t405674 = eax_8;
	if (eax_8 == null)
		return 0x00;
	return 0x01;
}

// 00402530: Register Eq_715 fn00402530(Stack Eq_715 dwArg04)
Eq_715 fn00402530(Eq_715 dwArg04)
{
	return HeapAlloc(globals->t405674, 0x01, dwArg04);
}

// 00402570: void fn00402570(Stack Eq_715 dwArg04)
void fn00402570(Eq_715 dwArg04)
{
	HeapFree(globals->t405674, 0x01, dwArg04);
}

// 004025D0: void fn004025D0(Stack Eq_715 dwArg04)
void fn004025D0(Eq_715 dwArg04)
{
	ExitProcess(dwArg04);
}

// 004025E0: void fn004025E0(Register word32 edx, Register word32 ebx)
void fn004025E0(word32 edx, word32 ebx)
{
	if ((SCZDOP ^ 0x00200000 ^ SCZDOP) != 0x00)
	{
		int32 eax_41;
		word32 ebx_42;
		Eq_940 ecx_43;
		word32 edx_44;
		__cpuid(0x00, SCZDOP, &eax_41, &ebx_42, &ecx_43, &edx_44);
		if (eax_41 >= 0x01)
		{
			word32 eax_48;
			word32 ebx_49;
			ui32 ecx_50;
			ui32 edx_51;
			__cpuid(0x01, ecx_43, &eax_48, &ebx_49, &ecx_50, &edx_51);
			ui32 eax_52 = 0x00;
			if ((edx_51 & 0x00800000) != 0x00)
				eax_52 = 0x01;
			if ((edx_51 & 0x01000000) != 0x00)
				eax_52 = eax_52 | 0x10;
			if ((edx_51 & 0x02000000) != 0x00)
				eax_52 = eax_52 | 0x02;
			if ((edx_51 & 0x04000000) != 0x00)
				eax_52 = eax_52 | 0x04;
			if ((ecx_50 & 0x01) != 0x00)
				eax_52 = eax_52 | 0x08;
			globals->dw4050EC = eax_52;
		}
	}
}

// 00402650: void fn00402650()
void fn00402650()
{
	GetSystemTimeAsFileTime(&globals->t405678);
}

// 004026A0: void fn004026A0(Register ptr32 ebp)
void fn004026A0(ptr32 ebp)
{
}

// 004028F0: void fn004028F0(Stack Eq_715 dwArg04, Stack (ptr word32) dwArg08, Stack (ptr byte) dwArg0C, Stack (ptr word32) dwArg10, Stack (ptr word32) dwArg14)
void fn004028F0(Eq_715 dwArg04, word32 * dwArg08, byte * dwArg0C, word32 * dwArg10, word32 * dwArg14)
{
	*dwArg14 = 0x00;
	*dwArg10 = 0x01;
	word32 * edx_19 = dwArg08;
	byte * ebx_105 = dwArg0C;
	Eq_715 edi_106 = dwArg04;
	if (dwArg08 != null)
	{
		*dwArg08 = dwArg0C;
		edx_19 = dwArg08 + 0x01;
	}
	if (*dwArg04 == 0x22)
	{
		while (true)
		{
			edi_106 = (word32) edi_106 + 0x01;
			if (*edi_106 == 0x22 || *edi_106 == 0x00)
				break;
			if (ebx_105 != null)
			{
				*ebx_105 = (byte) *edi_106;
				ebx_105 = ebx_105 + 0x01;
			}
			*dwArg14 = *dwArg14 + 0x01;
		}
		if (ebx_105 != null)
		{
			*ebx_105 = 0x00;
			ebx_105 = ebx_105 + 0x01;
		}
		*dwArg14 = *dwArg14 + 0x01;
		if (*edi_106 == 0x22)
			edi_106 = (word32) edi_106 + 0x01;
	}
	else
	{
		do
		{
			if (ebx_105 != null)
			{
				*ebx_105 = (byte) *edi_106;
				ebx_105 = ebx_105 + 0x01;
			}
			*dwArg14 = *dwArg14 + 0x01;
			edi_106 = (word32) edi_106 + 0x01;
			byte al_289 = *edi_106;
		} while (al_289 != 0x20 && (al_289 != 0x00 && al_289 != 0x09));
		if (al_289 == 0x00)
			edi_106 = edi_106 - 0x01;
		else if (ebx_105 != null)
			*(ebx_105 - 0x01) = 0x00;
	}
	word32 dwLoc08_101 = 0x00;
	while (true)
	{
		if (*edi_106 != 0x00)
		{
			while (true)
			{
				byte al_227 = *edi_106;
				if (al_227 != 0x20 && al_227 != 0x09)
					break;
				edi_106 = (word32) edi_106 + 0x01;
			}
		}
		if (*edi_106 == 0x00)
			break;
		if (edx_19 != null)
		{
			*edx_19 = ebx_105;
			edx_19 = edx_19 + 0x01;
		}
		*dwArg10 = *dwArg10 + 0x01;
		while (true)
		{
			uint32 dwLoc14_102 = 0x00;
			while (*edi_106 == 0x5C)
			{
				edi_106 = (word32) edi_106 + 0x01;
				dwLoc14_102 = dwLoc14_102 + 0x01;
			}
			word32 dwLoc0C_165 = 0x01;
			if (*edi_106 == 0x22)
			{
				dwLoc0C_165 = 0x01;
				if ((bLoc14 & 0x01) == 0x00)
				{
					if (dwLoc08_101 != 0x00)
					{
						if (*((word32) edi_106 + 0x01) == 0x22)
						{
							edi_106 = (word32) edi_106 + 0x01;
							dwLoc0C_165 = 0x01;
						}
						else
							dwLoc0C_165 = 0x00;
					}
					else
						dwLoc0C_165 = 0x00;
					dwLoc08_101 = (word32) (dwLoc08_101 == 0x00);
				}
				dwLoc14_102 = dwLoc14_102 >> 0x01;
			}
			while (true)
			{
				dwLoc14_102 = dwLoc14_102 - 0x01;
				if (dwLoc14_102 == 0x00)
					break;
				if (ebx_105 != null)
				{
					*ebx_105 = 0x5C;
					ebx_105 = ebx_105 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			byte al_113 = *edi_106;
			if (al_113 == 0x00 || dwLoc08_101 == 0x00 && (al_113 == 0x20 || al_113 == 0x09))
				break;
			if (dwLoc0C_165 != 0x00)
			{
				if (ebx_105 != null)
				{
					*ebx_105 = (byte) *edi_106;
					ebx_105 = ebx_105 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			edi_106 = (word32) edi_106 + 0x01;
		}
		if (ebx_105 != null)
		{
			*ebx_105 = 0x00;
			ebx_105 = ebx_105 + 0x01;
		}
		*dwArg14 = *dwArg14 + 0x01;
	}
	if (edx_19 != null)
		*edx_19 = 0x00;
	*dwArg10 = *dwArg10 + 0x01;
}

// 00402A80: void fn00402A80(Register ptr32 ebp)
void fn00402A80(ptr32 ebp)
{
	Eq_314 eax_13 = GetCommandLineA();
	ptr32 esp_10 = fp - 0x0118;
	Eq_314 ebx_103 = eax_13;
	if (*eax_13 == 0x00)
	{
		GetModuleFileNameA(null, fp - 0x0110, 0x0104);
		esp_10 = fp - 292;
		ebx_103 = fp - 0x0110;
	}
	ptr32 * esp_27 = esp_10 - 0x04;
	*esp_27 = fp - 0x0C;
	*(esp_27 - 0x04) = fp - 0x08;
	*(esp_27 - 0x08) = 0x00;
	*(esp_27 - 0x0C) = 0x00;
	*(esp_27 - 0x10) = (union Eq_314 *) ebx_103;
	fn004028F0(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*esp_27 = dwLoc0C + dwLoc08 * 0x04;
	word32 ebx_52;
	word32 esi_53;
	word32 edi_54;
	struct Eq_1018 * eax_55 = fn004032C0(dwArg00, out ebx_52, out esi_53, out edi_54);
	if (eax_55 == null)
	{
		*esp_27 = 0x01;
		fn004025D0(dwArg00);
	}
	ptr32 * esp_65 = esp_10 - 0x04;
	*esp_65 = fp - 0x0C;
	*(esp_65 - 0x04) = fp - 0x08;
	*(esp_65 - 0x08) = eax_55 + (dwLoc08 * 0x04) / 0x08;
	*(esp_65 - 0x0C) = (struct Eq_1018 **) eax_55;
	*(esp_65 - 0x10) = ebx_52;
	fn004028F0(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	globals->dw40501C = dwLoc08 - 0x01;
	globals->ptr405020 = eax_55;
}

// 00402B20: void fn00402B20(Register ptr32 ebp)
void fn00402B20(ptr32 ebp)
{
	Eq_1853 eax_148 = GetEnvironmentStrings();
	Eq_1853 ebx_154 = eax_148;
	if (eax_148 == 0x00)
		ebx_154 = globals->t4050F0;
	Eq_1853 esi_150 = ebx_154;
	word32 ecx_147 = 0x00;
	while (*esi_150 != 0x00)
	{
		Eq_1870 eax_134 = eax_148 | ~0x00;
		do
			eax_134 = (word32) eax_134 + 0x01;
		while (Mem0[esi_150 + eax_134:byte] != 0x00);
		if (*esi_150 != 0x3D)
			ecx_147 = ecx_147 + (eax_134 + 0x01);
		eax_148 = eax_134 + 0x01;
		esi_150 = esi_150 + (eax_134 + 0x01);
	}
	Eq_1853 ebx_43;
	word32 esi_44;
	word32 edi_45;
	struct Eq_1018 * eax_106 = fn004032C0(ecx_147 + 0x01, out ebx_43, out esi_44, out edi_45);
	globals->ptr405028 = eax_106;
	struct Eq_1018 * edi_104 = eax_106;
	if (globals->ptr405028 == null)
	{
		*(fp - 0x18) = 0x01;
		fn004025D0(dwArg00);
	}
	Eq_1853 esi_108 = ebx_43;
	while (*esi_108 != 0x00)
	{
		int32 eax_86 = eax_106 | ~0x00;
		do
			eax_86 = eax_86 + 0x01;
		while (*((word32) esi_108 + eax_86) != 0x00);
		if (*esi_108 != 0x3D)
		{
			*(fp - 0x18) = (struct Eq_1018 **) edi_104;
			Eq_1853 edx_111 = esi_108;
			int32 ecx_114 = edi_104 - esi_108;
			do
			{
				byte al_117 = *edx_111;
				*((word32) edx_111 + ecx_114) = al_117;
				edx_111 = (word32) edx_111 + 0x01;
			} while (al_117 != 0x00);
			edi_104 = edi_104 + (eax_86 + 0x01) / 0x08;
		}
		eax_106 = eax_86 + 0x01;
		esi_108 = (word32) esi_108 + (eax_86 + 0x01);
	}
	edi_104->dw0000 = (word32) 0x00;
	if (ebx_43 != globals->t4050F0)
	{
		*(fp - 0x18) = (union Eq_1853 *) ebx_43;
		FreeEnvironmentStringsA(*(fp - 0x18));
	}
}

// 00402BE0: Register Eq_314 fn00402BE0()
Eq_314 fn00402BE0()
{
	Eq_314 eax_2 = GetCommandLineA();
	Eq_314 edx_10 = eax_2;
	if (*eax_2 == 0x22)
	{
		do
			edx_10 = edx_10 + 0x01;
		while (*edx_10 != 0x22 && *edx_10 != 0x00);
		if (*edx_10 == 0x22)
			edx_10 = edx_10 + 0x01;
	}
	else
	{
		while (*edx_10 > 0x20)
			edx_10 = edx_10 + 0x01;
	}
	while (true)
	{
		cu8 al_12 = *edx_10;
		if (al_12 == 0x00 || al_12 > 0x20)
			break;
		edx_10 = edx_10 + 0x01;
	}
	return edx_10;
}

// 00402C20: void fn00402C20(Register Eq_315 ebx, Stack Eq_715 dwArg04)
void fn00402C20(DWORD ebx, Eq_715 dwArg04)
{
	ptr32 esp_2 = fp - 0x04;
	Eq_715 ebx_19 = dwArg04;
	if (globals->dw405234 < 0x50)
	{
		do
		{
			uint32 eax_53 = globals->dw405234;
			globals->dw405234 = eax_53 + 0x01;
			byte SCZO_59;
			byte C_60;
			word32 eax_61;
			word32 edx_62;
			byte Z_63;
			byte SZO_64;
			word32 ecx_65;
			(*((char *) globals->a4050F4 + eax_53 * 0x04))();
		} while (globals->dw405234 < 0x50);
	}
	if (globals->dw405238 != 0x00)
	{
		do
		{
			ui32 eax_38 = globals->dw405238;
			globals->dw405238 = eax_38 - 0x01;
			byte SCZO_44;
			byte C_45;
			word32 eax_46;
			word32 edx_47;
			byte Z_48;
			byte SZO_49;
			word32 ecx_50;
			(*((char *) globals->a4050F4 + (eax_38 - 0x01) * 0x04))();
		} while (globals->dw405238 != 0x00);
	}
	*(esp_2 - 0x04) = (union Eq_715 *) ebx_19;
	fn004025D0(dwArg00);
}

// 00402CF0: Register word32 fn00402CF0(Stack word32 dwArg04)
word32 fn00402CF0(word32 dwArg04)
{
	return dwArg04;
}

// 00402D70: Register word32 fn00402D70(Stack uint32 dwArg04)
word32 fn00402D70(uint32 dwArg04)
{
	word32 eax_137;
	word32 esi_24;
	uint32 ebx_23;
	struct Eq_2100 * eax_25 = fn00403700((dwArg04 + 0x03 >> 0x0E) + 0x01 << 0x10, out ebx_23, out esi_24);
	if (eax_25 == null)
	{
		globals->t405038.u0 = 0x00;
		eax_137 = 0x00;
	}
	else
	{
		uint32 esi_229;
		struct Eq_2100 * edi_227;
		if (globals->ptr405680 + globals->dw405684 / 0x04 == eax_25)
		{
			esi_229 = esi_24 + globals->dw405684;
			edi_227 = globals->ptr405680;
			ebx_23 = esi_229 >> 0x02;
		}
		else
		{
			edi_227 = eax_25;
			esi_229 = eax_25 + (esi_24 - eax_25) / 0x04;
		}
		globals->ptr405680 = edi_227 + ebx_23;
		globals->dw405684 = -(ebx_23 << 0x02) + esi_229;
		if (globals->ptr405260 + 0x01 == edi_227 && globals->ptr405268 != null)
		{
			ui32 * edi_196 = (char *) edi_227 - 0x04;
			uint32 eax_199 = (*edi_196 & 0x7FFFFFFF) + ebx_23;
			*edi_196 = ebx_23 | 0x80000000;
			ui32 * edx_204 = globals->ptr405260 + ebx_23 * 0x04;
			globals->ptr405260 = edx_204;
			*(edx_204 - 0x04) = *edi_196;
			*globals->ptr405260 = eax_199 | 0x80000000;
			(globals->ptr405260 - (eax_199 << 0x02))->dw0004 = eax_199 | 0x80000000;
			fn00403620(edi_196 + 0x01);
			eax_137 = 0x01;
		}
		else
		{
			struct Eq_2100 * eax_78 = globals->ptr405268;
			globals->ptr405268 = edi_227;
			edi_227->ptr0000 = eax_78;
			ui32 * edi_81 = (char *) &edi_227->ptr0000 + 0x04;
			globals->ptr405260 = edi_81;
			uint32 ebx_82 = ebx_23 - 0x01;
			ui32 * eax_84 = globals->ptr405264;
			if (eax_84 == null || eax_84 > edi_81)
				globals->ptr405264 = edi_81;
			int32 eax_107;
			*edi_81 = ebx_82 | 0x80000000;
			ui32 * eax_92 = globals->ptr405260 - 0x04 + ebx_82 * 0x04;
			globals->ptr405260 = eax_92;
			*eax_92 = ebx_82 | 0x80000000;
			ui32 * eax_98 = globals->ptr405260;
			if (ebx_82 - 0x02 <= globals->dw405278)
			{
				if (ebx_82 - 0x02 <= globals->dw405270)
					eax_107 = (word32) (ebx_82 - 0x02 > globals->dw40526C);
				else if (ebx_82 - 0x02 <= globals->dw405274)
					eax_107 = 0x02;
				else
					eax_107 = 0x03;
			}
			else if (ebx_82 - 0x02 <= globals->dw405280)
				eax_107 = ((word32) (ebx_82 - 0x02 <= globals->dw40527C) - 0x01 & 0x01) + 0x04;
			else if (ebx_82 - 0x02 <= globals->dw405284)
				eax_107 = 0x06;
			else
				eax_107 = 0x07;
			ptr32 edx_113;
			globals->dw405290 = eax_107;
			ptr32 eax_109 = globals->a40523C[eax_107 * 0x04];
			if (eax_109 == 0x00)
			{
				globals->a40523C[globals->dw405290 * 0x04] = eax_98 - 0x04;
				edx_113 = eax_98 - 0x04;
				eax_109 = eax_98 - 0x04;
				if (globals->dw40528C > globals->dw405290)
					globals->dw40528C = globals->dw405290;
			}
			else
				edx_113 = *(eax_109 - 0x08);
			*(eax_98 - 0x08) = eax_109;
			*(eax_109 - 0x08) = eax_98 - 0x04;
			*(edx_113 - 0x04) = eax_98 - 0x04;
			*(eax_98 - 0x0C) = edx_113;
			(-(ebx_82 - 0x02 << 0x02) + (eax_98 - 0x04))->dw0004 = ebx_82 - 0x02;
			*(eax_98 - 0x04) = ebx_82 - 0x02;
			globals->a40523C[globals->dw405290 * 0x04] = eax_98 - 0x04;
			while (true)
			{
				int32 eax_132 = globals->dw40528C;
				if (globals->a40523C[eax_132 * 0x04] != 0x00 || eax_132 >= 0x07)
					break;
				globals->dw40528C = globals->dw40528C + 0x01;
			}
			eax_137 = 0x01;
		}
	}
	return eax_137;
}

// 00402FC0: Register ptr32 fn00402FC0(Stack Eq_715 dwArg04, Register out ptr32 ebxOut, Register out ptr32 ediOut)
ptr32 fn00402FC0(Eq_715 dwArg04, ptr32 & ebxOut, ptr32 & ediOut)
{
}

// 004032C0: Register word32 fn004032C0(Stack Eq_715 dwArg04, Register out ptr32 ebxOut, Register out Eq_1023 esiOut, Register out ptr32 ediOut)
word32 fn004032C0(Eq_715 dwArg04, ptr32 & ebxOut, Eq_1023 & esiOut, ptr32 & ediOut)
{
	*ediOut = edi;
	Eq_715 ebx_23 = dwArg04;
	word32 esi_10 = 0x00;
	if (dwArg04 < globals->t405038)
	{
		word32 edi_54;
		esi_10 = fn00402FC0(dwArg04, out ebx_23, out edi_54);
	}
	if (esi_10 == 0x00)
		esi_10 = fn00402530(ebx_23);
	if (esi_10 == 0x00)
		globals->dw405298 = 0x0C;
	word32 esi_37;
	*esiOut = *(fp - 0x08);
	word32 ebx_39;
	*ebxOut = *(fp - 0x04);
	return esi_10;
}

// 00403300: void fn00403300(Stack Eq_715 dwArg04)
void fn00403300(Eq_715 dwArg04)
{
	if ((*((word32) dwArg04 - 0x04) & 0x80000000) == 0x00)
		globals->dw405298 = 22;
	else
	{
		ui32 eax_52 = *((word32) dwArg04 - 0x04);
		uint32 eax_197 = eax_52 & 0x7FFFFFFF;
		struct Eq_2814 * edx_298 = dwArg04 - 0x08 + (eax_52 & 0x7FFFFFFF) * 0x04;
		int32 dwLoc08_289 = dwLoc08 | ~0x00;
		if ((edx_298->dw0004 & 0x80000000) == 0x00)
		{
			int32 dwLoc0C_284;
			struct Eq_2814 * esi_280 = edx_298 + (edx_298->dw0004 * 0x04) / 0x08;
			if (esi_280->dw0000 <= globals->dw405278)
			{
				int32 ecx_304;
				if (esi_280->dw0000 <= globals->dw405270)
					ecx_304 = (word32) (esi_280->dw0000 > globals->dw40526C);
				else if (esi_280->dw0000 <= globals->dw405274)
					ecx_304 = 0x02;
				else
					ecx_304 = 0x03;
				dwLoc0C_284 = ecx_304;
			}
			else if (esi_280->dw0000 <= globals->dw405280)
				dwLoc0C_284 = ((word32) (esi_280->dw0000 <= globals->dw40527C) - 0x01 & 0x01) + 0x04;
			else if (esi_280->dw0000 <= globals->dw405284)
				dwLoc0C_284 = 0x06;
			else
				dwLoc0C_284 = 0x07;
			eax_197 = (eax_52 & 0x7FFFFFFF) + esi_280->dw0000;
			esi_280->dw0000 = eax_197;
			(esi_280 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
			dwLoc08_289 = dwLoc0C_284;
			edx_298 = esi_280;
		}
		if ((*(dwArg04 - 0x08) & 0x80000000) == 0x00)
		{
			int32 esi_202;
			eax_197 = eax_197 + *(dwArg04 - 0x08);
			if (*(dwArg04 - 0x08) <= globals->dw405278)
			{
				int32 ecx_243;
				if (*(dwArg04 - 0x08) <= globals->dw405270)
					ecx_243 = (word32) (*(dwArg04 - 0x08) > globals->dw40526C);
				else if (*(dwArg04 - 0x08) <= globals->dw405274)
					ecx_243 = 0x02;
				else
					ecx_243 = 0x03;
				esi_202 = ecx_243;
			}
			else if (*(dwArg04 - 0x08) <= globals->dw405280)
				esi_202 = ((word32) (*(dwArg04 - 0x08) <= globals->dw40527C) - 0x01 & 0x01) + 0x04;
			else if (*(dwArg04 - 0x08) <= globals->dw405284)
				esi_202 = 0x06;
			else
				esi_202 = 0x07;
			ptr32 ecx_204 = *(dwArg04 - 0x0C);
			if (dwArg04 - 0x08 == ecx_204)
			{
				globals->a40523C[esi_202 * 0x04] = 0x00;
				if (globals->dw40528C == esi_202)
				{
					while (true)
					{
						int32 esi_224 = globals->dw40528C;
						if (globals->a40523C[esi_224 * 0x04] != 0x00 || esi_224 >= 0x07)
							break;
						globals->dw40528C = globals->dw40528C + 0x01;
					}
				}
			}
			else
			{
				ptr32 esi_232 = *(dwArg04 - 0x10);
				*(esi_232 - 0x04) = ecx_204;
				*(ecx_204 - 0x08) = esi_232;
				if (globals->a40523C[esi_202 * 0x04] == dwArg04 - 0x08)
					globals->a40523C[esi_202 * 0x04] = esi_232;
			}
			edx_298->dw0000 = eax_197;
			(edx_298 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
		}
		int32 ebx_163;
		if (eax_197 <= globals->dw405278)
		{
			int32 ecx_161;
			if (eax_197 <= globals->dw405270)
				ecx_161 = (word32) (eax_197 > globals->dw40526C);
			else if (eax_197 <= globals->dw405274)
				ecx_161 = 0x02;
			else
				ecx_161 = 0x03;
			ebx_163 = ecx_161;
		}
		else if (eax_197 <= globals->dw405280)
			ebx_163 = ((word32) (eax_197 <= globals->dw40527C) - 0x01 & 0x01) + 0x04;
		else if (eax_197 <= globals->dw405284)
			ebx_163 = 0x06;
		else
			ebx_163 = 0x07;
		if (dwLoc08_289 != ebx_163)
		{
			if (dwLoc08_289 >= 0x00)
			{
				struct Eq_2814 * ecx_129 = *(edx_298 - 0x04);
				if (edx_298 == ecx_129)
				{
					globals->a40523C[dwLoc08_289 * 0x04] = 0x00;
					if (globals->dw40528C == dwLoc08_289)
					{
						while (true)
						{
							int32 ebx_140 = globals->dw40528C;
							if (globals->a40523C[ebx_140 * 0x04] != 0x00 || ebx_140 >= 0x07)
								break;
							globals->dw40528C = globals->dw40528C + 0x01;
						}
					}
				}
				else
				{
					ptr32 ebx_148 = *(edx_298 - 0x08);
					*(ebx_148 - 0x04) = (struct Eq_2814 **) ecx_129;
					*(ecx_129 - 0x08) = ebx_148;
					if (globals->a40523C[dwLoc08_289 * 0x04] == edx_298)
						globals->a40523C[dwLoc08_289 * 0x04] = ebx_148;
				}
			}
			struct Eq_2814 * ebx_107;
			struct Eq_2814 * ecx_106 = globals->a40523C[ebx_163 * 0x04];
			if (ecx_106 == null)
			{
				globals->a40523C[ebx_163 * 0x04] = edx_298;
				ebx_107 = edx_298;
				ecx_106 = edx_298;
				if (globals->dw40528C > ebx_163)
					globals->dw40528C = ebx_163;
			}
			else
				ebx_107 = (struct Eq_2814 *) *(ecx_106 - 0x08);
			*(edx_298 - 0x04) = (struct Eq_2814 **) ecx_106;
			*(ecx_106 - 0x08) = (struct Eq_2814 **) edx_298;
			*(ebx_107 - 0x04) = (struct Eq_2814 **) edx_298;
			*(edx_298 - 0x08) = (struct Eq_2814 **) ebx_107;
			(edx_298 + -(eax_197 << 0x02) / 0x08)->dw0004 = eax_197;
			edx_298->dw0000 = eax_197;
			globals->dw405290 = ebx_163;
			globals->a40523C[ebx_163 * 0x04] = edx_298;
		}
	}
}

// 00403620: void fn00403620(Stack Eq_715 dwArg04)
void fn00403620(Eq_715 dwArg04)
{
	if (dwArg04 != 0x00)
	{
		if (dwArg04 - 0x04 > globals->ptr405264 && dwArg04 - 0x04 < globals->ptr405260)
			fn00403300(dwArg04);
		else
			fn00402570(dwArg04);
	}
}

// 00403700: Register Eq_715 fn00403700(Stack uint32 dwArg04, Register out ptr32 ebxOut, Register out ptr32 esiOut)
Eq_715 fn00403700(uint32 dwArg04, ptr32 & ebxOut, ptr32 & esiOut)
{
	Eq_715 eax_29;
	struct Eq_3229 * esp_10 = fp - 0x28;
	if (globals->t405030 == 0x00)
	{
		eax_29 = VirtualAlloc(0x00, globals->t405034, 0x2000, 0x01);
		globals->t405030 = eax_29;
		esp_10 = fp - 0x38;
		if (eax_29 == 0x00)
		{
l0040378F:
			word32 esi_33;
			*esiOut = esp_10->dw0000;
			word32 ebx_35;
			*ebxOut = esp_10->dw0004;
			return eax_29;
		}
	}
	union Eq_715 * esp_46 = esp_10 - 0x04;
	*esp_46 = (union Eq_715 *) 0x1C;
	*(esp_46 - 0x04) = fp - 0x20;
	*(esp_46 - 0x08) = (union Eq_715 *) globals->t405030;
	esp_10 = esp_46 - 0x08;
	eax_29 = VirtualQuery(*(esp_46 - 0x08), *(esp_46 - 0x04), *esp_46);
	if (eax_29 != 0x00)
	{
		Eq_715 eax_62;
		if (dwLoc10 == 0x1000)
			eax_62 = (word32) globals->t405030 + dwLoc14;
		else
			eax_62 = globals->t405030;
		if (dwArg04 + eax_62 >=u Mem53[0x00405034:word32] + Mem53[0x00405030:word32])
			eax_29.u0 = 0x00;
		else
		{
			*(esp_46 - 0x0C) = 0x04;
			*(esp_46 - 0x10) = 0x1000;
			*(esp_46 - 0x14) = dwArg04;
			*(esp_46 - 0x18) = (union Eq_715 *) eax_62;
			esp_10 = esp_46 - 0x18;
			eax_29 = VirtualAlloc(*(esp_46 - 0x18), *(esp_46 - 0x14), *(esp_46 - 0x10), *(esp_46 - 0x0C));
			if (eax_29 != 0x00)
				eax_29 = eax_62;
		}
	}
	goto l0040378F;
}

