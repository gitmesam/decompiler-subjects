// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040116C: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 * esp_12 = fp - 0x08;
	do
	{
		fs->ptr0000 = esp_12;
		null = (union Eq_7 *) ecx;
		esp_12 = esp_12 - 0x04;
		*esp_12 = 0x00;
		ebx = ebx + 0x01;
		ui8 al_36 = null ^ 0x00;
		ebp = ebp + 0x01;
		byte bh_34 = SLICE(ebx, byte, 8);
		byte bl_35 = (byte) ebx;
		int32 eax_37 = (word32) al_36;
		if (OVERFLOW(al_36))
			*(esp_12 - 0x04) = esp_12;
		ecx = ecx - 0x01;
	} while (al_36 != 0x00 && ecx != 0x00);
	byte bh_56 = bh_34 - al_36;
	ui32 ebx_57 = DPB(ebx, bh_56, 8);
	Eq_57 ebp_58 = ebp + ((char *) esp_12 + 1178533921)[eax_37];
	if (ebp_58 < 0x00)
	{
		Eq_2 eax_508 = DPB(eax_37, __inb(0xB8), 0);
		eax_508->a333D6692[eax_508].b0000 = eax_508->a333D6692[eax_508].b0000 - bl_35;
		edx[0x29B3C434] = (struct Eq_83) (edx[0x29B3C434] >> 0x5B);
		return eax_508;
	}
	else
	{
		ui8 al_98 = al_36 + 0x40 + (ebp_58 < 0x00);
		ui8 al_102 = al_98 + 116 + (DPB(eax_37, al_98, 0) < 0x6C1F0F8B);
		struct Eq_105 * esp_133 = *esp_12 + 0x04;
		int32 eax_103 = DPB(eax_37, al_102, 0);
		bool C_108 = (bool) cond(al_102);
		do
		{
			uint8 al_134 = al_102 + 0x70 + C_108;
			ui8 al_137 = al_134 - 0x3A - (al_134 < 0x00);
			edx = DPB(edx, ~0x18, 8);
			word32 v21_145 = Mem31[esp_133 + 2005810352 + edx:word32] + ebx_57;
			Mem146[esp_133 + 2005810352 + edx:word32] = v21_145;
			Eq_2 eax_138 = DPB(eax_103, al_137, 0);
			dx = DPB(dx, ~0x18, 8);
			if (v21_145 == 0x00)
			{
				byte v28_178 = esi->bE3ACC410 + bh_56;
				esi->bE3ACC410 = v28_178;
				Eq_2 esp_176 = esp_133 & ebx_57;
				if (!OVERFLOW(v28_178))
					;
				if (v28_178 == 0x00 && ecx != 0x01)
					return eax_138;
				else
				{
					do
					{
						Eq_2 eax_215 = __indw(0x60) + 0x04;
						ui8 al_217 = (byte) eax_215;
						__outb(~0x09, al_217);
						do
						{
							__outb(dx, al_217);
							esi = esi + 0x01;
							if (eax_215 >= esp_176)
								*(esp_176 - 0x02) = (struct Eq_206 **) cs;
							(struct Eq_212 **) 0x9C053CDE = (struct Eq_212 **) ss;
							esp_176 = (struct <anonymous> *) 0x9C053CDE;
							if (dl < esi->bCF1C1006)
								return eax_215;
							if (dl > esi->bCF1C1006)
							{
								*edi = (byte) __in(dx);
								Eq_2 esp_483 = &eax_215->t0000;
								*(esp_483 - 0x02) = (struct Eq_212 **) ss;
								edi = edi + 0x04;
								ds = *(esp_483 - 0x02);
								esp_176 = esp_483;
								eax_215 = (struct <anonymous> *) 3353287860;
							}
							up32 eax_286 = (char *) eax_215 - 1480255772;
							int64 edx_eax_291 = (int64) eax_286;
							eax_215 = (word32) edx_eax_291;
							al_217 = (byte) edx_eax_291;
							dx = SLICE(edx_eax_291, word16, 32);
							dl = SLICE(edx_eax_291, byte, 32);
						} while (eax_286 > 0x00);
						Eq_140 v36_303 = eax_215->t0000 << ~0x04;
						eax_215->t0000 = v36_303;
						word32 * esi_300 = esi + 0x01;
						edi = edi + 0x01;
						Eq_281 C_306 = (bool) cond(v36_303);
						if (0x7A0E5AD1 == 0x00)
						{
							if (v36_303 >= 0x00)
							{
								if (true)
								{
									while (true)
									{
										word32 esi_415 = esi_300 + 0x04 + Mem304[0x7A0E5A9B:word32] + C_306;
										__outdw(dx, DPB(*esi_300, 0x59, 8));
										ui64 al_esi_420 = SEQ(al_217, (word32) esi_415 + 0x04);
										ptr32 eax_422 = SLICE(al_esi_420 + 0xE400000004, word32, 32);
										*(eax_422 - 0x35) = *(eax_422 - 0x35) | dl;
										esi_300 = (word32) (al_esi_420 + 0xE400000004);
										al_217 = (byte) __indw(0x96);
										if (eax_422 >= 3111001223)
											break;
										(byte *) 2891634814 = (byte *) ((byte *) 2891634814 & dl);
										C_306.u0 = false;
									}
									word32 eax_441 = __indw(~0x46);
									(word32 *) 826298759 = eax_441;
									up32 eax_446 = DPB(eax_441, (byte) eax_441 | 0x31, 0);
									if (eax_446 < 3592526215)
										return eax_446 - 3592526215;
									else
										__hlt();
								}
								esi->bAC7EA618 = 252;
								esp_176 = esp_176 + 0x04;
l00401328:
							}
							Eq_312 esp_323 = esp_176 - (struct <anonymous> *) 0x02;
							esp_323->t0000 = ds;
							word32 esp_325;
							word32 eax_326;
							struct Eq_320 * fs_327;
							byte SZO_328;
							bool C_329;
							word32 ecx_330;
							word32 ebp_331;
							word32 ebx_332;
							byte al_333;
							bool O_334;
							word32 esi_335;
							bool Z_336;
							byte bh_337;
							byte SCZO_338;
							byte SO_339;
							byte dh_340;
							word32 edx_341;
							word32 edi_342;
							struct Eq_336 * ds_343;
							byte bl_344;
							byte ah_345;
							word16 dx_346;
							byte dl_347;
							struct Eq_341 * ss_348;
							byte CZ_349;
							real64 rArg0_350;
							bool S_351;
							struct Eq_345 * cs_352;
							fn6EA78D63();
						}
						esi = (struct Eq_117 *) 0x7BA3CADB;
						eax_215 = (Eq_2) DPB(eax_215, 0x15, 0);
						if ((al_217 | 0x11) <= 0x11)
							goto l00401328;
					} while ((al_217 | 0x11) < 0x11);
					return eax_215;
				}
			}
			*edi = esi->b0000;
			ds = esp_133->ptr0000;
			__wait();
			int32 * esp_167 = esp_133 + 0x01;
			al_102 = al_137 & 0x84;
			eax_103 = DPB(eax_103, al_137 & 0x84, 0);
			C_108 = false;
			esi = esi + 0x01;
			edi = edi + 0x01;
			esp_133 = (struct Eq_105 *) (esp_167 + 0x01);
		} while (ecx == 0x00);
		*esp_167 = eax_103;
		byte al_174;
		__daa(al_137 & 0x84, &al_174);
	}
}

