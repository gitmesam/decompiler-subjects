// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_28 = AddAce(null, 0x00, 0x00, null, 0x00);
	Eq_17 esi_15 = 0x00;
	word32 ebx_241 = eax_28 + 22;
	struct Eq_22 * esp_36 = fp - 0x34;
	if (AreAnyAccessesGranted(~0x00, ~0x00) == 0x00)
		ebx_241 = eax_28 - 0x0C;
	struct Eq_35 * eax_46 = null;
	do
	{
		if (esi_15 == ebx_241)
			esi_15.u0 = 0x00;
		eax_46[0x00401190] = (struct Eq_35) (eax_46[0x00401190] ^ *((word32) esi_15 + 0x00404000));
		eax_46 = eax_46 + 0x01;
		esi_15 = (word32) esi_15 + 0x01;
	} while (eax_46 < (struct Eq_35 *) 0x1440);
	struct Eq_57 * ecx_106 = &globals->t402490;
	up32 dwLoc24_110 = 0x00;
	do
	{
		Eq_61 eax_91 = ecx_106->t0004;
		word16 * edx_219 = (char *) &ecx_106->t0004 + 0x04;
		if (eax_91 - 0x08 >> 0x01 > 0x00)
		{
			uint32 esi_218 = eax_91 - 0x08 >> 0x01;
			do
			{
				ui32 eax_221 = (word32) *edx_219;
				if ((eax_221 & 0xF000) == 0x3000)
				{
					struct Eq_83 * eax_233 = (eax_221 & 0x0FFF) + ecx_106->dw0000;
					eax_233->dw400F10 = eax_233->dw400F10 + 4030730000;
				}
				edx_219 = edx_219 + 0x01;
				esi_218 = esi_218 - 0x01;
			} while (esi_218 != 0x00);
		}
		Eq_61 eax_103 = ecx_106->t0004;
		up32 edx_105 = (word32) eax_103.u0 + dwLoc24_110;
		ecx_106 = ecx_106 + eax_103;
		dwLoc24_110 = edx_105;
	} while (edx_105 < 228);
	struct Eq_107 * esi_111 = &globals->t401C84;
	esi_139 = esi_111;
	esp_142 = esp_36;
	if (globals->dw401C94 != 0x00)
	{
		do
		{
			struct Eq_107 * esi_139;
			struct Eq_22 * esp_142;
			esp_142 = esp_142 - 0x04;
			esp_142->dw0000 = esi_139->dw000C + 0x00400F10;
			Eq_155 eax_147 = LoadLibraryA(esp_142->dw0000);
			esp_142[0x05] = (struct Eq_22) eax_147;
			Eq_155 edx_148 = eax_147;
			if (eax_147 != null)
			{
				word32 ebx_171 = esi_139->dw0000;
				if (ebx_171 == 0x00)
					ebx_171 = esi_139->dw0010;
				word32 * ebx_177 = ebx_171 + 0x00400F10;
				word32 * edi_178 = esi_139->dw0010 + 0x00400F10;
				if (*ebx_177 != 0x00)
				{
					while (true)
					{
						word32 * esp_198;
						int32 eax_191 = *ebx_177;
						word16 ax_192 = (word16) eax_191;
						if (eax_191 < 0x00)
						{
							esp_198 = esp_142 - 0x04;
							*esp_198 = (word32) ax_192;
						}
						else
						{
							esp_198 = esp_142 - 0x04;
							*esp_198 = eax_191 + 0x00400F12;
						}
						esp_142 = esp_198 - 0x04;
						esp_142->dw0000 = (word32) edx_148;
						*edi_178 = (word32) GetProcAddress(esp_142->dw0000, esp_142[0x01]);
						ebx_177 = ebx_177 + 0x01;
						edi_178 = edi_178 + 0x01;
						if (*ebx_177 == 0x00)
							break;
						edx_148 = (Eq_155) esp_142[0x05];
					}
					esi_139 = (struct Eq_107 *) esp_142[0x04];
				}
			}
			esi_139 = esi_139 + 0x01;
			esp_142[0x04] = (struct Eq_22) esi_139;
		} while (esi_139->dw0010 != 0x00);
	}
	ptr32 esp_118;
	byte SCZO_119;
	word32 ebx_120;
	word32 ebp_121;
	word32 esi_122;
	word32 edi_123;
	byte SZO_124;
	byte C_125;
	word32 edx_126;
	word32 eax_127;
	word32 ecx_128;
	byte Z_129;
	byte cl_130;
	byte S_131;
	word16 ax_132;
	globals->t401960();
	*(esp_118 - 0x04) = 0x00;
	ExitProcess(*(esp_118 - 0x04));
}

