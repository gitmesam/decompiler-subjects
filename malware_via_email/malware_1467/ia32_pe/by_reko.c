// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00410000: Register word32 fn00410000()
word32 fn00410000()
{
	globals->t43544C.u0 = 0x00430008;
	globals->dw435440 = 14565;
	globals->dw435450 = 4405488;
	globals->dw435444 = 1819;
	VirtualAlloc(0x00, 0x4000, 0x3000, 0x40);
	ptr32 ebp_5 = fp - 0x04;
	int32 ebx_22 = 0x00;
	do
	{
		int32 ecx_123 = (&globals->dw435440)[ebx_22];
		Eq_125 (* edi_55)[] = (&(&globals->t43544C)[ebx_22])[0x00].t0000;
		*(ebp_5 - 0x0C) = ecx_123;
		int32 eax_125 = 0x00;
		byte al_126 = 0x00;
		Eq_125 (* esi_127)[] = null;
		if (ecx_123 > 0x00)
		{
			do
			{
				Eq_113 cl_128 = globals->t430004;
				ecx_123 = DPB(ecx_123, cl_128, 0);
				Mem135[esi_127 + edi_55:byte] = (byte) (eax_125 + ecx_123) ^ Mem59[esi_127 + edi_55:byte] ^ cl_128 ^ al_126;
				if (eax_125 > 0x05)
				{
					eax_125 = 0x00;
					al_126 = 0x00;
				}
				else
				{
					eax_125 = eax_125 + 0x01;
					al_126 = (byte) eax_125;
				}
				esi_127 = &(esi_127 + 0x01)->t0000;
			} while (esi_127 < *(ebp_5 - 0x0C));
		}
		uint32 eax_107;
		Eq_3 ecx_109;
		Eq_3 edx_111;
		if (ebx_22 == 0x00)
		{
			eax_107 = globals->dw435440;
			ecx_109 = globals->t43544C;
			edx_111 = *(ebp_5 - 0x08);
		}
		else
		{
			eax_107 = (&globals->dw435440)[ebx_22];
			ecx_109 = (&globals->t43544C)[ebx_22];
			edx_111 = *(ebp_5 - 0x04) + *(ebp_5 - 0x08);
		}
		word32 esi_87;
		word32 edi_88;
		ebp_5 = fn00412090(ebx_22, edx_111, ecx_109, eax_107, out esi_87, out edi_88);
		*(ebp_5 - 0x04) = *(ebp_5 - 0x04) + (&globals->dw435440)[ebx_22];
		ebx_22 = ebx_22 + 0x01;
	} while (ebx_22 < 0x02);
	return *(ebp_5 - 0x08);
}

// 00410120: void fn00410120(Register Eq_153 ebx, Register (ptr32 Eq_154) ebp)
void fn00410120(HINSTANCE ebx, Eq_154 * ebp)
{
	if (globals->dw43400C == 0x00)
		MessageBoxA(0x00, 0x004201F0, 0x004201E8, 0x00);
	fs->ptr0030->w00AC = 9999;
	fn00412010(fp - 0x011C, 0x00, 0x9C);
	if (GetVersionExA(fp - 0x011C) == 0x00)
		return;
	Eq_3 eax_101 = VirtualAlloc(0x00, 0x04, 0x3000, 0x40);
	ptr32 esp_106;
	ptr32 ebp_107;
	byte SCZO_108;
	int32 ebx_109;
	struct Eq_207 * esi_110;
	word32 edi_111;
	byte SZO_112;
	bool C_113;
	bool Z_114;
	word32 eax_115;
	struct Eq_213 * fs_116;
	word32 ecx_117;
	word32 edx_118;
	word16 ax_119;
	byte CZ_120;
	byte cl_121;
	byte dl_122;
	byte al_123;
	byte SO_124;
	IPHLPAPI.DLL!GetTcpStatistics();
	if (eax_115 == 0x00)
		esi_110->dw0038 <= 0x00;
	Eq_113 ecx_130 = globals->t430004;
	globals->t430004 = (word32) ecx_130.u1 - 9995 + dwLoc0110;
	globals->dw43549C = fn00410000() - 9999;
	if (*(ebp_107 - 0x04) == 0x00)
	{
l00410241:
		Eq_113 cl_146 = globals->t430004;
		word32 ecx_147 = DPB(ecx_130, cl_146, 0);
		int32 eax_148 = 0x00;
		byte al_150 = 0x00;
		struct Eq_263 * esi_151 = null;
		do
		{
			esi_151[0x00434010] = (struct Eq_263) ((byte) (ecx_147 + eax_148) ^ esi_151[0x00434010] ^ al_150 ^ cl_146);
			if (eax_148 > 0x05)
			{
				eax_148 = 0x00;
				al_150 = 0x00;
			}
			else
			{
				eax_148 = eax_148 + 0x01;
				al_150 = (byte) eax_148;
			}
			esi_151 = esi_151 + 0x01;
		} while (esi_151 < (struct Eq_263 *) 0x1400);
		struct Eq_393 * eax_176 = globals->ptr43404C;
		uint32 edx_177 = eax_176->dw434014;
		*(ebp_107 - 0x38) = eax_176->dw434018;
		word32 ecx_180 = eax_176->dw43401C;
		*(ebp_107 - 0x3C) = edx_177;
		*(ebp_107 - 0x34) = ecx_180;
		*(ebp_107 - 0x30) = eax_176->dw434020;
		*(ebp_107 - 44) = eax_176->dw434024;
		*(esp_106 - 0x04) = ((edx_177 >> 0x10) + (edx_177 >> 0x10) * 0x04) * 0x08;
		word32 * esi_191 = &eax_176->dw434024 + 0x01;
		word32 ecx_196 = 0x38;
		word32 * edi_198 = ebp_107 - 0x01F8;
		while (ecx_196 != 0x00)
		{
			*edi_198 = *esi_191;
			esi_191 = esi_191 + 0x01;
			edi_198 = edi_198 + 0x01;
			ecx_196 = ecx_196 - 0x01;
		}
		*(esp_106 - 0x08) = &eax_176->dw434024 + 0x0039;
		*(esp_106 - 0x0C) = ebp_107 - 0x0388;
		word32 esi_220;
		word32 edi_221;
		ptr32 ebp_222 = fn00412090(ebx_109, dwArg00, dwArg04, dwArg08, out esi_220, out edi_221);
		int32 ebx_223 = *(ebp_222 - 448);
		*(esp_106 - 0x04) = 0x40;
		*(esp_106 - 0x08) = 0x3000;
		*(esp_106 - 0x0C) = ebx_223;
		*(esp_106 - 0x10) = 0x00;
		Eq_3 eax_234 = VirtualAlloc(*(esp_106 - 0x10), *(esp_106 - 0x0C), *(esp_106 - 0x08), *(esp_106 - 0x04));
		*(esp_106 - 0x04) = *(ebp_222 - 884);
		*(esp_106 - 0x08) = 0x00434010;
		*(esp_106 - 0x0C) = (union Eq_3 *) eax_234;
		word32 edi_245;
		word32 esi_244;
		ptr32 ebp_246 = fn00412090(ebx_223, dwArg00, dwArg04, dwArg08, out esi_244, out edi_245);
		int32 eax_247 = (word32) *(ebp_246 - 0x3A);
		if (eax_247 > 0x00)
		{
			*(ebp_246 - 0x08) = eax_247;
			word32 * edi_338 = ebp_246 - 884;
			do
			{
				word32 ecx_345 = *edi_338;
				word32 edx_346 = *(edi_338 - 0x08);
				*(esp_106 - 0x04) = *(edi_338 - 0x04);
				*(esp_106 - 0x08) = ecx_345 + 0x00434010;
				*(esp_106 - 0x0C) = edx_346 + esi_244;
				word32 edi_357;
				ebp_246 = fn00412090(ebx_223, dwArg00, dwArg04, dwArg08, out esi_244, out edi_357);
				word32 v22_362 = *(ebp_246 - 0x08) - 0x01;
				*(ebp_246 - 0x08) = v22_362;
				edi_338 = edi_357 + 0x28;
			} while (v22_362 != 0x00);
		}
		byte cl_258 = globals->b42020A;
		*(ebp_246 - 0x18) = globals->w420208;
		*(esp_106 - 0x04) = 0x0042020C;
		*(esp_106 - 0x08) = ebp_246 - 0x18;
		*(ebp_246 - 22) = cl_258;
		*(ebp_246 - 0x15) = 0x00;
		*(ebp_246 - 0x11) = 0x00;
		*(ebp_246 - 0x0D) = 0x00;
		*(ebp_246 - 0x09) = 0x00;
		lstrcatA(*(esp_106 - 0x08), *(esp_106 - 0x04));
		*(esp_106 - 0x04) = 0x00420210;
		*(esp_106 - 0x08) = ebp_246 - 0x18;
		lstrcatA(*(esp_106 - 0x08), *(esp_106 - 0x04));
		word32 eax_281 = *(ebp_246 - 444);
		*(esp_106 - 0x04) = ebp_246 - 0x18;
		word32 ebx_282 = ebx_223 - eax_281;
		*(esp_106 - 0x08) = ebx_282 + 0x01;
		word32 eax_291 = fn00411600(eax_281 + esi_244, ebx_282 + 0x01, dwArg00, dwArg04);
		word32 ecx_292 = globals->dw43549C;
		if (*(ebp_246 - 0x04) != 0x00)
			ecx_292 = ecx_292 + 0x02D5;
		word32 ecx_300 = ecx_292 + *(ebp_246 - 0x010C);
		*(esp_106 - 0x04) = ecx_300;
		*(esp_106 - 0x08) = 0x00420214;
		*(esp_106 - 0x0C) = ebp_246 - 0x28;
		globals->dw43549C = ecx_300;
		*(ebp_246 - 0x28) = 0x00;
		*(ebp_246 - 0x27) = 0x00;
		*(ebp_246 - 0x23) = 0x00;
		*(ebp_246 - 0x1F) = 0x00;
		*(ebp_246 - 0x1B) = 0x00;
		*(ebp_246 - 0x19) = 0x00;
		wsprintfA(*(esp_106 - 0x0C), *(esp_106 - 0x08), *(esp_106 - 0x10));
		*(esp_106 - 0x04) = ebp_246 - 0x28;
		*(esp_106 - 0x08) = eax_291;
		lstrcpyA(*(esp_106 - 0x08), *(esp_106 - 0x04));
		*(esp_106 - 0x04) = esi_244;
		fn00411550(ebx_282 + 0x01, dwArg00);
		*(ebp_246 - 0x08) = esi_244 + *(ebp_246 - 488);
		*(esp_106 - 0x04) = *(ebp_246 - 0x08);
		return;
	}
	Eq_265 edx_404;
	Eq_3 eax_375 = GetForegroundWindow();
	*(esp_106 - 0x04) = ebp_107 - 0x7C;
	*(esp_106 - 0x08) = (union Eq_3 *) eax_375;
	Eq_282 eax_382 = BeginPaint(*(esp_106 - 0x08), *(esp_106 - 0x04));
	ecx_130 = globals->t435498;
	if (ecx_130 == 0x01)
		edx_404 = globals->t435448;
	else
	{
		if (ecx_130 != 0x02)
			goto l00410236;
		edx_404 = globals->t435468;
	}
	*(esp_106 - 0x04) = (HBRUSH *) edx_404;
	*(esp_106 - 0x08) = ebp_107 - 116;
	*(esp_106 - 0x0C) = (HDC *) eax_382;
	FillRect(*(esp_106 - 0x0C), *(esp_106 - 0x08), *(esp_106 - 0x04));
	ecx_130 = ebp_107 - 116;
l00410236:
	*(esp_106 - 0x04) = ebp_107 - 0x7C;
	*(esp_106 - 0x08) = (union Eq_3 *) eax_375;
	EndPaint(*(esp_106 - 0x08), *(esp_106 - 0x04));
	goto l00410241;
}

// 00410920: Register Eq_3 Win32CrtStartup()
Eq_3 Win32CrtStartup()
{
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	Eq_926 eax_36 = CreateMutexA(null, 0x01, 0x00420224);
	CloseHandle(CreateFileW(&globals->t420230, 0x40000000, 0x03, null, 0x03, 0x00, 0x00));
	struct Eq_154 * ebp_230 = fp - 0x04;
	globals->dw435454 = 0x00;
	globals->dw435458 = 0x00;
	globals->dw43545C = 0x00;
	globals->dw435460 = 0x00;
	globals->dw435464 = 0x00;
	fn00412010(fp - 0x9C, 0x00, 44);
	LoadIconA(null, 0x7F00);
	LoadIconA(null, 0x7F00);
	LoadCursorA(null, 0x7F00);
	Eq_153 ebx_333 = dwArg04;
	if (RegisterClassExA(fp - 0xA0) != 0x00)
	{
		Eq_3 eax_269 = CreateWindowExA(0x0200, 0x00420240, 0x00420244, 0x000A0000, 0x80000000, 0x80000000, 0x0F, 0x0F, 0x00, null, dwArg04, 0x00);
		ShowWindow(eax_269, 0x05);
		if (eax_36 == 0x00)
		{
			if (GetMessageA(fp - 0x48, 0x00, 0x00, 0x00) != 0x00)
			{
				do
				{
					TranslateMessage(fp - 0x48);
					DispatchMessageA(fp - 0x48);
				} while (GetMessageA(fp - 0x48, 0x00, 0x00, 0x00) != 0x00);
			}
			CloseHandle(0x00);
			fs->ptr0000 = eax_14;
			return 0x00;
		}
		DestroyWindow(eax_269);
		GetStartupInfoW(fp - 0x0198);
		Eq_926 eax_302 = CreateFileW(&globals->t420258, 0x80000000, 0x03, null, 0x03, 0x00, 0x00);
		ptr32 esp_304 = fp - 0x01A4;
		if (eax_302 != ~0x00)
		{
			CloseHandle(eax_302);
			ptr32 esp_1000 = fp - 0x01A4;
			if (CoInitialize(0x00) == 0x00)
			{
				esp_1000 = fp - 0x01A4;
				if (CoCreateInstance(&globals->t4201A8, null, 0x01, &globals->t420198, fp - 0x24) >= 0x00)
				{
					struct Eq_1511 * ecx_994 = *dwLoc24;
					<anonymous> * edx_999 = ecx_994->ptr0050;
					word32 ebp_1001;
					int32 eax_1002;
					struct Eq_1522 * fs_1003;
					byte SCZO_1004;
					word32 ebx_1005;
					word32 esi_1006;
					word32 edi_1007;
					byte SZO_1008;
					bool C_1009;
					word32 ecx_1010;
					word16 ax_1011;
					bool Z_1012;
					word32 edx_1013;
					bool S_1014;
					byte dl_1015;
					word16 cx_1016;
					word16 dx_1017;
					edx_999();
					if (eax_1002 >= 0x00)
					{
						struct Eq_1511 * ecx_1022 = *dwLoc24;
						*(esp_1000 - 0x04) = fp - 0x20;
						*(esp_1000 - 0x08) = 0x004201B8;
						*(esp_1000 - 0x0C) = (struct Eq_1511 ***) dwLoc24;
						<anonymous> * eax_1030 = ecx_1022->ptr0000;
						word32 ebp_1032;
						int32 eax_1033;
						struct Eq_1567 * fs_1034;
						byte SCZO_1035;
						word32 ebx_1036;
						word32 esi_1037;
						word32 edi_1038;
						byte SZO_1039;
						bool C_1040;
						word32 ecx_1041;
						word16 ax_1042;
						bool Z_1043;
						word32 edx_1044;
						bool S_1045;
						byte dl_1046;
						word16 cx_1047;
						word16 dx_1048;
						eax_1030();
						if (eax_1033 >= 0x00)
						{
							struct Eq_1584 * ecx_1053 = *eax_36;
							*(esp_1000 - 0x04) = 0x00;
							*(esp_1000 - 0x08) = 0x00420278;
							*(esp_1000 - 0x0C) = (union Eq_926 *) eax_36;
							<anonymous> * edx_1060 = ecx_1053->ptr0018;
							ptr32 esp_1061;
							word32 ebp_1062;
							word32 eax_1063;
							struct Eq_1612 * fs_1064;
							byte SCZO_1065;
							word32 ebx_1066;
							word32 esi_1067;
							word32 edi_1068;
							byte SZO_1069;
							bool C_1070;
							word32 ecx_1071;
							word16 ax_1072;
							bool Z_1073;
							word32 edx_1074;
							bool S_1075;
							byte dl_1076;
							word16 cx_1077;
							word16 dx_1078;
							edx_1060();
							struct Eq_1584 * ecx_1080 = *eax_36;
							*(esp_1061 - 0x04) = (union Eq_926 *) eax_36;
							<anonymous> * edx_1083 = ecx_1080->ptr0008;
							ptr32 esp_1084;
							word32 ebp_1085;
							word32 eax_1086;
							struct Eq_1643 * fs_1087;
							byte SCZO_1088;
							word32 ebx_1089;
							word32 esi_1090;
							word32 edi_1091;
							byte SZO_1092;
							bool C_1093;
							word32 ecx_1094;
							word16 ax_1095;
							bool Z_1096;
							word32 edx_1097;
							bool S_1098;
							byte dl_1099;
							word16 cx_1100;
							word16 dx_1101;
							edx_1083();
							struct Eq_1511 * ecx_1103 = *dwLoc24;
							*(esp_1084 - 0x04) = (struct Eq_1511 ***) dwLoc24;
							<anonymous> * edx_1106 = ecx_1103->ptr0008;
							word32 ebp_1108;
							word32 eax_1109;
							struct Eq_1673 * fs_1110;
							byte SCZO_1111;
							word32 ebx_1112;
							word32 esi_1113;
							word32 edi_1114;
							byte SZO_1115;
							bool C_1116;
							word32 ecx_1117;
							word16 ax_1118;
							bool Z_1119;
							word32 edx_1120;
							bool S_1121;
							byte dl_1122;
							word16 cx_1123;
							word16 dx_1124;
							edx_1106();
							CoUninitialize();
						}
					}
				}
			}
			union Eq_3 * esp_833 = esp_1000 - 0x04;
			*esp_833 = (union Eq_3 *) 0x00;
			*(esp_833 - 0x04) = 0x00420298;
			*(esp_833 - 0x08) = 0x004202A0;
			*(esp_833 - 0x0C) = 0x00;
			MessageBoxA(*(esp_833 - 0x0C), *(esp_833 - 0x08), *(esp_833 - 0x04), *esp_833);
			*esp_833 = (union Eq_3 *) 0x7F00;
			*(esp_833 - 0x04) = 0x00;
			LoadCursorA(*(esp_833 - 0x04), *esp_833);
			*(esp_860 - 0x04) = fp - 0x70;
			RegisterClassA(*(esp_860 - 0x04));
			*(esp_860 - 0x04) = 0x00;
			*(esp_860 - 0x08) = (HINSTANCE *) ebx_333;
			*(esp_860 - 0x0C) = 0x00;
			*(esp_860 - 0x10) = 0x00;
			*(esp_860 - 0x14) = 0x01E0;
			*(esp_860 - 0x18) = 500;
			*(esp_860 - 0x1C) = 0x3C;
			*(esp_860 - 0x20) = 100;
			*(esp_860 - 0x24) = 0x80000000;
			*(esp_860 - 0x28) = 0x004202C0;
			*(esp_860 - 44) = 0x004202B8;
			*(esp_860 - 0x30) = 0x00;
			Eq_3 eax_912 = CreateWindowExA(*(esp_860 - 0x30), *(esp_860 - 44), *(esp_860 - 0x28), *(esp_860 - 0x24), *(esp_860 - 0x20), *(esp_860 - 0x1C), *(esp_860 - 0x18), *(esp_860 - 0x14), *(esp_860 - 0x10), *(esp_860 - 0x0C), *(esp_860 - 0x08), *(esp_860 - 0x04));
			*(esp_860 - 0x04) = 0x05;
			*(esp_860 - 0x08) = (union Eq_3 *) eax_912;
			ShowWindow(*(esp_860 - 0x08), *(esp_860 - 0x04));
			*(esp_860 - 0x04) = (union Eq_3 *) eax_912;
			UpdateWindow(*(esp_860 - 0x04));
			*(esp_860 - 0x04) = 0x00;
			*(esp_860 - 0x08) = 0x004201E8;
			*(esp_860 - 0x0C) = 0x00430000;
			*(esp_860 - 0x10) = 0x00;
			MessageBoxA(*(esp_860 - 0x10), *(esp_860 - 0x0C), *(esp_860 - 0x08), *(esp_860 - 0x04));
			*(esp_860 - 0x04) = 0x00;
			*(esp_860 - 0x08) = 0x00;
			*(esp_860 - 0x0C) = 0x00;
			*(esp_860 - 0x10) = fp - 0x0108;
			esp_304 = esp_860;
			if (GetMessageA(*(esp_860 - 0x10), *(esp_860 - 0x0C), *(esp_860 - 0x08), *(esp_860 - 0x04)) != 0x00)
			{
				do
				{
					*(esp_860 - 0x04) = fp - 0x0108;
					TranslateMessage(*(esp_860 - 0x04));
					*(esp_860 - 0x04) = fp - 0x0108;
					DispatchMessageA(*(esp_860 - 0x04));
					*(esp_860 - 0x04) = 0x00;
					*(esp_860 - 0x08) = 0x00;
					*(esp_860 - 0x0C) = 0x00;
					*(esp_860 - 0x10) = fp - 0x0108;
					esp_304 = esp_860;
				} while (GetMessageA(*(esp_860 - 0x10), *(esp_860 - 0x0C), *(esp_860 - 0x08), *(esp_860 - 0x04)) != 0x00);
			}
		}
		union Eq_3 * esp_336 = esp_304 - 0x04;
		*esp_336 = (union Eq_3 *) 0x40;
		*(esp_336 - 0x04) = 0x3000;
		*(esp_336 - 0x08) = 0x1000;
		*(esp_336 - 0x0C) = 0x00;
		Eq_3 eax_344 = VirtualAlloc(*(esp_336 - 0x0C), *(esp_336 - 0x08), *(esp_336 - 0x04), *esp_336);
		ptr32 esp_345 = (char *) esp_336 + 0x04;
		if (eax_344 == 0x00)
		{
			Eq_3 eax_631 = GetForegroundWindow();
			*esp_336 = (union Eq_3 *) 0x0064FF64;
			globals->t435468 = CreateSolidBrush(*esp_336);
			*esp_336 = (union Eq_3 *) 0x006464FF;
			globals->t435448 = CreateSolidBrush(*esp_336);
			*esp_336 = (union Eq_3 *) 0x3C;
			*(esp_336 - 0x04) = 0x00;
			*(esp_336 - 0x08) = fp - 0x0144;
			fn00412010(dwArg00, bArg04, dwArg08);
			uint32 eax_652 = 0x00;
			do
			{
				ui32 ecx_676 = eax_652 * 0x05;
				(fp - 0x013C)[ecx_676].b0000 = 0x04;
				(fp - 0x0144)[ecx_676] = eax_652;
				eax_652 = eax_652 + 0x01;
			} while (eax_652 < 0x03);
			*esp_336 = (union Eq_3 *) 0x14;
			*(esp_336 - 0x04) = 0x10;
			*(esp_336 - 0x08) = 0x10;
			*(esp_336 - 0x0C) = 0x10;
			*(esp_336 - 0x10) = 0x10;
			*(esp_336 - 0x14) = 0x03;
			*(esp_336 - 0x18) = fp - 0x0144;
			*(esp_336 - 0x1C) = 0x02;
			word32 edx_702 = globals->dw435488;
			*(esp_336 - 0x20) = edx_702;
			*(esp_336 - 0x24) = 0x03;
			*(esp_336 - 0x28) = ~0x00;
			*(esp_336 - 44) = 0x50800000;
			*(esp_336 - 0x30) = (union Eq_3 *) eax_631;
			word32 eax_715;
			byte SCZO_717;
			word32 esi_719;
			word32 edi_720;
			byte SZO_721;
			bool C_722;
			word32 ecx_723;
			word16 ax_724;
			bool Z_725;
			word32 edx_726;
			bool S_727;
			byte dl_728;
			word16 cx_729;
			word16 dx_730;
			COMCTL32.dll!CreateToolbarEx();
			if (eax_344 == 0x00)
			{
				Eq_3 eax_735 = GetForegroundWindow();
				Eq_1029 eax_737 = CreatePopupMenu();
				*(esp_345 - 0x04) = 4325832;
				*(esp_345 - 0x08) = 0x01;
				*(esp_345 - 0x0C) = 0x00;
				*(esp_345 - 0x10) = (HMENU *) eax_737;
				AppendMenuA(*(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04));
				*(esp_345 - 0x04) = 4325844;
				*(esp_345 - 0x08) = 0x02;
				*(esp_345 - 0x0C) = 0x00;
				*(esp_345 - 0x10) = (HMENU *) eax_737;
				AppendMenuA(*(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04));
				*(esp_345 - 0x04) = 0x00;
				*(esp_345 - 0x08) = 0x00;
				*(esp_345 - 0x0C) = 0x0800;
				*(esp_345 - 0x10) = (HMENU *) eax_737;
				AppendMenuA(*(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04));
				*(esp_345 - 0x04) = 0x004201E0;
				*(esp_345 - 0x08) = 0x03;
				*(esp_345 - 0x0C) = 0x00;
				*(esp_345 - 0x10) = (HMENU *) eax_737;
				AppendMenuA(*(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04));
				*(esp_345 - 0x04) = fp - 0x0154;
				*(esp_345 - 0x08) = (union Eq_3 *) eax_735;
				GetWindowRect(*(esp_345 - 0x08), *(esp_345 - 0x04));
				*(esp_345 - 0x04) = 0x00;
				*(esp_345 - 0x08) = (union Eq_3 *) eax_735;
				*(esp_345 - 0x0C) = 0x00;
				*(esp_345 - 0x10) = globals->dw435484;
				*(esp_345 - 0x14) = globals->dw435480;
				*(esp_345 - 0x18) = 0x00;
				*(esp_345 - 0x1C) = (HMENU *) eax_737;
				TrackPopupMenu(*(esp_345 - 0x1C), *(esp_345 - 0x18), *(esp_345 - 0x14), *(esp_345 - 0x10), *(esp_345 - 0x0C), *(esp_345 - 0x08), *(esp_345 - 0x04));
				ebx_333 = dwArg04;
			}
		}
		union Eq_3 * esp_361 = esp_345 - 0x04;
		*esp_361 = (union Eq_3 *) 0x50;
		Sleep(*esp_361);
		fn00410120(ebx_333, ebp_230);
		*(ebp_230 - 0x28) = globals->dw4202D4;
		*(ebp_230 - 0x24) = globals->w4202D8;
		*(ebp_230 - 0x22) = globals->b4202DA;
		*esp_361 = (union Eq_3 *) 44;
		*(esp_361 - 0x04) = 0x00;
		*(esp_361 - 0x08) = ebp_230 - 228;
		fn00412010(dwArg00, bArg04, dwArg08);
		*(ebp_230 - 232) = 0x30;
		*(ebp_230 - 0xE0) = 0x00411070;
		*(ebp_230 - 212) = (HINSTANCE *) ebx_333;
		*esp_361 = (union Eq_3 *) 0x8000;
		*(esp_361 - 0x04) = 0x00;
		*(esp_361 - 0x08) = 0x00;
		*(esp_361 - 0x0C) = 0x01;
		*(esp_361 - 0x10) = 0x7F04;
		*(esp_361 - 0x14) = 0x00;
		*(ebp_230 - 0xD0) = (union Eq_926 *) LoadImageA(*(esp_361 - 0x14), *(esp_361 - 0x10), *(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
		*esp_361 = (union Eq_3 *) 0x8000;
		*(esp_361 - 0x04) = 0x00;
		*(esp_361 - 0x08) = 0x00;
		*(esp_361 - 0x0C) = 0x02;
		*(esp_361 - 0x10) = 0x7F00;
		*(esp_361 - 0x14) = 0x00;
		*(ebp_230 - 0xCC) = (union Eq_926 *) LoadImageA(*(esp_361 - 0x14), *(esp_361 - 0x10), *(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
		*(ebp_230 - 200) = 0x10;
		*(ebp_230 - 0xC0) = ebp_230 - 0x28;
		*esp_361 = (union Eq_3 *) (ebp_230 - 232);
		if (RegisterClassExA(*esp_361) == 0x00)
		{
			*esp_361 = (union Eq_3 *) 0x10;
			*(esp_361 - 0x04) = 0x00420298;
			*(esp_361 - 0x08) = 0x00420314;
			*(esp_361 - 0x0C) = 0x00;
			MessageBoxA(*(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
			fs->ptr0000 = *(ebp_230 - 0x10);
			return 0x00;
		}
		*esp_361 = (union Eq_3 *) 0x00;
		*(esp_361 - 0x04) = (HINSTANCE *) ebx_333;
		*(esp_361 - 0x08) = 0x00;
		*(esp_361 - 0x0C) = 0x00;
		*(esp_361 - 0x10) = 0xB2;
		*(esp_361 - 0x14) = 0x0116;
		*(esp_361 - 0x18) = 0x00;
		*(esp_361 - 0x1C) = 0x00;
		*(esp_361 - 0x20) = 0x00CA0000;
		*(esp_361 - 0x24) = 0x004202DC;
		*(esp_361 - 0x28) = ebp_230 - 0x28;
		*(esp_361 - 44) = 0x00;
		Eq_3 eax_451 = CreateWindowExA(*(esp_361 - 44), *(esp_361 - 0x28), *(esp_361 - 0x24), *(esp_361 - 0x20), *(esp_361 - 0x1C), *(esp_361 - 0x18), *(esp_361 - 0x14), *(esp_361 - 0x10), *(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
		if (eax_451 != 0x00)
		{
			fn00411340(eax_451);
			*esp_361 = (union Eq_3 *) 0x004202E8;
			*(esp_361 - 0x04) = 0x004202F4;
			*(esp_361 - 0x04) = (HMODULE *) GetModuleHandleA(*(esp_361 - 0x04));
			Eq_2728 eax_465 = GetProcAddress(*(esp_361 - 0x04), *esp_361);
			globals->t435494 = eax_465;
			if (eax_465 != 0x00)
			{
				globals->t43548C = *eax_465;
				globals->w435490 = (word16) *((word32) eax_465 + 0x04);
			}
			*esp_361 = (union Eq_3 *) 0x004354A0;
			*(esp_361 - 0x04) = 0x40;
			*(esp_361 - 0x08) = 0x06;
			*(esp_361 - 0x0C) = (union Eq_2728 *) eax_465;
			VirtualProtect(*(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
			Eq_2728 eax_484 = globals->t435494;
			*eax_484 = 0x68;
			*((word32) eax_484 + 0x01) = 0x004100F0;
			*((word32) eax_484 + 0x05) = 0xC3;
			*esp_361 = (union Eq_3 *) ebp_230->t0014;
			*(esp_361 - 0x04) = (union Eq_3 *) eax_451;
			ShowWindow(*(esp_361 - 0x04), *esp_361);
			*esp_361 = (union Eq_3 *) eax_451;
			UpdateWindow(*esp_361);
			if (globals->dw43400C != 0x00)
			{
				*esp_361 = (union Eq_3 *) eax_451;
				DestroyWindow(*esp_361);
				fn00410120(ebx_333, ebp_230);
			}
			union Eq_3 * esp_502 = esp_345 - 0x04;
			*esp_502 = (union Eq_3 *) 0x00;
			*(esp_502 - 0x04) = 0x00;
			*(esp_502 - 0x08) = 0x00;
			*(esp_502 - 0x0C) = ebp_230 - 0xB8;
			if (GetMessageA(*(esp_502 - 0x0C), *(esp_502 - 0x08), *(esp_502 - 0x04), *esp_502) > 0x00)
			{
				do
				{
					LPMSG * esp_536 = esp_345 - 0x04;
					*esp_536 = (LPMSG *) (ebp_230 - 0xB8);
					*(esp_536 - 0x04) = ~0x14;
					*(esp_536 - 0x08) = (union Eq_3 *) eax_451;
					*(esp_536 - 0x04) = (int32) GetWindowLongA(*(esp_536 - 0x08), *(esp_536 - 0x04));
					*(esp_536 - 0x08) = (union Eq_3 *) eax_451;
					if (TranslateAcceleratorA(*(esp_536 - 0x08), *(esp_536 - 0x04), *esp_536) == 0x00)
					{
						*esp_536 = (LPMSG *) (ebp_230 - 0xB8);
						*(esp_536 - 0x04) = (union Eq_3 *) eax_451;
						if (IsDialogMessageA(*(esp_536 - 0x04), *esp_536) == 0x00)
						{
							*esp_536 = (LPMSG *) (ebp_230 - 0xB8);
							TranslateMessage(*esp_536);
							*esp_536 = (LPMSG *) (ebp_230 - 0xB8);
							DispatchMessageA(*esp_536);
						}
					}
					union Eq_3 * esp_557 = esp_345 - 0x04;
					*esp_557 = (union Eq_3 *) 0x00;
					*(esp_557 - 0x04) = 0x00;
					*(esp_557 - 0x08) = 0x00;
					*(esp_557 - 0x0C) = ebp_230 - 0xB8;
				} while (GetMessageA(*(esp_557 - 0x0C), *(esp_557 - 0x08), *(esp_557 - 0x04), *esp_557) > 0x00);
			}
			Eq_3 eax_520 = *(ebp_230 - 0xB0);
			fs->ptr0000 = *(ebp_230 - 0x10);
			return eax_520;
		}
		*esp_361 = (union Eq_3 *) 0x10;
		*(esp_361 - 0x04) = 0x00420298;
		*(esp_361 - 0x08) = 0x004202FC;
		*(esp_361 - 0x0C) = 0x00;
		MessageBoxA(*(esp_361 - 0x0C), *(esp_361 - 0x08), *(esp_361 - 0x04), *esp_361);
	}
	fs->ptr0000 = *(ebp_230 - 0x10);
	return 0x00;
}

// 00411340: void fn00411340(Register Eq_3 esi)
void fn00411340(Eq_3 esi)
{
	SystemParametersInfoA(0x30, 0x00, fp - 0x24, 0x00);
	GetWindowRect(esi, fp - 0x14);
	int64 edx_eax_54 = (int64) (dwLoc18 - dwLoc08 + dwLoc10);
	int64 edx_eax_65 = (int64) (dwLoc1C - dwLoc0C + dwLoc14);
	MoveWindow(esi, (word32) edx_eax_65 - SLICE(edx_eax_65, word32, 32) >> 0x01, (word32) edx_eax_54 - SLICE(edx_eax_54, word32, 32) >> 0x01, dwLoc0C - dwLoc14, dwLoc08 - dwLoc10, 0x00);
}

// 00411550: void fn00411550(Register word32 ebx, Stack Eq_3 dwArg04)
void fn00411550(word32 ebx, Eq_3 dwArg04)
{
	word32 edx_13 = *((word32) dwArg04 + 0x003C);
	Eq_3 esi_17 = *((word32) dwArg04 + (edx_13 + 0x34));
	if (dwArg04 == esi_17)
		return;
	word32 edx_57 = *((word32) dwArg04 + (edx_13 + 0xA0));
	ptr32 ecx_59 = dwArg04 - esi_17;
	if (edx_57 == 0x00)
		return;
	struct Eq_3167 * edx_113 = (word32) dwArg04 + edx_57;
	int32 eax_100 = edx_113->dw0004;
	if (eax_100 != 0x00)
	{
		do
		{
			uint32 ebx_102 = eax_100 - 0x08;
			uint32 edi_106 = 0x00;
			if (ebx_102 >> 0x01 != 0x00)
			{
				word16 * esi_119 = &edx_113->dw0004 + 0x01;
				do
				{
					ui32 eax_124 = (word32) *esi_119;
					word32 ecx_133 = (word32) ((word16) eax_124 >> 0x0C);
					word16 ax_129 = (word16) (eax_124 & 0x80000FFF);
					word16 cx_134 = (word16) ecx_133;
					if ((eax_124 & 0x80000FFF) < 0x00)
						ax_129 = (word16) (((eax_124 & 0x80000FFF) - 0x01 | ~0x0FFF) + 0x01);
					word32 eax_136 = (word32) ax_129;
					if (cx_134 != 0x00)
					{
						if (ecx_133 != 0x03)
							return;
						word32 * eax_153 = (word32) dwArg04 + (eax_136 + edx_113->dw0000);
						*eax_153 = *eax_153 + ecx_59;
					}
					edi_106 = edi_106 + 0x01;
					esi_119 = esi_119 + 0x01;
				} while (edi_106 < ebx_102 >> 0x01);
			}
			edx_113 = edx_113 + edx_113->dw0004 / 0x08;
			eax_100 = edx_113->dw0004;
		} while (eax_100 != 0x00);
	}
}

// 00411600: Register (ptr32 Eq_696) fn00411600(Register (ptr32 Eq_696) eax, Register word32 ebx, Stack Eq_3 dwArg04, Stack Eq_3 dwArg08)
Eq_696 * fn00411600(Eq_696 * eax, word32 ebx, Eq_3 dwArg04, Eq_3 dwArg08)
{
	struct Eq_696 * esi_119 = eax;
	struct Eq_696 * dwLoc08_120 = eax;
	Eq_3 eax_25 = lstrlenA(dwArg08);
	if (dwArg04 >= eax_25)
	{
		do
		{
			Eq_3 edx_144 = dwArg08;
			Eq_3 edi_147 = eax_25;
			if (eax_25 >= 0x04)
			{
				do
				{
					if (esi_119->b0000 != *edx_144)
						goto l00411648;
					edi_147 = edi_147 - 0x04;
					edx_144 = (word32) edx_144 + 0x04;
					esi_119 = esi_119 + 0x04;
				} while (edi_147 >= 0x04);
			}
			if (edi_147 == 0x00)
				return dwLoc08_120;
l00411648:
			int32 ecx_103 = (word32) (esi_119->b0000 - *edx_144);
			if (ecx_103 == 0x00)
			{
				if (edi_147 <= 0x01)
					return dwLoc08_120;
				ecx_103 = (word32) (esi_119[0x01] - *((word32) edx_144 + 0x01));
				if (ecx_103 != 0x00)
					goto l00411683;
				if (edi_147 <= 0x02)
					return dwLoc08_120;
				ecx_103 = (word32) (esi_119[0x02] - *((word32) edx_144 + 0x02));
				if (ecx_103 != 0x00)
					goto l00411683;
				if (edi_147 <= 0x03)
					return dwLoc08_120;
				ecx_103 = (word32) (esi_119[0x03] - *((word32) edx_144 + 0x03));
			}
l00411683:
			if ((ecx_103 >> 0x1F | 0x01) == 0x00)
				return dwLoc08_120;
			esi_119 = dwLoc08_120 + 0x01;
			Eq_3 ecx_118 = dwArg04 - 0x01;
			dwLoc08_120 = esi_119;
			dwArg04 = ecx_118;
		} while (ecx_118 >= eax_25);
	}
	return null;
}

// 00412010: void fn00412010(Stack Eq_168 dwArg04, Stack byte bArg08, Stack uint32 dwArg0C)
void fn00412010(Eq_168 dwArg04, byte bArg08, uint32 dwArg0C)
{
	uint32 edx_120 = dwArg0C;
	Eq_168 ecx_122 = dwArg04;
	if (dwArg0C == 0x00)
		return;
	byte al_27 = bArg08;
	ui32 eax_28 = (word32) bArg08;
	if (bArg08 != 0x00 || (dwArg0C < 0x80 || globals->dw435874 == 0x00))
	{
		Eq_168 edi_36 = dwArg04;
		if (dwArg0C >= 0x04)
		{
			ui32 ecx_66 = -dwArg04;
			ui32 ecx_67 = ecx_66 & 0x03;
			if ((ecx_66 & 0x03) != 0x00)
			{
				edx_120 = dwArg0C - (ecx_66 & 0x03);
				do
				{
					*edi_36 = bArg08;
					edi_36 = (word32) edi_36 + 0x01;
					ecx_67 = ecx_67 - 0x01;
				} while (ecx_67 != 0x00);
			}
			Eq_3513 eax_78 = eax_28 * 0x01010000 + eax_28 * 0x0101;
			al_27 = (byte) eax_78;
			edx_120 = edx_120 & 0x03;
			uint32 ecx_82 = edx_120 >> 0x02;
			if (ecx_82 != 0x00)
			{
				while (ecx_82 != 0x00)
				{
					*edi_36 = eax_78;
					edi_36 = (word32) edi_36 + 0x04;
					ecx_82 = ecx_82 - 0x01;
				}
				if (edx_120 == 0x00)
					return;
			}
		}
		do
		{
			*edi_36 = al_27;
			edi_36 = (word32) edi_36 + 0x01;
			edx_120 = edx_120 - 0x01;
		} while (edx_120 != 0x00);
	}
	else
	{
		if ((dwArg04 & 0x0F) != 0x00)
		{
			ui32 ebx_217 = -(dwArg04 & 0x0F);
			uint32 edx_220 = dwArg0C - (ebx_217 + 0x10);
			ui32 edx_226 = ebx_217 + 0x10 & 0x03;
			if (edx_226 != 0x00)
			{
				do
				{
					*ecx_122 = 0x00;
					ecx_122 = (word32) ecx_122 + 0x01;
					edx_226 = edx_226 - 0x01;
				} while (edx_226 != 0x00);
			}
			uint32 ebx_233 = ebx_217 + 0x10 >> 0x02;
			if (ebx_233 != 0x00)
			{
				do
				{
					*ecx_122 = 0x00;
					ecx_122 = (word32) ecx_122 + 0x04;
					ebx_233 = ebx_233 - 0x01;
				} while (ebx_233 != 0x00);
			}
			edx_120 = edx_220;
		}
		uint32 edx_127 = edx_120 & 0x7F;
		uint32 eax_128 = edx_120 >> 0x07;
		if (eax_128 != 0x00)
		{
			do
			{
				*ecx_122 = 0x00;
				*((word32) ecx_122 + 0x0010) = 0x00;
				*((word32) ecx_122 + 0x0020) = 0x00;
				*((word32) ecx_122 + 0x0030) = 0x00;
				*((word32) ecx_122 + 0x0040) = 0x00;
				*((word32) ecx_122 + 0x0050) = 0x00;
				*((word32) ecx_122 + 0x0060) = 0x00;
				*((word32) ecx_122 + 112) = 0x00;
				ecx_122 = (word32) ecx_122 + 0x0080;
				eax_128 = eax_128 - 0x01;
			} while (eax_128 != 0x00);
		}
		if (edx_127 != 0x00)
		{
			uint32 eax_152 = edx_127 >> 0x04;
			if (edx_127 >> 0x04 != 0x00)
			{
				do
				{
					*ecx_122 = 0x00;
					ecx_122 = (word32) ecx_122 + 0x0010;
					eax_152 = eax_152 - 0x01;
				} while (eax_152 != 0x00);
			}
			if ((edx_127 & 0x0F) != 0x00)
			{
				uint32 edx_167 = (edx_127 & 0x0F) >> 0x02;
				if (edx_167 != 0x00)
				{
					do
					{
						*ecx_122 = 0x00;
						ecx_122 = (word32) ecx_122 + 0x04;
						edx_167 = edx_167 - 0x01;
					} while (edx_167 != 0x00);
				}
				ui32 eax_172 = edx_127 & 0x0F & 0x03;
				if (eax_172 != 0x00)
				{
					do
					{
						*ecx_122 = 0x00;
						ecx_122 = (word32) ecx_122 + 0x01;
						eax_172 = eax_172 - 0x01;
					} while (eax_172 != 0x00);
				}
			}
		}
	}
}

// 00412090: Register word32 fn00412090(Register int32 ebx, Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack uint32 dwArg0C, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00412090(int32 ebx, Eq_3 dwArg04, Eq_3 dwArg08, uint32 dwArg0C, ptr32 & esiOut, ptr32 & ediOut)
{
}

