// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_28 = AddAce(null, 0x00, 0x00, null, 0x00);
	Eq_17 esi_15 = 0x00;
	word32 edi_271 = eax_28 + 0x15;
	if (AreAnyAccessesGranted(~0x00, ~0x00) == 0x00)
		edi_271 = eax_28 - 0x0D;
	struct Eq_31 * ecx_49 = null;
	do
	{
		if (esi_15 == edi_271)
			esi_15.u0 = 0x00;
		ecx_49[0x00401190] = (struct Eq_31) (ecx_49[0x00401190] ^ *((word32) esi_15 + 0x00404000));
		ecx_49 = ecx_49 + 0x01;
		esi_15 = (word32) esi_15 + 0x01;
	} while (ecx_49 < (struct Eq_31 *) 0x1440);
	up32 ebx_102 = 0x00;
	struct Eq_55 * ecx_109 = &globals->t402490;
	up32 dwLoc08_107 = 0x00;
	do
	{
		Eq_61 eax_90 = ecx_109->t0004;
		Eq_90 eax_92 = eax_90 - 0x08 >> 0x01;
		byte al_100 = (byte) eax_92;
		word16 * edx_244 = (char *) &ecx_109->t0004 + 0x04;
		if (eax_92 > 0x00)
		{
			uint32 esi_242 = eax_90 - 0x08 >> 0x01;
			do
			{
				ui32 eax_245 = (word32) *edx_244;
				al_100 = (byte) eax_245;
				if ((eax_245 & 0xF000) == 0x3000)
				{
					struct Eq_174 * eax_261 = (eax_245 & 0x0FFF) + ecx_109->dw0000;
					eax_261->dw400F10 = eax_261->dw400F10 + 4030730000;
					al_100 = (byte) &eax_261->dw400F10;
				}
				edx_244 = edx_244 + 0x01;
				esi_242 = esi_242 - 0x01;
			} while (esi_242 != 0x00);
			ebx_102 = dwLoc08_107;
		}
		ebx_102 = (word32) ecx_109->t0004 + ebx_102;
		dwLoc08_107 = ebx_102;
		ecx_109 = ecx_109 + Mem67[ecx_109 + 0x04:word32];
	} while (ebx_102 < 228);
	struct Eq_98 * esi_112 = &globals->t401C84;
	struct Eq_98 * dwLoc08_113 = &globals->t401C84;
	if (globals->dw401C94 != 0x00)
	{
		do
		{
			Eq_125 eax_150 = LoadLibraryA(esi_112->dw000C + 0x00400F10);
			al_100 = (byte) eax_150;
			if (eax_150 != null)
			{
				word32 ebx_178 = esi_112->dw0000;
				if (ebx_178 == 0x00)
					ebx_178 = esi_112->dw0010;
				word32 * ebx_183 = ebx_178 + 0x00400F10;
				word32 * esi_186 = esi_112->dw0010 + 0x00400F10;
				if (*ebx_183 != 0x00)
				{
					do
					{
						Eq_128 dwLoc1C_220;
						int32 eax_214 = *ebx_183;
						word16 ax_216 = (word16) eax_214;
						if (eax_214 < 0x00)
							dwLoc1C_220 = (word32) ax_216;
						else
							dwLoc1C_220 = eax_214 + 0x00400F12;
						Eq_202 eax_224 = GetProcAddress(eax_150, dwLoc1C_220);
						*esi_186 = (word32) eax_224;
						al_100 = (byte) eax_224;
						ebx_183 = ebx_183 + 0x01;
						esi_186 = esi_186 + 0x01;
					} while (*ebx_183 != 0x00);
				}
				esi_112 = dwLoc08_113;
			}
			esi_112 = esi_112 + 0x01;
			dwLoc08_113 = esi_112;
		} while (esi_112->dw0010 != 0x00);
	}
	fn00401960(al_100);
	*(fp - 0x1C) = 0x00;
	ExitProcess(*(fp - 0x1C));
}

// 00401960: void fn00401960(Register byte al)
void fn00401960(byte al)
{
	byte al_3;
	__daa(al, &al_3);
}

