// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040E119: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
		eax_12 = fn0040E153((byte) GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 252, fp - 0x08));
	return eax_12;
}

// 0040E153: Register ui32 fn0040E153(Register byte bl)
ui32 fn0040E153(byte bl)
{
	Eq_32 eax_10 = VirtualAlloc(0x00, 85551, 0x3000, 0x40);
	word32 ecx_17 = 0x01F6;
	union Eq_46 * esi_23 = (union Eq_46 *) 166;
	Eq_32 edi_24 = eax_10;
	uint32 edx_29 = DPB(3778601757, bl + 0x1D, 0);
	word32 ebp_173 = 0x00;
	do
	{
		*edi_24 = (word32) *edi_24 + (byte) ((char *) (*esi_23) + edx_29);
		word32 ebp_67 = ebp_173 - 460344;
		uint32 edx_170 = edx_29 >> 0x08;
		esi_23 = (union Eq_46 *) ((char *) esi_23 + 0x01);
		edi_24 = edi_24 + 0x01;
		ebp_173 = ebp_67 + 0x00070639;
		byte dl_171 = (byte) edx_170;
		if (0x04 == ebp_67 + 0x00070639)
		{
			edx_170 = 3778601757;
			dl_171 = 0x1D;
			ebp_173 = 0x00;
		}
		byte dl_78 = dl_171 + bl;
		edx_29 = DPB(edx_170, dl_78, 0);
		ecx_17 = ecx_176 - 0x01;
		word32 ecx_176 = ecx_17;
	} while (ecx_176 != 0x01);
	word32 esp_89;
	byte SCZO_92;
	ui32 ecx_94;
	word32 edx_95;
	byte dl_96;
	byte bl_97;
	struct Eq_102 * ebp_98;
	byte cl_99;
	byte SZO_100;
	byte Z_101;
	byte C_102;
	word32 ebx_103;
	byte al_104;
	byte ch_105;
	struct Eq_110 * ss_106;
	byte bh_107;
	byte * esi_121;
	byte * edi_122;
	ui32 eax_124;
	eax_10();
	if (ecx_94 == eax_124)
		return eax_124;
	__outb(0x96, al_104);
	word32 ecx_115 = ecx_94 - 0x01;
	if (ecx_94 != 0x01)
	{
		while (true)
		{
			eax_124 = DPB(eax_124, *esi_121, 0) + ebp_98->dw0023;
			word32 * esi_128 = esi_121 + 0x01;
			byte al_130 = (byte) eax_124;
			word32 ecx_133 = ecx_115 - 0x01;
			if (eax_124 != 0x00 || ecx_133 == 0x00)
				break;
			*edi_122 = al_130;
			(ui32 *) 0xA4E78057 = (ui32 *) 0xA4E78057 << 166;
			word32 * edi_156 = edi_122 + 0x01;
			*edi_156 = *esi_128;
			ecx_115 = DPB(ecx_133 + 0x01, 166, 0);
			esi_121 = (byte *) (esi_128 + 0x01);
			edi_122 = (byte *) (edi_156 + 0x01);
		}
		struct Eq_173 * ebp_137 = ebp_98 & eax_124;
		ebp_137->dwCC21B83C = ebp_137->dwCC21B83C + 0x01;
		Eq_183 esp_136 = esp_89 + 0x03 ^ ecx_133;
		*(esp_136 - 0x02) = (struct Eq_110 **) ss_106;
		Mem145[3024424002:word32] = Mem141[3024424002:word32] + (esp_136 - 0x02);
		ebp_137->bE7230F55 = ebp_137->bE7230F55 & 166;
	}
}

