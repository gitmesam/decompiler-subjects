// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040E119: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
		eax_12 = fn0040E153((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 252, fp - 0x04), 252);
	return eax_12;
}

// 0040E153: Register ui32 fn0040E153(Register byte bl, Stack word32 dwArg00)
ui32 fn0040E153(byte bl, word32 dwArg00)
{
	Eq_34 eax_10 = VirtualAlloc(0x00, 85551, 0x3000, 0x40);
	word32 ecx_19 = 0x01F6;
	union Eq_48 * esi_25 = dwArg00 + 166;
	Eq_34 edi_26 = eax_10;
	uint32 edx_31 = DPB(3778601757, bl + 0x1D, 0);
	word32 ebp_175 = 0x00;
	do
	{
		*edi_26 = (word32) *edi_26 + (byte) ((char *) (*esi_25) + edx_31);
		word32 ebp_69 = ebp_175 - 460344;
		uint32 edx_172 = edx_31 >> 0x08;
		esi_25 = (union Eq_48 *) ((char *) esi_25 + 0x01);
		edi_26 = edi_26 + 0x01;
		ebp_175 = ebp_69 + 0x00070639;
		byte dl_173 = (byte) edx_172;
		if (0x04 == ebp_69 + 0x00070639)
		{
			edx_172 = 3778601757;
			dl_173 = 0x1D;
			ebp_175 = 0x00;
		}
		byte dl_80 = dl_173 + bl;
		edx_31 = DPB(edx_172, dl_80, 0);
		ecx_19 = ecx_178 - 0x01;
		word32 ecx_178 = ecx_19;
	} while (ecx_178 != 0x01);
	word32 esp_91;
	byte SCZO_94;
	ui32 ecx_96;
	word32 edx_97;
	byte dl_98;
	byte bl_99;
	struct Eq_105 * ebp_100;
	byte cl_101;
	byte SZO_102;
	bool Z_103;
	bool C_104;
	word32 ebx_105;
	byte al_106;
	byte ch_107;
	struct Eq_113 * ss_108;
	byte bh_109;
	byte * esi_123;
	byte * edi_124;
	ui32 eax_126;
	eax_10();
	if (ecx_96 == eax_126)
		return eax_126;
	__outb(0x96, al_106);
	word32 ecx_117 = ecx_96 - 0x01;
	if (ecx_96 != 0x01)
	{
		while (true)
		{
			eax_126 = DPB(eax_126, *esi_123, 0) + ebp_100->dw0023;
			word32 * esi_130 = esi_123 + 0x01;
			byte al_132 = (byte) eax_126;
			word32 ecx_135 = ecx_117 - 0x01;
			if (eax_126 != 0x00 || ecx_135 == 0x00)
				break;
			*edi_124 = al_132;
			(ui32 *) 0xA4E78057 = (ui32 *) 0xA4E78057 << 166;
			word32 * edi_158 = edi_124 + 0x01;
			*edi_158 = *esi_130;
			ecx_117 = DPB(ecx_135 + 0x01, 166, 0);
			esi_123 = (byte *) (esi_130 + 0x01);
			edi_124 = (byte *) (edi_158 + 0x01);
		}
		struct Eq_176 * ebp_139 = ebp_100 & eax_126;
		ebp_139->dwCC21B83C = ebp_139->dwCC21B83C + 0x01;
		Eq_186 esp_138 = esp_91 + 0x03 ^ ecx_135;
		*(esp_138 - 0x02) = (struct Eq_113 **) ss_108;
		Mem147[3024424002:word32] = Mem143[3024424002:word32] + (esp_138 - 0x02);
		ebp_139->bE7230F55 = ebp_139->bE7230F55 & 166;
	}
}

