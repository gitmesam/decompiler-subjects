// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401100: void fn00401100(Register word32 esi, Register word32 edi)
void fn00401100(word32 esi, word32 edi)
{
	SetUnhandledExceptionFilter(&globals->t401000);
	fn00402AE0();
	int32 ecx_21 = globals->dw4042C0;
	__getmainargs(&globals->dw406004, &globals->dw406000, fp - 0x10, ecx_21);
	struct Eq_27 * esp_101 = fp - 44;
	word32 eax_27 = globals->dw406120;
	if (eax_27 != 0x00)
	{
		globals->dw4042D0 = eax_27;
		ptr32 edx_138 = iob;
		if (iob != 0x00)
		{
			word32 ebp_144;
			word32 ebx_145;
			byte SCZO_146;
			word32 eax_147;
			word32 edx_148;
			word32 ecx_149;
			byte SZO_150;
			bool C_151;
			bool Z_152;
			word32 esi_153;
			word32 edi_154;
			setmode();
			edx_138 = iob;
		}
		if (edx_138 != ~0x1F)
		{
			word32 eax_121 = globals->dw406120;
			esp_101->dw0004 = eax_121;
			word32 ecx_124 = iob->dw0030;
			esp_101->dw0000 = ecx_124;
			word32 ebp_127;
			word32 ebx_128;
			byte SCZO_129;
			word32 eax_130;
			word32 edx_131;
			word32 ecx_132;
			byte SZO_133;
			bool C_134;
			bool Z_135;
			word32 esi_136;
			word32 edi_137;
			setmode();
			edx_138 = iob;
		}
		if (edx_138 != ~0x3F)
		{
			word32 ebx_104 = globals->dw406120;
			esp_101->dw0004 = ebx_104;
			word32 edx_107 = iob->dw0050;
			esp_101->dw0000 = edx_107;
			word32 ebp_110;
			word32 ebx_111;
			byte SCZO_112;
			word32 eax_113;
			word32 edx_114;
			word32 ecx_115;
			byte SZO_116;
			bool C_117;
			bool Z_118;
			word32 esi_119;
			word32 edi_120;
			setmode();
		}
	}
	int32 * eax_34 = __p__fmode();
	word32 ebx_35 = globals->dw4042D0;
	*eax_34 = ebx_35;
	word32 eax_37 = fn00402AB0();
	__align(esp_101);
	struct Eq_53 * esp_38;
	word32 ebp_39;
	word32 ebx_40;
	byte SCZO_41;
	word32 * eax_42;
	word32 edx_43;
	word32 ecx_44;
	byte SZO_45;
	bool C_46;
	bool Z_47;
	word32 esi_48;
	word32 edi_49;
	_p__environ();
	word32 ecx_50 = *eax_42;
	esp_38->dw0008 = ecx_50;
	word32 edx_52 = globals->dw406000;
	esp_38->dw0004 = edx_52;
	esp_38->dw0000 = globals->dw406004;
	word32 eax_56 = fn00402990(esi_48, edi_49);
	UINT * esp_58;
	word32 ebp_59;
	Eq_93 ebx_60;
	byte SCZO_61;
	word32 eax_62;
	word32 edx_63;
	word32 ecx_64;
	byte SZO_65;
	bool C_66;
	bool Z_67;
	word32 esi_68;
	word32 edi_69;
	cexit();
	*esp_58 = (uint32) ebx_60;
	ExitProcess(*esp_58);
}

// 00401240: Register Eq_199 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	__set_app_type(0x02);
	fn00401100(esi, edi);
	fn00401260();
	return eax;
}

// 00401260: void fn00401260()
void fn00401260()
{
	atexit(*esp_7);
}

// 00401430: void fn00401430(Stack (ptr32 word32) dwArg04, Stack (ptr32 word32) dwArg08)
void fn00401430(word32 * dwArg04, word32 * dwArg08)
{
	memset(fp - 0x011C, 0x00, 0xFF);
	word32 dwLoc0124_149 = 0x00;
	void * ebx_112 = null;
	word32 dwLoc0128_142 = 0x00;
	Eq_226 eax_31 = strlen(0x00404000);
	size_t ecx_268 = 0x00;
	byte cl_269 = 0x00;
	do
	{
		byte dl_44 = (byte) (word32) *((word32) ecx_268 + 0x00404000);
		if (dl_44 != 0x0D)
		{
			byte dl_276;
			if (dl_44 != 0x0A)
				dl_276 = dl_44 - cl_269 - 0x01;
			else
				dl_276 = 0x0A;
			Mem279[ecx_268 - 0x0118 + (fp - 0x04):byte] = dl_276;
			ecx_268 = ecx_268 + 0x01;
			cl_269 = (byte) ecx_268;
			if (eax_31 - 0x01 >= ecx_268)
				continue;
			break;
		}
		Mem267[ecx_268 - 0x0118 + (fp - 0x04):byte] = 0x0D;
		ecx_268 = ecx_268 + 0x01;
		cl_269 = (byte) ecx_268;
	} while (eax_31 - 0x01 >= ecx_268);
	Eq_226 eax_56 = GetProcAddress(globals->t406030, fp - 0x011C);
	globals->t40601C = eax_56;
	word32 esp_113 = fp - 332 + 0x04;
	if (eax_56 != 0x00)
	{
		do
		{
			*esp_113 = fp - 288;
			*esp_113 = ebx_112;
			Eq_226 ebx_125 = <invalid>;
			esp_113 = esp_113 - 0x08;
			if (eax_56() != 0x00)
			{
				struct Eq_318 * edi_138 = (word32) ebx_125 + 0x04;
				if (true)
				{
					up32 dwLoc0134_176 = 0x18;
					do
					{
						int32 eax_187 = edi_138->dw0000;
						if (eax_187 != 0x01 && (eax_187 <= 0x01 && eax_187 == 0x00))
						{
							dwLoc0128_142 = dwLoc0128_142 + 0x01;
							uint32 ecx_220 = 0x80000000;
							ui32 esi_222 = edi_138->dw0000;
							int32 edx_223 = 0x1F;
							word32 esi_229 = 0x00;
							do
							{
								esi_229 = esi_229 + (word32) ((esi_222 & ecx_220) != 0x00);
								ecx_220 = ecx_220 >> 0x01;
								edx_223 = edx_223 - 0x01;
							} while (edx_223 >= 0x00);
							dwLoc0124_149 = dwLoc0124_149 + esi_229;
						}
						up32 v21_209 = dwLoc0134_176 + 0x18;
						dwLoc0134_176 = v21_209;
						edi_138 = edi_138 + 0x01;
					} while (v21_209 <= 0x00);
				}
				*dwArg04 = dwLoc0128_142;
				*dwArg08 = dwLoc0124_149;
				*esp_113 = ebx_125;
				free(*esp_113);
				return;
			}
			if (GetLastError() != 122)
				return;
			if (ebx_125 != 0x00)
			{
				*esp_113 = ebx_125;
				free(*esp_113);
			}
			*esp_113 = 0x00;
			void * eax_258 = malloc(*esp_113);
			ebx_112 = eax_258;
		} while (eax_258 != null);
	}
}

// 00401B90: Register Eq_226 fn00401B90(Register Eq_226 eax)
Eq_226 fn00401B90(Eq_226 eax)
{
	struct Eq_415 * ebx_19 = fs->ptr0018->ptr0030;
	Eq_422 ecx_20 = (word32) ebx_19->b0002;
	globals->ptr406020 = ebx_19;
	globals->t406024 = ecx_20;
	Eq_226 ebp_118 = fp - 0x04;
	word32 eax_30 = (word32) globals->t406024;
	do
		;
	while (eax_30 != 0x00);
	globals->t406030 = *((char *) **ebx_19->ptr000C->ptr0014 + 0x0010);
	globals->t406030 = GetModuleHandleA(0x00405000);
	fn00401430(fp - 500, fp - 0x01F0);
	memset(fp - 332, 0x00, 0xFF);
	Eq_226 ebx_116 = fp - 332;
	Eq_226 eax_71 = strlen(0x00404148);
	Eq_226 ecx_109 = 0x00;
	byte cl_1441 = 0x00;
	do
	{
		byte dl_83 = (byte) (word32) *((word32) ecx_109 + 0x00404148);
		if (dl_83 != 0x0D)
		{
			Eq_496 dl_1448;
			if (dl_83 != 0x0A)
				dl_1448 = dl_83 - cl_1441 - 0x01;
			else
				dl_1448.u0 = 0x0A;
			Mem1450[ecx_109 - 0x0148 + (fp - 0x04):byte] = dl_1448;
			ecx_109 = ecx_109 + 0x01;
			cl_1441 = (byte) ecx_109;
			if (eax_71 - 0x01 >= ecx_109)
				continue;
			break;
		}
		Mem1439[ecx_109 - 0x0148 + (fp - 0x04):byte] = 0x0D;
		ecx_109 = ecx_109 + 0x01;
		cl_1441 = (byte) ecx_109;
	} while (eax_71 - 0x01 >= ecx_109);
	Eq_226 edi_117 = globals->t406030;
	Eq_226 eax_114 = GetProcAddress(edi_117, fp - 332);
	Eq_226 esp_119 = fp - 0x023C;
	if (eax_114 != 0x00)
	{
		eax_114 = eax_114();
		ecx_109.u0 = <invalid>;
		ebx_116.u0 = <invalid>;
		edi_117.u0 = <invalid>;
		ebp_118.u0 = <invalid>;
		esp_119 = fp - 0x0244;
	}
	Eq_226 edx_1224;
	Eq_226 edx_1217;
	if (true)
	{
		*esp_119 = fp - 0x4C;
		GetSystemInfo(*esp_119);
		edx_1224 = fp - (struct Eq_2693 *) 0x4C;
	}
	else
	{
		*esp_119 = fp - (struct Eq_2688 *) 332;
		((word32) esp_119 + 0x04)->u0 = 0x00;
		((word32) esp_119 + 0x08)->u0 = 0xFF;
		memset(*esp_119, *((word32) esp_119 + 0x04), *((word32) esp_119 + 0x08));
		esp_119->u0 = 0x00404064;
		edi_117.u0 = 0xFF;
		Eq_226 eax_1354 = strlen(*esp_119);
		ecx_109.u0 = 0x00;
		byte cl_1358 = 0x00;
		do
		{
			byte dl_1366 = (byte) (word32) *((word16) ecx_109.u0 + 0x00404064);
			if (dl_1366 != 0x0D)
			{
				Eq_496 dl_1397;
				if (dl_1366 != 0x0A)
					dl_1397 = dl_1366 - cl_1358 - 0x01;
				else
					dl_1397.u0 = 0x0A;
				Mem1399[ecx_109 - 0x0148 + (fp - 0x04):byte] = dl_1397;
				ecx_109 = ecx_109 + 0x01;
				cl_1358 = (byte) ecx_109;
				if (eax_1354 - 0x01 >= ecx_109)
					continue;
				break;
			}
			Mem1389[ecx_109 - 0x0148 + (fp - 0x04):byte] = 0x0D;
			ecx_109 = ecx_109 + 0x01;
			cl_1358 = (byte) ecx_109;
		} while (eax_1354 - 0x01 >= ecx_109);
		*((word32) esp_119 + 0x04) = fp - (struct Eq_2688 *) 332;
		edx_1224 = globals->t406030;
		*esp_119 = edx_1224;
		globals->t4060D8 = GetProcAddress(*esp_119, *((word32) esp_119 + 0x04));
		word32 esp_1377 = esp_119 + 0x08;
		*(esp_1377 - 0x08) = fp - 0x4C;
		GetNativeSystemInfo(*(esp_1377 - (struct Eq_2693 *) 0x08));
		eax_114 = fp - (struct Eq_2688 *) 0x4C;
		if (false)
		{
l00401CD8:
			edx_1217.u0 = 0x04;
			goto l00401CDD;
		}
	}
	if (wLoc4C == 0x00)
	{
		Eq_584 esp_1233 = esp_119 - 0x04;
		*esp_1233 = eax_114;
		*(esp_1233 - 0x04) = ecx_109;
		*(esp_1233 - 0x08) = edx_1224;
		*(esp_1233 - 0x0C) = fp - (struct Eq_2688 *) 332;
		*(esp_1233 - 0x10) = esp_119;
		*(esp_1233 - 0x14) = fp - (struct Eq_2688 *) 0x04;
		*(esp_1233 - 0x18) = 0x00;
		*(esp_1233 - 0x1C) = edi_117;
		word32 eax_1251;
		word32 ebx_1252;
		word32 ecx_1253;
		ui32 edx_1254;
		__cpuid(0x01, ecx_109, &eax_1251, &ebx_1252, &ecx_1253, &edx_1254);
		globals->dw40602C = ebx_1252;
		globals->dw406028 = edx_1254;
		ebp_118 = *(esp_1233 - 0x14);
		ebx_116 = *(esp_1233 - 0x0C);
		*((word32) esp_1233 + 0x08) = 0x00;
		*((word32) esp_1233 + 0x04) = ebp_118 - 0x01C8;
		*((word32) esp_1233 + 0x0C) = 0x80;
		memset(*((word32) esp_1233 + 0x04), *((word32) esp_1233 + 0x08), *((word32) esp_1233 + 0x0C));
		ui32 esi_1279 = globals->dw406028;
		ui32 ecx_1280 = 0x01;
		uint32 edx_1282 = 0x00;
		do
		{
			(ebp_118 - 0x01C8)[edx_1282] = (word32) ((ecx_1280 & esi_1279) != 0x00);
			edx_1282 = edx_1282 + 0x01;
			ecx_1280 = ecx_1280 * 0x02;
		} while (edx_1282 <= 0x1F);
		word32 ecx_1305 = ~0x00;
		if (*(ebp_118 - 344) == 0x01)
			ecx_1305 = (word32) globals->b40602E;
		word32 esi_1309 = *(ebp_118 - 0x34);
		edx_1217.u0 = 0x02;
		if (esi_1309 != *(ebp_118 - 0x01EC))
			return edx_1217;
		if ((ecx_1305 != ~0x00 & ecx_1305 != 0x00) != 0x00 && ecx_1305 == 0x01)
		{
			edx_1217.u0 = 0x15;
			if (esi_1309 != 0x01)
				return edx_1217;
			edx_1217.u0 = 0x02;
		}
		else
			edx_1217.u0 = 0x02;
l00401CDD:
		if (globals->ptr406020->b0002 != 0x00)
			return edx_1217;
		struct Eq_691 * edx_190 = **(ebp_118 - 0x0204);
		struct Eq_700 * esi_192 = edx_190->ptr0010;
		word32 eax_194 = edx_190->dw0020;
		globals->ptr406038 = esi_192;
		globals->dw406014 = eax_194;
		((word32) esp_119 + 0x04)->u0 = 0x00;
		((word32) esp_119 + 0x08)->u0 = 0xFF;
		*esp_119 = ebx_116;
		memset(*esp_119, *((word32) esp_119 + 0x04), *((word32) esp_119 + 0x08));
		esp_119->u0 = 0x00404220;
		Eq_226 eax_202 = strlen(*esp_119);
		size_t ecx_1183 = 0x00;
		byte cl_1184 = 0x00;
		do
		{
			byte dl_214 = (byte) (word32) *((word32) ecx_1183 + 0x00404220);
			if (dl_214 != 0x0D)
			{
				Eq_496 dl_1193;
				if (dl_214 != 0x0A)
					dl_1193 = dl_214 - cl_1184 - 0x01;
				else
					dl_1193.u0 = 0x0A;
				Mem1195[ecx_1183 - 0x0148 + ebp_118:byte] = dl_1193;
				ecx_1183 = ecx_1183 + 0x01;
				cl_1184 = (byte) ecx_1183;
				if (eax_202 - 0x01 >= ecx_1183)
					continue;
				break;
			}
			Mem1182[ecx_1183 - 0x0148 + ebp_118:byte] = 0x0D;
			ecx_1183 = ecx_1183 + 0x01;
			cl_1184 = (byte) ecx_1183;
		} while (eax_202 - 0x01 >= ecx_1183);
		*((word32) esp_119 + 0x04) = ebx_116;
		*esp_119 = globals->t406030;
		globals->t406104 = GetProcAddress(*esp_119, *((word32) esp_119 + 0x04));
		struct Eq_952 * eax_231 = globals->ptr406038 + esi_192->dw003C / 0x0040;
		*(ebp_118 - (union Eq_496 *) 0x0208) = (union Eq_496 *) (eax_231 + ((word32) eax_231->w0014 + 0xE0) / 22);
		word32 esp_226 = esp_119 + 0x08;
		*(esp_226 - 0x04) = 0x00;
		*esp_226 = 0xFF;
		*(esp_226 - 0x08) = ebx_116;
		memset(*(esp_226 - (struct Eq_2693 *) 0x08), *(esp_226 - 0x04), *esp_226);
		*(esp_226 - (struct Eq_2693 *) 0x08) = 0x004042AE;
		Eq_226 eax_242 = strlen(*(esp_226 - (struct Eq_2693 *) 0x08));
		Eq_831 ecx_1158 = null;
		byte cl_1159 = 0x00;
		do
		{
			byte dl_254 = (byte) (word32) ecx_1158[4211374];
			if (dl_254 != 0x0D)
			{
				Eq_496 dl_1167;
				if (dl_254 != 0x0A)
					dl_1167 = dl_254 - cl_1159 - 0x01;
				else
					dl_1167.u0 = 0x0A;
				Mem1169[ecx_1158 - 0x0148 + ebp_118:byte] = dl_1167;
				ecx_1158 = ecx_1158 + 0x01;
				cl_1159 = (byte) ecx_1158;
				if (eax_242 - 0x01 >= ecx_1158)
					continue;
				break;
			}
			Mem1157[ecx_1158 - 0x0148 + ebp_118:byte] = 0x0D;
			ecx_1158 = ecx_1158 + 0x01;
			cl_1159 = (byte) ecx_1158;
		} while (eax_242 - 0x01 >= ecx_1158);
		Eq_496 esi_1151 = *(ebp_118 - (union Eq_496 *) 0x0208);
		bool Z_1148 = (bool) cond(0x00);
		Eq_226 edi_1153 = ebx_116;
		word32 ecx_1154 = 0x05;
		while (ecx_1154 != 0x00)
		{
			Z_1148 = (bool) cond(*esi_1462 - *edi_1463);
			esi_1151 = (word32) esi_1462 + 0x01;
			edi_1153 = (word32) edi_1463 + 0x01;
			ecx_1154 = ecx_1154 - 0x01;
			Eq_496 esi_1462 = esi_1151;
			Eq_226 edi_1463 = edi_1153;
			if (*esi_1462 == *edi_1463)
				break;
		}
		if (Z_1148)
			return 0x06;
		*esp_119 = ebx_116;
		Mem318[esp_119 + 0x08:word32] = 0xFF;
		((word32) esp_119 + 0x04)->u0 = 0x00;
		memset(*esp_119, *((word32) esp_119 + 0x04), Mem319[esp_119 + 0x08:size_t]);
		esp_119->u0 = 0x004041E4;
		Eq_226 eax_322 = strlen(*esp_119);
		size_t ecx_1125 = 0x00;
		byte cl_1126 = 0x00;
		do
		{
			byte dl_334 = (byte) (word32) *((word32) ecx_1125 + 0x004041E4);
			if (dl_334 != 0x0D)
			{
				Eq_496 dl_1132;
				if (dl_334 != 0x0A)
					dl_1132 = dl_334 - cl_1126 - 0x01;
				else
					dl_1132.u0 = 0x0A;
				Mem1134[ecx_1125 - 0x0148 + ebp_118:byte] = dl_1132;
				ecx_1125 = ecx_1125 + 0x01;
				cl_1126 = (byte) ecx_1125;
				if (eax_322 - 0x01 >= ecx_1125)
					continue;
				break;
			}
			Mem1124[ecx_1125 - 0x0148 + ebp_118:byte] = 0x0D;
			ecx_1125 = ecx_1125 + 0x01;
			cl_1126 = (byte) ecx_1125;
		} while (eax_322 - 0x01 >= ecx_1125);
		*(esp_226 - 0x04) = ebx_116;
		*(esp_226 - (struct Eq_2693 *) 0x08) = globals->t406030;
		Eq_226 eax_348 = GetProcAddress(*(esp_226 - (struct Eq_2693 *) 0x08), *(esp_226 - 0x04));
		globals->t406110 = eax_348;
		Eq_226 si_347 = 0x00;
		Eq_1069 esp_1068 = esp_226 - 0x08;
		do
		{
			*esp_1068 = 0x00;
			*((word32) esp_1068 + 0x08) = 0x02;
			*((word32) esp_1068 + 0x04) = (word32) si_347;
			int32 eax_374 = eax_348();
			si_347.u0 = <invalid>;
			Eq_226 ebx_1052 = <invalid>;
			Eq_226 esi_369 = <invalid>;
			Eq_226 ebp_1049 = <invalid>;
			esp_1068 = esp_1068 - 0x0C;
		} while ((esi_369 <= 0xFE & eax_374 == 0x00) != 0x00);
		if (esi_369 <= 0xFE)
		{
			if (eax_374 == 0x00)
				return 0x06;
			*esp_1068 = ebx_1052;
			*((word32) esp_1068 + 0x04) = 0x00;
			*((word32) esp_1068 + 0x08) = 0xFF;
			memset(*esp_1068, *((word32) esp_1068 + 0x04), *((word32) esp_1068 + 0x08));
			*esp_1068 = 4211186;
			Eq_226 eax_966 = strlen(*esp_1068);
			Eq_1134 ecx_1096 = null;
			byte cl_1097 = 0x00;
			do
			{
				byte dl_978 = (byte) (word32) ecx_1096[4211186];
				if (dl_978 != 0x0D)
				{
					byte dl_1103;
					if (dl_978 != 0x0A)
						dl_1103 = dl_978 - cl_1097 - 0x01;
					else
						dl_1103 = 0x0A;
					Mem1105[ecx_1096 - 0x0148 + ebp_1049:byte] = dl_1103;
					ecx_1096 = ecx_1096 + 0x01;
					cl_1097 = (byte) ecx_1096;
					if (eax_966 - 0x01 >= ecx_1096)
						continue;
					break;
				}
				*((word32) ebp_1049 + (ecx_1096 - 0x0148)) = 0x0D;
				ecx_1096 = (Eq_1134) (ecx_1096 + 0x01);
				cl_1097 = (byte) ecx_1096;
			} while (eax_966 - 0x01 >= ecx_1096);
			*((word32) esp_1068 + 0x04) = ebx_1052;
			*esp_1068 = globals->t406030;
			Eq_226 eax_984 = GetProcAddress(*esp_1068, *((word32) esp_1068 + 0x04));
			globals->t40610C = eax_984;
			*((word32) esp_1068 + 0x04) = eax_374;
			*esp_1068 = 0x00;
			int32 eax_999 = eax_984();
			Eq_226 ebx_995 = <invalid>;
			Eq_226 ebp_992 = <invalid>;
			if (eax_999 == 0x00)
				return 0x06;
			*(esp_1068 - 0x08) = ebx_995;
			*esp_1068 = 0xFF;
			*(esp_1068 - 0x04) = 0x00;
			memset(*(esp_1068 - (struct Eq_2693 *) 0x08), *(esp_1068 - 0x04), *esp_1068);
			*(esp_1068 - (struct Eq_2693 *) 0x08) = 4211199;
			Eq_226 eax_1024 = strlen(*(esp_1068 - (struct Eq_2693 *) 0x08));
			Eq_1246 ecx_1027 = null;
			byte cl_1028 = 0x00;
			do
			{
				byte dl_1036 = (byte) (word32) ecx_1027[4211199];
				if (dl_1036 != 0x0D)
				{
					Eq_1267 dl_1080;
					if (dl_1036 != 0x0A)
						dl_1080 = dl_1036 - cl_1028 - 0x01;
					else
						dl_1080 = (Eq_1267) 0x0A;
					Mem1082[ecx_1027 - 0x0148 + ebp_992:byte] = dl_1080;
					ecx_1027 = (Eq_1246) (ecx_1027 + 0x01);
					cl_1028 = (byte) ecx_1027;
					if (eax_1024 - 0x01 >= ecx_1027)
						continue;
					break;
				}
				*((word32) ebp_992 + (ecx_1027 - 0x0148)) = 0x0D;
				ecx_1027 = (Eq_1246) (ecx_1027 + 0x01);
				cl_1028 = (byte) ecx_1027;
			} while (eax_1024 - 0x01 >= ecx_1027);
			*(esp_1068 - 0x04) = ebx_995;
			*(esp_1068 - (struct Eq_2693 *) 0x08) = globals->t406030;
			Eq_226 eax_1042 = GetProcAddress(*(esp_1068 - (struct Eq_2693 *) 0x08), *(esp_1068 - 0x04));
			globals->t406108 = eax_1042;
			*(esp_1068 - 0x08) = eax_999;
			eax_1042();
			ebx_1052.u0 = <invalid>;
			ebp_1049.u0 = <invalid>;
			esp_1068 = esp_1068 - 0x0C;
		}
		Mem417[0x00406034:word32] = Mem365[Mem365[Mem365[Mem365[ebp_1049 - 0x0204 + 0x00:word32] + 0x00:word32] + 0x00:word32] + 0x10:word32];
		*esp_1068 = 0x00405009;
		globals->t406034 = GetModuleHandleA(*esp_1068);
		word32 esp_420 = esp_1068 + 0x04;
		*((word32) esp_420 + 0x04) = 0xFF;
		*esp_420 = 0x00;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		*(esp_420 - (struct Eq_2693 *) 0x04) = 0x004041C0;
		Eq_226 eax_429 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		size_t ecx_432 = 0x00;
		byte cl_433 = 0x00;
		do
		{
			byte dl_441 = (byte) (word32) *((word32) ecx_432 + 0x004041C0);
			if (dl_441 != 0x0D)
			{
				byte dl_942;
				if (dl_441 != 0x0A)
					dl_942 = dl_441 - cl_433 - 0x01;
				else
					dl_942 = 0x0A;
				Mem944[ecx_432 - 0x0148 + ebp_1049:byte] = dl_942;
				ecx_432 = ecx_432 + 0x01;
				cl_433 = (byte) ecx_432;
				if (eax_429 - 0x01 >= ecx_432)
					continue;
				break;
			}
			Mem934[ecx_432 - 0x0148 + ebp_1049:byte] = 0x0D;
			ecx_432 = ecx_432 + 0x01;
			cl_433 = (byte) ecx_432;
		} while (eax_429 - 0x01 >= ecx_432);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406034;
		globals->t4060F4 = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		*esp_420 = 0x00;
		*((word32) esp_420 + 0x04) = 0xFF;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		*(esp_420 - (struct Eq_2693 *) 0x04) = 0x00404182;
		Eq_226 eax_461 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		size_t ecx_464 = 0x00;
		byte cl_465 = 0x00;
		do
		{
			byte dl_473 = (byte) (word32) *((word32) ecx_464 + 4211074);
			if (dl_473 != 0x0D)
			{
				byte dl_919;
				if (dl_473 != 0x0A)
					dl_919 = dl_473 - cl_465 - 0x01;
				else
					dl_919 = 0x0A;
				Mem921[ecx_464 - 0x0148 + ebp_1049:byte] = dl_919;
				ecx_464 = ecx_464 + 0x01;
				cl_465 = (byte) ecx_464;
				if (eax_461 - 0x01 >= ecx_464)
					continue;
				break;
			}
			Mem911[ecx_464 - 0x0148 + ebp_1049:byte] = 0x0D;
			ecx_464 = ecx_464 + 0x01;
			cl_465 = (byte) ecx_464;
		} while (eax_461 - 0x01 >= ecx_464);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406034;
		globals->t406100 = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		*(ebp_1049 - (byte *) 488) = 0x4F;
		*(ebp_1049 - (byte *) 0x01E7) = 118;
		*(ebp_1049 - (byte *) 0x01E6) = 88;
		*(ebp_1049 - (byte *) 0x01E5) = 114;
		*(ebp_1049 - (byte *) 484) = 114;
		*(ebp_1049 - (byte *) 0x01E3) = 0x67;
		*(ebp_1049 - (byte *) 0x01E2) = 0x77;
		*(ebp_1049 - (byte *) 0x01E1) = 0x5E;
		*(ebp_1049 - (byte *) 0x01E0) = 114;
		*(ebp_1049 - (byte *) 0x01DF) = 111;
		*(ebp_1049 - (byte *) 0x01DE) = 0x82;
		*(ebp_1049 - (byte *) 0x01DD) = 0x5B;
		*(ebp_1049 - (byte *) 0x01DC) = 115;
		*(ebp_1049 - (byte *) 0x01DB) = 0x61;
		*(ebp_1049 - (byte *) 474) = 116;
		*(ebp_1049 - (byte *) 0x01D9) = 115;
		*(ebp_1049 - (byte *) 0x01D8) = 133;
		*(ebp_1049 - (byte *) 0x01D7) = 0x7B;
		*(ebp_1049 - (byte *) 0x01D6) = 0x82;
		*(ebp_1049 - (byte *) 0x01D5) = 0x82;
		*(ebp_1049 - (byte *) 0x01D4) = 0x00;
		*(ebp_1049 - (byte *) 0x01D3) = 0x00;
		*(ebp_1049 - (byte *) 466) = 0x00;
		*(ebp_1049 - (byte *) 0x01D1) = 0x00;
		*(ebp_1049 - (byte *) 464) = 0x00;
		*(ebp_1049 - (byte *) 0x01CF) = 0x00;
		*(ebp_1049 - (byte *) 0x01CE) = 0x00;
		*esp_420 = 0x00;
		*((word32) esp_420 + 0x04) = 0xFF;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		byte * esi_482 = ebp_1049 - (byte *) 488;
		*(esp_420 - (struct Eq_2693 *) 0x04) = esi_482;
		Eq_226 eax_522 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		Eq_1737 ecx_525 = null;
		byte cl_526 = 0x00;
		do
		{
			byte dl_534 = (byte) (word32) Mem521[ecx_525 + esi_482:byte];
			if (dl_534 != 0x0D)
			{
				byte dl_896;
				if (dl_534 != 0x0A)
					dl_896 = dl_534 - cl_526 - 0x01;
				else
					dl_896 = 0x0A;
				Mem898[ecx_525 - 0x0148 + ebp_1049:byte] = dl_896;
				ecx_525 = ecx_525 + 0x01;
				cl_526 = (byte) ecx_525;
				if (eax_522 - 0x01 >= ecx_525)
					continue;
				break;
			}
			*((word16) ebp_1049.u0 + (ecx_525 - 0x0148)) = 0x0D;
			ecx_525 = (Eq_1737) (ecx_525 + 0x01);
			cl_526 = (byte) ecx_525;
		} while (eax_522 - 0x01 >= ecx_525);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406034;
		globals->t4060FC = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		*((word32) esp_420 + 0x04) = 0xFF;
		*esp_420 = 0x00;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		*(esp_420 - (struct Eq_2693 *) 0x04) = 4211112;
		Eq_226 eax_554 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		size_t ecx_557 = 0x00;
		byte cl_558 = 0x00;
		do
		{
			byte dl_566 = (byte) (word32) *((word32) ecx_557 + 4211112);
			if (dl_566 != 0x0D)
			{
				byte dl_873;
				if (dl_566 != 0x0A)
					dl_873 = dl_566 - cl_558 - 0x01;
				else
					dl_873 = 0x0A;
				Mem875[ecx_557 - 0x0148 + ebp_1049:byte] = dl_873;
				ecx_557 = ecx_557 + 0x01;
				cl_558 = (byte) ecx_557;
				if (eax_554 - 0x01 >= ecx_557)
					continue;
				break;
			}
			Mem865[ecx_557 - 0x0148 + ebp_1049:byte] = 0x0D;
			ecx_557 = ecx_557 + 0x01;
			cl_558 = (byte) ecx_557;
		} while (eax_554 - 0x01 >= ecx_557);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406034;
		globals->t4060F8 = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		*((word32) esp_420 + 0x04) = 0xFF;
		*esp_420 = 0x00;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		*(esp_420 - (struct Eq_2693 *) 0x04) = 4211157;
		Eq_226 eax_587 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		size_t ecx_590 = 0x00;
		byte cl_591 = 0x00;
		do
		{
			byte dl_599 = (byte) (word32) *((word32) ecx_590 + 4211157);
			if (dl_599 != 0x0D)
			{
				byte dl_850;
				if (dl_599 != 0x0A)
					dl_850 = dl_599 - cl_591 - 0x01;
				else
					dl_850 = 0x0A;
				Mem852[ecx_590 - 0x0148 + ebp_1049:byte] = dl_850;
				ecx_590 = ecx_590 + 0x01;
				cl_591 = (byte) ecx_590;
				if (eax_587 - 0x01 >= ecx_590)
					continue;
				break;
			}
			Mem842[ecx_590 - 0x0148 + ebp_1049:byte] = 0x0D;
			ecx_590 = ecx_590 + 0x01;
			cl_591 = (byte) ecx_590;
		} while (eax_587 - 0x01 >= ecx_590);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406030;
		globals->t406114 = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		*esp_420 = 0x00;
		*((word32) esp_420 + 0x04) = 0xFF;
		*(esp_420 - 0x04) = ebx_1052;
		memset(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420, *((word32) esp_420 + 0x04));
		*(esp_420 - (struct Eq_2693 *) 0x04) = 0x0040401F;
		Eq_226 eax_619 = strlen(*(esp_420 - (struct Eq_2693 *) 0x04));
		size_t ecx_622 = 0x00;
		byte cl_623 = 0x00;
		do
		{
			byte dl_631 = (byte) (word32) *((word32) ecx_622 + 0x0040401F);
			if (dl_631 != 0x0D)
			{
				byte dl_827;
				if (dl_631 != 0x0A)
					dl_827 = dl_631 - cl_623 - 0x01;
				else
					dl_827 = 0x0A;
				Mem829[ecx_622 - 0x0148 + ebp_1049:byte] = dl_827;
				ecx_622 = ecx_622 + 0x01;
				cl_623 = (byte) ecx_622;
				if (eax_619 - 0x01 >= ecx_622)
					continue;
				break;
			}
			Mem819[ecx_622 - 0x0148 + ebp_1049:byte] = 0x0D;
			ecx_622 = ecx_622 + 0x01;
			cl_623 = (byte) ecx_622;
		} while (eax_619 - 0x01 >= ecx_622);
		*esp_420 = ebx_1052;
		*(esp_420 - (struct Eq_2693 *) 0x04) = globals->t406030;
		globals->t406118 = GetProcAddress(*(esp_420 - (struct Eq_2693 *) 0x04), *esp_420);
		Eq_226 ecx_644 = globals->t4060F4;
		if (ecx_644 == 0x00 || (globals->t406100 == 0x00 || (globals->t4060FC == 0x00 || (globals->t4060F8 == 0x00 || globals->t406114 == 0x00))))
			return 0x04;
		struct Eq_415 * edx_680 = globals->ptr406020;
		*((word32) esp_420 + 0x0C) = ebp_1049 - 0x01F8;
		*((word32) esp_420 + 0x04) = (char *) &edx_680->ptr000C + 0x00001D74;
		*esp_420 = 4199344;
		*((word32) esp_420 + 0x08) = 0x04;
		*(esp_420 - 0x04) = ~0x00;
		ptr32 esp_691;
		ptr32 ebp_692;
		word32 edi_693;
		word32 esi_694;
		word32 ebx_695;
		byte SCZO_696;
		struct Eq_2120 * fs_697;
		word32 ecx_698;
		word32 eax_699;
		struct Eq_2123 * ss_700;
		byte SZO_701;
		bool C_702;
		bool Z_703;
		word32 edx_704;
		byte dl_705;
		byte cl_706;
		byte al_707;
		byte CZ_708;
		bool D_709;
		word16 si_710;
		ecx_644();
		word32 esi_711 = *(ebp_692 - 0x020C);
		*(esp_691 - 0x04) = ebp_692 - 0x01FC;
		*(esp_691 - 0x08) = 0x04;
		*(esp_691 - 0x0C) = esi_711 + 0x68;
		*(esp_691 - 0x10) = 4199344;
		*(esp_691 - 0x14) = ~0x00;
		word32 esp_723;
		ptr32 ebp_724;
		word32 esi_726;
		word32 ebx_727;
		byte SCZO_728;
		struct Eq_2177 * fs_729;
		word32 ecx_730;
		word32 eax_731;
		struct Eq_2180 * ss_732;
		byte SZO_733;
		bool C_734;
		bool Z_735;
		word32 edx_736;
		byte dl_737;
		byte cl_738;
		byte al_739;
		byte CZ_740;
		bool D_741;
		word16 si_742;
		struct Eq_2191 * edi_725;
		globals->t4060F4();
		edx_1217.u0 = 0x05;
		word32 * esp_745 = esp_723 - 0x14;
		if (*(ebp_724 - 0x0210) <= 0x01)
			return edx_1217;
		word32 eax_750 = *((char *) *(ebp_724 - 0x0208) + 0x08);
		*(ebp_724 - 0x0218) = &edi_725->b0001 + 0x09;
		globals->dw406010 = &edi_725->b0001 + 0x09;
		int32 edx_752 = &edi_725->b0001 + 0x09;
		word32 esi_759 = eax_750 - 0x0A;
		if (eax_750 != 0x0A)
		{
			while (true)
			{
				word32 eax_785 = (word32) edi_725->b0001;
				byte al_786 = (byte) eax_785;
				Eq_2251 esi_787[] = esi_759 - 0x01;
				(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&esi_787[edx_752].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&esi_787[edx_752].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] ^ al_786;
				word32 ebp_794;
				word32 ebx_797;
				byte SCZO_798;
				struct Eq_2257 * fs_799;
				word32 ecx_800;
				word32 eax_801;
				struct Eq_2260 * ss_802;
				byte SZO_803;
				bool C_804;
				bool Z_805;
				word32 edx_806;
				byte dl_807;
				byte cl_808;
				byte al_809;
				byte CZ_810;
				bool D_811;
				word16 si_812;
				ntdll.dll!NtYieldExecution();
				if (esi_759 == 0x00)
					break;
				edx_752 = globals->dw406010;
			}
		}
		*esp_745 = 0x004015F0;
	}
	goto l00401CD8;
}

// 00402990: Register word32 fn00402990(Register word32 esi, Register word32 edi)
word32 fn00402990(word32 esi, word32 edi)
{
	__align(fp - 0x6C);
	fn00402EF0(0x10, dwLoc70);
	fn00402B90(esi);
	Eq_2431 eax_14 = GetCommandLineA();
	GetStartupInfoA(fp - 0x5C);
	Eq_2431 ebx_108 = eax_14;
	Eq_2442 eax_128 = fp - 0x5C;
	if (eax_14 != 0x00)
	{
		while (true)
		{
			byte cl_140 = (byte) (word32) *ebx_108;
			edx = DPB(edx, cl_140 == 0x09, 0);
			eax_128 = DPB(eax_128, cl_140 == 0x20, 0) | edx;
			if (((byte) eax_128 & 0x01) == 0x00)
				break;
			ebx_108 = ebx_108 + 0x01;
		}
		ui32 edx_133;
		if (cl_140 != 0x22)
		{
			eax_128 = DPB(eax_128, cl_140 != 0x20, 0);
			edx_133 = (word32) (cl_140 != 0x09);
			if ((eax_128 & edx_133) != 0x00)
			{
				while (cl_140 != 0x00)
				{
					ebx_108 = ebx_108 + 0x01;
					cl_140 = (byte) (word32) *ebx_108;
					eax_128 = DPB(eax_128, cl_140 != 0x20, 0);
					edx_133 = (word32) (cl_140 != 0x09);
					if ((eax_128 & edx_133) == 0x00)
						break;
				}
			}
		}
		else
		{
			do
			{
				ebx_108 = ebx_108 + 0x01;
				cl_140 = (byte) (word32) *ebx_108;
				eax_128 = DPB(eax_128, cl_140 != 0x22, 0);
				edx_133 = (word32) (cl_140 != 0x00);
			} while ((eax_128 & edx_133) != 0x00);
			if (cl_140 == 0x22)
			{
				ebx_108 = ebx_108 + 0x01;
				cl_140 = (byte) (word32) Mem0[ebx_108 + 0x01:byte];
			}
		}
		Eq_2504 eax_106 = DPB(eax_128, cl_140 == 0x20, 0);
		ui32 edx_101 = DPB(edx_133, cl_140 == 0x09, 0);
		while (true)
		{
			ui32 eax_109 = eax_106 | edx_101;
			if (((byte) eax_109 & 0x01) == 0x00)
				break;
			ebx_108 = ebx_108 + 0x01;
			byte cl_116 = (byte) (word32) *ebx_108;
			edx_101 = DPB(edx_101, cl_116 == 0x20, 0);
			eax_106.u0 = DPB(eax_109, cl_116 == 0x09, 0);
		}
	}
	Eq_226 eax_32 = GetModuleHandleA(0x00);
	return fn00401B90(eax_32);
}

// 00402AB0: Register (ptr32 Eq_2562) fn00402AB0()
Eq_2562 * fn00402AB0()
{
	struct Eq_2563 * ecx_11 = (struct Eq_2563 *) 0x004050F4;
	while (ecx_11 < &globals->t4050EC)
	{
		struct Eq_2562 * edx_17 = ecx_11->dw0000;
		eax = ecx_11->dw0000;
		edx_17->dw400000 = eax + edx_17->dw400000 / 0x00400004;
		ecx_11 = ecx_11 + 0x01;
	}
	return eax;
}

// 00402AE0: void fn00402AE0()
void fn00402AE0()
{
	__fninit();
}

// 00402B90: void fn00402B90(Register word32 esi)
void fn00402B90(word32 esi)
{
	word32 * esp_57 = fp - 0x0C;
	if (globals->dw406130 == 0x00)
	{
		ui32 eax_34 = globals->dw403020;
		globals->dw406130 = 0x01;
		if (eax_34 == ~0x00)
		{
			eax_34 = 0x00;
			bool Z_77 = (bool) cond(globals->dw403024);
			while (Z_77)
			{
				eax_34 = eax_34 + 0x01;
				Z_77 = (bool) cond((&globals->dw403024)[eax_34]);
			}
		}
		if (eax_34 != 0x00)
		{
			do
			{
				word32 ebp_61;
				word32 ebx_62;
				byte SCZO_63;
				word32 eax_64;
				byte SZO_65;
				bool C_66;
				bool Z_67;
				word32 esi_68;
				word32 ecx_69;
				word32 edx_70;
				fn90909090();
			} while (ebx_62 != 0x01);
		}
		*esp_57 = 0x00402AF0;
		fn00401260();
	}
}

// 00402EF0: void fn00402EF0(Register uint32 eax, Stack (ptr32 code) dwArg00)
void fn00402EF0(uint32 eax, code * dwArg00)
{
	struct Eq_2638 * ecx_10 = fp + 0x04;
	while (eax >= 0x1000)
	{
		ecx_10 = ecx_10 - 0x1000;
		ecx_10->dw0000 = ecx_10->dw0000;
		eax = eax - 0x1000;
	}
	word32 * ecx_22 = ecx_10 - eax;
	*ecx_22 = *ecx_22;
	word32 esp_32;
	word32 ecx_33;
	byte SCZO_34;
	word32 eax_35;
	bool C_36;
	byte SZO_37;
	dwArg00();
}

