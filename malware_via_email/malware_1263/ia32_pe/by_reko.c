// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040102C: Register word32 fn0040102C(Register out ptr32 ebpOut)
word32 fn0040102C(ptr32 & ebpOut)
{
	fn0040390E();
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	int32 eax_34 = MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	if (true)
	{
		word32 esp_38;
		word32 ebp_39;
		byte SCZO_40;
		word32 ebx_41;
		word32 esi_42;
		word32 edi_43;
		word32 eax_44;
		byte C_45;
		fn0145795D();
		return eax_44;
	}
}

// 0040390E: void fn0040390E()
void fn0040390E()
{
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	int32 dwLoc08_37 = 0x00;
	while (dwLoc08_37 < 5000000)
	{
		operator delete(fp - 0x18);
		dwLoc08_37 = dwLoc08_37 + 0x01;
	}
}

// 00404836: Register Eq_67 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_36;
	word32 ebp_37;
	word32 eax_38;
	struct Eq_77 * fs_39;
	byte SCZO_40;
	word32 ebx_41;
	word32 esi_42;
	word32 edi_43;
	byte SZO_44;
	byte C_45;
	word32 ecx_46;
	byte Z_47;
	byte al_48;
	byte bl_49;
	byte CZ_50;
	_set_app_type();
	globals->dw40745C = globals->dw40745C | ~0x00;
	globals->dw407460 = globals->dw407460 | ~0x00;
	word32 esp_60;
	word32 ebp_61;
	word32 * eax_62;
	struct Eq_104 * fs_63;
	byte SCZO_64;
	word32 ebx_65;
	word32 esi_66;
	word32 edi_67;
	byte SZO_68;
	byte C_69;
	word32 ecx_70;
	byte Z_71;
	byte al_72;
	byte bl_73;
	byte CZ_74;
	_p__fmode();
	word32 ecx_75 = globals->dw407458;
	*eax_62 = ecx_75;
	word32 ebp_78;
	word32 * eax_79;
	struct Eq_126 * fs_80;
	byte SCZO_81;
	word32 ebx_82;
	word32 esi_83;
	word32 edi_84;
	byte SZO_85;
	byte C_86;
	word32 ecx_87;
	byte Z_88;
	byte al_89;
	byte bl_90;
	byte CZ_91;
	ptr32 esp_275;
	_p__commode();
	word32 ecx_92 = globals->dw407454;
	*eax_79 = ecx_92;
	word32 eax_95 = *adjust_fdiv;
	globals->dw407464 = eax_95;
	fn004049B5();
	if (globals->dw406830 == 0x00)
	{
		*(esp_275 - 0x04) = 0x004049B2;
		word32 esp_259;
		word32 ebp_260;
		word32 eax_261;
		struct Eq_296 * fs_262;
		byte SCZO_263;
		word32 ebx_264;
		word32 esi_265;
		word32 edi_266;
		byte SZO_267;
		byte C_268;
		word32 ecx_269;
		byte Z_270;
		byte al_271;
		byte bl_272;
		byte CZ_273;
		_setusermatherr();
		esp_275 = esp_259 + 0x04;
	}
	fn004049A0();
	word32 * esp_100 = esp_275 - 0x04;
	*esp_100 = 0x00406010;
	*(esp_100 - 0x04) = 0x0040600C;
	ptr32 esp_104;
	word32 ebp_105;
	word32 eax_106;
	struct Eq_181 * fs_107;
	byte SCZO_108;
	word32 ebx_109;
	word32 esi_110;
	word32 edi_111;
	byte SZO_112;
	byte C_113;
	word32 ecx_114;
	byte Z_115;
	byte al_116;
	byte bl_117;
	byte CZ_118;
	initterm();
	*(esp_104 - 0x04) = fp - 0x70;
	*(esp_104 - 0x08) = globals->dw40744C;
	*(esp_104 - 0x0C) = fp - 0x68;
	*(esp_104 - 0x10) = fp - 116;
	*(esp_104 - 0x14) = fp - 100;
	ptr32 esp_136;
	word32 ebp_137;
	word32 eax_138;
	struct Eq_233 * fs_139;
	byte SCZO_140;
	word32 ebx_141;
	word32 esi_142;
	word32 edi_143;
	byte SZO_144;
	byte C_145;
	word32 ecx_146;
	byte Z_147;
	byte al_148;
	byte bl_149;
	byte CZ_150;
	_getmainargs();
	*(esp_136 - 0x04) = 0x00406008;
	*(esp_136 - 0x08) = 0x00406000;
	struct Eq_259 * esp_155;
	word32 ebp_156;
	word32 eax_157;
	struct Eq_262 * fs_158;
	byte SCZO_159;
	word32 ebx_160;
	word32 esi_161;
	word32 edi_162;
	byte SZO_163;
	byte C_164;
	word32 ecx_165;
	byte Z_166;
	byte al_167;
	cu8 bl_168;
	byte CZ_169;
	initterm();
	cu8 * esi_172 = *acmdln;
	if (*esi_172 == 0x22)
	{
		do
		{
			esi_172 = esi_172 + 0x01;
			cu8 al_237 = *esi_172;
		} while (al_237 != bl_168 && al_237 != 0x22);
		if (*esi_172 == 0x22)
		{
l00404925:
			esi_172 = esi_172 + 0x01;
		}
	}
	else
	{
		while (*esi_172 > 0x20)
			esi_172 = esi_172 + 0x01;
	}
	cu8 al_181 = *esi_172;
	if (al_181 == bl_168 || al_181 > 0x20)
	{
		word32 eax_196;
		esp_155->t0020 = fp - 0x60;
		GetStartupInfoA(esp_155->t0020);
		if (0x00 != 0x00)
			eax_196 = (word32) wLoc30;
		else
		{
			esp_155->dw001C = 0x0A;
			eax_196 = esp_155->dw001C;
		}
		esp_155->dw001C = eax_196;
		esp_155->ptr0018 = esi_172;
		esp_155->dw0014 = 0x00;
		esp_155->t0010 = null;
		esp_155->t000C = GetModuleHandleA(esp_155->t0010);
		ptr32 ebp_209;
		int32 eax_210 = fn0040102C(out ebp_209);
		*(ebp_209 - 0x68) = eax_210;
		esp_155->dw0008 = eax_210;
		exit(esp_155->dw0008);
	}
	goto l00404925;
}

// 004049A0: void fn004049A0()
void fn004049A0()
{
	word32 esp_6;
	word32 ecx_7;
	controlfp();
}

// 004049B5: void fn004049B5()
void fn004049B5()
{
}

