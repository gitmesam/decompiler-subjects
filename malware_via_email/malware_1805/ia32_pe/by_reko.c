// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004011C4: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	union Eq_154 ** esp_1 = fp;
	word32 esi_10 = esi + edi - __rol(eax, 0x10);
	word32 ecx_22 = DPB(0xA9, 0xA9 - *(dwArg00 - ~0x07), 0);
	__rol(esi_10, 0x1E);
	word16 di_12 = (word16) (dwArg00 - ~0x07);
	word16 dx_16 = (word16) (edx << 11);
	if (ecx_22 != 0x19)
	{
		Eq_67 eax_208 = RegFlushKey(edx << 11);
		eax_208->b0000 = eax_208->b0000 + (byte) eax_208;
		word16 dx_221 = DPB(dx_16, 0x00, 8);
		byte * eax_222 = __indw(dx_221);
		*eax_222 = *eax_222 + (byte) eax_222;
		__outw(dx_221, (word16) eax_222);
		Mem228[eax_222 + 624623694 + eax_222:byte] = Mem226[eax_222 + 624623694 + eax_222:byte] + (byte) (~(edx << 11));
		esp_1 = fp - 0x04;
		di_12 = 58395;
	}
	word16 ax_40 = (word16) esp_1;
	struct Eq_43 * edx_48 = DPB(1231852, ax_40, 0) + 0x00;
	word32 esi_61 = globals->dw4010DA;
	__rol(di_12 + 111, 0x0F);
	cui16 ax_59 = (word16) (DPB(esp_1, ax_40 + 0x1A, 0) & 0x6FD6304D);
	do
	{
		edx_48 = edx_48 + 0x01;
		word32 ecx_83 = ~edx_48->dw0000 + esi_61;
		ax_59 = __ror(__ror(ax_59, 0x05), 0x02);
	} while (ecx_83 != 0x01);
	ui32 ecx_101 = DPB(ecx_83 + 0x01, edx_48->wFFFFFFFE, 0);
	union Eq_154 *** esp_109 = esp_1 - 0x04;
	*esp_109 = (union Eq_154 ***) esp_1;
	union Eq_154 ** edx_111 = *esp_109;
	union Eq_154 * edi_117 = *edx_111;
	__ror(ax_59 | 0x5A, 0x02);
	word16 dx_113 = (word16) edx_111;
	union Eq_154 * ecx_120 = edi_117;
	word32 edi_125 = globals->dw401032;
	word32 esi_128 = 0x00401037;
	while (true)
	{
		ui32 eax_135 = *ecx_120;
		__rol(dx_113, 0x02);
		ui32 edx_145 = eax_135 ^ edi_125;
		ecx_120 = (union Eq_154 *) ((char *) ecx_120 + 0x01);
		word32 esi_143 = __rol(esi_128, 0x15);
		dx_113 = (word16) edx_145;
		if (edx_145 == 0x00)
			break;
		esi_128 = esi_143 + 3787475110;
	}
	*esp_109 = (union Eq_154 ***) (union Eq_154 **) 4177222;
	__ror((word16) (edi_125 - ~0x0D81F66A), 0x06);
	Eq_181 esi_172 = ecx_101 << 0x10 >> 0x10;
	Mem176[esp_109 + 0x00:word32] = Mem164[esp_109 + 0x00:word32] + esi_172;
	*(esp_109 - 0x04) = fs->dw0000;
	*(esp_109 - 0x08) = esp_109 - 0x04;
	fs->dw0000 = *(esp_109 - 0x08);
	*(esp_109 - 0x08) = 0x00;
	*(esp_109 - 0x0C) = (union Eq_154 **) ecx_120;
	Eq_224 esi_180 = DPB(esi_172, (word16) esi_172 | ~0x30, 0);
	return (word32) esi_180 + ~((eax_135 << 0x04 ^ ecx_120) & esi_180);
}

