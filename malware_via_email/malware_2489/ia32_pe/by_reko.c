// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0041196D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
	{
		real64 rArg0_53;
		eax_12 = fn004119A7(GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 252, fp - 0x08), ds, rArg0, rArg5, out rArg0_53);
	}
	return eax_12;
}

// 004119A7: Register (ptr Eq_39) fn004119A7(Register Eq_16 ebx, Register (ptr Eq_17) ds, FpuStack real64 rArg0, FpuStack real64 rArg5, FpuStack out Eq_20 rArg0Out)
Eq_39 * fn004119A7(UINT ebx, Eq_17 * ds, real64 rArg0, real64 rArg5, Eq_20 & rArg0Out)
{
	Eq_40 eax_10 = VirtualAlloc(0x00, 0x00014813, 0x3000, 0x40);
	word32 ecx_103 = 0x01F6;
	union Eq_54 * esi_23 = (union Eq_54 *) 166;
	Eq_40 edi_25 = eax_10;
	uint32 edx_30 = DPB(0xA7E0DA0C, bl + 0x0C, 0);
	word32 ebp_43 = 0x00;
	do
	{
		*edi_25 = (word32) *edi_25 + (byte) ((char *) (*esi_23) + edx_30);
		word32 ebp_77 = ebp_43 - 460344;
		uint32 edx_585 = edx_30 >> 0x08;
		esi_23 = (union Eq_54 *) ((char *) esi_23 + 0x01);
		edi_25 = edi_25 + 0x01;
		ebp_43 = ebp_77 + 0x00070639;
		byte dl_587 = (byte) edx_585;
		if (0x04 == ebp_77 + 0x00070639)
		{
			edx_585 = 0xA7E0DA0C;
			dl_587 = 0x0C;
			ebp_43 = 0x00;
		}
		edx_30 = DPB(edx_585, dl_587 + bl, 0);
		ecx_103 = ecx_599 - 0x01;
		word32 ecx_599 = ecx_103;
	} while (ecx_599 != 0x01);
	ptr32 esp_120;
	struct Eq_39 * eax_121;
	struct Eq_106 * edi_122;
	byte SCZO_123;
	struct Eq_108 * esi_124;
	struct Eq_39 * ecx_125;
	struct Eq_110 * edx_126;
	byte dl_127;
	word32 ebp_129;
	byte cl_130;
	byte SZO_131;
	byte Z_132;
	byte C_133;
	byte ah_134;
	byte FPUF_135;
	byte bh_136;
	byte dh_137;
	byte D_138;
	byte ch_139;
	byte al_141;
	Eq_124 gs_142;
	word16 si_143;
	struct Eq_126 * ss_144;
	word16 dx_145;
	real64 rArg0_147;
	real64 rArg5_148;
	byte CZP_149;
	struct Eq_131 * ds_150;
	byte SCZDOP_151;
	byte O_152;
	byte SO_154;
	bool P_146;
	byte bl_128;
	word16 bx_153;
	struct Eq_138 * ebx_140;
	eax_10();
	if (ecx_125 == eax_121)
		return eax_121;
	edi_122->b0000 = esi_124->b0000;
	cu8 dh_208 = dh_137 + edx_126->b27799F2C;
	*(esi_124 - 0x07) = *(esi_124 - 0x07) - bl_128 - (dh_208 < 0x00);
	ui8 ch_217 = ch_139 ^ ((edi_122->a0001))[ebx_140].b0000;
	byte * ecx_218 = DPB(ecx_125, ch_217, 8);
	word32 ecx_220 = DPB(ecx_218, cl_130 | *ecx_218, 0);
	edi_122->bF329B773 = edi_122->bF329B773 | ch_217;
	struct Eq_187 * edx_209 = DPB(edx_126, dh_208, 8);
	edx_209->t0000.u3 = gs_142;
	*(esp_120 - 0x04) = esp_120;
	Eq_197 al_205 = (byte) ebp_129;
	struct Eq_39 * ebp_206 = eax_121;
	word16 dx_210 = DPB(dx_145, dh_208, 8);
	byte ** edi_233 = &edi_122->a0001->b0000 + 0x01;
	ptr32 esp_236 = esp_120 - 0x04;
	byte * eax_239 = DPB(ebp_129, esi_124->b0001, 0);
	struct Eq_212 * esi_243 = DPB(&esi_124->b0001 + 0x01, ss_144, 0);
	Eq_216 edi_334;
	struct Eq_212 * eax_323;
	Eq_218 SCZDOP_331;
	Eq_218 C_329;
	ci8 al_322;
	union Eq_221 * esp_307;
	struct Eq_222 * ecx_252;
	byte cl_249;
	byte * eax_262;
	byte al_259;
	byte ah_258;
	if (al_205 >= ((edi_122->a0001))[0x00].b0000)
	{
		__outdw(dx_210, DPB(eax_239, 0xE0, 8));
		eax_121->dw97EB3155 = eax_121->dw97EB3155 - 113;
		ebx_140->dw4E346030 = ebx_140->dw4E346030 & 117;
		eax_262 = (byte *) esi_243[0x04];
		ah_258 = SLICE(eax_262, byte, 8);
		al_259 = (byte) eax_262;
		esi_243 = esi_243 + 0x08;
		ecx_252 = ecx_220 - 0x01;
		cl_249 = (byte) (ecx_220 - 0x01);
		if (ebx_140->dw4E346030 != 0x00 && ecx_220 != 0x01)
			goto l00411BB7;
		*(esp_120 - 0x08) = (struct Eq_187 **) edx_209;
		eax_239 = DPB(eax_262, al_259 & 0x5D, 0);
		esp_236 = esp_120 - 0x08;
		if (*(eax_121 - 0x20) != ~0x46)
			esi_243 = ebx_140->ptrF85DE09B;
		*eax_239 = *eax_239 + 4219829683;
		ecx_220 = DPB(ecx_220 - 0x01, 0x70, 8);
	}
	else
	{
		bl_128 = 0x7D;
		ebx_140 = DPB(ebx_140, 0x7D, 0);
		bx_153 = DPB(bx_153, 0x7D, 0);
	}
	do
	{
		eax_239 = eax_239 - 0x01;
		__outb(dx_210, (byte) eax_239);
		esi_243 = esi_243 + 0x01;
	} while (P_146);
	byte ** esp_480 = esp_236 - 0x04;
	*esp_480 = (byte **) eax_239;
	byte * esp_482 = *esp_480;
	*esp_482 = (byte) (struct Eq_358 *) 2069701674;
	struct Eq_358 * esp_488 = *esp_482;
	(ui32 *) 0x6934828A = (ui32 *) 0x6934828A & 0x33;
	esp_488->ptr0004 = ds_150;
	edi_334 = *(ebx_140 - 0x10) *s 0x28;
	ecx_252 = ecx_220 - 0x01;
	Eq_218 SCZO_510 = cond(edi_334);
	P_146 = cond(rArg0_147 - rArg5_148);
	esp_307 = (union Eq_221 *) &esp_488->ptr0004;
	cl_249 = (byte) ecx_252;
	eax_323 = esi_243;
	al_322 = (byte) esi_243;
	esi_243 = (struct Eq_212 *) (eax_239 + -1490356131);
	ebp_206 = ecx_252->dw0000 *s ~0x0C;
	C_329 = SCZO_510;
	SCZDOP_331 = SCZO_510;
l00411B9A:
	struct Eq_212 ***** esp_366 = esp_307 - 0x04;
	*esp_366 = (struct Eq_212 *****) eax_323;
	*(esp_366 - (struct Eq_212 *****) 0x04) = (union Eq_218 *) SCZDOP_331;
	edi_233 = edi_334 + Mem369[esi_243 + 0x00:word32] + C_329 & esp_366 - 0x04;
	__outb(0x23, al_322);
	int64 edx_eax_374 = ecx_252->dw0000 *s eax_323;
	struct Eq_212 * esp_372 = *(esp_366 - (struct Eq_212 *****) 0x04);
	byte * eax_375 = (word32) edx_eax_374;
	Mem383[eax_375 - 0x03 + 0x00:byte] = Mem369[eax_375 - 0x03 + 0x00:byte] & cl_249;
	esp_236 = esp_372 + 0x04;
	edx_209 = SLICE(edx_eax_374, word32, 32);
	dx_210 = SLICE(edx_eax_374, word16, 32);
	if (OVERFLOW(*(eax_375 - (byte *) 0x03)))
		;
	eax_262 = eax_375 & 2939252024;
	ah_258 = SLICE(eax_375 & 2939252024, byte, 8);
	al_259 = (byte) (eax_375 & 2939252024);
	if (P_146)
	{
		esp_372->t0000 = eax_375 & 2939252024;
		*(esp_372 - 0x04) = (union Eq_410 *) false;
		*(esp_372 - 0x08) = 0x29;
		word32 esp_419;
		word32 eax_420;
		word32 edi_421;
		byte SCZO_422;
		word32 esi_423;
		word32 ecx_424;
		word32 edx_425;
		byte dl_426;
		byte bl_427;
		word32 ebp_428;
		byte cl_429;
		byte SZO_430;
		byte Z_431;
		byte C_432;
		byte ah_433;
		byte FPUF_434;
		byte bh_435;
		byte dh_436;
		byte D_437;
		byte ch_438;
		word32 ebx_439;
		byte al_440;
		struct Eq_444 * gs_441;
		word16 si_442;
		struct Eq_446 * ss_443;
		word16 dx_444;
		byte P_445;
		real64 rArg0_446;
		real64 rArg5_447;
		byte CZP_448;
		struct Eq_452 * ds_449;
		byte SCZDOP_450;
		byte O_451;
		word16 bx_452;
		byte SO_453;
		fnC041EC45();
		return eax_420;
	}
l00411BB7:
	byte v49_266 = *eax_262 - ah_258;
	*eax_262 = v49_266;
	__outb(dx_210, al_259);
	struct Eq_290 * esi_270 = esi_243 + 0x01;
	Mem273[esi_270 + 627751054 + edx_209:word32] = __rcr(Mem267[esi_270 + 627751054 + edx_209:word32], cl_249, cond(v49_266));
	struct Eq_308 * edi_283 = (char *) edi_233 + 0x04;
	if (P_146)
	{
		*eax_262 = __rol(*eax_262, 0x01);
		*eax_262 = __rol(*eax_262, ~0x32);
	}
	*eax_262 = *eax_262 - ah_258 - (eax_262 < *edi_233);
	__outb(dx_210, al_259);
	int32 v52_287 = ebx_140->dw0000 >> cl_249;
	ebx_140->dw0000 = v52_287;
	byte * eax_292 = DPB(eax_262, __inb(0x5E), 0);
	edi_283->tAD16E82B = __rcr(edi_283->tAD16E82B, cl_249, cond(v52_287));
	bl_128 = bl_128 + ecx_252->b0009 + ((edi_283->tAD16E82B & 0x01 << cl_249) != 0x00);
	__sti();
	ebp_206 = &ebp_206->dw97EB3155 + 0x1A0533AB;
	esp_307 = esp_236 - 0x04;
	*esp_307 = (union Eq_221 *) cond(ebp_206);
	ebx_140 = DPB(ebx_140, bl_128, 0);
	esi_270[0x05] = (struct Eq_290) (esi_270[0x05] ^ ebx_140);
	bx_153 = DPB(bx_153, bl_128, 0);
	__arpl(esi_270[0x05], bx_153, &esi_270[0x05]);
	Eq_545 eax_317 = esi_270[0x05];
	al_322 = (byte) eax_317 + 0x5C + ((byte) (eax_292 + -215399529) < edi_283->b0004);
	edi_283->b0005 = __in(dx_210);
	Eq_218 SCZO_325 = cond(al_322);
	esi_243 = esi_270 + 0x09;
	eax_323 = (struct Eq_212 *) DPB(eax_317, al_322, 0);
	C_329 = SCZO_325;
	SCZDOP_331 = SCZO_325;
	edi_334 = &edi_283->b0005 + 0x01;
	if (al_322 >= 0x00)
		__hlt();
	goto l00411B9A;
}

