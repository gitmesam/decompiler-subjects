// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0041196D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
	{
		real64 rArg0_53;
		eax_12 = fn004119A7(GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 252, fp - 0x04), ds, 252, rArg0, rArg5, out rArg0_53);
	}
	return eax_12;
}

// 004119A7: Register (ptr32 Eq_41) fn004119A7(Register Eq_16 ebx, Register (ptr16 Eq_17) ds, Stack word32 dwArg00, FpuStack real64 rArg0, FpuStack real64 rArg5, FpuStack out Eq_21 rArg0Out)
Eq_41 * fn004119A7(UINT ebx, Eq_17 * ds, word32 dwArg00, real64 rArg0, real64 rArg5, Eq_21 & rArg0Out)
{
	Eq_42 eax_10 = VirtualAlloc(0x00, 0x00014813, 0x3000, 0x40);
	word32 ecx_110 = 0x01F6;
	union Eq_56 * esi_25 = dwArg00 + 166;
	Eq_42 edi_27 = eax_10;
	uint32 edx_106 = DPB(0xA7E0DA0C, bl + 0x0C, 0);
	word32 ebp_46 = 0x00;
	do
	{
		*edi_27 = (word32) *edi_27 + (byte) ((char *) (*esi_25) + edx_106);
		word32 ebp_80 = ebp_46 - 460344;
		uint32 edx_610 = edx_106 >> 0x08;
		esi_25 = (union Eq_56 *) ((char *) esi_25 + 0x01);
		edi_27 = edi_27 + 0x01;
		ebp_46 = ebp_80 + 0x00070639;
		byte dl_612 = (byte) edx_610;
		if (0x04 == ebp_80 + 0x00070639)
		{
			edx_610 = 0xA7E0DA0C;
			dl_612 = 0x0C;
			ebp_46 = 0x00;
		}
		edx_106 = DPB(edx_610, dl_612 + bl, 0);
		ecx_110 = ecx_625 - 0x01;
		word32 ecx_625 = ecx_110;
	} while (ecx_625 != 0x01);
	ptr32 esp_128;
	struct Eq_41 * eax_129;
	struct Eq_109 * edi_130;
	byte SCZO_131;
	struct Eq_111 * esi_132;
	struct Eq_41 * ecx_133;
	struct Eq_113 * edx_134;
	byte dl_135;
	word32 ebp_137;
	byte cl_138;
	byte SZO_139;
	bool Z_140;
	bool C_141;
	byte ah_142;
	bool FPUF_143;
	byte bh_144;
	byte dh_145;
	bool D_146;
	byte ch_147;
	byte al_149;
	Eq_127 gs_150;
	word16 si_151;
	struct Eq_129 * ss_152;
	word16 dx_153;
	real64 rArg0_155;
	real64 rArg5_156;
	byte CZP_157;
	bool O_158;
	bool S_159;
	struct Eq_136 * ds_160;
	byte SCZDOP_161;
	byte SO_163;
	bool P_154;
	byte bl_136;
	word16 bx_162;
	struct Eq_142 * ebx_148;
	eax_10();
	if (ecx_133 == eax_129)
		return eax_129;
	edi_130->b0000 = esi_132->b0000;
	cu8 dh_219 = dh_145 + edx_134->b27799F2C;
	*(esi_132 - 0x07) = *(esi_132 - 0x07) - bl_136 - (dh_219 < 0x00);
	ui8 ch_228 = ch_147 ^ ((edi_130->a0001))[ebx_148].b0000;
	byte * ecx_229 = DPB(ecx_133, ch_228, 8);
	word32 ecx_231 = DPB(ecx_229, cl_138 | *ecx_229, 0);
	edi_130->bF329B773 = edi_130->bF329B773 | ch_228;
	struct Eq_191 * edx_220 = DPB(edx_134, dh_219, 8);
	edx_220->t0000.u3 = gs_150;
	*(esp_128 - 0x04) = esp_128;
	Eq_201 al_216 = (byte) ebp_137;
	struct Eq_41 * ebp_217 = eax_129;
	word16 dx_221 = DPB(dx_153, dh_219, 8);
	byte ** edi_245 = &edi_130->a0001->b0000 + 0x01;
	ptr32 esp_248 = esp_128 - 0x04;
	byte * eax_251 = DPB(ebp_137, esi_132->b0001, 0);
	struct Eq_216 * esi_255 = DPB(&esi_132->b0001 + 0x01, ss_152, 0);
	Eq_220 edi_348;
	struct Eq_216 * eax_336;
	Eq_222 SCZDOP_346;
	Eq_223 C_342;
	ci8 al_335;
	union Eq_225 * esp_320;
	struct Eq_226 * ecx_264;
	byte cl_261;
	byte * eax_274;
	byte al_271;
	byte ah_270;
	if (al_216 >= ((edi_130->a0001))[0x00].b0000)
	{
		__outdw(dx_221, DPB(eax_251, 0xE0, 8));
		eax_129->dw97EB3155 = eax_129->dw97EB3155 - 113;
		ebx_148->dw4E346030 = ebx_148->dw4E346030 & 117;
		eax_274 = (byte *) esi_255[0x04];
		ah_270 = SLICE(eax_274, byte, 8);
		al_271 = (byte) eax_274;
		esi_255 = esi_255 + 0x08;
		ecx_264 = ecx_231 - 0x01;
		cl_261 = (byte) (ecx_231 - 0x01);
		if (ebx_148->dw4E346030 != 0x00 && ecx_231 != 0x01)
			goto l00411BB7;
		*(esp_128 - 0x08) = (struct Eq_191 **) edx_220;
		eax_251 = DPB(eax_274, al_271 & 0x5D, 0);
		esp_248 = esp_128 - 0x08;
		if (*(eax_129 - 0x20) != ~0x46)
			esi_255 = ebx_148->ptrF85DE09B;
		*eax_251 = *eax_251 + 4219829683;
		ecx_231 = DPB(ecx_231 - 0x01, 0x70, 8);
	}
	else
	{
		bl_136 = 0x7D;
		ebx_148 = DPB(ebx_148, 0x7D, 0);
		bx_162 = DPB(bx_162, 0x7D, 0);
	}
	do
	{
		eax_251 = eax_251 - 0x01;
		__outb(dx_221, (byte) eax_251);
		esi_255 = esi_255 + 0x01;
	} while (P_154);
	byte ** esp_500 = esp_248 - 0x04;
	*esp_500 = (byte **) eax_251;
	byte * esp_502 = *esp_500;
	*esp_502 = (byte) (struct Eq_363 *) 2069701674;
	struct Eq_363 * esp_508 = *esp_502;
	(ui32 *) 0x6934828A = (ui32 *) 0x6934828A & 0x33;
	esp_508->ptr0004 = ds_160;
	edi_348 = *(ebx_148 - 0x10) *s 0x28;
	ecx_264 = ecx_231 - 0x01;
	Eq_222 SCZO_530 = cond(edi_348);
	P_154 = (bool) cond(rArg0_155 - rArg5_156);
	esp_320 = (union Eq_225 *) &esp_508->ptr0004;
	cl_261 = (byte) ecx_264;
	eax_336 = esi_255;
	al_335 = (byte) esi_255;
	esi_255 = (struct Eq_216 *) (eax_251 + -1490356131);
	ebp_217 = ecx_264->dw0000 *s ~0x0C;
	C_342 = (bool) SCZO_530;
	SCZDOP_346 = SCZO_530;
l00411B9A:
	struct Eq_216 ***** esp_382 = esp_320 - 0x04;
	*esp_382 = (struct Eq_216 *****) eax_336;
	*(esp_382 - (struct Eq_216 *****) 0x04) = (union Eq_222 *) SCZDOP_346;
	edi_245 = edi_348 + Mem385[esi_255 + 0x00:word32] + C_342 & esp_382 - 0x04;
	__outb(0x23, al_335);
	int64 edx_eax_390 = ecx_264->dw0000 *s eax_336;
	struct Eq_216 * esp_388 = *(esp_382 - (struct Eq_216 *****) 0x04);
	byte * eax_391 = (word32) edx_eax_390;
	Mem399[eax_391 - 0x03 + 0x00:byte] = Mem385[eax_391 - 0x03 + 0x00:byte] & cl_261;
	esp_248 = esp_388 + 0x04;
	edx_220 = SLICE(edx_eax_390, word32, 32);
	dx_221 = SLICE(edx_eax_390, word16, 32);
	if (OVERFLOW(*(eax_391 - (byte *) 0x03)))
		__syscall(0x04);
	eax_274 = eax_391 & 2939252024;
	ah_270 = SLICE(eax_391 & 2939252024, byte, 8);
	al_271 = (byte) (eax_391 & 2939252024);
	if (P_154)
	{
		esp_388->t0000 = eax_391 & 2939252024;
		Eq_422 SCZDOP_424 = DPB(SCZDOP_346, false, 0);
		*(esp_388 - 0x04) = (union Eq_422 *) SCZDOP_424;
		*(esp_388 - 0x08) = 0x29;
		word32 esp_437;
		struct Eq_41 * eax_438;
		word32 edi_439;
		byte SCZO_440;
		word32 esi_441;
		word32 ecx_442;
		word32 edx_443;
		byte dl_444;
		byte bl_445;
		word32 ebp_446;
		byte cl_447;
		byte SZO_448;
		bool Z_449;
		bool C_450;
		byte ah_451;
		bool FPUF_452;
		byte bh_453;
		byte dh_454;
		bool D_455;
		byte ch_456;
		word32 ebx_457;
		byte al_458;
		struct Eq_458 * gs_459;
		word16 si_460;
		struct Eq_460 * ss_461;
		word16 dx_462;
		bool P_463;
		real64 rArg0_464;
		real64 rArg5_465;
		byte CZP_466;
		bool O_467;
		bool S_468;
		struct Eq_468 * ds_469;
		byte SCZDOP_470;
		word16 bx_471;
		byte SO_472;
		fnC041EC45();
		return eax_438;
	}
l00411BB7:
	byte v50_278 = *eax_274 - ah_270;
	*eax_274 = v50_278;
	__outb(dx_221, al_271);
	struct Eq_294 * esi_282 = esi_255 + 0x01;
	Mem285[esi_282 + 627751054 + edx_220:word32] = __rcr(Mem279[esi_282 + 627751054 + edx_220:word32], cl_261, (bool) cond(v50_278));
	struct Eq_313 * edi_296 = (char *) edi_245 + 0x04;
	if (P_154)
	{
		*eax_274 = __rol(*eax_274, 0x01);
		*eax_274 = __rol(*eax_274, ~0x32);
	}
	*eax_274 = *eax_274 - ah_270 - (eax_274 < *edi_245);
	__outb(dx_221, al_271);
	int32 v53_300 = ebx_148->dw0000 >> cl_261;
	ebx_148->dw0000 = v53_300;
	byte * eax_305 = DPB(eax_274, __inb(0x5E), 0);
	edi_296->tAD16E82B = __rcr(edi_296->tAD16E82B, cl_261, (bool) cond(v53_300));
	bl_136 = bl_136 + Mem307[ecx_264 + 0x09:byte] + ((Mem301[edi_296 + 2903959595:word32] & 0x01 << cl_261) != 0x00);
	__sti();
	ebp_217 = &ebp_217->dw97EB3155 + 0x1A0533AB;
	esp_320 = esp_248 - 0x04;
	*esp_320 = (union Eq_225 *) cond(ebp_217);
	ebx_148 = DPB(ebx_148, bl_136, 0);
	esi_282[0x05] = (struct Eq_294) (esi_282[0x05] ^ ebx_148);
	bx_162 = DPB(bx_162, bl_136, 0);
	__arpl(esi_282[0x05], bx_162, &esi_282[0x05]);
	Eq_561 eax_330 = esi_282[0x05];
	al_335 = (bool) ((byte) (eax_305 + -215399529) < edi_296->b0004) + ((byte) eax_330 + 0x5C);
	edi_296->b0005 = __in(dx_221);
	Eq_222 SCZO_338 = cond(al_335);
	esi_255 = esi_282 + 0x09;
	eax_336 = (struct Eq_216 *) DPB(eax_330, al_335, 0);
	C_342 = (bool) SCZO_338;
	SCZDOP_346 = SCZO_338;
	edi_348 = &edi_296->b0005 + 0x01;
	if (al_335 >= 0x00)
		__hlt();
	goto l00411B9A;
}

