// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040A042: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
Win32CrtStartup_entry:
	goto l0040A042
l0040A008:
l0040A038:
	branch Test(NE,Z) l0040A0AA
l0040A03A:
	branch Test(EQ,Z) l0040A05C
l0040A03C:
	esp = (struct Eq_3 *) ((char *) &esp->dw0000 + 0x01)
	SZO = cond(esp)
	Z = (bool) SZO
	edi = esp->dw0000
	di = (word16) edi
	esp = &esp->t0004
	esi = esp->dw0000
	esp = &esp->t0004
	ebp = esp->dw0000
	esp = &esp->t0004
	esp = &esp->t0004
	ebx = esp->dw0000
	esp = &esp->t0004
	edx = esp->dw0000
	esp = &esp->t0004
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
	eax = esp->dw0000
	ax = (word16) eax
	esp = &esp->t0004
	branch Test(EQ,Z) l0040A0A1
l0040A040:
	v32 = *eax & eax
	*eax = v32
	SZO = cond(*eax)
	C.u0 = false
l0040A042:
	esp = fp
	eax.u0 = 0x0040A000
	esp = fp - 0x04
	dwLoc04 = 0x00402211
	v5 = fs->ptr0000
	esp = fp - 0x08
	dwLoc08 = v5
	fs->ptr0000 = fp - 0x08
	esp = fp - 0x0A
	wLoc0A = SCZDOP
l0040A05C:
	v7 = fp - 0x0A
	esp = fp - 0x0E
	dwLoc0E = 0x0040A000
	esp = fp - 0x12
	dwLoc12 = ecx
	esp = fp - 22
	dwLoc16 = edx
	esp = fp - 0x1A
	dwLoc1A = ebx
	esp = fp - 0x1E
	dwLoc1E = fp - 0x0A
	esp = fp - 0x22
	dwLoc22 = ebp
	esp = fp - 0x26
	dwLoc26 = esi
	esp = fp - 0x2A
	dwLoc2A = edi
	esp = fp - 0x2E
	dwLoc2E = 0x0040A000
	esp = fp - 0x32
	dwLoc32.u0 = 0x00400000
	edi.u0 = &globals->dw400000
	di = (word16) edi
	esi = globals->t40A000
	di = di + 0x0780
	edi = DPB(edi, di, 0)
	SCZO = cond(di)
	esi = (word32) esi + 0x08 + 0x0040A000
	globals->t40A000 = edi
	ebx = *((word32) esi + 0x0010)
	esp = fp - 0x36
	dwLoc36 = 0x0040A000
	esp = fp - 0x3A
	dwLoc3A = esi
	esp = fp - 0x3E
	dwLoc3E = 0x02
	esp = fp - 66
	dwLoc42 = 0x0880
	esp = fp - 0x46
	dwLoc46 = edi
	esp = fp - 0x4A
	dwLoc4A = 0x06
	esp = fp - 0x4E
	dwLoc4E = 0x06
	esp = fp - 0x52
	dwLoc52 = esi
	esp = fp - 0x56
	dwLoc56 = 0x04
	esp = fp - 0x5A
	dwLoc5A = 0x0880
	esp = fp - 0x5E
	dwLoc5E = edi
	ebx()
	esi = esi - 0x08
	SCZO = cond(esi)
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
l0040A093:
	branch ecx == 0x00 l0040A095
l0040A093_1:
	v16 = *esi
	*edi = v16
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l0040A093
l0040A095:
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
	di = di + 0x68
	esi = (word32) esi + 100
	SCZO = cond(esi)
l0040A0A0:
	branch ecx == 0x00 l0040A0A2
l0040A0A0_1:
	v17 = *esi
	*edi = v17
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l0040A0A0
l0040A0A1:
	v36 = (word32) *esi
	*edi = v36
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	di = (word16) edi
l0040A0A2:
	ebx()
	eax = esp->dw0000
	esp = &esp->t0004
	edx = (word32) eax + 440
l0040A0AA:
	v34 = (byte) ((word32) *((word32) ebx - 239464694) + cl)
	*((word32) ebx - 239464694) = v34
	SCZO = cond(v34)
	SCZDOP = SCZO
	SZO = SCZO
	Z = (bool) SCZO
	C = (bool) SCZO
l0040A0AB:
	ecx = *edx
	cl = (byte) ecx
	C = __btr(ecx, 0x1F, out ecx)
	SCZDOP.u0 = DPB(SCZDOP, C, 0)
	SCZO.u0 = DPB(SCZO, C, 0)
l0040A0B0:
	branch Test(UGE,C) l0040A0C9
l0040A0B3:
	eax = esp->dw0000
	D = true
	esi = eax
	edi = eax
	esi = esi + Mem0[edx + 0x04:word32]
	edi = edi + Mem0[edx + 0x08:word32]
	di = (word16) edi
	SCZO = cond(edi)
l0040A0C1:
	branch ecx == 0x00 l0040A0C3
l0040A0C1_1:
	v20 = *esi
	*edi = v20
	esi = esi - 0x04
	edi = edi - 0x04
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l0040A0C1
l0040A0C3:
	edx = (word32) edx + 0x0C
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	SCZO = cond(edx)
	D = false
	goto l0040A0AB
l0040A0C9:
	edx = (word32) edx + 0x0010
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	ebx = *(edx - 0x0C)
	bl = (byte) ebx
	SZO = cond(ebx & ebx)
	Z = (bool) SZO
	C.u0 = false
	branch Test(EQ,Z) l0040A0AB
l0040A0D3:
	eax = esp->dw0000
	edi = *(edx - 0x08)
	edi = edi + eax
	di = (word16) edi
	SCZO = cond(edi)
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esi = ecx + eax
	SCZO = cond(ebx - 0x00010000)
	C = (bool) SCZO
	branch Test(UGE,C) l0040A10E
	goto l0040A100
l0040A0E1:
	eax = esp->dw0000
	esp = &esp->t0004
	eax = esp->dw0000
	esp = &esp->t0004
	eax = esp->dw0000
	esp = &esp->t0004
	edx = esp->dw0000
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	esp = &esp->t0004
	branch Test(EQ,Z) l0040A0AB
l0040A0E7:
	eax = esp->t0004
	ax = (word16) eax
	esp = (struct Eq_3 *) ((char *) &esp->t0008 + 0x0022)
	edx = (word32) eax + 0x0034
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	esp = &esp->t0008
	esp = esp - 0x04
	esp->dw0000 = 0x10
	ebx = eax
	ax = ax + 0x2D
	eax = DPB(eax, ax, 0)
	SCZO = cond(ax)
	esp = esp - 0x04
	esp->dw0000 = (word32) eax
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esp = esp - 0x04
	esp->dw0000 = 0x00
	ebx = *ebx
	(*ebx)()
	esp = esp - 0x04
	esp->dw0000 = ~0x00
	(*((word32) ebx + 0x0C))()
	ebp = ebp + 0x01
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	edi = edi - 0x01
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	v30 = *eax & eax
	*eax = v30
	SZO = cond(*eax)
	C.u0 = false
	ebx = (word32) ebx + 0x01
	bl = (byte) ebx
	SZO = cond(ebx)
	SCZDOP = SZO
	SCZO = SZO
	Z = (bool) SZO
	__outdw(dx, eax)
	esi = (word32) esi + 0x04
	branch Test(ULT,C) l0040A0AA
	goto l0040A038
l0040A0F8:
l0040A100:
	esp = esp - 0x04
	esp->dw0000 = ~0x3F9F
	esp = esp - 0x04
	esp->dw0000 = ~0x039F
	dh = 0x05
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
	goto l0040A130
l0040A10E:
	SCZO = cond(ebx - 0x00040000)
	C = (bool) SCZO
	branch Test(UGE,C) l0040A124
l0040A116:
	esp = esp - 0x04
	esp->dw0000 = ~0x7E7F
	esp = esp - 0x04
	esp->dw0000 = ~0x067F
	dh = 0x07
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
	goto l0040A130
l0040A124:
	esp = esp - 0x04
	esp->dw0000 = ~0x7CFF
	esp = esp - 0x04
	esp->dw0000 = ~0x04FF
	dh = 0x08
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
l0040A130:
	esp = esp - 0x04
	esp->dw0000 = 0x00
	dl = 0x00
	edx = DPB(edx, dl, 0)
	dx = DPB(dx, dl, 0)
	ebx = ebx - 0x01
	bl = (byte) ebx
	v25 = *esi
	*edi = v25
	esi = (word32) esi + 0x01
	edi = (word32) edi + 0x01
	di = (word16) edi
	ecx.u0 = 0x00
	cl = (byte) ecx
	SZO = cond(0x00)
	C.u0 = false
l0040A138:
	SCZO = cond(ebx - 0x00)
	SCZDOP = SCZO
	SZO = SCZO
	Z = (bool) SCZO
	C = (bool) SCZO
	branch Test(LE,SZO) l0040A0E1
l0040A13D:
	C = fn0040A0EC(dl, esi, out dl, out esi)
	branch Test(ULT,C) l0040A15B
l0040A144:
	v26 = *esi
	*edi = v26
	esi = (word32) esi + 0x01
	edi = (word32) edi + 0x01
	di = (word16) edi
	v28 = *(edi - 0x01) ^ bl
	*(edi - 0x01) = v28
	SZO = cond(*(edi - 0x01))
	C.u0 = false
	ebx = ebx - 0x01
	bl = (byte) ebx
	SZO = cond(ebx)
	goto l0040A138
l0040A15B:
	ebp = 0x00
	SZO = cond(0x00)
	C.u0 = false
	ecx = fn0040A14B(ecx, dl, esi, out dl, out esi)
	ecx = ecx - 0x03
	cl = (byte) ecx
	SCZO = cond(ecx)
	C = (bool) SCZO
	branch Test(UGE,C) l0040A16D
l0040A167:
	eax = esp->dw0000
	ax = (word16) eax
	ecx = (char *) ecx.u0 + 0x01
	cl = (byte) ecx
	SZO = cond(ecx)
	goto l0040A190
l0040A16D:
	eax = ecx
	ax = (word16) eax
	ecx = (word32) dh
	cl = (byte) ecx
l0040A172:
	C = fn0040A0EC(dl, esi, out dl, out esi)
	eax = eax + eax + C
	ax = (word16) eax
	SCZO = cond(eax)
	ecx = ecx - 0x01
	cl = (byte) ecx
	SZO = cond(ecx)
	Z = (bool) SZO
	branch Test(NE,Z) l0040A172
l0040A17C:
	eax = eax ^ ~0x00
	ax = (word16) eax
	SCZO = cond(eax - esp->t0004)
	C = (bool) SCZO
	ebp = ebp + 0x01 + C
	SCZO = cond(eax - esp->t0008)
	C = (bool) SCZO
	ebp = (word32) ((bool) C.u0 + (ebp + 0x00))
	SCZO = cond(ebp)
	esp->dw0000 = (word32) eax
l0040A190:
	C = fn0040A0EC(dl, esi, out dl, out esi)
	ecx = ecx + ecx + C
	SCZO = cond(ecx)
	C = fn0040A0EC(dl, esi, out dl, out esi)
	ecx = ecx + ecx + C
	cl = (byte) ecx
	SCZO = cond(ecx)
	Z = (bool) SCZO
	branch Test(NE,Z) l0040A1A8
l0040A1A0:
	ecx = fn0040A14B(ecx, dl, esi, out dl, out esi)
	ecx = (word32) ecx + 0x02
	cl = (byte) ecx
	SCZO = cond(ecx)
l0040A1A8:
	ecx = (word32) ecx + ebp
	cl = (byte) ecx
	esp = esp - 0x04
	esp->dw0000 = (word32) esi
	ebx = ebx - ecx
	bl = (byte) ebx
	SCZO = cond(ebx)
	esi = eax + edi
l0040A1B0:
	branch ecx == 0x00 l0040A1B2
l0040A1B0_1:
	v35 = (byte) *esi
	*edi = v35
	esi = esi + 0x01
	edi = edi + 0x01
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l0040A1B0
l0040A1B2:
	esi = esp->dw0000
	esp = &esp->t0004
	goto l0040A138
Win32CrtStartup_exit:
}

// 0040A0EC: FlagGroup bool fn0040A0EC(Register bui8 dl, Register Eq_5 esi, Register out Eq_259 dlOut, Register out (ptr32 Eq_260) esiOut)
bool fn0040A0EC(bui8 dl, Eq_5 esi, Eq_259 & dlOut, Eq_260 * & esiOut)
{
	*esiOut = esi;
	byte dl_3;
	*dlOut = dl * 0x02;
	bool C_14 = (bool) cond(dl * 0x02);
	if (dl * 0x02 == 0x00)
	{
		ui8 dl_22 = *esi * 0x02 + (esi < ~0x00);
		*dlOut = dl_22;
		word32 esi_19;
		*esiOut = esi - ~0x00;
		C_14 = (bool) cond(dl_22);
	}
	return C_14;
}

// 0040A14B: Register Eq_5 fn0040A14B(Register Eq_5 ecx, Register bui8 dl, Register Eq_5 esi, Register out Eq_275 dlOut, Register out Eq_276 esiOut)
Eq_5 fn0040A14B(Eq_5 ecx, bui8 dl, Eq_5 esi, Eq_275 & dlOut, Eq_276 & esiOut)
{
	Eq_5 ecx_13 = (word32) ecx + 0x01;
	do
	{
		bui8 dl_10;
		Eq_5 esi_11;
		ecx_13 = (bool) fn0040A0EC(dl, esi, out dl_10, out esi_11).u0 + ecx_13 * 0x02;
	} while (fn0040A0EC(dl_10, esi_11, out dl, out esi));
	return ecx_13;
}

