// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401020: Register word32 fn00401020(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
word32 fn00401020(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Mem6[4225480:word32] = 0x00;
	while (true)
	{
		word32 eax_23;
		if (Mem6[4225480:word32] >= dwArg0C)
			break;
		if ((word32) Mem6[dwArg04 + Mem6[4225480:word32]:byte] != (word32) Mem6[dwArg08 + Mem6[4225480:word32]:byte])
		{
			eax_23 = 0x01;
			return eax_23;
		}
		Mem42[4225480:word32] = Mem6[4225480:word32] + 0x01;
	}
	eax_23 = 0x00;
	return eax_23;
}

// 00401070: void fn00401070(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn00401070(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Mem6[4225480:word32] = 0x00;
	while (Mem6[4225480:word32] < dwArg0C)
	{
		GetCommandLineA();
		Mem26[dwArg04 + Mem6[4225480:word32]:byte] = Mem6[dwArg08 + Mem6[4225480:word32]:byte];
		Mem30[4225480:word32] = Mem26[4225480:word32] + 0x01;
	}
}

// 00401100: Register word32 fn00401100(Stack word32 dwArg04)
word32 fn00401100(word32 dwArg04)
{
	word32 eax_10 = dwArg04 & ~0x0FFF;
	word32 dwArg04_14 = dwArg04 & ~0x0FFF;
	while (0x01 != 0x00)
	{
		if ((word32) Mem0[dwArg04_14 + 0x00:word16] == 23117 && Mem0[dwArg04_14 + Mem0[dwArg04_14 + 0x3C:word32]:word32] == 0x4550)
		{
			eax_10 = dwArg04_14;
			return eax_10;
		}
		eax_10 = dwArg04_14 - 0x1000;
		dwArg04_14 = eax_10;
	}
	return eax_10;
}

// 00401160: Register word32 fn00401160(Stack word32 dwArg04)
word32 fn00401160(word32 dwArg04)
{
	word32 ecx_17 = Mem0[dwArg04 + Mem0[dwArg04 + 0x3C:word32] + 0x78:word32] + dwArg04;
	word32 eax_21 = Mem0[ecx_17 + 0x24:word32] + dwArg04;
	word32 dwLoc14_119 = Mem0[ecx_17 + 0x20:word32] + dwArg04;
	word32 ecx_29 = Mem0[ecx_17 + 0x1C:word32] + dwArg04;
	word32 dwLoc10_123 = 0x00;
	while (true)
	{
		word32 eax_114;
		if (dwLoc10_123 >=u Mem0[ecx_17 + 0x18:word32])
			break;
		word32 eax_79 = Mem0[dwLoc14_119 + 0x00:word32] + dwArg04;
		fn00401070(fp - 0x3C, 4225404, 0x0D);
		if (fn00401020(eax_79, fp - 0x3C, 0x0E) == 0x00)
		{
			eax_114 = ecx_29[(word32) eax_21[dwLoc10_123 * 0x02] * 0x04] + dwArg04;
			return eax_114;
		}
		dwLoc14_119 = dwLoc14_119 + 0x04;
		dwLoc10_123 = dwLoc10_123 + 0x01;
	}
	eax_114 = 0x00;
	return eax_114;
}

// 00401240: Register DWORD Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Mem22[0x004079E4:word32] = fn00401100(GetCommandLineA);
	if ((word32) Mem22[GetCommandLineA + 0x00:byte] != 161 && (word32) Mem22[GetCommandLineA + 0x00:byte] != 0xEB)
		Mem187[0x004079E4:word32] = 0x00AAE55A;
	Mem35[4225576:word32] = fn00401160(Mem22[0x004079E4:word32]);
	word32 dwLoc08_36 = 0x00;
	while (dwLoc08_36 <u 0x0F)
	{
		0x00407A00[dwLoc08_36 * 0x04] = fn004015D0(Mem35[0x004079E4:word32], dwLoc08_36 *s 0x15 + 0x00407840);
		dwLoc08_36 = dwLoc08_36 + 0x01;
	}
	Mem67[4225488:word32] = dwArg04;
	if ((Mem67[4225488:word32] & 0xFFFF) != 0x00)
		Mem181[4225504:word32] = 0x00;
	else
		Mem182[4225504:word32] = 0x01;
	if (Mem67[4225488:word32] == 0x00)
		Mem180[4225504:word32] = 0x00;
	word32 esp_84;
	word32 ebp_85;
	byte SCZO_86;
	word32 ebx_87;
	word32 esi_88;
	word32 edi_89;
	word32 eax_90;
	word32 ecx_91;
	word32 edx_92;
	bool Z_93;
	bool C_94;
	byte SZO_95;
	Mem67[4225584:word32]();
	Mem97[esp_84 - 0x04 + 0x00:word32] = 4225420;
	Mem100[esp_84 - 0x08 + 0x00:word32] = fp - 404;
	word32 esp_101;
	word32 ebp_102;
	byte SCZO_103;
	word32 ebx_104;
	word32 esi_105;
	word32 edi_106;
	word32 eax_107;
	word32 ecx_108;
	word32 edx_109;
	bool Z_110;
	bool C_111;
	byte SZO_112;
	Mem100[4225588:word32]();
	Mem114[esp_101 - 0x04 + 0x00:word32] = 0x00;
	RegCloseKey(Mem114[esp_101 - 0x04 + 0x00:HKEY]);
	Mem118[esp_101 - 0x04 + 0x00:word32] = 0x0040799C;
	Mem121[esp_101 - 0x08 + 0x00:word32] = fp - 404;
	word32 esp_122;
	word32 ebp_123;
	byte SCZO_124;
	word32 ebx_125;
	word32 esi_126;
	word32 edi_127;
	word32 eax_128;
	word32 ecx_129;
	word32 edx_130;
	bool Z_131;
	bool C_132;
	byte SZO_133;
	Mem121[4225588:word32]();
	Mem135[esp_122 - 0x04 + 0x00:word32] = 0x00;
	Mem137[esp_122 - 0x08 + 0x00:word32] = 0x80;
	Mem139[esp_122 - 0x0C + 0x00:word32] = 0x03;
	Mem141[esp_122 - 0x10 + 0x00:word32] = 0x00;
	Mem143[esp_122 - 0x14 + 0x00:word32] = 0x03;
	Mem145[esp_122 - 0x18 + 0x00:word32] = 0x80;
	Mem148[esp_122 - 0x1C + 0x00:word32] = fp - 404;
	word32 esp_149;
	word32 ebp_150;
	byte SCZO_151;
	word32 ebx_152;
	word32 esi_153;
	word32 edi_154;
	word32 eax_155;
	word32 ecx_156;
	word32 edx_157;
	bool Z_158;
	bool C_159;
	byte SZO_160;
	Mem148[4225592:word32]();
	if (eax_155 == ~0x00)
		return 0x00;
	Mem177[esp_149 - 0x04 + 0x00:word32] = eax_155;
}

// 004015D0: Register word32 fn004015D0(Stack word32 dwArg04, Stack word32 dwArg08)
word32 fn004015D0(word32 dwArg04, word32 dwArg08)
{
	word32 esp_18;
	word32 ebp_19;
	word32 ecx_20;
	word32 eax_21;
	Mem0[4225576:word32]();
	return eax_21;
}

