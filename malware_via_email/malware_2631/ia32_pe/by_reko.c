// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040100E: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_23 = CreateFileA(4415242, 0x40000000, 0x06, null, 0x03, 0x0105, 0x00);
	if (eax_23 != ~0x00)
	{
		GetFileSize(dwLoc08, null);
		CloseHandle(eax_23);
		GetVersion();
		GetCurrentThreadId();
		CloseHandle(eax_23);
		GetCurrentProcessId();
		VirtualProtect(&globals->v40125D, eax_23, 60080, (DWORD *) 0x40);
		GetCommandLineW();
		GetCommandLineW();
		GetCurrentProcessId();
		GetCurrentProcessId();
		word32 esp_183;
		word32 ebp_184;
		byte SCZO_185;
		word32 eax_186;
		byte Z_187;
		byte SZO_188;
		byte C_189;
		bcuisposr0 None_190;
		struct Eq_72 * edx_191;
		ui32 esi_192;
		byte D_193;
		byte al_194;
		word32 ecx_195;
		byte dh_196;
		byte bl_197;
		word16 dx_198;
		real64 rArg0_199;
		(dwLoc1C - ~0x40401204)();
		GetOEMCP();
		*(ebp - 0x24) = (uint32) GetVersion();
		Eq_33 eax_209 = CloseHandle(*(ebp - 0x1C));
		byte al_210 = (byte) eax_209;
		edx_191->dw7B8412FD = edx_191->dw7B8412FD & esi_192;
		byte al_215;
		__das(al_210, &al_215);
		edx_191->dwB1C12FFD = edx_191->dwB1C12FFD & esi_192;
		if (edx_191->dwB1C12FFD != 0x00 && ecx_195 != 0x01)
		{
			byte al_233;
			__das(al_215, &al_233);
			edx_191->b0000 = edx_191->b0000 & bl_197;
			__outdw(dx_198, eax_209);
		}
		else
		{
			(eax_209 - (struct <anonymous> *) 0x14)->dw0000 = (eax_209 - (struct <anonymous> *) 0x14)->dw0000 + 3696836911;
			byte al_226;
			__das(al_215, &al_226);
			edx_191->b0000 = -edx_191->b0000;
		}
	}
	else
	{
		GetFileType(dwLoc18);
		Eq_3 eax_32 = GetModuleHandleA(dwLoc18);
		GetACP();
		Eq_118 eax_40 = GetProcAddress(eax_32, 4415223);
		GetFileSize(eax_32, null);
		GetFileSize(eax_23, null);
		GetCurrentThreadId();
		CreateFileA(0x00435EE7, 0x40000000, 0x02, null, 0x03, 0x00, 0x00);
		GetCurrentThreadId();
		GetCommandLineA();
		int32 eax_83 = eax_40();
		GetProcessHeap();
		<anonymous> * eax_101 = (eax_83 ^ 0xC0000005) + 0x00401117;
		word32 esp_103;
		word32 ebp_104;
		byte SCZO_105;
		Eq_2 eax_106;
		byte Z_107;
		byte SZO_108;
		byte C_109;
		bcuisposr0 None_110;
		word32 edx_111;
		word32 esi_112;
		byte D_113;
		byte al_114;
		word32 ecx_115;
		byte dh_116;
		byte bl_117;
		word16 dx_118;
		real64 rArg0_119;
		eax_101();
		return eax_106;
	}
}

