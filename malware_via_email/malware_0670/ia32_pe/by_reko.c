// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401005: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	up32 edx_16 = edx - ebx;
	up32 edx_27 = edx_16 - ebx - (edx_16 < 0x00);
	word32 edx_45 = edx_27 - ebx - (edx_27 < 0x00) - ebx;
	word32 eax_58 = DPB(edx_45, DPB(edx_45, edx_45, 0), 0);
	word32 eax_93 = DPB(edx_45, DPB(edx_45, DPB(edx_45, DPB(edx_45, DPB(edx_45, DPB(edx_45, DPB(edx_45, DPB(edx_45, eax_58, 0), 0), 0), 0), 0), 0), 0), 0);
	word32 eax_106 = DPB(edx_45, DPB(edx_45, eax_93, 0), 0);
	word32 eax_109 = DPB(eax_106 + 0x01, eax_106 + 0x01, 0);
	word32 eax_112 = DPB(eax_109 + 0x01, eax_109 + 0x01, 0);
	Eq_2 eax_115 = DPB(eax_112 + 3185124241, eax_112 + 3185124241, 0);
	word32 ebp_123;
	word32 edi_124;
	int32 ebx_125 = fn004010D0(eax_115, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebp_123, out edi_124);
	Eq_2 eax_127 = DPB(eax_115, 0x00, 0);
	word32 ebp_128;
	word32 edi_129;
	fn004010D0(eax_127, ebx_125, ebp_123, edi_124, dwLoc2C, dwLoc16, esi, out ebp_128, out edi_129);
	return eax_127;
}

// 004010D0: Register int32 fn004010D0(Register Eq_2 eax, Register int32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebpOut, Register out ptr32 ediOut)
int32 fn004010D0(DWORD eax, int32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_156;
	struct Eq_80 * ebx_157;
	fn0040168E(ebx, dwLoc32, fp - 0x2A, out ecx_156, out ebx_157);
	word32 esp_181;
	word32 eax_182;
	byte SZO_183;
	word32 ebp_184;
	word32 edx_185;
	word16 ax_186;
	bool C_187;
	word16 cx_188;
	word32 ecx_189;
	byte SCZO_190;
	word32 esi_191;
	struct Eq_106 * ebx_192;
	word32 edi_193;
	word16 si_194;
	struct Eq_109 * fs_195;
	byte al_196;
	bool Z_197;
	byte dh_198;
	byte dl_199;
	byte bh_200;
	word16 bx_201;
	byte CZ_202;
	byte ah_203;
	byte cl_204;
	byte bl_205;
	ebx_157->ptr0018();
	ptr32 esp_208;
	word32 eax_209;
	byte SZO_210;
	word32 ebp_211;
	word32 edx_212;
	word16 ax_213;
	bool C_214;
	word16 cx_215;
	word32 ecx_216;
	byte SCZO_217;
	word32 esi_218;
	<anonymous> ** ebx_219;
	word32 edi_220;
	word16 si_221;
	struct Eq_137 * fs_222;
	byte al_223;
	bool Z_224;
	byte dh_225;
	byte dl_226;
	byte bh_227;
	word16 bx_228;
	byte CZ_229;
	byte ah_230;
	byte cl_231;
	byte bl_232;
	ebx_192->ptr001C();
	word32 eax_234 = DPB(eax_209, eax_209, 0);
	word32 eax_237 = DPB(eax_234 + 0x06, eax_234 + 0x06, 0);
	*(esp_208 - 0x04) = eax_237;
	*(esp_208 - 0x08) = DPB(eax_237, eax_237, 0);
	struct Eq_169 * esp_254;
	word32 eax_255;
	byte SZO_256;
	word32 ebp_257;
	word32 edx_258;
	word16 ax_259;
	bool C_260;
	word16 cx_261;
	word32 ecx_262;
	byte SCZO_263;
	word32 esi_264;
	word32 ebx_265;
	word32 edi_266;
	word16 si_267;
	struct Eq_183 * fs_268;
	byte al_269;
	bool Z_270;
	byte dh_271;
	byte dl_272;
	byte bh_273;
	word16 bx_274;
	byte CZ_275;
	byte ah_276;
	byte cl_277;
	byte bl_278;
	(*ebx_219)();
	esp_254->dw0038 = ebx_265;
	esp_254->dw003C = esi_264;
	*(esp_254 - 0x04) = ebx_265;
	*(esp_254 - 0x04) = *(esp_254 - 0x04) - 0x04;
	word32 eax_295 = DPB(eax_255, DPB(eax_255, DPB(eax_255, DPB(eax_255, DPB(eax_255, eax_255, 0), 0), 0), 0), 0);
	struct Eq_224 * edi_300 = *(esp_254 - 0x04);
	*(esp_254 - 0x04) = DPB(eax_255, eax_295, 0);
	*(esp_254 - 0x08) = ecx_262;
	*(esp_254 - 0x0C) = esp_254 - 0x08;
	*(esp_254 - 0x10) = 0x40;
	*(esp_254 - 0x14) = esp_254->dw0020;
	*(esp_254 - 0x18) = esp_254->dw0014;
	esp_254->dw0018 = 0x00;
	struct Eq_272 * esp_338;
	word32 eax_339;
	byte SZO_340;
	word32 edx_342;
	word16 ax_343;
	bool C_344;
	word16 cx_345;
	word32 ecx_346;
	byte SCZO_347;
	word32 esi_348;
	word32 ebx_349;
	word32 edi_350;
	word16 si_351;
	struct Eq_285 * fs_352;
	byte al_353;
	bool Z_354;
	byte dh_355;
	byte dl_356;
	byte bh_357;
	word16 bx_358;
	byte ah_360;
	byte cl_361;
	byte bl_362;
	byte CZ_1295;
	word32 ebp_1247;
	edi_300->ptr0010();
	struct Eq_300 Eq_285::* eax_364 = DPB(eax_339, eax_339, 0);
	word32 eax_365 = eax_364 + (fs_352->*eax_364).dw002F / 0x0033;
	struct Eq_307 * eax_368 = DPB(eax_365, eax_365, 0);
	word32 ecx_371 = eax_368->dw0003;
	esp_338->dw0030 = esp_338->dw0030 + ecx_371;
	esp_338->ptr0000 = eax_368;
	esp_338->ptr0004 = esp_338->ptr0000;
	struct Eq_307 * edi_391 = esp_338->ptr0008;
	esp_338->ptr0008 = esp_338->ptr0004;
	struct Eq_307 * ebx_1255 = esp_338->ptr000C;
	esp_338->ptr000C = esp_338->ptr0008;
	struct Eq_307 * eax_406 = esp_338->ptr000C;
	word32 * esi_1254 = esp_338->ptr0010;
	esp_338->ptr0010 = (word32 *) &eax_406->dw0003;
	word32 * eax_422 = esp_338->ptr0010;
	word32 ecx_424 = *eax_422;
	esp_338->ptr0010 = eax_422;
	word32 * eax_428 = esp_338->ptr0010;
	esp_338->dw003C = esp_338->dw003C ^ ecx_424;
	esp_338->ptr0010 = eax_428;
	esp_338->ptr0010 = esp_338->ptr001C;
	word32 * eax_443 = esp_338->ptr0010;
	word32 ecx_448 = esp_338->dw002C;
	*(esp_338 - 244) = eax_443;
	*(esp_338 - 0xF8) = eax_443;
	word32 eax_457 = *(esp_338 - 0xF8);
	*(esp_338 - 0xF0) = ecx_448;
	*(esp_338 - 0xF8) = eax_457;
	*(esp_338 - 0xF8) = (struct Eq_307 **) edi_391;
	int32 eax_467 = 0x00;
	do
	{
		*(esp_338 - 252) = eax_467;
		word32 eax_479 = *(esp_338 - 252);
		esp_338 - 0xEC + eax_467 = (byte *) (byte) eax_479;
		*(esp_338 - 252) = eax_479;
		*(esp_338 - 252) = *(esp_338 - 252) + 0x01;
		up32 eax_493 = *(esp_338 - 252);
		*(esp_338 - 252) = eax_493;
		eax_467 = *(esp_338 - 252);
	} while (eax_493 < 0x0100);
	*(esp_338 - 252) = eax_467;
	word32 edi_1256 = *(esp_338 - 0xF8);
	*(esp_338 - 0xF8) = *(esp_338 - 252);
	*(esp_338 - 0xF8) = &esp_338->dw003C + 0x02;
	byte * eax_521 = *(esp_338 - 0xF8);
	*(esp_338 - 0xF8) = (byte **) eax_521;
	ptr32 eax_1288 = *(esp_338 - 0xF8);
	ptr32 esp_1273 = esp_338 - 244;
	if (*eax_521 != 121)
	{
		struct Eq_522 * edi_1038 = *(eax_1288 - 0x04);
		do
		{
			word32 esp_1039;
			word32 eax_1040;
			byte SZO_1041;
			word32 ebp_1042;
			word32 edx_1043;
			word16 ax_1044;
			bool C_1045;
			word16 cx_1046;
			word32 ecx_1047;
			byte SCZO_1048;
			word32 esi_1049;
			word32 ebx_1050;
			struct Eq_546 * edi_1051;
			word16 si_1052;
			struct Eq_548 * fs_1053;
			byte al_1054;
			bool Z_1055;
			byte dh_1056;
			byte dl_1057;
			byte bh_1058;
			word16 bx_1059;
			byte CZ_1060;
			byte ah_1061;
			byte cl_1062;
			byte bl_1063;
			edi_1038->ptr0018();
			ptr32 esp_1064;
			word32 eax_1065;
			byte SZO_1066;
			word32 ebp_1067;
			word32 edx_1068;
			word16 ax_1069;
			bool C_1070;
			word16 cx_1071;
			word32 ecx_1072;
			byte SCZO_1073;
			word32 esi_1074;
			word32 ebx_1075;
			struct Eq_612 * edi_1076;
			word16 si_1077;
			struct Eq_614 * fs_1078;
			byte al_1079;
			bool Z_1080;
			byte dh_1081;
			byte dl_1082;
			byte bh_1083;
			word16 bx_1084;
			byte CZ_1085;
			byte ah_1086;
			byte cl_1087;
			byte bl_1088;
			edi_1051->ptr0018();
			*(esp_1064 - 0x04) = eax_1065;
			ptr32 esp_1094;
			word32 eax_1095;
			byte SZO_1096;
			word32 ebp_1097;
			word32 edx_1098;
			word16 ax_1099;
			bool C_1100;
			word16 cx_1101;
			word32 ecx_1102;
			byte SCZO_1103;
			word32 esi_1104;
			word32 ebx_1105;
			struct Eq_645 * edi_1106;
			word16 si_1107;
			struct Eq_647 * fs_1108;
			byte al_1109;
			bool Z_1110;
			byte dh_1111;
			byte dl_1112;
			byte bh_1113;
			word16 bx_1114;
			byte CZ_1115;
			byte ah_1116;
			byte cl_1117;
			byte bl_1118;
			edi_1076->ptr0018();
			*(esp_1094 - 0x04) = eax_1095;
			ptr32 esp_1124;
			word32 eax_1125;
			byte SZO_1126;
			word32 ebp_1127;
			word32 edx_1128;
			word16 ax_1129;
			bool C_1130;
			word16 cx_1131;
			word32 ecx_1132;
			byte SCZO_1133;
			word32 esi_1134;
			word32 ebx_1135;
			struct Eq_678 * edi_1136;
			word16 si_1137;
			struct Eq_680 * fs_1138;
			byte al_1139;
			bool Z_1140;
			byte dh_1141;
			byte dl_1142;
			byte bh_1143;
			word16 bx_1144;
			byte CZ_1145;
			byte ah_1146;
			byte cl_1147;
			byte bl_1148;
			edi_1106->ptr0018();
			*(esp_1124 - 0x04) = eax_1125;
			ptr32 esp_1154;
			word32 eax_1155;
			byte SZO_1156;
			word32 ebp_1157;
			word32 edx_1158;
			word16 ax_1159;
			bool C_1160;
			word16 cx_1161;
			word32 ecx_1162;
			byte SCZO_1163;
			word32 esi_1164;
			word32 ebx_1165;
			struct Eq_711 * edi_1166;
			word16 si_1167;
			struct Eq_713 * fs_1168;
			byte al_1169;
			bool Z_1170;
			byte dh_1171;
			byte dl_1172;
			byte bh_1173;
			word16 bx_1174;
			byte CZ_1175;
			byte ah_1176;
			byte cl_1177;
			byte bl_1178;
			edi_1136->ptr0018();
			*(esp_1154 - 0x04) = eax_1155;
			ptr32 esp_1184;
			word32 eax_1185;
			byte SZO_1186;
			word32 ebp_1187;
			word32 edx_1188;
			word16 ax_1189;
			bool C_1190;
			word16 cx_1191;
			word32 ecx_1192;
			byte SCZO_1193;
			word32 esi_1194;
			word32 ebx_1195;
			struct Eq_744 * edi_1196;
			word16 si_1197;
			struct Eq_746 * fs_1198;
			byte al_1199;
			bool Z_1200;
			byte dh_1201;
			byte dl_1202;
			byte bh_1203;
			word16 bx_1204;
			byte CZ_1205;
			byte ah_1206;
			byte cl_1207;
			byte bl_1208;
			edi_1166->ptr0018();
			*(esp_1184 - 0x04) = eax_1185;
			ptr32 esp_1214;
			word32 eax_1215;
			byte SZO_1216;
			word32 ebp_1217;
			word32 edx_1218;
			word16 ax_1219;
			bool C_1220;
			word16 cx_1221;
			word32 ecx_1222;
			byte SCZO_1223;
			word32 esi_1224;
			word32 ebx_1225;
			struct Eq_777 * edi_1226;
			word16 si_1227;
			struct Eq_779 * fs_1228;
			byte al_1229;
			bool Z_1230;
			byte dh_1231;
			byte dl_1232;
			byte bh_1233;
			word16 bx_1234;
			byte CZ_1235;
			byte ah_1236;
			byte cl_1237;
			byte bl_1238;
			edi_1196->ptr0018();
			*(esp_1214 - 0x04) = eax_1215;
			ptr32 esp_1244;
			word32 eax_1245;
			byte SZO_1246;
			word32 edx_1248;
			word16 ax_1249;
			bool C_1250;
			word16 cx_1251;
			word32 ecx_1252;
			byte SCZO_1253;
			word16 si_1257;
			struct Eq_808 * fs_1258;
			byte al_1259;
			bool Z_1260;
			byte dh_1261;
			byte dl_1262;
			byte bh_1263;
			word16 bx_1264;
			byte CZ_1265;
			byte ah_1266;
			byte cl_1267;
			byte bl_1268;
			edi_1226->ptr0010();
			*(esp_1244 - 0x04) = eax_1245;
			word32 eax_1272 = *(esp_1244 - 0x04);
			esp_1273 = esp_1244;
			word16 ax_1283 = (word16) (eax_1272 + 0x01);
			cup16 ax_1287 = ax_1283 - cx_1251;
			eax_1288 = DPB(eax_1272 + 0x01, ax_1287, 0);
			CZ_1295 = cond(ax_1287);
		} while (ax_1287 < 0x00);
	}
	struct Eq_528 * esp_559 = esp_1273 - 0x04;
	esp_559->dw0000 = ebp_1247;
	*(esp_559 - 0x04) = esi_1254;
	*(esp_559 - 0x08) = eax_1288;
	word32 eax_566 = *(esp_559 - 0x08);
	*(esp_559 - 0x08) = edi_1256;
	*(esp_559 - 0x0C) = eax_566;
	*(esp_559 - 0x0C) = *(esp_559 - 0x0C);
	up32 edi_581 = esp_559->dw011C;
	*(esp_559 - 0x0C) = 0x00;
	*(esp_559 - 0x0C) = *(esp_559 - 0x0C);
	word32 eax_600 = *(esp_559 - 0x0C);
	*(esp_559 - 0x0C) = (struct Eq_307 **) ebx_1255;
	*(esp_559 - 0x10) = eax_600;
	int32 esi_588 = 0x00;
	int32 ebp_594 = 0x00;
	word32 eax_607 = *(esp_559 - 0x10);
	do
	{
		struct Eq_889 * esp_621 = esp_1273 - 0x10;
		word32 ebx_622 = (word32) esp_621->a0018[ebp_594];
		*(esp_621 - 0x04) = eax_607;
		ptr32 edx_630 = esp_621->ptr0014;
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		int32 eax_634 = *(esp_621 - 0x04);
		word32 edx_636 = (word32) (edx_630 + eax_634);
		*(esp_621 - 0x04) = eax_634;
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		word16 bx_623 = (word16) ebx_622;
		up32 eax_652 = *(esp_621 - 0x04);
		word32 edx_657 = edx_636 + (ebx_622 + esi_588);
		int32 edx_661 = DPB(edx_657, 0x00, 8);
		esi_588 = edx_661;
		*(esp_621 - 0x04) = eax_652 + 0x01;
		word32 eax_1033 = *(esp_621 - 0x04);
		if (eax_652 + 0x01 >= edi_581)
		{
			*(esp_621 - 0x04) = eax_1033;
			*(esp_621 - 0x04) = 0x00;
			eax_1033 = *(esp_621 - 0x04);
		}
		byte dl_684 = esp_621->a0018[edx_661];
		*(esp_621 - 0x04) = eax_1033;
		word32 eax_688 = *(esp_621 - 0x04);
		esp_621->a0018[ebp_594] = dl_684;
		*(esp_621 - 0x04) = eax_688;
		ui32 eax_694 = *(esp_621 - 0x04);
		ebp_594 = ebp_594 + 0x01;
		ptr32 edx_701 = esp_621->a0018 + edx_661;
		ptr32 edx_704 = edx_701 - eax_694;
		word16 bx_709 = DPB(bx_623, eax_694 + 0x01 + edx_704, 8);
		*(esp_621 - 0x04) = eax_694;
		int32 eax_713 = *(esp_621 - 0x04);
		eax_713 + edx_704 = (word16 *) bx_709;
		*(esp_621 - 0x04) = eax_713;
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		*(esp_621 - 0x04) = *(esp_621 - 0x04);
		eax_607 = *(esp_621 - 0x04);
	} while (SLICE(ebp_594, byte, 8) != 0x01);
	word32 esi_745 = 0x00;
	*(esp_621 - 0x04) = 0x00;
	int32 eax_755 = *(esp_621 - 0x04);
	int32 ebx_760 = esp_621->dw0000;
	word32 ebp_1003 = esp_621->dw012C;
	ptr32 edi_766 = esp_621->ptr0010;
	esp_621->dw0000 = eax_755;
	esp_621->dw0000 = esp_621->dw0000;
	int32 edx_772 = ebx_760;
	int32 eax_1009 = esp_621->dw0000;
	Eq_1102 CZ_787 = DPB(CZ_1295, false, 0);
	if (!CZ_787)
	{
		do
		{
			esp_621->dw0000 = eax_1009 + 0x01;
			int32 eax_886 = DPB(esp_621->dw0000, 0x00, 8);
			byte cl_889 = esp_621->a0018[eax_886];
			esp_621->dw0000 = eax_886;
			int32 eax_899 = esp_621->dw0000;
			word32 ebx_905 = (word32) cl_889;
			word32 ebx_907 = ebx_905 + esi_745;
			word32 ebx_912 = DPB(ebx_907, 0x00, 8);
			byte dl_918 = (&esp_621->dw0000 + 0x01)[(ebx_912 + 0x14) / 0x0130];
			esp_621->a0018[eax_899] = dl_918;
			esp_621->dw0000 = eax_899;
			int32 eax_924 = esp_621->dw0000;
			esp_621->dw0000 = eax_924;
			*(esp_621 - 0x04) = eax_924;
			*(esp_621 - 0x04) = &esp_621->dw0000 + 0x01 + (ebx_912 + 0x14) / 0x0130;
			byte * eax_937 = *(esp_621 - 0x04);
			*eax_937 = cl_889;
			*(esp_621 - 0x04) = (byte **) eax_937;
			esp_621->dw0000 = esp_621->dw0000;
			word32 edx_955 = (word32) dl_918;
			int32 eax_950 = esp_621->dw0000;
			byte dl_956 = (byte) edx_955;
			word32 edx_958 = DPB(edx_955, dl_956 + cl_889, 0);
			esp_621->dw0000 = eax_950;
			ui32 ecx_968 = (&esp_621->dw0000 + 0x01)[(edx_958 + 0x14) / 0x0130];
			esp_621->dw0000 = esp_621->dw0000;
			esp_621->dw0000 = esp_621->dw0000;
			esp_621->dw0000 = esp_621->dw0000;
			int32 eax_986 = esp_621->dw0000;
			*(edi_766 - 0x01) = *(edi_766 - 0x01) ^ (word16) (ecx_968 << 0x08);
			esp_621->dw0000 = eax_986;
			esp_621->dw0000 = esp_621->dw0000;
			esp_621->dw0000 = esp_621->dw0000;
			edx_772 = edx_958 + 0x14;
			esi_745 = ebx_912;
			edi_766 = edi_766 + 0x01;
			ebp_1003 = ebp_1003 - 0x01;
			eax_1009 = esp_621->dw0000;
		} while (ebp_1003 != 0x00);
		esp_621->dw0000 = eax_1009;
		eax_1009 = esp_621->dw0000;
	}
	struct Eq_1105 * esp_809 = esp_1273 - 0x0C;
	word32 edi_810;
	*ediOut = esp_809->dw0000;
	word32 ebp_814;
	*ebpOut = esp_809->dw0008;
	esp_809->dw0008 = eax_1009;
	esp_809->dw0114 = esp_809->dw0008;
	esp_809->dw0118 = esp_809->dw0118;
	esp_809->dw0140 = esp_809->dw0118;
	word32 eax_839 = esp_809->dw0140;
	esp_809->dw0140 = eax_839;
	esp_809->dw013C = eax_839;
	esp_809->dw013C = esp_809->dw013C;
	return edx_772;
}

// 0040168E: Register word16 fn0040168E(Register int32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
word16 fn0040168E(int32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 ax_63 = DPB(eax_24, 0x00, 0) + 0x00;
		word32 eax_68 = DPB(eax_24, ax_63 + 42421, 0);
		byte al_79 = (byte) (ax_63 + 42421);
		if (ax_63 == 42419)
			break;
		eax_24 = eax_68 - 0x00010000;
	}
	word32 eax_95 = DPB(eax_24, al_79 & 0x00, 0);
	struct Eq_1342 * eax_104 = DPB(eax_95, SLICE(eax_95, byte, 8) & (al_79 & 0x00), 8);
	int32 ecx_154 = eax_104[(&(eax_104 + eax_104->dw003C / 0x0040)->dw003C)[0x0011] / 0x0040];
	*ecxOut = ecx_154;
	ptr32 eax_160 = eax_104 + ecx_154 / 0x0040;
	word16 ax_172 = (word16) (eax_160 + 0x04);
	word32 ebx_176;
	*ebxOut = eax_160 + 0x04;
	return ax_172;
}

