// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401004: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	word32 ebx_103;
	word32 ebp_104;
	word32 edi_105;
	Eq_2 eax_106 = fn004010D0(edx_39 + 192232248, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebx_103, out ebp_104, out edi_105);
	word32 ebx_107;
	word32 ebp_108;
	word32 edi_109;
	return fn004010D0(eax_106, ebx_103, ebp_104, edi_105, dwLoc2C, dwLoc16, esi, out ebx_107, out ebp_108, out edi_109);
}

// 004010D0: Register Eq_2 fn004010D0(Register Eq_2 eax, Register word32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
DWORD fn004010D0(DWORD eax, word32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_136;
	struct Eq_50 * ebx_137;
	fn0040169A(ebx, dwLoc32, fp - 0x2A, out ecx_136, out ebx_137);
	word32 esp_155;
	word32 eax_156;
	byte SZO_157;
	word32 ebp_158;
	word32 edx_159;
	bool C_160;
	word16 ax_161;
	word16 cx_162;
	word32 ecx_163;
	byte SCZO_164;
	word32 esi_165;
	struct Eq_76 * ebx_166;
	word32 edi_167;
	word16 si_168;
	struct Eq_79 * fs_169;
	byte al_170;
	bool Z_171;
	byte dh_172;
	byte dl_173;
	byte bh_174;
	word16 bx_175;
	byte CZ_176;
	byte ah_177;
	byte cl_178;
	byte bl_179;
	ebx_137->ptr0018();
	ptr32 esp_181;
	word32 eax_182;
	byte SZO_183;
	word32 ebp_184;
	word32 edx_185;
	bool C_186;
	word16 ax_187;
	word16 cx_188;
	word32 ecx_189;
	byte SCZO_190;
	word32 esi_191;
	<anonymous> ** ebx_192;
	word32 edi_193;
	word16 si_194;
	struct Eq_107 * fs_195;
	byte al_196;
	bool Z_197;
	byte dh_198;
	byte dl_199;
	byte bh_200;
	word16 bx_201;
	byte CZ_202;
	byte ah_203;
	byte cl_204;
	byte bl_205;
	ebx_166->ptr001C();
	*(esp_181 - 0x04) = eax_182 + 0x06;
	*(esp_181 - 0x08) = eax_182 + 0x06;
	struct Eq_134 * esp_224;
	word32 eax_225;
	byte SZO_226;
	word32 ebp_227;
	word32 edx_228;
	bool C_229;
	word16 ax_230;
	word16 cx_231;
	word32 ecx_232;
	byte SCZO_233;
	word32 esi_234;
	word32 ebx_235;
	word32 edi_236;
	word16 si_237;
	struct Eq_148 * fs_238;
	byte al_239;
	bool Z_240;
	byte dh_241;
	byte dl_242;
	byte bh_243;
	word16 bx_244;
	byte CZ_245;
	byte ah_246;
	byte cl_247;
	byte bl_248;
	(*ebx_192)();
	esp_224->dw0038 = ebx_235;
	esp_224->dw003C = esi_234;
	*(esp_224 - 0x04) = ebx_235;
	*(esp_224 - 0x04) = *(esp_224 - 0x04) - 0x04;
	struct Eq_183 * edi_266 = *(esp_224 - 0x04);
	*(esp_224 - 0x04) = eax_225;
	*(esp_224 - 0x08) = ecx_232;
	*(esp_224 - 0x0C) = esp_224 - 0x08;
	*(esp_224 - 0x10) = 0x40;
	*(esp_224 - 0x14) = esp_224->dw0020;
	*(esp_224 - 0x18) = esp_224->dw0014;
	esp_224->dw0018 = 0x00;
	*(esp_224 - 0x1C) = ~0x00;
	struct Eq_236 * esp_299;
	struct Eq_237 Eq_249::* eax_300;
	byte SZO_301;
	word32 edx_303;
	bool C_304;
	word16 ax_305;
	word16 cx_306;
	word32 ecx_307;
	byte SCZO_308;
	word32 esi_309;
	word32 ebx_310;
	word32 edi_311;
	word16 si_312;
	struct Eq_249 * fs_313;
	byte al_314;
	bool Z_315;
	byte dh_316;
	byte dl_317;
	byte bh_318;
	word16 bx_319;
	byte CZ_320;
	byte ah_321;
	byte cl_322;
	byte bl_323;
	word32 ebp_1200;
	edi_266->ptr0010();
	struct Eq_264 * eax_325 = eax_300 + (fs_313->*eax_300).dw002F / 0x0033;
	word32 ecx_331 = eax_325->dw0003;
	esp_299->dw0030 = esp_299->dw0030 + ecx_331;
	esp_299->ptr0000 = eax_325;
	esp_299->ptr0004 = esp_299->ptr0000;
	struct Eq_264 * edi_351 = esp_299->ptr0008;
	esp_299->ptr0008 = esp_299->ptr0004;
	struct Eq_264 * ebx_1208 = esp_299->ptr000C;
	esp_299->ptr000C = esp_299->ptr0008;
	struct Eq_264 * eax_366 = esp_299->ptr000C;
	word32 * esi_1207 = esp_299->ptr0010;
	esp_299->ptr0010 = (word32 *) &eax_366->dw0003;
	word32 * eax_382 = esp_299->ptr0010;
	word32 ecx_384 = *eax_382;
	esp_299->ptr0010 = eax_382;
	word32 * eax_388 = esp_299->ptr0010;
	esp_299->dw003C = esp_299->dw003C ^ ecx_384;
	esp_299->ptr0010 = eax_388;
	esp_299->ptr0010 = esp_299->ptr001C;
	word32 ecx_404 = esp_299->dw002C;
	esp_299->ptr0010 = esp_299->ptr0010;
	*(esp_299 - 0xF8) = esp_299->ptr0010;
	word32 eax_417 = *(esp_299 - 0xF8);
	*(esp_299 - 244) = eax_417;
	*(esp_299 - 0xF8) = eax_417;
	word32 eax_423 = *(esp_299 - 0xF8);
	*(esp_299 - 0xF0) = ecx_404;
	*(esp_299 - 0xF8) = eax_423;
	*(esp_299 - 0xF8) = (struct Eq_264 **) edi_351;
	int32 eax_433 = 0x00;
	do
	{
		*(esp_299 - 252) = eax_433;
		word32 eax_445 = *(esp_299 - 252);
		esp_299 - 0xEC + eax_433 = (byte *) (byte) eax_445;
		*(esp_299 - 252) = eax_445;
		*(esp_299 - 252) = *(esp_299 - 252) + 0x01;
		up32 eax_459 = *(esp_299 - 252);
		*(esp_299 - 252) = eax_459;
		eax_433 = *(esp_299 - 252);
	} while (eax_459 < 0x0100);
	*(esp_299 - 252) = eax_433;
	word32 edi_1209 = *(esp_299 - 0xF8);
	*(esp_299 - 0xF8) = *(esp_299 - 252);
	*(esp_299 - 0xF8) = &esp_299->dw003C + 0x02;
	byte * eax_487 = *(esp_299 - 0xF8);
	*(esp_299 - 0xF8) = (byte **) eax_487;
	ptr32 eax_1252 = *(esp_299 - 0xF8);
	ptr32 esp_1256 = esp_299 - 244;
	if (*eax_487 != 121)
	{
		struct Eq_496 * edi_1005 = *(eax_1252 - 0x04);
		do
		{
			ptr32 esp_1006;
			word32 eax_1007;
			byte SZO_1008;
			word32 ebp_1009;
			word32 edx_1010;
			bool C_1011;
			word16 ax_1012;
			word16 cx_1013;
			word32 ecx_1014;
			byte SCZO_1015;
			word32 esi_1016;
			word32 ebx_1017;
			struct Eq_520 * edi_1018;
			word16 si_1019;
			struct Eq_522 * fs_1020;
			byte al_1021;
			bool Z_1022;
			byte dh_1023;
			byte dl_1024;
			byte bh_1025;
			word16 bx_1026;
			byte CZ_1027;
			byte ah_1028;
			byte cl_1029;
			byte bl_1030;
			edi_1005->ptr0018();
			*(esp_1006 - 0x04) = eax_1007;
			word32 esp_1039;
			word32 eax_1040;
			byte SZO_1041;
			word32 ebp_1042;
			word32 edx_1043;
			bool C_1044;
			word16 ax_1045;
			word16 cx_1046;
			word32 ecx_1047;
			byte SCZO_1048;
			word32 esi_1049;
			word32 ebx_1050;
			struct Eq_553 * edi_1051;
			word16 si_1052;
			struct Eq_555 * fs_1053;
			byte al_1054;
			bool Z_1055;
			byte dh_1056;
			byte dl_1057;
			byte bh_1058;
			word16 bx_1059;
			byte CZ_1060;
			byte ah_1061;
			byte cl_1062;
			byte bl_1063;
			edi_1018->ptr0010();
			word32 esp_1064;
			word32 eax_1065;
			byte SZO_1066;
			word32 ebp_1067;
			word32 edx_1068;
			bool C_1069;
			word16 ax_1070;
			word16 cx_1071;
			word32 ecx_1072;
			byte SCZO_1073;
			word32 esi_1074;
			word32 ebx_1075;
			struct Eq_619 * edi_1076;
			word16 si_1077;
			struct Eq_621 * fs_1078;
			byte al_1079;
			bool Z_1080;
			byte dh_1081;
			byte dl_1082;
			byte bh_1083;
			word16 bx_1084;
			byte CZ_1085;
			byte ah_1086;
			byte cl_1087;
			byte bl_1088;
			edi_1051->ptr0018();
			word32 esp_1089;
			word32 eax_1090;
			byte SZO_1091;
			word32 ebp_1092;
			word32 edx_1093;
			bool C_1094;
			word16 ax_1095;
			word16 cx_1096;
			word32 ecx_1097;
			byte SCZO_1098;
			word32 esi_1099;
			word32 ebx_1100;
			struct Eq_647 * edi_1101;
			word16 si_1102;
			struct Eq_649 * fs_1103;
			byte al_1104;
			bool Z_1105;
			byte dh_1106;
			byte dl_1107;
			byte bh_1108;
			word16 bx_1109;
			byte CZ_1110;
			byte ah_1111;
			byte cl_1112;
			byte bl_1113;
			edi_1076->ptr0018();
			word32 esp_1114;
			word32 eax_1115;
			byte SZO_1116;
			word32 ebp_1117;
			word32 edx_1118;
			bool C_1119;
			word16 ax_1120;
			word16 cx_1121;
			word32 ecx_1122;
			byte SCZO_1123;
			word32 esi_1124;
			word32 ebx_1125;
			struct Eq_714 * edi_1126;
			word16 si_1127;
			struct Eq_716 * fs_1128;
			byte al_1129;
			bool Z_1130;
			byte dh_1131;
			byte dl_1132;
			byte bh_1133;
			word16 bx_1134;
			byte CZ_1135;
			byte ah_1136;
			byte cl_1137;
			byte bl_1138;
			edi_1101->ptr0018();
			word32 esp_1139;
			word32 eax_1140;
			byte SZO_1141;
			word32 ebp_1142;
			word32 edx_1143;
			bool C_1144;
			word16 ax_1145;
			word16 cx_1146;
			word32 ecx_1147;
			byte SCZO_1148;
			word32 esi_1149;
			word32 ebx_1150;
			struct Eq_746 * edi_1151;
			word16 si_1152;
			struct Eq_748 * fs_1153;
			byte al_1154;
			bool Z_1155;
			byte dh_1156;
			byte dl_1157;
			byte bh_1158;
			word16 bx_1159;
			byte CZ_1160;
			byte ah_1161;
			byte cl_1162;
			byte bl_1163;
			edi_1126->ptr0018();
			ptr32 esp_1164;
			word32 eax_1165;
			byte SZO_1166;
			word32 ebp_1167;
			word32 edx_1168;
			bool C_1169;
			word16 ax_1170;
			word16 cx_1171;
			word32 ecx_1172;
			byte SCZO_1173;
			word32 esi_1174;
			word32 ebx_1175;
			struct Eq_806 * edi_1176;
			word16 si_1177;
			struct Eq_808 * fs_1178;
			byte al_1179;
			bool Z_1180;
			byte dh_1181;
			byte dl_1182;
			byte bh_1183;
			word16 bx_1184;
			byte CZ_1185;
			byte ah_1186;
			byte cl_1187;
			byte bl_1188;
			edi_1151->ptr0018();
			*(esp_1164 - 0x04) = eax_1165;
			ptr32 esp_1197;
			word32 eax_1198;
			byte SZO_1199;
			word32 edx_1201;
			bool C_1202;
			word16 ax_1203;
			word16 cx_1204;
			word32 ecx_1205;
			byte SCZO_1206;
			word16 si_1210;
			struct Eq_837 * fs_1211;
			byte al_1212;
			bool Z_1213;
			byte dh_1214;
			byte dl_1215;
			byte bh_1216;
			word16 bx_1217;
			byte CZ_1218;
			byte ah_1219;
			byte cl_1220;
			byte bl_1221;
			edi_1176->ptr0010();
			*(esp_1197 - 0x04) = eax_1198 + 0x01;
			word32 eax_1234 = *(esp_1197 - 0x04);
			cup16 ax_1237 = (word16) eax_1234 - cx_1204;
			*(esp_1197 - 0x04) = DPB(eax_1234, ax_1237, 0);
			word32 eax_1244 = *(esp_1197 - 0x04);
		} while (ax_1237 < 0x00);
		*(esp_1197 - 0x04) = eax_1244;
		eax_1252 = *(esp_1197 - 0x04);
		esp_1256 = esp_1197;
	}
	struct Eq_502 * esp_525 = esp_1256 - 0x04;
	esp_525->dw0000 = ebp_1200;
	*(esp_525 - 0x04) = esi_1207;
	*(esp_525 - 0x08) = eax_1252;
	word32 eax_532 = *(esp_525 - 0x08);
	*(esp_525 - 0x08) = edi_1209;
	*(esp_525 - 0x0C) = eax_532;
	*(esp_525 - 0x0C) = *(esp_525 - 0x0C);
	up32 edi_547 = esp_525->dw011C;
	*(esp_525 - 0x0C) = 0x00;
	*(esp_525 - 0x0C) = *(esp_525 - 0x0C);
	word32 eax_566 = *(esp_525 - 0x0C);
	*(esp_525 - 0x0C) = (struct Eq_264 **) ebx_1208;
	*(esp_525 - 0x10) = eax_566;
	int32 esi_554 = 0x00;
	int32 ebp_560 = 0x00;
	int32 eax_573 = *(esp_525 - 0x10);
	do
	{
		struct Eq_765 * esp_588 = esp_1256 - 0x10;
		word32 ebx_589 = (word32) esp_588->a0018[ebp_560];
		*(esp_588 - 0x04) = eax_573;
		ptr32 edx_597 = esp_588->ptr0014;
		*(esp_588 - 0x04) = *(esp_588 - 0x04);
		int32 eax_601 = *(esp_588 - 0x04);
		word32 edx_603 = (word32) (edx_597 + eax_601);
		*(esp_588 - 0x04) = eax_601;
		*(esp_588 - 0x04) = *(esp_588 - 0x04);
		*(esp_588 - 0x04) = *(esp_588 - 0x04);
		word16 bx_590 = (word16) ebx_589;
		word32 eax_619 = *(esp_588 - 0x04);
		word32 edx_624 = edx_603 + (ebx_589 + esi_554);
		int32 edx_628 = DPB(edx_624, 0x00, 8);
		*(esp_588 - 0x04) = eax_619 + 0x01;
		*(esp_588 - 0x04) = *(esp_588 - 0x04);
		up32 eax_642 = *(esp_588 - 0x04);
		*(esp_588 - 0x04) = eax_642;
		esi_554 = edx_628;
		word32 eax_649 = *(esp_588 - 0x04);
		if (eax_642 >= edi_547)
		{
			*(esp_588 - 0x04) = eax_649;
			eax_649 = 0x00;
		}
		byte dl_661 = esp_588->a0018[edx_628];
		esp_588->a0018[ebp_560] = dl_661;
		*(esp_588 - 0x04) = eax_649;
		*(esp_588 - 0x04) = *(esp_588 - 0x04);
		ebp_560 = ebp_560 + 0x01;
		ui32 eax_674 = *(esp_588 - 0x04);
		ptr32 edx_679 = esp_588->a0018 + edx_628;
		ptr32 edx_682 = edx_679 - eax_674;
		word16 bx_687 = DPB(bx_590, eax_674 + 0x01 + edx_682, 8);
		*(esp_588 - 0x04) = eax_674;
		int32 eax_691 = *(esp_588 - 0x04);
		eax_691 + edx_682 = (word16 *) bx_687;
		byte bh_698 = SLICE(ebp_560, byte, 8);
		byte SZO_702 = cond(bh_698 - 0x01);
		eax_573 = eax_691;
	} while (bh_698 != 0x01);
	*(esp_588 - 0x04) = eax_691;
	*(esp_588 - 0x04) = *(esp_588 - 0x04);
	*(esp_588 - 0x04) = 0x00;
	word32 esi_715 = 0x00;
	int32 eax_728 = *(esp_588 - 0x04);
	int32 ebx_733 = esp_588->dw0000;
	word32 ebp_738 = esp_588->dw012C;
	ptr32 edi_739 = esp_588->ptr0010;
	esp_588->dw0000 = eax_728;
	esp_588->dw0000 = esp_588->dw0000;
	esp_588->dw0000 = esp_588->dw0000;
	int32 edx_745 = ebx_733;
	int32 eax_759 = esp_588->dw0000;
	if (!DPB(SZO_702, false, 0))
	{
		esp_588->dw0000 = eax_759;
		int32 eax_843 = esp_588->dw0000;
		do
		{
			esp_588->dw0000 = eax_843 + 0x01;
			esp_588->dw0000 = DPB(esp_588->dw0000, 0x00, 8);
			int32 eax_879 = esp_588->dw0000;
			byte cl_884 = esp_588->a0018[eax_879];
			word32 ebx_891 = (word32) cl_884;
			word32 ebx_893 = ebx_891 + esi_715;
			word32 ebx_898 = DPB(ebx_893, 0x00, 8);
			byte dh_904 = (&esp_588->dw0000 + 0x01)[(ebx_898 + 0x14) / 0x0130];
			esp_588->dw0000 = eax_879;
			int32 eax_909 = esp_588->dw0000;
			esp_588->a0018[eax_909] = dh_904;
			esp_588->dw0000 = eax_909;
			esp_588->dw0000 = esp_588->dw0000;
			byte * eax_919 = &esp_588->dw0000 + 0x01 + (ebx_898 + 0x14) / 0x0130;
			*eax_919 = cl_884;
			esp_588->dw0000 = esp_588->dw0000;
			word32 edx_934 = (word32) dh_904;
			int32 eax_929 = esp_588->dw0000;
			byte dl_935 = (byte) edx_934;
			word32 edx_937 = DPB(edx_934, dl_935 + cl_884, 0);
			esp_588->dw0000 = eax_929;
			ui32 ecx_947 = (&esp_588->dw0000 + 0x01)[(edx_937 + 0x14) / 0x0130];
			esp_588->dw0000 = esp_588->dw0000;
			esp_588->dw0000 = esp_588->dw0000;
			esp_588->dw0000 = esp_588->dw0000;
			int32 eax_965 = esp_588->dw0000;
			*(edi_739 - 0x01) = *(edi_739 - 0x01) ^ (word16) (ecx_947 << 0x08);
			esp_588->dw0000 = eax_965;
			edx_745 = edx_937 + 0x14;
			esi_715 = ebx_898;
			eax_843 = esp_588->dw0000;
			edi_739 = edi_739 + 0x01;
			ebp_738 = ebp_738 - 0x01;
		} while (ebp_738 != 0x00);
		esp_588->dw0000 = eax_843;
		eax_759 = esp_588->dw0000;
	}
	struct Eq_1072 * esp_786 = esp_1256 - 0x0C;
	word32 edi_787;
	*ediOut = esp_786->dw0000;
	word32 ebp_791;
	*ebpOut = esp_786->dw0008;
	esp_786->dw0008 = eax_759;
	esp_786->dw0114 = esp_786->dw0008;
	esp_786->t0118 = esp_786->t0118;
	esp_786->t0140 = esp_786->t0118;
	Eq_2 eax_816 = esp_786->t0140;
	esp_786->t0140 = eax_816;
	esp_786->t013C = eax_816;
	esp_786->t013C = esp_786->t013C;
	word32 ebx_825;
	*ebxOut = edx_745;
	return esp_786->t013C;
}

// 0040169A: Register ptr32 fn0040169A(Register word32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
ptr32 fn0040169A(word32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 * eax_44 = DPB(eax_24, wLoc0A, 0);
		word16 ax_53 = *eax_44;
		word32 eax_56 = DPB(eax_24, ax_53 + 42421, 0);
		if (ax_53 == 42419)
			break;
		eax_24 = eax_56 - 0x00010000;
	}
	struct Eq_1293 * eax_76;
	__btc(eax_56, 0x01, out eax_76);
	word32 ecx_98 = eax_76->dw003C;
	struct Eq_1308 * ecx_99 = eax_76 + ecx_98 / 0x0040;
	int32 ecx_111 = eax_76[ecx_99->dw0080 / 0x0040];
	*ecxOut = ecx_111;
	ptr32 eax_117 = eax_76 + ecx_111 / 0x0040;
	word32 ebx_129;
	*ebxOut = eax_117 + 0x04;
	return eax_117 + 0x04;
}

