// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401005: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	word32 ebx_105;
	word32 ebp_106;
	word32 edi_107;
	Eq_2 eax_108 = fn004010CE(edx_39 + 2069943438, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebx_105, out ebp_106, out edi_107);
	word32 ebx_110;
	word32 ebp_111;
	word32 edi_112;
	return fn004010CE(eax_108, ebx_105, ebp_106, edi_107, dwLoc2C, dwLoc16, esi, out ebx_110, out ebp_111, out edi_112);
}

// 004010CE: Register Eq_2 fn004010CE(Register Eq_2 eax, Register word32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
DWORD fn004010CE(DWORD eax, word32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_132;
	struct Eq_50 * ebx_133;
	fn00401695(ebx, dwLoc32, fp - 0x2A, out ecx_132, out ebx_133);
	word32 esp_152;
	word32 eax_153;
	byte SZO_154;
	word32 ebp_155;
	word32 edx_156;
	bool C_157;
	word16 ax_158;
	word16 cx_159;
	word32 ecx_160;
	byte SCZO_161;
	word32 esi_162;
	struct Eq_76 * ebx_163;
	word32 edi_164;
	word16 si_165;
	struct Eq_79 * fs_166;
	byte al_167;
	bool Z_168;
	byte dh_169;
	byte dl_170;
	byte bh_171;
	word16 bx_172;
	byte CZ_173;
	byte ah_174;
	byte cl_175;
	byte bl_176;
	ebx_133->ptr0018();
	ptr32 esp_178;
	word32 eax_179;
	byte SZO_180;
	word32 ebp_181;
	word32 edx_182;
	bool C_183;
	word16 ax_184;
	word16 cx_185;
	word32 ecx_186;
	byte SCZO_187;
	word32 esi_188;
	<anonymous> ** ebx_189;
	word32 edi_190;
	word16 si_191;
	struct Eq_107 * fs_192;
	byte al_193;
	bool Z_194;
	byte dh_195;
	byte dl_196;
	byte bh_197;
	word16 bx_198;
	byte CZ_199;
	byte ah_200;
	byte cl_201;
	byte bl_202;
	ebx_163->ptr001C();
	*(esp_178 - 0x04) = eax_179 + 0x06;
	*(esp_178 - 0x08) = eax_179 + 0x06;
	struct Eq_134 * esp_221;
	word32 eax_222;
	byte SZO_223;
	word32 ebp_224;
	word32 edx_225;
	bool C_226;
	word16 ax_227;
	word16 cx_228;
	word32 ecx_229;
	byte SCZO_230;
	word32 esi_231;
	word32 ebx_232;
	word32 edi_233;
	word16 si_234;
	struct Eq_148 * fs_235;
	byte al_236;
	bool Z_237;
	byte dh_238;
	byte dl_239;
	byte bh_240;
	word16 bx_241;
	byte CZ_242;
	byte ah_243;
	byte cl_244;
	byte bl_245;
	(*ebx_189)();
	esp_221->dw0038 = ebx_232;
	esp_221->dw003C = esi_231;
	*(esp_221 - 0x04) = ebx_232;
	*(esp_221 - 0x04) = *(esp_221 - 0x04) - 0x04;
	struct Eq_183 * edi_263 = *(esp_221 - 0x04);
	*(esp_221 - 0x04) = eax_222;
	*(esp_221 - 0x08) = ecx_229;
	*(esp_221 - 0x0C) = esp_221 - 0x08;
	*(esp_221 - 0x10) = 0x40;
	*(esp_221 - 0x14) = esp_221->dw0020;
	*(esp_221 - 0x18) = esp_221->dw0014;
	esp_221->dw0018 = 0x00;
	*(esp_221 - 0x1C) = ~0x00;
	struct Eq_236 * esp_295;
	struct Eq_237 Eq_249::* eax_296;
	byte SZO_297;
	word32 edx_299;
	bool C_300;
	word16 ax_301;
	word16 cx_302;
	word32 ecx_303;
	byte SCZO_304;
	word32 esi_305;
	word32 ebx_306;
	word32 edi_307;
	word16 si_308;
	struct Eq_249 * fs_309;
	byte al_310;
	bool Z_311;
	byte dh_312;
	byte dl_313;
	byte bh_314;
	word16 bx_315;
	byte CZ_316;
	byte ah_317;
	byte cl_318;
	byte bl_319;
	byte * ebp_1184;
	edi_263->ptr0010();
	struct Eq_264 * eax_321 = eax_296 + (fs_309->*eax_296).dw002F / 0x0033;
	esp_295->dw0030 = esp_295->dw0030 + eax_321->dw0003;
	*(esp_295 - 0x04) = (struct Eq_264 **) eax_321;
	esp_295->dw0000 = *(esp_295 - 0x04);
	esp_295->dw0004 = esp_295->dw0000;
	word32 edi_347 = esp_295->dw0008;
	esp_295->dw0008 = esp_295->dw0004;
	word32 eax_352 = esp_295->dw0008;
	word32 ebx_1192 = esp_295->dw000C;
	word32 * esi_1191 = esp_295->ptr0010;
	esp_295->ptr0010 = eax_352 + 0x03;
	word32 * eax_373 = esp_295->ptr0010;
	word32 ecx_375 = *eax_373;
	esp_295->ptr0010 = eax_373;
	esp_295->dw003C = esp_295->dw003C ^ ecx_375;
	word32 * eax_385 = esp_295->ptr001C;
	word32 ecx_389 = esp_295->dw002C;
	esp_295->ptr0010 = eax_385;
	*(esp_295 - 0xF8) = esp_295->ptr0010;
	*(esp_295 - 244) = *(esp_295 - 0xF8);
	*(esp_295 - 0xF0) = ecx_389;
	*(esp_295 - 0xF8) = edi_347;
	int32 eax_408 = 0x00;
	do
	{
		*(esp_295 - 252) = eax_408;
		word32 eax_420 = *(esp_295 - 252);
		esp_295 - 0xEC + eax_408 = (byte *) (byte) eax_420;
		*(esp_295 - 252) = eax_420;
		*(esp_295 - 252) = *(esp_295 - 252) + 0x01;
		up32 eax_434 = *(esp_295 - 252);
		*(esp_295 - 252) = eax_434;
		eax_408 = *(esp_295 - 252);
	} while (eax_434 < 0x0100);
	*(esp_295 - 252) = eax_408;
	word32 edi_1193 = *(esp_295 - 0xF8);
	*(esp_295 - 0xF8) = *(esp_295 - 252);
	*(esp_295 - 0xF8) = &esp_295->dw003C + 0x02;
	byte * eax_1241 = *(esp_295 - 0xF8);
	byte SCZO_467 = cond(*eax_1241 - 121);
	ptr32 esp_1245 = esp_295 - 244;
	byte CZ_1202 = SCZO_467;
	if (*eax_1241 != 121)
	{
		struct Eq_507 * edi_977 = *(eax_1241 - 0x04);
		do
		{
			ptr32 esp_978;
			word32 eax_979;
			byte SZO_980;
			word32 ebp_981;
			word32 edx_982;
			bool C_983;
			word16 ax_984;
			word16 cx_985;
			word32 ecx_986;
			byte SCZO_987;
			word32 esi_988;
			word32 ebx_989;
			struct Eq_525 * edi_990;
			word16 si_991;
			struct Eq_527 * fs_992;
			byte al_993;
			bool Z_994;
			byte dh_995;
			byte dl_996;
			byte bh_997;
			word16 bx_998;
			byte CZ_999;
			byte ah_1000;
			byte cl_1001;
			byte bl_1002;
			edi_977->ptr0018();
			*(esp_978 - 0x04) = eax_979;
			ptr32 esp_1008;
			word32 eax_1009;
			byte SZO_1010;
			word32 ebp_1011;
			word32 edx_1012;
			bool C_1013;
			word16 ax_1014;
			word16 cx_1015;
			word32 ecx_1016;
			byte SCZO_1017;
			word32 esi_1018;
			word32 ebx_1019;
			struct Eq_558 * edi_1020;
			word16 si_1021;
			struct Eq_560 * fs_1022;
			byte al_1023;
			bool Z_1024;
			byte dh_1025;
			byte dl_1026;
			byte bh_1027;
			word16 bx_1028;
			byte CZ_1029;
			byte ah_1030;
			byte cl_1031;
			byte bl_1032;
			edi_990->ptr0010();
			*(esp_1008 - 0x04) = eax_1009;
			ptr32 esp_1038;
			word32 eax_1039;
			byte SZO_1040;
			word32 ebp_1041;
			word32 edx_1042;
			bool C_1043;
			word16 ax_1044;
			word16 cx_1045;
			word32 ecx_1046;
			byte SCZO_1047;
			word32 esi_1048;
			word32 ebx_1049;
			struct Eq_591 * edi_1050;
			word16 si_1051;
			struct Eq_593 * fs_1052;
			byte al_1053;
			bool Z_1054;
			byte dh_1055;
			byte dl_1056;
			byte bh_1057;
			word16 bx_1058;
			byte CZ_1059;
			byte ah_1060;
			byte cl_1061;
			byte bl_1062;
			edi_1020->ptr0018();
			*(esp_1038 - 0x04) = eax_1039;
			ptr32 esp_1068;
			word32 eax_1069;
			byte SZO_1070;
			word32 ebp_1071;
			word32 edx_1072;
			bool C_1073;
			word16 ax_1074;
			word16 cx_1075;
			word32 ecx_1076;
			byte SCZO_1077;
			word32 esi_1078;
			word32 ebx_1079;
			struct Eq_624 * edi_1080;
			word16 si_1081;
			struct Eq_626 * fs_1082;
			byte al_1083;
			bool Z_1084;
			byte dh_1085;
			byte dl_1086;
			byte bh_1087;
			word16 bx_1088;
			byte CZ_1089;
			byte ah_1090;
			byte cl_1091;
			byte bl_1092;
			edi_1050->ptr0018();
			*(esp_1068 - 0x04) = eax_1069;
			ptr32 esp_1098;
			word32 eax_1099;
			byte SZO_1100;
			word32 ebp_1101;
			word32 edx_1102;
			bool C_1103;
			word16 ax_1104;
			word16 cx_1105;
			word32 ecx_1106;
			byte SCZO_1107;
			word32 esi_1108;
			word32 ebx_1109;
			struct Eq_657 * edi_1110;
			word16 si_1111;
			struct Eq_659 * fs_1112;
			byte al_1113;
			bool Z_1114;
			byte dh_1115;
			byte dl_1116;
			byte bh_1117;
			word16 bx_1118;
			byte CZ_1119;
			byte ah_1120;
			byte cl_1121;
			byte bl_1122;
			edi_1080->ptr0018();
			*(esp_1098 - 0x04) = eax_1099;
			word32 esp_1131;
			word32 eax_1132;
			byte SZO_1133;
			word32 ebp_1134;
			word32 edx_1135;
			bool C_1136;
			word16 ax_1137;
			word16 cx_1138;
			word32 ecx_1139;
			byte SCZO_1140;
			word32 esi_1141;
			word32 ebx_1142;
			struct Eq_690 * edi_1143;
			word16 si_1144;
			struct Eq_692 * fs_1145;
			byte al_1146;
			bool Z_1147;
			byte dh_1148;
			byte dl_1149;
			byte bh_1150;
			word16 bx_1151;
			byte CZ_1152;
			byte ah_1153;
			byte cl_1154;
			byte bl_1155;
			edi_1110->ptr0018();
			word32 esp_1156;
			word32 eax_1157;
			byte SZO_1158;
			word32 ebp_1159;
			word32 edx_1160;
			bool C_1161;
			word16 ax_1162;
			word16 cx_1163;
			word32 ecx_1164;
			byte SCZO_1165;
			word32 esi_1166;
			word32 ebx_1167;
			struct Eq_722 * edi_1168;
			word16 si_1169;
			struct Eq_724 * fs_1170;
			byte al_1171;
			bool Z_1172;
			byte dh_1173;
			byte dl_1174;
			byte bh_1175;
			word16 bx_1176;
			byte CZ_1177;
			byte ah_1178;
			byte cl_1179;
			byte bl_1180;
			edi_1143->ptr0018();
			ptr32 esp_1181;
			word32 eax_1182;
			byte SZO_1183;
			word32 edx_1185;
			bool C_1186;
			word16 ax_1187;
			word16 cx_1188;
			word32 ecx_1189;
			byte SCZO_1190;
			word16 si_1194;
			struct Eq_748 * fs_1195;
			byte al_1196;
			bool Z_1197;
			byte dh_1198;
			byte dl_1199;
			byte bh_1200;
			word16 bx_1201;
			byte ah_1203;
			byte cl_1204;
			byte bl_1205;
			edi_1168->ptr0010();
			*(esp_1181 - 0x04) = eax_1182;
			word32 eax_1209 = *(esp_1181 - 0x04);
			*(esp_1181 - 0x04) = eax_1209 + 0x01;
			word32 eax_1223 = *(esp_1181 - 0x04);
			cup16 ax_1226 = (word16) eax_1223 - cx_1188;
			*(esp_1181 - 0x04) = DPB(eax_1223, ax_1226, 0);
			word32 eax_1233 = *(esp_1181 - 0x04);
		} while (ax_1226 < 0x00);
		*(esp_1181 - 0x04) = eax_1233;
		eax_1241 = (byte *) *(esp_1181 - 0x04);
		esp_1245 = esp_1181;
	}
	struct Eq_469 * esp_497 = esp_1245 - 0x04;
	esp_497->ptr0000 = eax_1241;
	byte * eax_500 = esp_497->ptr0000;
	esp_497->ptr0000 = ebp_1184;
	*(esp_497 - 0x04) = (byte **) eax_500;
	word32 eax_507 = *(esp_497 - 0x04);
	*(esp_497 - 0x04) = esi_1191;
	*(esp_497 - 0x08) = eax_507;
	*(esp_497 - 0x08) = edi_1193;
	up32 edi_519 = esp_497->dw011C;
	*(esp_497 - 0x0C) = 0x00;
	int32 esi_526 = 0x00;
	word32 eax_531 = *(esp_497 - 0x0C);
	int32 ebp_536 = 0x00;
	*(esp_497 - 0x0C) = ebx_1192;
	do
	{
		struct Eq_819 * esp_550 = esp_1245 - 0x10;
		word32 ebx_551 = (word32) esp_550->a0018[ebp_536];
		*(esp_550 - 0x04) = eax_531;
		ptr32 edx_559 = esp_550->ptr0014;
		*(esp_550 - 0x04) = *(esp_550 - 0x04);
		int32 eax_563 = *(esp_550 - 0x04);
		word32 edx_565 = (word32) (edx_559 + eax_563);
		*(esp_550 - 0x04) = eax_563;
		word16 bx_552 = (word16) ebx_551;
		word32 eax_571 = *(esp_550 - 0x04);
		word32 ecx_579 = ebx_551 + esi_526;
		word32 edx_583 = edx_565 + ecx_579;
		int32 edx_587 = DPB(edx_583, 0x00, 8);
		*(esp_550 - 0x04) = eax_571 + 0x01;
		*(esp_550 - 0x04) = *(esp_550 - 0x04);
		up32 eax_601 = *(esp_550 - 0x04);
		*(esp_550 - 0x04) = eax_601;
		esi_526 = edx_587;
		word32 eax_608 = *(esp_550 - 0x04);
		if (eax_601 >= edi_519)
		{
			*(esp_550 - 0x04) = eax_608;
			*(esp_550 - 0x04) = 0x00;
			eax_608 = *(esp_550 - 0x04);
		}
		byte dl_616 = esp_550->a0018[edx_587];
		*(esp_550 - 0x04) = eax_608;
		word32 eax_620 = *(esp_550 - 0x04);
		esp_550->a0018[ebp_536] = dl_616;
		*(esp_550 - 0x04) = eax_620;
		ui32 eax_626 = *(esp_550 - 0x04);
		ebp_536 = ebp_536 + 0x01;
		ptr32 edx_633 = esp_550->a0018 + edx_587;
		ptr32 edx_636 = edx_633 - eax_626;
		word16 bx_641 = DPB(bx_552, eax_626 + 0x01 + edx_636, 8);
		*(esp_550 - 0x04) = eax_626;
		int32 eax_645 = *(esp_550 - 0x04);
		eax_645 + edx_636 = (word16 *) bx_641;
		*(esp_550 - 0x04) = eax_645;
		*(esp_550 - 0x04) = *(esp_550 - 0x04);
		*(esp_550 - 0x04) = *(esp_550 - 0x04);
		*(esp_550 - 0x04) = *(esp_550 - 0x04);
		eax_531 = *(esp_550 - 0x04);
	} while (SLICE(ebp_536, byte, 8) != 0x01);
	word32 esi_677 = 0x00;
	*(esp_550 - 0x04) = 0x00;
	int32 eax_687 = *(esp_550 - 0x04);
	int32 ebx_692 = esp_550->dw0000;
	word32 ebp_697 = esp_550->dw012C;
	ptr32 edi_698 = esp_550->ptr0010;
	esp_550->dw0000 = eax_687;
	esp_550->dw0000 = esp_550->dw0000;
	esp_550->dw0000 = esp_550->dw0000;
	int32 edx_704 = ebx_692;
	int32 eax_718 = esp_550->dw0000;
	if (!DPB(CZ_1202, false, 0))
	{
		esp_550->dw0000 = eax_718;
		int32 eax_795 = esp_550->dw0000;
		do
		{
			esp_550->dw0000 = eax_795 + 0x01;
			esp_550->dw0000 = DPB(esp_550->dw0000, 0x00, 8);
			int32 eax_825 = esp_550->dw0000;
			byte cl_827 = esp_550->a0018[eax_825];
			esp_550->dw0000 = eax_825;
			esp_550->dw0000 = esp_550->dw0000;
			int32 eax_842 = esp_550->dw0000;
			word32 ebx_848 = (word32) cl_827;
			word32 ebx_850 = ebx_848 + esi_677;
			word32 ebx_855 = DPB(ebx_850, 0x00, 8);
			esp_550->dw0000 = eax_842;
			byte dh_866 = (&esp_550->dw0000 + 0x01)[(ebx_855 + 0x14) / 0x0130];
			esp_550->dw0000 = esp_550->dw0000;
			int32 eax_870 = esp_550->dw0000;
			esp_550->a0018[eax_870] = dh_866;
			esp_550->dw0000 = eax_870;
			int32 eax_876 = esp_550->dw0000;
			esp_550->dw0000 = eax_876;
			*(esp_550 - 0x04) = eax_876;
			*(esp_550 - 0x04) = &esp_550->dw0000 + 0x01 + (ebx_855 + 0x14) / 0x0130;
			byte * eax_889 = *(esp_550 - 0x04);
			*eax_889 = cl_827;
			*(esp_550 - 0x04) = (byte **) eax_889;
			esp_550->dw0000 = esp_550->dw0000;
			word32 edx_907 = (word32) dh_866;
			int32 eax_902 = esp_550->dw0000;
			byte dl_908 = (byte) edx_907;
			word32 edx_910 = DPB(edx_907, dl_908 + cl_827, 0);
			edx_704 = edx_910 + 0x14;
			ui32 ecx_916 = (&esp_550->dw0000 + 0x01)[(edx_910 + 0x14) / 0x0130];
			esp_550->dw0000 = eax_902;
			esp_550->dw0000 = esp_550->dw0000;
			int32 eax_931 = esp_550->dw0000;
			*(edi_698 - 0x01) = *(edi_698 - 0x01) ^ (word16) (ecx_916 << 0x08);
			esi_677 = ebx_855;
			edi_698 = edi_698 + 0x01;
			esp_550->dw0000 = eax_931;
			ebp_697 = ebp_697 - 0x01;
			eax_795 = esp_550->dw0000;
		} while (ebp_697 != 0x00);
		esp_550->dw0000 = eax_795;
		eax_718 = esp_550->dw0000;
	}
	struct Eq_1057 * esp_744 = esp_1245 - 0x0C;
	word32 edi_745;
	*ediOut = esp_744->dw0000;
	word32 ebp_749;
	*ebpOut = esp_744->dw0008;
	esp_744->dw0008 = eax_718;
	esp_744->dw0114 = esp_744->dw0008;
	Eq_2 eax_763 = esp_744->t0118;
	esp_744->t0140 = eax_763;
	esp_744->t013C = eax_763;
	esp_744->t013C = esp_744->t013C;
	word32 ebx_777;
	*ebxOut = edx_704;
	return esp_744->t013C;
}

// 00401695: Register ptr32 fn00401695(Register word32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
ptr32 fn00401695(word32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 ax_61 = DPB(eax_24, 0x00, 0) + 0x00;
		word32 eax_64 = DPB(eax_24, ax_61 + 42421, 0);
		if (ax_61 == 42419)
			break;
		eax_24 = eax_64 - 0x00010000;
	}
	struct Eq_1288 * eax_92;
	__btc(eax_64, 0x01, out eax_92);
	int32 ecx_114 = eax_92->dw003C;
	int32 ecx_139 = eax_92[(&(eax_92 + ecx_114 / 0x0040)->dw003C)[0x0011] / 0x0040];
	*ecxOut = ecx_139;
	ptr32 eax_145 = eax_92 + ecx_139 / 0x0040;
	word32 ebx_157;
	*ebxOut = eax_145 + 0x04;
	return eax_145 + 0x04;
}

