// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401025: Register (ptr32 byte) fn00401025(Register (ptr32 byte) eax, Register word32 ecx, Register (ptr32 Eq_4) edx, Register (ptr32 byte) ebx, Stack (ptr32 byte) dwArg00, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
byte * fn00401025(byte * eax, word32 ecx, Eq_4 * edx, byte * ebx, byte * dwArg00, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	__rol(edx, 0x0E);
	word32 eax_13 = __ror(eax, 0x1B);
	word32 ebp_22;
	*ebpOut = (fp << 0x10 >> 0x10)->dw120004;
	struct Eq_24 * edi_32 = fp;
	do
	{
		byte * edx_36 = edi_32->dw0000;
		*edxOut = edx_36;
		edi_32 = edi_32 + 0x01;
		*ediOut = edi_32;
		eax_13 = eax_13 + 0x50E03E2E;
	} while (edx_36 != ebx);
	return eax_13 - 0x01;
}

// 0040112B: Register Eq_47 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	byte al_15 = (byte) ebx;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	*ebx = *ebx + al_15;
	DWORD edi_73 = edi_59 + (ebp_58 - ~0x06);
	word32 edx_57;
	ptr32 ebp_58;
	word32 edi_59;
	word32 eax_67 = __rol(fn00401025(ebx, ecx - 0x01, edx & 1792310318, ebx, ebx, out edx_57, out ebp_58, out edi_59), 0x05);
	union Eq_307 ** esp_266 = fp;
	word16 di_256 = (word16) edi_73;
	word32 ecx_76 = DPB(0x9090, *(ebp_58 - ~0x06) ^ 0x9090, 0);
	byte dh_79 = SLICE(edx_57, byte, 8);
	if (ecx_76 != 0x00)
	{
		ExitThread(edi_73);
		*(ebx - 0x35) = *(ebx - 0x35) + (byte) ((word32) edi_73 + eax_67 | 0x0014008D);
		byte * ecx_258 = DPB(ecx_76, 0x00, 8);
		*ecx_258 = *ecx_258 + dh_79;
		byte * eax_270 = DPB(ecx_76, (byte *) 0x00DDB800, 0);
		Mem272[eax_270 + 0x66017000 + eax_270:byte] = Mem268[eax_270 + 0x66017000 + eax_270:byte] + SLICE(ecx_76, byte, 8);
		di_256 = (word16) (edi_73 - 0x01);
		esp_266 = fp - 0x04;
	}
	__rol(di_256, 0x0D);
	struct Eq_4 * ecx_102 = DPB(1212114, (word16) esp_266, 0) + 0x00;
	ptr32 edx_111 = esp_266 - 3433153909;
	word32 esi_114 = globals->dw401125;
	do
	{
		edx_111 = edx_111 + 0x01;
		ecx_102 = ecx_102 + 0x01;
		word16 dx_128 = (word16) edx_111;
		word32 eax_129 = ecx_102->dw0000 - esi_114;
	} while (eax_129 != 0x00);
	__rol(dx_128, 0x0C);
	ui32 eax_144 = DPB(eax_129, ecx_102->wFFFFFFFD, 0);
	__rol(ecx_102, 0x05);
	union Eq_307 *** esp_154 = esp_266 - 0x04;
	*esp_154 = (union Eq_307 ***) esp_266;
	union Eq_307 * edi_164 = **esp_154;
	word32 ecx_169 = globals->dw401069;
	__rol(0x1069, 0x0C);
	do
	{
		word32 eax_179 = *edi_164;
		__rol((word16) eax_179, 0x0C);
		edi_164 = (union Eq_307 *) ((char *) edi_164 + 0x01);
	} while ((eax_179 ^ ecx_169) != 0x00);
	*esp_154 = (union Eq_307 ***) (union Eq_307 **) 4133710;
	Eq_325 esi_213 = eax_144 << 0x10 >> 0x10;
	Mem218[esp_154 + 0x00:word32] = Mem208[esp_154 + 0x00:word32] + esi_213;
	__rol((word16) esi_213, 0x09);
	*(esp_154 - 0x04) = fs->ptr0000;
	fs->ptr0000 = esp_154 - 0x04;
	*(esp_154 - 0x08) = 0x00;
	__rol((word16) ((-ecx_169 | 3258491229) - 468950805), 0x0C);
	*(esp_154 - 0x0C) = (union Eq_307 **) edi_164;
	return 0x51;
}

