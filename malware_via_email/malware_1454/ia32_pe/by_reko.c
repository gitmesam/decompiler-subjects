// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00411298: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	struct Eq_3 * esp_125 = fp - 44;
l00411311:
	esp_125->dw000C = 0x00;
l00411315:
	esp_125->t0018.u1 = ~0x6A1CA1D3;
	int32 * esp_84 = esp_125 - 0x04;
	*esp_84 = ecx;
	*(esp_84 - 0x04) = 0x00;
	*(esp_84 - 0x08) = 0x00;
l00411328:
	struct Eq_195 * esp_98;
	byte SCZO_100;
	word32 ecx_101;
	word32 esi_103;
	byte bl_104;
	bool Z_105;
	byte SZO_106;
	byte al_107;
	bool S_108;
	word16 dx_109;
	word16 ax_110;
	bool D_112;
	byte dl_113;
	byte SCZDOP_114;
	bool C_115;
	word32 edx_116;
	byte ch_117;
	word32 ebp_118;
	byte dh_119;
	word16 di_120;
	byte ah_122;
	real64 rArg0_121;
	struct Eq_146 * edi_150;
	Eq_19 ebx_111;
	int16 * eax_102;
	fn000154CA();
	ecx = esp_98->dw0000;
	esp_98->dw001C = eax_102 + esp_98->dw001C;
	esp_98->dw0024 = 0x00411340;
	esp_125 = (struct Eq_3 *) (&esp_98->dw0000 + 0x01);
	while (true)
	{
		Eq_11 bl_155 = esp_125->t0018;
		byte * esi_154 = esp_125->ptr0020;
		ebx_111 = DPB(ebx_111, bl_155, 0);
		if (esp_125->dw0008 == 666)
			*esi_154 = *esi_154 - bl_155;
		esp_125->ptr0020 = esp_125->ptr0020 + 0x01;
		if (esp_125->ptr0020 > &globals->b4115E2)
			break;
		esp_125->t0018 = esp_125->t0018 >> 0x08;
		esp_125->dw000C = esp_125->dw000C + 0x01;
		if (esp_125->dw000C == 0x04)
		{
			esp_125->dw000C = 0x00;
			esp_125->t0018.u1 = ~0x6A1CA1D3;
			int32 * esp_185 = esp_125 - 0x04;
			*esp_185 = ecx;
			*(esp_185 - 0x04) = 0x00;
			*(esp_185 - 0x08) = 0x00;
			struct Eq_110 * esp_192;
			byte SCZO_194;
			word32 ecx_195;
			word32 esi_197;
			byte bl_198;
			bool Z_199;
			byte SZO_200;
			byte al_201;
			bool S_202;
			word16 dx_203;
			word16 ax_204;
			bool D_206;
			byte dl_207;
			byte SCZDOP_208;
			bool C_209;
			word32 edx_210;
			byte ch_211;
			word32 ebp_212;
			byte dh_213;
			word16 di_214;
			byte ah_216;
			fn000154CA();
			ecx = esp_192->dw0000;
			esp_192->dw001C = esp_192->dw001C + 4281112;
			esp_125 = (struct Eq_3 *) (&esp_192->dw0000 + 0x01);
		}
	}
	esp_125->dw0008 = esp_125->dw0008 + 0x01;
	bool Z_231 = (bool) cond(esp_125->dw0008 - 1000);
	do
	{
		if (Z_231)
			goto l00411311;
		edi_150 = edi_150->ptr0000;
		word16 di_252 = (word16) edi_150;
		esp_125 = (struct Eq_3 *) ((char *) &edi_150->ptr0000 + 0x04);
		ecx = ecx + 0x01;
		eax_102 = DPB(eax_102, __inb(0x8A), 0);
		Z_231 = (bool) cond(ecx);
	} while (ecx < 0x00);
	do
	{
		int64 edx_eax_270 = (int64) eax_102;
		__outw(SLICE(edx_eax_270, word16, 32), (word16) edx_eax_270);
		word32 ebx_277 = ebx_111 - globals->dw41162D;
		byte bl_286 = (byte) ebx_277 - globals->b4115C5;
		union Eq_19 * eax_271 = (word32) edx_eax_270;
		cu8 dl_274 = SLICE(edx_eax_270, byte, 32);
		int16 * ebx_287 = DPB(ebx_277, bl_286, 0);
		if (bl_286 == 0x00 && true)
			goto l00411328;
		Eq_19 eax_297 = *eax_271;
		*eax_271 = (union Eq_19 *) cond(dl_274 - 121);
		*(eax_297 - 0x7C) = 0x23;
		eax_102 = ebx_287;
		word16 ax_302 = (word16) ebx_287;
		ebx_111 = eax_297;
		if (dl_274 < 121)
		{
			*((word32) eax_297 - 25249343) = (word32) *((word32) eax_297 - 25249343) - 1231690913;
			__aad(ax_302);
			ecx = ~0x6A58B2C6;
			esp_125 = (struct Eq_3 *) ((char *) eax_271 + 0x04);
			if (~0x6A58B2C6 == 0x00)
				goto l00411315;
		}
	} while (2510807609 == 0x00);
	*(eax_271 - 0x02) = di_252;
	byte al_352 = globals->b4115E2;
	__sti();
	struct Eq_309 * eax_353 = DPB(2510807609, al_352, 0);
	eax_353->dw20AC91FC = -eax_353->dw20AC91FC;
	*(eax_271 - 0x02) = 100;
	struct Eq_325 * ebx_365 = *(eax_271 - 0x02) - globals->dw411606;
	*ebx_287 = (int16) rArg0_121;
	word32 esp_376;
	word32 edi_377;
	byte SCZO_378;
	word32 ecx_379;
	Eq_2 eax_380;
	word32 esi_381;
	byte bl_382;
	bool Z_383;
	byte SZO_384;
	byte al_385;
	bool S_386;
	word16 dx_387;
	word16 ax_388;
	word32 ebx_389;
	bool D_390;
	byte dl_391;
	byte SCZDOP_392;
	bool C_393;
	word32 edx_394;
	byte ch_395;
	word32 ebp_396;
	byte dh_397;
	word16 di_398;
	real64 rArg0_399;
	byte ah_400;
	ebx_365->ptr005D();
	return eax_380;
}

