// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401E14: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	struct Eq_4 * esp_24 = fp - 0x20;
	struct Eq_8 * ebp_142 = &globals->t40900C;
	if (globals->b40954A != 0x01)
	{
		globals->b40954A = 0x01;
		ptr32 eax_116 = 0x0040900C - globals->dw409557;
		globals->ptr409520 = 0x0040900C;
		globals->dw409597 = eax_116;
		word32 eax_120 = globals->dw409597 + globals->dw40957B;
		globals->dw40954F = eax_120;
		if (globals->b409548 == 0x01)
		{
			word32 * ebx_593 = globals->dw409573 + globals->dw409597;
			globals->dw409573 = ebx_593;
			word32 v13_597 = globals->dw40957F;
			globals->dw40957F = *ebx_593;
			*ebx_593 = v13_597;
			eax_120 = v13_597;
		}
		ptr32 eax_149;
		ptr32 ebx_148;
		fn0040951C();
		ptr32 esp_135 = fp - 0x30;
		if (eax_120 == 0x00)
		{
			eax_149 = 0x004094C3;
			ebx_148 = 4232339;
l004092D8:
			word32 * esp_150 = esp_135 - 0x04;
			*esp_150 = ~0x00;
			*(esp_150 - 0x04) = ~0x00;
			word32 edx_154 = ebp_142->dw05AD;
			<anonymous> * ecx_155 = ebp_142->ptr05B5;
			*(esp_150 - 0x08) = 0x30;
			*(esp_150 - 0x0C) = ebx_148;
			*(esp_150 - 0x10) = eax_149;
			*(esp_150 - 0x14) = 0x00;
			*(esp_150 - 0x18) = edx_154;
			word32 esp_169;
			bool Z_170;
			Eq_2 eax_171;
			word32 ecx_172;
			word32 edx_173;
			word32 ebx_174;
			word32 ebp_175;
			word32 esi_176;
			word32 edi_177;
			byte SCZO_178;
			byte SZO_179;
			bool C_180;
			bool S_181;
			word16 bx_182;
			byte bl_183;
			word16 ax_184;
			ecx_155();
			return eax_171;
		}
		globals->dw40956F = eax_120;
		struct Eq_134 * esi_187 = globals->dw409567 + 0x0040900C;
		while (true)
		{
			word32 eax_203 = esi_187->dw0000;
			struct Eq_160 * esi_204 = &esi_187->dw0000 + 0x01;
			if (eax_203 == 0x00)
				break;
			Eq_152 edi_211 = eax_203 + globals->dw409597;
			word32 ecx_214 = esi_204->dw0000;
			esi_187 = (struct Eq_134 *) (&esi_204->dw0004 + 0x01);
			if (esi_204->dw0004 != 0x00)
			{
				Eq_152 esi_225 = edi_211;
				byte * edi_226 = globals->dw40956F;
				while (ecx_214 != 0x00)
				{
					*edi_226 = (byte) *esi_225;
					esi_225 = (word32) esi_225 + 0x01;
					edi_226 = edi_226 + 0x01;
					ecx_214 = ecx_214 - 0x01;
				}
				int32 eax_248 = fn0040934F(globals->dw40956F, edi_211) - 0x05;
				struct Eq_196 * ecx_250 = null;
				word32 edx_255 = 0x00;
				if (false)
				{
					while (true)
					{
						eax_248 = eax_248 - 0x01;
						if (eax_248 == 0x00 || eax_248 < 0x00)
							break;
						word16 bx_286 = Mem185[ecx_250 + edi_211:word16];
						byte bl_288 = (byte) bx_286;
						if (bl_288 != 232 && bl_288 != 233)
						{
							if (bx_286 != 0x25FF)
								ecx_250 = ecx_250 + 0x01;
							else
							{
								Mem305[ecx_250 + 0x02 + edi_211:word32] = Mem185[ecx_250 + 0x02 + edi_211:word32] - edx_255;
								ecx_250 = ecx_250 + 0x06;
								edx_255 = edx_255 - 0x04;
								eax_248 = eax_248 - 0x05;
							}
						}
						else
						{
							Mem293[ecx_250 + 0x01 + edi_211:word32] = Mem185[ecx_250 + 0x01 + edi_211:word32] - ecx_250;
							ecx_250 = ecx_250 + 0x05;
							eax_248 = eax_248 - 0x04;
						}
					}
				}
				globals->b4090DF = ~0x07;
				esi_187 = (struct Eq_134 *) (&esi_204->dw0004 + 0x01);
			}
		}
		fn00409522();
		esp_24 = fp - 0x3C;
		if (globals->b409548 == 0x01)
			*globals->dw409573 = globals->dw40957F;
		globals->dw40954B = globals->dw40954F;
		globals->dw409553 = globals->dw40954F - globals->dw40954B + globals->dw409597;
		word32 esi_328 = globals->dw409577;
		if (esi_328 != 0x00)
		{
			word32 esi_567 = esi_328 + globals->dw409597;
			struct Eq_392 * esi_568 = esi_567 + 0x10;
			word32 edx_570 = globals->dw40954F - globals->dw409593;
			if (edx_570 != 0x00)
				esi_568 = fn004092F3(edx_570, &globals->t40900C, esi_567 + 0x10);
			word32 edx_577 = globals->dw409597 - globals->dw40959B;
			if (edx_577 != 0x00)
				fn004092F3(edx_577, &globals->t40900C, esi_568);
		}
		int32 ecx_337 = globals->dw409597;
		struct Eq_381 * edx_338 = globals->dw40954F;
		while (true)
		{
			int32 eax_349 = edx_338->dw000C;
			if (eax_349 == 0x00)
				break;
			edx_338->dw000C = ecx_337;
			word32 eax_356 = eax_349 + globals->dw409553;
			struct Eq_4 * esp_358 = esp_24 - 0x04;
			esp_358->ptr0000 = edx_338;
			*(esp_358 - 0x04) = ecx_337;
			*(esp_358 - 0x08) = eax_356;
			*(esp_358 - 0x0C) = eax_356;
			globals->dw40955F = eax_356;
			fn00409528();
			word32 ebx_368 = *(esp_358 - 0x0C);
			ecx_337 = *(esp_358 - 0x08);
			struct Eq_475 * edx_374 = *(esp_358 - 0x04);
			esp_24 = esp_358;
			if (eax_356 == 0x00)
			{
				*(esp_358 - 0x04) = (struct Eq_475 **) edx_374;
				*(esp_358 - 0x08) = ecx_337;
				*(esp_358 - 0x0C) = ebx_368;
				fn0040952E();
				if (eax_356 == 0x00)
				{
					*(esp_358 - 0x10) = 4232666;
					*(esp_358 - 0x14) = ebx_368;
					*(esp_358 - 0x18) = 0x004094DD;
					*(esp_358 - 0x1C) = 4232666;
					struct Eq_547 * esp_543;
					bool Z_544;
					word32 eax_545;
					word32 ecx_546;
					word32 edx_547;
					word32 ebx_548;
					word32 esi_550;
					word32 edi_551;
					byte SCZO_552;
					byte SZO_553;
					bool C_554;
					bool S_555;
					word16 bx_556;
					byte bl_557;
					word16 ax_558;
					globals->ptr4095C5();
					eax_149 = esp_543->ptr000C;
					esp_135 = &esp_543->ptr000C + 0x01;
					ebx_148 = (char *) ebp_142 + 1181;
					goto l004092D8;
				}
				ecx_337 = *(esp_358 - 0x0C);
				edx_374 = (struct Eq_475 *) *(esp_358 - 0x08);
				esp_24 = esp_358 - 0x04;
			}
			globals->dw409245 = eax_356;
			int32 esi_387 = edx_374->dw0000;
			edx_374->dw0000 = ecx_337;
			int32 edi_389 = edx_374->dw0010;
			edx_374->dw0010 = ecx_337;
			int32 esi_391 = esi_387;
			if (esi_387 == 0x00)
				esi_391 = edi_389;
			int32 * esi_396 = esi_391 + globals->dw409553;
			ptr32 edi_397 = edi_389 + globals->dw409553;
			while (true)
			{
				int32 eax_408 = *esi_396;
				word16 ax_410 = (word16) eax_408;
				if (eax_408 == 0x00)
					break;
				ptr32 eax_417;
				*esi_396 = ecx_337;
				if (eax_408 < 0x00)
					eax_417 = (word32) ax_410;
				else
				{
					word16 * eax_508 = eax_408 + globals->dw409553;
					*eax_508 = 0x00;
					eax_417 = eax_508 + 0x01;
				}
				ptr32 * esp_419 = esp_24 - 0x04;
				*esp_419 = eax_417;
				*(esp_419 - 0x04) = (struct Eq_475 **) edx_374;
				*(esp_419 - 0x08) = esi_396;
				*(esp_419 - 0x0C) = edi_397;
				*(esp_419 - 0x10) = ecx_337;
				*(esp_419 - 0x14) = ebx_368;
				*(esp_419 - 0x18) = eax_417;
				*(esp_419 - 0x1C) = eax_417;
				*(esp_419 - 0x20) = 305419896;
				fn00409534();
				ui32 ebx_437 = *(esp_419 - 0x20);
				if (eax_417 == 0x00)
				{
					ptr32 edi_464 = 0x00409502;
					if ((ebx_437 & 0xFFFF0000) != 0x00)
						edi_464 = 4232431;
					*(esp_419 - 0x20) = 4232666;
					*(esp_419 - 0x24) = globals->dw40955F;
					*(esp_419 - 0x28) = ebx_437;
					*(esp_419 - 44) = edi_464;
					*(esp_419 - 0x30) = 4232666;
					struct Eq_762 * esp_481;
					bool Z_482;
					word32 eax_483;
					word32 ecx_484;
					word32 edx_485;
					word32 ebx_486;
					word32 esi_488;
					word32 edi_489;
					byte SCZO_490;
					byte SZO_491;
					bool C_492;
					bool S_493;
					word16 bx_494;
					byte bl_495;
					word16 ax_496;
					globals->ptr4095C5();
					eax_149 = esp_481->ptr0010;
					esp_135 = &esp_481->ptr0010 + 0x01;
					ebx_148 = (char *) ebp_142 + 1181;
					goto l004092D8;
				}
				ecx_337 = *(esp_419 - 0x18);
				ptr32 * edi_450 = *(esp_419 - 0x14);
				*edi_450 = eax_417;
				edx_374 = (struct Eq_475 *) *(esp_419 - 0x0C);
				ebx_368 = *(esp_419 - 0x08);
				esp_24 = esp_419 - 0x04;
				esi_396 = *(esp_419 - 0x10) + 0x04;
				edi_397 = edi_450 + 0x01;
			}
			edx_338 = (struct Eq_381 *) (&edx_374->dw0010 + 0x01);
		}
	}
	esp_24[0x07] = (struct Eq_4) (globals->dw409563 + globals->dw409597);
	<anonymous> * eax_90 = esp_24[0x07];
	word32 esp_98;
	bool Z_99;
	Eq_2 eax_100;
	word32 ecx_101;
	word32 edx_102;
	word32 ebx_103;
	word32 ebp_104;
	word32 esi_105;
	word32 edi_106;
	byte SCZO_107;
	byte SZO_108;
	bool C_109;
	bool S_110;
	word16 bx_111;
	byte bl_112;
	word16 ax_113;
	eax_90();
	return eax_100;
}

// 004092F3: Register (ptr32 Eq_392) fn004092F3(Register word32 edx, Register (ptr32 Eq_422) ebp, Register (ptr32 Eq_392) esi)
Eq_392 * fn004092F3(word32 edx, Eq_422 * ebp, Eq_392 * esi)
{
	word32 eax_4 = esi->w0000;
	struct Eq_392 * esi_107 = (char *) &esi->w0001 + 0x03;
	if (eax_4 != 0x00)
	{
		word32 * ebx_29 = eax_4 + ebp->dw058B;
		*ebx_29 = *ebx_29 + edx;
		while (true)
		{
			Eq_851 al_40 = esi_107->w0000;
			esi_107 = &esi_107->w0001;
			*(esi_107 - 0x01) = dl;
			word32 eax_44 = (word32) al_40;
			byte al_45 = (byte) eax_44;
			Eq_818 eax_104 = DPB(eax_44, al_45, 0);
			if (al_45 == 0x00)
				break;
			if (al_45 != 0x01)
			{
				if (al_45 != 0x02)
				{
					if (al_45 == 0x03)
					{
						word32 ecx_69 = (word32) esi_107->w0000;
						byte cl_70 = (byte) ecx_69;
						struct Eq_836 * esi_101 = &esi_107->w0001;
						Eq_839 ecx_102 = DPB(ecx_69, cl_70, 0);
						if (cl_70 != 0x00)
						{
							if (cl_70 == 0x01)
							{
								esi_101 = (struct Eq_836 *) (&esi_107->w0001 + 0x02);
								ecx_102.u0 = esi_107->w0001;
							}
						}
						else
						{
							esi_101 = (struct Eq_836 *) (esi_107 + 0x01);
							ecx_102 = (word32) esi_107->w0001;
						}
						esi_107 = (struct Eq_392 *) ((char *) &esi_101->t0000 + 0x01);
						int32 eax_83 = (word32) esi_101->t0000;
						do
						{
							ebx_29 = ebx_29 + eax_83;
							*ebx_29 = *ebx_29 + edx;
							ecx_102 = ecx_102 - 0x01;
						} while (ecx_102 != 0x00);
						continue;
					}
				}
				else
				{
					eax_104.u1 = esi_107->w0000;
					esi_107 = (struct Eq_392 *) ((char *) &esi_107->w0001 + 0x03);
				}
			}
			else
			{
				esi_107 = (struct Eq_392 *) ((char *) &esi_107->w0001 + 0x01);
				eax_104 = (word32) esi_107->w0000;
			}
			ebx_29 = ebx_29 + eax_104;
			*ebx_29 = *ebx_29 + edx;
		}
	}
	return esi_107;
}

// 0040934F: Register ptr32 fn0040934F(Stack (ptr32 bui8) dwArg04, Stack Eq_152 dwArg08)
ptr32 fn0040934F(bui8 * dwArg04, Eq_152 dwArg08)
{
	Eq_900 ebp_239 = fp - 0x04;
	bui8 * esi_111 = dwArg04;
	Eq_152 edi_182 = dwArg08;
	uint8 dl_104 = 0x80;
	while (true)
	{
		*edi_182 = *esi_111;
		esi_111 = esi_111 + 0x01;
		edi_182 = (word32) edi_182 + 0x01;
		while (true)
		{
			dl_104 = dl_104 * 0x02;
			bool C_527 = (bool) cond(dl_104);
			if (dl_104 == 0x00)
			{
				dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_527 = (bool) cond(dl_104);
			}
			if (C_527)
				break;
			dl_104 = dl_104 * 0x02;
			bool C_518 = (bool) cond(dl_104);
			if (dl_104 == 0x00)
			{
				dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_518 = (bool) cond(dl_104);
			}
			if (C_518)
			{
				ui32 eax_287 = 0x01;
				do
				{
					uint8 dl_294 = dl_104 * 0x02;
					bool C_299 = (bool) cond(dl_294);
					if (dl_294 == 0x00)
					{
						dl_294 = *esi_111 * 0x02 + (dl_294 < 0x00);
						esi_111 = esi_111 + 0x01;
						C_299 = (bool) cond(dl_294);
					}
					dl_104 = dl_294 * 0x02;
					eax_287 = eax_287 * 0x02 + C_299;
					bool C_312 = (bool) cond(dl_104);
					if (dl_104 == 0x00)
					{
						dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
						esi_111 = esi_111 + 0x01;
						C_312 = (bool) cond(dl_104);
					}
				} while (C_312);
				if (eax_287 == 0x02)
				{
					ui32 ecx_326 = 0x01;
					do
					{
						uint8 dl_331 = dl_104 * 0x02;
						bool C_336 = (bool) cond(dl_331);
						if (dl_331 == 0x00)
						{
							dl_331 = *esi_111 * 0x02 + (dl_331 < 0x00);
							esi_111 = esi_111 + 0x01;
							C_336 = (bool) cond(dl_331);
						}
						dl_104 = dl_331 * 0x02;
						ecx_326 = ecx_326 * 0x02 + C_336;
						bool C_348 = (bool) cond(dl_104);
						if (dl_104 == 0x00)
						{
							dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
							esi_111 = esi_111 + 0x01;
							C_348 = (bool) cond(dl_104);
						}
					} while (C_348);
					byte * esi_361 = edi_182 - ebp_239;
					while (ecx_326 != 0x00)
					{
						*edi_182 = *esi_361;
						esi_361 = esi_361 + 0x01;
						edi_182 = (word32) edi_182 + 0x01;
						ecx_326 = ecx_326 - 0x01;
					}
					continue;
				}
				Eq_900 eax_395 = DPB(eax_287 - 0x03 << 0x08, *esi_111, 0);
				bui8 * esi_396 = esi_111 + 0x01 + 0x01;
				ebp_239 = eax_395;
				ui32 ecx_399 = 0x01;
				do
				{
					uint8 dl_404 = dl_104 * 0x02;
					bool C_409 = (bool) cond(dl_404);
					if (dl_404 == 0x00)
					{
						dl_404 = *esi_396 * 0x02 + (dl_404 < 0x00);
						esi_396 = esi_396;
						C_409 = (bool) cond(dl_404);
					}
					dl_104 = dl_404 * 0x02;
					ecx_399 = ecx_399 * 0x02 + C_409;
					bool C_421 = (bool) cond(dl_104);
					if (dl_104 == 0x00)
					{
						dl_104 = *esi_396 * 0x02 + (dl_104 < 0x00);
						esi_396 = esi_396 + 0x01;
						C_421 = (bool) cond(dl_104);
					}
				} while (C_421);
				if (eax_395 < 0x7D00)
				{
					if (eax_395 >= 0x0500)
					{
						ui32 ecx_457 = ecx_399 + 0x01;
						byte * esi_461 = edi_182 - eax_395;
						while (ecx_457 != 0x00)
						{
							*edi_182 = *esi_461;
							esi_461 = esi_461 + 0x01;
							edi_182 = (word32) edi_182 + 0x01;
							ecx_457 = ecx_457 - 0x01;
						}
						esi_111 = esi_396;
						continue;
					}
					if (eax_395 <= 0x7F)
						goto l00409450;
				}
				else
				{
l00409450:
					ecx_399 = ecx_399 + 0x02;
				}
				byte * esi_439 = edi_182 - eax_395;
				while (ecx_399 != 0x00)
				{
					*edi_182 = *esi_439;
					esi_439 = esi_439 + 0x01;
					edi_182 = (word32) edi_182 + 0x01;
					ecx_399 = ecx_399 - 0x01;
				}
				esi_111 = esi_396;
				continue;
			}
			dl_104 = dl_104 * 0x02;
			bool C_109 = (bool) cond(dl_104);
			if (dl_104 == 0x00)
			{
				dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_109 = (bool) cond(dl_104);
			}
			if (C_109)
			{
				bu8 al_228 = *esi_111;
				bui8 * esi_229 = esi_111 + 0x01;
				Eq_900 eax_232 = (word32) (al_228 >> 0x01);
				if (al_228 >> 0x01 == 0x00)
					return edi_182 - dwArg08;
				else
				{
					Eq_1038 ecx_238 = (al_228 >> 0x01 < 0x00) + 0x02;
					ebp_239 = eax_232;
					byte * esi_243 = edi_182 - eax_232;
					while (ecx_238 != 0x00)
					{
						*edi_182 = *esi_243;
						esi_243 = esi_243 + 0x01;
						edi_182 = (word32) edi_182 + 0x01;
						ecx_238 = ecx_238 - 0x01;
					}
					esi_111 = esi_229;
					continue;
				}
			}
			uint8 dl_119 = dl_104 * 0x02;
			bool C_124 = (bool) cond(dl_119);
			if (dl_119 == 0x00)
			{
				dl_119 = *esi_111 * 0x02 + (dl_119 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_124 = (bool) cond(dl_119);
			}
			uint8 dl_132 = dl_119 * 0x02;
			bool C_137 = (bool) cond(dl_132);
			if (dl_132 == 0x00)
			{
				dl_132 = *esi_111 * 0x02 + (dl_132 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_137 = (bool) cond(dl_132);
			}
			uint8 dl_145 = dl_132 * 0x02;
			ui32 eax_143 = C_124 * 0x02 + C_137;
			bool C_150 = (bool) cond(dl_145);
			if (dl_145 == 0x00)
			{
				dl_145 = *esi_111 * 0x02 + (dl_145 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_150 = (bool) cond(dl_145);
			}
			dl_104 = dl_145 * 0x02;
			ui32 eax_156 = eax_143 * 0x02 + C_150;
			bool C_163 = (bool) cond(dl_104);
			if (dl_104 == 0x00)
			{
				dl_104 = *esi_111 * 0x02 + (dl_104 < 0x00);
				esi_111 = esi_111 + 0x01;
				C_163 = (bool) cond(dl_104);
			}
			ui32 eax_171 = eax_156 * 0x02 + C_163;
			byte al_172 = (byte) eax_171;
			if (eax_171 != 0x00)
				al_172 = *(edi_182 - eax_171);
			*edi_182 = al_172;
			edi_182 = (word32) edi_182 + 0x01;
		}
	}
}

// 0040951C: void fn0040951C()
void fn0040951C()
{
	word32 esp_4;
	word32 ebp_5;
	ebp->ptr05A5();
}

// 00409522: void fn00409522()
void fn00409522()
{
	word32 esp_4;
	word32 ebp_5;
	ebp->ptr05A9();
}

// 00409528: void fn00409528()
void fn00409528()
{
	word32 esp_4;
	word32 ebp_5;
	ebp->ptr0599();
}

// 0040952E: void fn0040952E()
void fn0040952E()
{
	word32 esp_4;
	word32 ebp_5;
	ebp->ptr059D();
}

// 00409534: void fn00409534()
void fn00409534()
{
	word32 esp_4;
	word32 ebp_5;
	ebp->ptr05A1();
}

