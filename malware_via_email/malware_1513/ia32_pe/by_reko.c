// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040108B: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	struct Eq_3 * ecx_4 = __rol((struct Eq_3 *) 0x21FFFFFF, 0x07);
	struct Eq_3 * esi_23 = dwArg00 + __ror(4291151914, 0x07);
	Eq_14 edx_254 = __rol((struct Eq_3 *) 155616, 0x03)[(fp & __ror(0x3FC0, 0x06)) / 1628062181];
l004010C5:
	edx_254 = (word32) edx_254 + 0x01;
	if (*edx_254 != ecx_4)
	{
		bool Z_265 = (bool) cond(*edx_254 - esi_23);
		do
		{
			if (Z_265)
				goto l004010C5;
			edx_254 = edx_254 - 0x01;
			byte al_279 = (byte) __rol((struct Eq_3 *) 0x40000002, 0x06);
			Z_265 = (bool) cond(*edx_254 - al_279);
		} while (*edx_254 != al_279);
	}
	else
	{
		edx_254 = (word32) edx_254 + 0x04;
		if (*((word32) edx_254 + 0x04) != (byte) __rol((struct Eq_3 *) 0xFC000003, 0x06))
		{
			ecx_4->dw610A41E1 = ecx_4->dw610A41E1 + 0x01;
l00401102:
			ui32 edx_53 = __ror(edx_254, 0x10);
			struct Eq_19 * ecx_55 = dwArg00;
			do
			{
				struct Eq_3 * edi_66 = __rol((struct Eq_3 *) 0x18000006, 0x05);
				ecx_55 = ecx_55 - 0x01;
				esi_23 = __rol(esi_23, 0x11);
			} while (ecx_55->t0000 != edi_66);
			ptr32 esp_76;
			word32 esi_77;
			word32 ecx_78;
			bool C_79;
			word32 edi_80;
			byte SZO_81;
			struct Eq_3 * eax_82;
			word32 edx_83;
			byte SCZO_84;
			bool Z_85;
			byte al_86;
			struct Eq_94 * fs_87;
			word16 dx_88;
			word32 ebp_89;
			word16 si_90;
			word32 ebx_91;
			struct Eq_99 * ds_92;
			word16 cx_93;
			ecx_55();
			__rol(eax_82, 0x18);
			struct Eq_105 * esi_100 = fs_87->ptr0030;
			struct Eq_127 ** edi_108 = esi_100->ptr000C->ptr001C;
			word16 si_110 = __ror((word16) &esi_100->ptr000C, 0x06);
			word32 ecx_114 = *((char *) *edi_108 + 0x08);
			*(esp_76 - 0x04) = 414199694;
			*(esp_76 - 0x08) = ecx_114;
			<anonymous> * edi_126 = fn0040143B((word16) ecx_114, DPB(&esi_100->ptr000C, si_110, 0), dwArg00, dwArg04);
			ui32 edx_130 = __ror(0x3600, 0x07);
			struct Eq_3 * ecx_134 = __rol((struct Eq_3 *) 0x36321736, 0x01);
			*(esp_76 - 0x04) = edx_130;
			*(esp_76 - 0x08) = (struct Eq_3 **) ecx_134;
			struct Eq_3 * esi_144 = __rol((struct Eq_3 *) 0x9B191D1B, 0x02);
			*(esp_76 - 0x0C) = (struct Eq_3 **) esi_144;
			*(esp_76 - 0x10) = esp_76 - 0x0C;
			struct Eq_190 * esp_153;
			struct Eq_146 ** esi_154;
			word32 ecx_155;
			bool C_156;
			word32 edi_157;
			byte SZO_158;
			word32 eax_159;
			word32 edx_160;
			byte SCZO_161;
			bool Z_162;
			byte al_163;
			struct Eq_201 * fs_164;
			word16 dx_165;
			word32 ebp_166;
			word16 si_167;
			word32 ebx_168;
			struct Eq_206 * ds_169;
			word16 cx_170;
			edi_126();
			esp_153->dw0008 = ~0x1B251B1D;
			esp_153->dw0004 = eax_159;
			<anonymous> * edi_179 = fn0040143B(cx_170, esi_154, dwArg00, dwArg04);
			esp_153->dw0008 = 0x00;
			esp_153->dw0004 = 0x00;
			esp_153->dw0000 = 0x00;
			*(esp_153 - 0x04) = 0x00D0FA18;
			*(esp_153 - 0x08) = ~0x540B0078;
			*(esp_153 - 0x0C) = 101;
			word32 esp_198;
			word32 esi_199;
			word32 ecx_200;
			bool C_201;
			word32 edi_202;
			byte SZO_203;
			word32 eax_204;
			word32 edx_205;
			byte SCZO_206;
			bool Z_207;
			byte al_208;
			struct Eq_259 * fs_209;
			word16 dx_210;
			word32 ebp_211;
			word16 si_212;
			word32 ebx_213;
			struct Eq_264 * ds_214;
			word16 cx_215;
			edi_179();
			<anonymous> * ecx_225 = (<anonymous> **) 2581580;
			struct Eq_3 * edx_227 = __rol(DPB(edx_205, dx_210 - ~0x16, 0), 0x13);
			word32 esp_229;
			word32 esi_230;
			ui32 ecx_231;
			bool C_232;
			word32 edi_233;
			byte SZO_234;
			ui32 * eax_235;
			word32 edx_236;
			byte SCZO_237;
			bool Z_238;
			byte al_239;
			struct Eq_287 * fs_240;
			word16 dx_241;
			word32 ebp_242;
			word16 si_243;
			word32 ebx_244;
			struct Eq_292 * ds_245;
			word16 cx_246;
			ecx_225();
			*eax_235 = *eax_235 | ecx_231;
		}
	}
	goto l00401102;
}

// 0040143B: Register word32 fn0040143B(Register word16 cx, Register (ptr32 (ptr32 Eq_146)) esi, Stack (ptr32 Eq_19) dwArg04, Stack word32 dwArg08)
word32 fn0040143B(word16 cx, Eq_146 * * esi, Eq_19 * dwArg04, word32 dwArg08)
{
	__ror(cx, 0x02);
	struct Eq_323 * ecx_38 = dwArg04 + (*((word32) (dwArg04)[0x003C].t0000 + (dwArg04 - ~0x77)) - ~0x1B);
	word32 edi_41[] = dwArg04 + ecx_38->dw0000;
	word32 * ecx_48 = dwArg04 + ecx_38->dw0004;
	word16 eax_56[] = dwArg04 + ecx_38->dw0008;
	__wait();
	__wait();
	word32 * edi_111 = ecx_48;
	ui32 dwLoc1C_110 = 0x00;
	byte * eax_113 = dwArg04 + *ecx_48;
	ui32 ecx_115 = 0x00;
	byte cl_117 = 0x00;
	while (true)
	{
		do
		{
			ui32 ecx_95 = __ror(DPB(ecx_115, cl_117 + *eax_113, 0), 0x17);
			ecx_115 = ecx_95 ^ 1200148887;
			cl_117 = (byte) (ecx_95 ^ 1200148887);
			eax_113 = eax_113 + 0x01;
		} while (*eax_113 != 0x00);
		if ((ecx_95 ^ 1200148887 ^ dwArg08) == 0x00)
			break;
		edi_111 = edi_111 - ~0x03;
		dwLoc1C_110 = dwLoc1C_110 + 0x01;
		eax_113 = (byte *) (dwArg04 + *edi_111);
		ecx_115 = 0x00;
		cl_117 = 0x00;
	}
	return dwArg04 + edi_41[(word32) eax_56[dwLoc1C_110]];
}

