// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	ui32 eax_9 = ecx - 0x01 & edi;
	word32 esi_67;
	word32 edi_68;
	Eq_2 eax_69 = fn0040105F(0x00, eax_9 + (edi + esi) + esi + esi + esi + esi, 13128104, 0x00, eax_9, out esi_67, out edi_68);
	*(fp - 44) = edi_68;
	*(fp - 0x30) = esi_67;
	word32 esi_82;
	word32 edi_83;
	return fn0040105F(eax_69, dwArg00, dwArg14, dwArg18, dwArg24, out esi_82, out edi_83);
}

// 0040105F: Register Eq_2 fn0040105F(Register Eq_2 eax, Stack ui32 dwArg00, Stack word32 dwArg14, Stack word32 dwArg18, Stack ui32 dwArg24, Register out ptr32 esiOut, Register out ptr32 ediOut)
DWORD fn0040105F(DWORD eax, ui32 dwArg00, word32 dwArg14, word32 dwArg18, ui32 dwArg24, ptr32 & esiOut, ptr32 & ediOut)
{
	ui32 eax_106 = dwArg00;
	cui16 ax_107 = (word16) dwArg00;
	while (true)
	{
		word16 * eax_37 = DPB(eax_106, ax_107 & 0x00, 0);
		word32 ecx_48 = DPB(ecx, *eax_37, 0);
		ecx = ecx_48 + 42418;
		if ((word16) (ecx_48 + 42418) == 0x01)
			break;
		eax_106 = eax_37 - 0x00010000;
		ax_107 = (word16) (eax_37 - 0x00010000);
	}
	word32 eax_137 = DPB(eax_106, 0x00, 0);
	struct Eq_81 * ebx_393;
	word32 ecx_394 = fn00401324(fp - 0x28, fp - 0x28, out ebx_393);
	struct Eq_94 * esp_490;
	word32 eax_491;
	byte SZO_492;
	word32 edi_493;
	word32 esi_494;
	word32 ebp_495;
	word32 edx_496;
	word16 ax_497;
	byte C_498;
	word16 cx_499;
	word32 ecx_500;
	byte SCZO_501;
	byte Z_502;
	word32 ebx_503;
	struct Eq_108 * fs_504;
	ebx_393->ptr0020();
	*(esp_490 - 0x04) = fp - 0x28;
	*(esp_490 - 0x08) = esi_494;
	ptr32 esi_509 = *(esp_490 - 0x08);
	word32 eax_513 = *(esi_509 - 0x01);
	*(esp_490 - 0x04) = *(esp_490 - 0x04);
	*(esp_490 - 0x08) = esi_509;
	word32 esi_519 = *(esp_490 - 0x08);
	word32 edi_521 = *(esp_490 - 0x04);
	esp_490->dw0038 = eax_513;
	*(esp_490 - 0x04) = ebx_503;
	*(esp_490 - 0x04) = *(esp_490 - 0x04) - 0x04;
	*(esp_490 - 0x08) = edi_521;
	*(esp_490 - 0x0C) = esi_519;
	word32 esi_533 = *(esp_490 - 0x0C);
	*(esp_490 - 0x08) = *(esp_490 - 0x04);
	*(esp_490 - 0x0C) = esi_533;
	word32 esi_542 = *(esp_490 - 0x0C);
	*(esp_490 - 0x08) = **(esp_490 - 0x08);
	*(esp_490 - 0x0C) = esi_542;
	word32 esi_551 = *(esp_490 - 0x0C);
	esp_490->dw003C = ebx_503;
	word32 edi_556 = *(esp_490 - 0x04);
	*(esp_490 - 0x04) = eax_513;
	*(esp_490 - 0x08) = edi_556;
	*(esp_490 - 0x0C) = esi_551;
	word32 esi_564 = *(esp_490 - 0x0C);
	word32 edi_566 = *(esp_490 - 0x08);
	*(esp_490 - 0x08) = ecx_500;
	*(esp_490 - 0x0C) = edi_566;
	*(esp_490 - 0x10) = esi_564;
	word32 esi_574 = *(esp_490 - 0x10);
	word32 edi_576 = *(esp_490 - 0x0C);
	*(esp_490 - 0x0C) = esp_490 - 0x08;
	*(esp_490 - 0x10) = 0x40;
	*(esp_490 - 0x14) = esp_490->dw0020;
	*(esp_490 - 0x18) = edi_576;
	*(esp_490 - 0x1C) = esi_574;
	word32 esi_590 = *(esp_490 - 0x1C);
	word32 edi_592 = *(esp_490 - 0x18);
	*(esp_490 - 0x18) = esp_490->dw0014;
	*(esp_490 - 0x1C) = edi_592;
	*(esp_490 - 0x20) = esi_590;
	word32 esi_601 = *(esp_490 - 0x20);
	*(esp_490 - 0x1C) = *(esp_490 - 0x1C);
	*(esp_490 - 0x20) = esi_601;
	word32 esi_611 = *(esp_490 - 0x20);
	word32 edi_613 = *(esp_490 - 0x1C);
	esp_490->dw0018 = 0x00;
	*(esp_490 - 0x1C) = edi_613;
	*(esp_490 - 0x20) = esi_611;
	struct Eq_402 * edi_622 = *(esp_490 - 0x1C);
	struct Eq_408 * esp_624;
	struct Eq_409 Eq_422::* eax_625;
	byte SZO_626;
	word32 edi_627;
	word32 esi_628;
	word32 ebp_629;
	word32 edx_630;
	word16 ax_631;
	byte C_632;
	word16 cx_633;
	word32 ecx_634;
	byte SCZO_635;
	byte Z_636;
	word32 ebx_637;
	struct Eq_422 * fs_638;
	edi_622->ptr000C();
	esp_624->dw0004 = esp_624->dw0004;
	esp_624->dw0000 = esi_628;
	word32 esi_647 = esp_624->dw0000;
	esp_624->dw0008 = esp_624->dw0008;
	esp_624->dw0004 = esi_647;
	word32 esi_657 = esp_624->dw0004;
	esp_624->dw000C = esp_624->dw0008;
	esp_624->dw0008 = esi_657;
	word32 esi_671 = esp_624->dw0010;
	esp_624->dw0010 = esp_624->dw000C;
	esp_624->dw000C = esi_671;
	word32 esi_677 = esp_624->dw000C;
	esp_624->dw0010 = esp_624->dw0010;
	esp_624->dw000C = esi_677;
	word32 esi_686 = esp_624->dw000C;
	struct Eq_488 * eax_690 = (fs_638->*eax_625).ptr002F;
	esp_624->dw0010 = esp_624->dw0010;
	esp_624->dw000C = esi_686;
	word32 esi_695 = esp_624->dw000C;
	esp_624->dw0010 = esp_624->dw0010;
	esp_624->dw000C = esi_695;
	word32 esi_704 = esp_624->dw000C;
	word32 ecx_708 = eax_690->dw0004;
	esp_624->dw0010 = esp_624->dw0010;
	esp_624->dw000C = esi_704;
	word32 esi_713 = esp_624->dw000C;
	word32 edi_715 = esp_624->dw0010;
	esp_624->dw003C = esp_624->dw003C ^ ecx_708;
	esp_624->dw0010 = edi_715;
	esp_624->dw000C = esi_713;
	word32 esi_724 = esp_624->dw000C;
	*(esp_624 - 0xF8) = esp_624->dw0010;
	*(esp_624 - 252) = esi_724;
	word32 esi_734 = *(esp_624 - 252);
	byte * eax_738 = esp_624->ptr001C;
	*(esp_624 - 0xF8) = *(esp_624 - 0xF8);
	*(esp_624 - 252) = esi_734;
	int32 ecx_748 = esp_624->dw002C;
	word32 esi_760;
	word32 edi_761;
	return BeginNjsukaqfoi(eax_738, ecx_748, eax_137 + 0x00016030, dwArg04, dwArg0104, dwArg0108, dwArg010C, dwArg0118, dwArg011C, dwArg012C, dwArg0130, dwArg0134, dwArg0138, out esi_760, out edi_761);
}

// 0040130E: Register (ptr byte) BeginNjsukaqfoi(Register (ptr byte) eax, Register int32 ecx, Stack word32 dwArg00, Stack word32 dwArg04, Stack word32 dwArg0104, Stack word32 dwArg0108, Stack (ptr byte) dwArg010C, Stack ptr32 dwArg0118, Stack word32 dwArg011C, Stack word32 dwArg012C, Stack word32 dwArg0130, Stack word32 dwArg0134, Stack (ptr Eq_609) dwArg0138, Register out ptr32 esiOut, Register out ptr32 ediOut)
byte * BeginNjsukaqfoi(byte * eax, int32 ecx, word32 dwArg00, word32 dwArg04, word32 dwArg0104, word32 dwArg0108, byte * dwArg010C, ptr32 dwArg0118, word32 dwArg011C, word32 dwArg012C, word32 dwArg0130, word32 dwArg0134, Eq_609 * dwArg0138, ptr32 & esiOut, ptr32 & ediOut)
{
	Eq_627 eax_24 = 0x00;
	byte al_25 = 0x00;
	do
	{
		word32 ecx_45 = fp + 0x08 + eax_24;
		*ecx_45 = al_25;
		eax_24 = (word32) eax_24 + 0x01;
		al_25 = (byte) eax_24;
	} while (eax_24 < 0x0100);
	ptr32 ecx_133 = 0x00;
	int32 esi_149 = 0x00;
	Eq_648 ebp_153 = 0x00;
	do
	{
		byte ah_173 = Mem48[fp + 0x08 + ebp_153:byte];
		word32 edx_192 = (word32) (ecx_133 + ecx);
		word32 ebx_194 = (word32) ah_173;
		int32 edx_216 = (word32) (byte) (edx_192 + (ebx_194 + esi_149));
		ecx_133 = ecx_133 + 0x01;
		if (ecx_133 >= dwArg0118)
			ecx_133 = 0x00;
		byte al_248 = (&fp->a0008->t0000)[edx_216 / 0x08];
		word32 esi_260 = fp + 0x08 + ebp_153;
		*esi_260 = al_248;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x10)[edx_216 + 0x18].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = ah_173;
		ebp_153 = (word32) ebp_153 + 0x01;
		esi_149 = edx_216;
	} while (ebp_153 < 0x0100);
	word32 ecx_356 = dwArg0134;
	byte ch_357 = SLICE(dwArg0134, byte, 8);
	if (ch_357 == 0x88)
	{
		int32 eax_628 = 0x00;
		int32 esi_646 = 0x00;
		word32 ebp_651 = dwArg011C;
		byte * edi_652 = eax;
		if (true)
		{
			do
			{
				int32 eax_764 = (word32) (byte) (eax_628 + 0x01);
				Eq_954 cl_775 = (&fp->a0008->t0000)[eax_764 / 0x08];
				word32 ecx_776 = DPB(ecx_356, cl_775, 0);
				byte dl_795 = (byte) ((word32) cl_775 + esi_646);
				int32 edx_797 = (word32) dl_795;
				(&fp->a0008->t0000)[eax_764 / 0x08] = (&fp->a0008->t0000)[edx_797 / 0x08];
				(&fp->a0008->t0000)[edx_797 / 0x08] = (struct Eq_632) cl_775;
				Mem958[edi_652 + 0x00:byte] = Mem854[edi_652 + 0x00:byte] ^ Mem854[(fp - 0x0C) + ((word32) ((byte) (Mem854[(fp + 0x08) + eax_764:word32] + ecx_776)) + 0x14):byte];
				eax_628 = eax_764;
				ecx_356 = 0x00;
				esi_646 = edx_797;
				edi_652 = edi_652 + 0x01;
				ebp_651 = ebp_651 - 0x01;
			} while (ebp_651 != 0x00);
		}
		word32 esi_738;
		*esiOut = esi;
		word32 edi_740;
		*ediOut = edi;
		return dwArg010C;
	}
	else
	{
		ptr32 esp_429;
		word32 edi_430;
		word32 esi_431;
		word32 eax_432;
		word32 ecx_433;
		byte SZO_434;
		byte C_435;
		byte al_436;
		byte SCZO_437;
		word32 ebp_438;
		struct Eq_707 * ebx_439;
		byte ah_440;
		word32 edx_441;
		byte dl_442;
		byte bh_443;
		byte ch_444;
		byte Z_445;
		byte CZ_446;
		byte cl_447;
		dwArg0138->ptr0020();
		*(esp_429 - 0x04) = edi_430;
		*(esp_429 - 0x08) = esi_431;
		ptr32 esp_456;
		word32 edi_457;
		word32 esi_458;
		word32 eax_459;
		word32 ecx_460;
		byte SZO_461;
		byte C_462;
		byte al_463;
		byte SCZO_464;
		word32 ebp_465;
		struct Eq_739 * ebx_466;
		byte ah_467;
		word32 edx_468;
		byte dl_469;
		byte bh_470;
		byte ch_471;
		byte Z_472;
		byte CZ_473;
		byte cl_474;
		ebx_439->ptr0008();
		*(esp_456 - 0x04) = edi_457;
		*(esp_456 - 0x08) = esi_458;
		ptr32 esp_483;
		word32 edi_484;
		word32 esi_485;
		word32 eax_486;
		word32 ecx_487;
		byte SZO_488;
		byte C_489;
		byte al_490;
		byte SCZO_491;
		word32 ebp_492;
		struct Eq_771 * ebx_493;
		byte ah_494;
		word32 edx_495;
		byte dl_496;
		byte bh_497;
		byte ch_498;
		byte Z_499;
		byte CZ_500;
		byte cl_501;
		ebx_466->ptr0014();
		*(esp_483 - 0x04) = edi_484;
		*(esp_483 - 0x08) = esi_485;
		ptr32 esp_510;
		word32 edi_511;
		word32 esi_512;
		word32 eax_513;
		word32 ecx_514;
		byte SZO_515;
		byte C_516;
		byte al_517;
		byte SCZO_518;
		word32 ebp_519;
		ptr32 ebx_520;
		byte ah_521;
		word32 edx_522;
		byte dl_523;
		byte bh_524;
		byte ch_525;
		byte Z_526;
		byte CZ_527;
		byte cl_528;
		ebx_493->ptr001C();
		*(esp_510 - 0x04) = edi_511;
		*(esp_510 - 0x08) = esi_512;
		ptr32 esp_537;
		word32 edi_538;
		word32 esi_539;
		word32 eax_540;
		word32 ecx_541;
		byte SZO_542;
		byte C_543;
		byte al_544;
		byte SCZO_545;
		word32 ebp_546;
		struct Eq_835 * ebx_547;
		byte ah_548;
		word32 edx_549;
		byte dl_550;
		byte bh_551;
		byte ch_552;
		byte Z_553;
		byte CZ_554;
		byte cl_555;
		(*(ebx_520 - 0x04))();
		*(esp_537 - 0x04) = edi_538;
		*(esp_537 - 0x08) = esi_539;
		ptr32 esp_564;
		word32 edi_565;
		word32 esi_566;
		word32 eax_567;
		word32 ecx_568;
		byte SZO_569;
		byte C_570;
		byte al_571;
		byte SCZO_572;
		word32 ebp_573;
		struct Eq_869 * ebx_574;
		byte ah_575;
		word32 edx_576;
		byte dl_577;
		byte bh_578;
		byte ch_579;
		byte Z_580;
		byte CZ_581;
		byte cl_582;
		ebx_547->ptr0014();
		*(esp_564 - 0x04) = edi_565;
		*(esp_564 - 0x08) = esi_566;
		ptr32 esp_591;
		word32 edi_592;
		word32 esi_593;
		byte * eax_594;
		word32 ecx_595;
		byte SZO_596;
		byte C_597;
		byte al_598;
		byte SCZO_599;
		word32 ebp_600;
		word32 ebx_601;
		byte ah_602;
		word32 edx_603;
		byte dl_604;
		byte bh_605;
		byte ch_606;
		byte Z_607;
		byte CZ_608;
		byte cl_609;
		ebx_574->ptr0014();
		*(esp_591 - 0x04) = edi_592;
		*(esp_591 - 0x08) = esi_593;
		word32 esi_614;
		*esiOut = *(esp_591 - 0x08);
		word32 edi_616;
		*ediOut = *(esp_591 - 0x04);
		return eax_594;
	}
}

// 00401324: Register int32 fn00401324(Stack ptr32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ebxOut)
int32 fn00401324(ptr32 dwArg00, ptr32 dwArg04, ptr32 & ebxOut)
{
	ptr32 eax_3 = dwArg00;
	while (true)
	{
		word16 ax_49 = DPB(eax_3, 0x00, 0) + 0x00;
		word32 eax_59 = DPB(eax_3, ax_49 + 42421, 0);
		if (ax_49 == 42419)
			break;
		eax_3 = eax_59 - 0x00010000;
	}
	struct Eq_1011 * eax_93 = DPB(eax_3, 0x00, 0);
	int32 ecx_138 = eax_93[(&(eax_93 + eax_93->dw003C / 0x0040)->dw003C)[0x0011] / 0x0040];
	word32 ebx_165;
	*ebxOut = (char *) (eax_93 + ecx_138 / 0x0040) + 0x04;
	return ecx_138;
}

