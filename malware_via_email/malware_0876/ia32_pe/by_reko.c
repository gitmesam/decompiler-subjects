// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004160C6: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 ecx_10 = ~0x0001869F;
	do
		ecx_10 = ecx_10 - 0x01;
	while (ecx_10 != 0x00);
	ptr32 ebx_46 = globals->ptr4161D0;
	word32 * esi_47 = ebx_46 + 77286;
	while (true)
	{
		word32 eax_57 = *esi_47;
		word16 ax_58 = (word16) eax_57;
		int32 * esi_59 = esi_47 + 0x01;
		if (eax_57 == 0x00)
			break;
		*(fp - 0x24) = eax_57;
		word32 eax_66 = DPB(eax_57, ax_58, 0);
		ptr32 edi_75 = ebx_46 + *esi_59;
		*(fp - 0x28) = esi_59 + 0x01;
		*(fp - 44) = edi_75;
		fn00416290(eax_66, esi_59 + 0x01, esi_59 + 0x01);
		byte * esi_84 = *(fp - 0x28);
		fn00416186(4284856, esi_84, *(fp - 44));
		word32 eax_86 = *(fp - 0x24);
		esi_47 = (word32 *) (esi_84 + eax_86);
	}
	struct Eq_17 * esp_98;
	word32 ecx_99;
	byte SZO_100;
	byte C_101;
	word32 edx_102;
	byte SCZO_103;
	word16 dx_104;
	word32 eax_105;
	word32 ebx_106;
	word32 ebp_107;
	word32 esi_108;
	word32 edi_109;
	word16 ax_110;
	word16 cx_111;
	byte D_112;
	byte Z_113;
	bcuisposr0 None_114;
	(ebx_46 + 52712)();
	Eq_2 eax_128 = esp_98->t001C;
	esp_98->t001C = 0x00401272;
	return eax_128;
}

// 00416186: void fn00416186(Register Eq_88 ebp, Register (ptr byte) esi, Register (ptr byte) edi)
void fn00416186(Eq_88 ebp, byte * esi, byte * edi)
{
}

// 00416200: FlagGroup byte fn00416200(Register bui8 dl, Register (ptr byte) esi, Register out Eq_142 dlOut, Register out (ptr byte) esiOut)
byte fn00416200(bui8 dl, byte * esi, Eq_142 & dlOut, byte * & esiOut)
{
	*esiOut = esi;
	byte dl_3;
	*dlOut = dl * 0x02;
	byte C_14 = cond(dl * 0x02);
	if (dl * 0x02 == 0x00)
	{
		ui8 dl_20 = *esi * 0x02 + (dl * 0x02 < 0x00);
		*dlOut = dl_20;
		word32 esi_19;
		*esiOut = esi + 0x01;
		C_14 = cond(dl_20);
	}
	return C_14;
}

// 0041620A: Register word32 fn0041620A(Register bui8 dl, Register (ptr byte) esi, Register out Eq_258 dlOut, Register out (ptr byte) esiOut)
word32 fn0041620A(bui8 dl, byte * esi, Eq_258 & dlOut, byte * & esiOut)
{
	byte dl_7;
	word32 esi_8;
	return fn0041620C(0x00, dl, esi, out dl_7, out esi_8);
}

// 0041620C: Register ui32 fn0041620C(Register ui32 ecx, Register bui8 dl, Register (ptr byte) esi, Register out Eq_155 dlOut, Register out ptr32 esiOut)
ui32 fn0041620C(ui32 ecx, bui8 dl, byte * esi, Eq_155 & dlOut, ptr32 & esiOut)
{
	ui32 ecx_13 = ecx + 0x01;
	do
	{
		bui8 dl_10;
		byte * esi_11;
		ecx_13 = ecx_13 * 0x02 + fn00416200(dl, esi, out dl_10, out esi_11);
	} while (fn00416200(dl_10, esi_11, out dl, out esi));
	return ecx_13;
}

// 00416290: void fn00416290(Register word32 ecx, Register (ptr byte) esi, Register (ptr byte) edi)
void fn00416290(word32 ecx, byte * esi, byte * edi)
{
	do
	{
		byte al_21 = *esi;
		byte * esi_23 = esi + 0x01;
		ui8 al_28 = al_21 ^ 0x6C ^ 0xA8;
		ui8 al_42 = al_28 ^ 0x4B ^ 0xE0 ^ 0x06 ^ 0x11;
		esi = esi_23;
		ui8 al_54 = al_42 ^ 0x23 ^ ~0x28;
		ui8 al_69 = al_54 ^ 0xA0 ^ 0x9A ^ 0x07 ^ ~0x41 ^ 0x2E ^ 0x5D;
		ui8 al_76 = al_69 ^ 0x7D ^ 0x5F;
		ui8 al_84 = al_76 ^ 66 ^ 222;
		*edi = al_84 ^ ~0x50;
		edi = edi + 0x01;
		ecx = ecx - 0x01;
	} while (ecx != 0x00);
}

