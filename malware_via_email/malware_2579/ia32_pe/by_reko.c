// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Register (ptr Eq_2) ebx, Stack (ptr byte) dwArg04)
void fn00401000(Eq_2 * ebx, byte * dwArg04)
{
}

// 00401480: Register Eq_272 fn00401480(Register Eq_272 eax, Register (ptr byte) edx, Register word32 ebx, Register Eq_275 esi, Register (ptr Eq_276) edi, Stack Eq_272 dwArg04, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
HMODULE fn00401480(HMODULE eax, byte * edx, word32 ebx, LPVOID esi, Eq_276 * edi, HMODULE dwArg04, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
}

// 004015C0: Register Eq_9 fn004015C0(Register Eq_9 eax, Register Eq_9 esi, Register (ptr Eq_85) edi)
Eq_9 fn004015C0(Eq_9 eax, Eq_9 esi, Eq_85 * edi)
{
	Eq_9 ebp_12 = 0x01;
	word32 ecx_20 = edi->dw000C;
	uint32 eax_21 = edi->dw0008;
	do
	{
		word32 ecx_30 = ecx_20 - 0x01;
		if (ecx_20 == 0x00)
		{
			byte * ecx_82 = edi->ptr0000;
			eax_21 = (word32) *ecx_82;
			edi->ptr0000 = ecx_82 + 0x01;
			ecx_30 = ecx_20 + 0x07;
		}
		ebp_12 = (eax_21 >> 0x07 & 0x01) + ebp_12 * 0x02;
		uint32 eax_44 = eax_21 * 0x02;
		ecx_20 = ecx_30 - 0x01;
		if (ecx_30 == 0x00)
		{
			byte * ecx_74 = edi->ptr0000;
			eax_44 = (word32) *ecx_74;
			edi->ptr0000 = ecx_74 + 0x01;
			ecx_20 = ecx_30 + 0x07;
		}
		eax_21 = eax_44 * 0x02;
	} while ((eax_44 >> 0x07 & 0x01) != 0x00);
	edi->dw0008 = eax_21;
	edi->dw000C = ecx_20;
	return ebp_12;
}

// 00401640: Register Eq_470 fn00401640(Register word32 ebx, Register ptr32 ebp, Register out (ptr word32) ebpOut)
LCID fn00401640(word32 ebx, ptr32 ebp, word32 * & ebpOut)
{
	__align(fp - 0x04);
	ui32 ecx_19 = 877;
	word32 edx_20 = 0x06;
	do
	{
		ecx_19 = ecx_19 << 0x04;
		if (ecx_19 == 0x00)
			ecx_19 = 0x09;
		edx_20 = edx_20 - 0x01;
	} while (edx_20 != 0x00);
	Eq_344 edi_37 = globals->t40537C;
	CloseHandle(null);
	struct Eq_276 * edi_50;
	fn00401DE0(ecx_19 ^ fp - 0x02F8, edx_20, 0x00, edi_37, out edi_50);
	GetThreadLocale();
	Eq_275 esi_56 = (word32) edi_50[(edi_50->ptr003C + 22) / 0x0040];
	byte * edx_81;
	fn00401D70(fp - 0x02DC, fp - 0x02C4, 11, out edx_81);
	word32 ecx_100;
	word32 edx_101;
	word32 ebx_102;
	word32 ebp_103;
	word32 esi_104;
	word32 edi_105;
	<anonymous> * eax_106 = fn00401480(fp - 0x02FC, edx_81, dwLoc020E + 11, esi_56, edi_50, LoadLibraryA(fp - 0x02DC), out ecx_100, out edx_101, out ebx_102, out ebp_103, out esi_104, out edi_105);
	*(fp - 0x0300) = fp - 0x02E4;
	*(fp - 772) = 0x40;
	*(fp - 776) = 0x00052000;
	*(fp - 0x030C) = 0x00;
	struct Eq_2 * esp_120;
	word32 ebp_121;
	byte SCZO_122;
	word32 ebx_123;
	word32 esi_124;
	word32 ecx_126;
	word32 edx_127;
	byte Z_128;
	word32 eax_129;
	byte SZO_130;
	byte C_131;
	byte al_132;
	byte bl_133;
	word16 si_134;
	byte S_135;
	struct Eq_609 * fs_136;
	Eq_610 edi_125;
	eax_106();
	esp_120->dw007B = (word32) GetLastError() + esp_120->dw007B;
	*(esp_120 - 0x04) = 0x00;
	fn00401000(esp_120, dwArg00);
	word32 * eax_149 = null;
	word32 ecx_151 = 0x000147FF;
	do
	{
		*eax_149 = *eax_149 + 0x5C16;
		eax_149 = eax_149 + 0x01;
		ecx_151 = ecx_151 - 0x01;
	} while (ecx_151 != 0x00);
	word32 ecx_162 = 0x6B;
	word32 edx_163 = 11;
	do
	{
		ecx_162 = ecx_162 - 0x0A;
		esp_120->dw002C = ecx_162;
		if (ecx_162 == 0x00)
		{
			esp_120->dw002C = 0x06;
			ecx_162 = 0x06;
		}
		edx_163 = edx_163 - 0x01;
	} while (edx_163 != 0x00);
	*(esp_120 - 0x04) = edx_163;
	GetModuleHandleA(*(esp_120 - 0x04));
	struct Eq_679 * ebp_181 = (struct Eq_679 **) 0x3C;
	word32 eax_182 = esp_120->dw002C;
	ebp_181->w0016 = si_134;
	struct Eq_689 * esi_185 = ebp_181->ptr00A0;
	esp_120->ptr0028 = ebp_181;
	ebp_181->dw00C0 = eax_182;
	struct Eq_679 * ebp_183 = ebp_181;
	if (esi_185 != null)
	{
		esi_185 = esi_185 + Mem191[0x0040537C:word32];
		edi_125 = esp_120->t01B5;
		esp_120->dw0188 = esp_120->dw0188 & GetLastError();
		word32 edx_407 = globals->t40537C - ebp_181->dw0034;
		if (esi_185->dw0000 != 0x00)
		{
			do
			{
				Eq_745 eax_418 = esi_185[0x01];
				word16 * ecx_424 = esi_185 + 0x02;
				if (eax_418 - 0x08 >> 0x01 > 0x00)
				{
					edi_125 = eax_418 - 0x08 >> 0x01;
					do
					{
						ui32 eax_438 = (word32) *ecx_424;
						if ((eax_438 & 0xF000) == 0x3000)
						{
							word32 * eax_456 = (word32) globals->t40537C + ((eax_438 & 0x0FFF) + esi_185->dw0000);
							*eax_456 = *eax_456 + edx_407;
						}
						ecx_424 = ecx_424 + 0x01;
						edi_125 = edi_125 - 0x01;
					} while (edi_125 != 0x00);
				}
				esi_185 = esi_185 + Mem403[esi_185 + 0x04:word32];
			} while (esi_185->dw0000 != 0x00);
		}
	}
	struct Eq_702 * esp_203 = esp_120 - 0x04;
	if (ebp_181->dw0080 != 0x00)
	{
		*(esp_120 - 0x08) = 0x00;
		esp_120->dw01BD = GetModuleHandleA(*(esp_120 - 0x08)) + esp_120->dw01BD / 0x04;
		esp_203 = esp_120 - 0x08;
		esi_185 = esi_185 + edi_125;
		struct Eq_839 * ebp_278 = (word32) globals->t40537C + ebp_181->dw0080;
		if (ebp_278->dw0010 != 0x00)
		{
			do
			{
				esp_203 = esp_203 - 0x04;
				esp_203->dw0000 = (word32) globals->t40537C + ebp_278->dw000C;
				Eq_272 eax_311 = LoadLibraryA(esp_203->dw0000);
				esp_203[0x0C] = (struct Eq_702) eax_311;
				Eq_272 ecx_312 = eax_311;
				if (eax_311 != null)
				{
					word32 edi_333 = ebp_278->dw0000;
					if (edi_333 == 0x00)
						edi_333 = ebp_278->dw0010;
					Eq_344 eax_338 = globals->t40537C;
					word32 * edi_340 = (word32) eax_338 + edi_333;
					esi_185 = (word32) eax_338 + ebp_278->dw0010;
					int32 eax_343 = *edi_340;
					if (eax_343 != 0x00)
					{
						while (true)
						{
							Eq_295 eax_364;
							if (eax_343 < 0x00)
							{
								esp_203->dw0261 = esp_203->dw0261 + eax_343;
								esp_203->dw0276 = esp_203->dw0276 - eax_343;
								eax_364 = (word32) *edi_340;
							}
							else
								eax_364 = (Eq_295) ((word32) globals->t40537C + (eax_343 + 0x02));
							struct Eq_942 * esp_366 = esp_203 - 0x04;
							esp_366->t0000 = eax_364;
							*(esp_366 - 0x04) = (HMODULE *) ecx_312;
							esi_185->dw0000 = (int32) GetProcAddress(*(esp_366 - 0x04), esp_366->t0000);
							edi_340 = edi_340 + 0x01;
							esp_203 = esp_366 - 0x04;
							eax_343 = *edi_340;
							esi_185 = esi_185 + 0x01;
							if (eax_343 == 0x00)
								break;
							ecx_312 = esp_366->t002C;
						}
					}
				}
				ebp_278 = ebp_278 + 0x01;
			} while (ebp_278->dw0010 != 0x00);
		}
		ebp_183 = (struct Eq_679 *) esp_203[0x0B];
	}
	<anonymous> * ecx_217 = (word32) globals->t40537C + ebp_183->dw0028;
	esp_203[0x05] = (struct Eq_702) 0x00;
	globals->ptr405384 = ecx_217;
	struct Eq_797 * esp_221 = esp_203 - 0x04;
	esp_221->ptr0000 = esi_185;
	esp_221->ptr0018 = fs_136->ptr0030;
	struct Eq_808 * esi_230 = esp_221->ptr0018->ptr000C->ptr000C;
	do
		esi_230 = esi_230->ptr0000;
	while (esi_230->t0018 != globals->t40537C);
	Eq_470 eax_245 = GetThreadLocale();
	esi_230->ptr001C = globals->ptr405384;
	esp_221->t0034 = 0x00;
	word32 ecx_250 = 22;
	do
	{
		eax_245 = eax_245 - esp_221->t0034;
		ecx_250 = ecx_250 - 0x01;
	} while (ecx_250 != 0x00);
	word32 ebp_266;
	*ebpOut = *esp_221->ptr000C;
	return eax_245;
}

// 00401980: Register word32 fn00401980(Register (ptr byte) ecx, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebxOut)
word32 fn00401980(byte * ecx, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebxOut)
{
	CloseHandle(null);
	GetLastError();
	GetModuleHandleA(null);
	uint32 ecx_37 = 788;
	word32 edx_38 = 0x09;
	do
	{
		ecx_37 = ecx_37 >> 0x07;
		if (ecx_37 == 0x00)
			ecx_37 = 0x08;
		edx_38 = edx_38 - 0x01;
	} while (edx_38 != 0x00);
	Eq_272 eax_63 = GetModuleHandleA(*esp_55);
	word32 esp_73;
	word32 ebp_74;
	byte SCZO_75;
	<anonymous> * ebx_76;
	word32 esi_77;
	word32 edi_78;
	word32 eax_79;
	byte SZO_80;
	byte C_81;
	word32 ecx_82;
	word32 edx_83;
	byte Z_84;
	byte CZ_85;
	ebx_60();
	ptr32 esp_86;
	word32 ebp_87;
	byte SCZO_88;
	word32 ebx_89;
	<anonymous> * esi_90;
	word32 edi_91;
	word32 eax_92;
	byte SZO_93;
	byte C_94;
	word32 ecx_95;
	word32 edx_96;
	byte Z_97;
	byte CZ_98;
	ebx_76();
	uint32 ecx_104 = 0xBA;
	word32 edx_100 = 0x0A;
	do
	{
		ecx_104 = ecx_104 >> 0x01;
		if (ecx_104 == 0x00)
			ecx_104 = 0x00;
		edx_100 = edx_100 - 0x01;
	} while (edx_100 != 0x00);
	*(esp_86 - 0x04) = edx_100;
	ptr32 esp_123;
	word32 ebp_124;
	byte SCZO_125;
	word32 ebx_126;
	word32 esi_127;
	<anonymous> * edi_128;
	word32 eax_129;
	byte SZO_130;
	byte C_131;
	word32 ecx_132;
	word32 edx_133;
	byte Z_134;
	byte CZ_135;
	esi_90();
	word32 edx_138 = 0x30;
	do
		edx_138 = edx_138 - 0x01;
	while (edx_138 != 0x00);
	*(esp_123 - 0x04) = edx_138;
	ptr32 esp_168;
	word32 ebp_169;
	byte SCZO_170;
	word32 ebx_171;
	word32 esi_172;
	<anonymous> * edi_173;
	word32 eax_174;
	byte SZO_175;
	byte C_176;
	word32 ecx_177;
	word32 edx_178;
	byte Z_179;
	byte CZ_180;
	edi_128();
	*(esp_168 - 0x04) = 0x00;
	word32 esp_183;
	word32 ebp_184;
	byte SCZO_185;
	<anonymous> * ebx_186;
	word32 esi_187;
	word32 edi_188;
	word32 eax_189;
	byte SZO_190;
	byte C_191;
	word32 ecx_192;
	word32 edx_193;
	byte Z_194;
	byte CZ_195;
	edi_173();
	word32 eax_200 = 0x02;
	do
		eax_200 = eax_200 - 0x01;
	while (eax_200 != 0x00);
	ptr32 esp_215;
	word32 ebp_216;
	byte SCZO_217;
	word32 ebx_218;
	word32 esi_219;
	<anonymous> * edi_220;
	word32 eax_221;
	byte SZO_222;
	byte C_223;
	word32 ecx_224;
	word32 edx_225;
	byte Z_226;
	byte CZ_227;
	ebx_186();
	Eq_470 eax_237 = GetThreadLocale();
	*(esp_215 - 0x04) = 0x00;
	word32 esp_241;
	word32 ebp_242;
	byte SCZO_243;
	word32 ebx_244;
	<anonymous> * esi_245;
	word32 edi_246;
	word32 eax_247;
	byte SZO_248;
	byte C_249;
	word32 ecx_250;
	word32 edx_251;
	byte Z_252;
	byte CZ_253;
	edi_220();
	word32 ecx_265 = 0x08;
	do
		ecx_265 = ecx_265 - 0x01;
	while (ecx_265 != 0x00);
	ptr32 esp_273;
	word32 ebp_274;
	byte SCZO_275;
	word32 ebx_276;
	word32 esi_277;
	word32 edi_278;
	word32 eax_279;
	byte SZO_280;
	byte C_281;
	word32 ecx_282;
	word32 edx_283;
	byte Z_284;
	byte CZ_285;
	esi_245();
	GetLastError();
	*(esp_273 - 0x04) = 0x00;
	CloseHandle(*(esp_273 - 0x04));
	word32 ecx_304 = 0x14;
	do
		ecx_304 = ecx_304 - 0x01;
	while (ecx_304 != 0x00);
	*(esp_273 - 0x08) = ecx_304;
	GetModuleHandleA(*(esp_273 - 0x08));
	uint32 ecx_320 = 0x030F;
	word32 edi_321 = 0x09;
	do
	{
		uint32 edx_326 = SLICE(ecx_320 * 0x24924925, word32, 32);
		uint32 ecx_329 = (ecx_320 - edx_326 >> 0x01) + edx_326;
		ecx_320 = ecx_329 >> 0x02;
		if (ecx_329 >> 0x02 == 0x00)
			ecx_320 = 0x02;
		edi_321 = edi_321 - 0x01;
	} while (edi_321 != 0x00);
	GetThreadLocale();
	*(esp_273 - 0x0C) = edi_321;
	CloseHandle(*(esp_273 - 0x0C));
	*(esp_350 - 0x04) = edi_355;
	ptr32 esp_375;
	word32 ebp_376;
	byte SCZO_377;
	word32 ebx_378;
	<anonymous> * esi_379;
	word32 edi_380;
	word32 eax_381;
	byte SZO_382;
	byte C_383;
	word32 ecx_384;
	word32 edx_385;
	byte Z_386;
	byte CZ_387;
	esi_354();
	*(esp_375 - 0x04) = edi_380;
	ptr32 esp_390;
	word32 ebp_391;
	byte SCZO_392;
	word32 ebx_393;
	<anonymous> * esi_394;
	word32 edi_395;
	word32 eax_396;
	byte SZO_397;
	byte C_398;
	word32 ecx_399;
	word32 edx_400;
	byte Z_401;
	byte CZ_402;
	esi_379();
	uint32 ecx_407 = 0x024E;
	word32 edi_408 = 22;
	do
	{
		uint32 edx_413 = SLICE(ecx_407 * 0x24924925, word32, 32);
		uint32 ecx_416 = (ecx_407 - edx_413 >> 0x01) + edx_413;
		ecx_407 = ecx_416 >> 0x02;
		if (ecx_416 >> 0x02 != 0x00)
			ecx_407 = 0x05;
		edi_408 = edi_408 - 0x01;
	} while (edi_408 != 0x00);
	*(esp_390 - 0x04) = 0x00;
	GetModuleHandleA(*(esp_390 - 0x04));
	word32 eax_437 = 0x01CC;
	word32 edx_438 = 0x0E;
	do
	{
		eax_437 = eax_437 - 0x01;
		if (eax_437 != 0x00)
			eax_437 = 0x01;
		edx_438 = edx_438 - 0x01;
	} while (edx_438 != 0x00);
	GetThreadLocale();
	uint32 eax_457 = 900;
	word32 edx_458 = 0x0F;
	do
	{
		eax_457 = eax_457 >> 0x03;
		if (eax_457 == 0x00)
			eax_457 = 0x06;
		edx_458 = edx_458 - 0x01;
	} while (edx_458 != 0x00);
	*(esp_390 - 0x08) = edx_458;
	ptr32 esp_477;
	word32 ebp_478;
	byte SCZO_479;
	word32 ebx_480;
	word32 esi_481;
	<anonymous> * edi_482;
	word32 eax_483;
	byte SZO_484;
	byte C_485;
	word32 ecx_486;
	word32 edx_487;
	byte Z_488;
	byte CZ_489;
	esi_394();
	*(esp_477 - 0x04) = 0x00;
	ptr32 esp_505;
	word32 ebp_506;
	byte SCZO_507;
	word32 ebx_508;
	word32 esi_509;
	word32 edi_510;
	word32 eax_511;
	byte SZO_512;
	byte C_513;
	word32 ecx_514;
	word32 edx_515;
	byte Z_516;
	byte CZ_517;
	edi_482();
	word32 ecx_518 = 0x026A;
	word32 edx_519 = 0x0D;
	do
	{
		ecx_518 = ecx_518 + 0x08;
		if (ecx_518 == 0x00)
			ecx_518 = 0x01;
		edx_519 = edx_519 - 0x01;
	} while (edx_519 != 0x00);
	*(esp_505 - 0x04) = edx_519;
	CloseHandle(*(esp_505 - 0x04));
	GetThreadLocale();
	word32 ecx_555 = 0x0160;
	word32 edx_556 = 0x09;
	do
	{
		ecx_555 = ecx_555 - 0x06;
		if (ecx_555 == 0x00)
			ecx_555 = 0x01;
		edx_556 = edx_556 - 0x01;
	} while (edx_556 != 0x00);
	*(esp_505 - 0x08) = edx_556;
	GetModuleHandleA(*(esp_505 - 0x08));
	*(esp_505 - 0x0C) = 0x00;
	GetModuleHandleA(*(esp_505 - 0x0C));
	word32 edx_586 = 0x02;
	do
		edx_586 = edx_586 - 0x01;
	while (edx_586 != 0x00);
	GetLastError();
	word32 edx_613 = 0x0F;
	ui32 ecx_615 = 0x0168;
	do
	{
		ui32 ecx_620 = ecx_615 * 0x05;
		ecx_615 = ecx_620 * 0x02;
		if (ecx_620 * 0x02 == 0x00)
			ecx_615 = 0x0A;
		edx_613 = edx_613 - 0x01;
	} while (edx_613 != 0x00);
	GetThreadLocale();
	word32 ecx_635 = 0x09;
	do
		ecx_635 = ecx_635 - 0x01;
	while (ecx_635 != 0x00);
	*(esp_505 - 0x10) = ecx_635;
	GetModuleHandleA(*(esp_505 - 0x10));
	ptr32 esp_664;
	word32 ebp_665;
	byte SCZO_666;
	word32 ebx_667;
	<anonymous> * esi_668;
	word32 edi_669;
	word32 eax_670;
	byte SZO_671;
	byte C_672;
	word32 ecx_673;
	word32 edx_674;
	byte Z_675;
	byte CZ_676;
	ebx_653();
	*(esp_664 - 0x04) = 0x00;
	CloseHandle(*(esp_664 - 0x04));
	*(esp_664 - 0x08) = 0x00;
	CloseHandle(*(esp_664 - 0x08));
	GetThreadLocale();
	ui32 ecx_707 = 0x0204;
	word32 edx_708 = 0x1D;
	do
	{
		ecx_707 = ecx_707 * 0x02 * 0x02 * 0x02;
		if (ecx_707 == 0x00)
			ecx_707 = 0x08;
		edx_708 = edx_708 - 0x01;
	} while (edx_708 != 0x00);
	*(esp_664 - 0x0C) = edx_708;
	struct Eq_1585 * esp_729;
	word32 ebp_730;
	byte SCZO_731;
	word32 ebx_732;
	word32 esi_733;
	word32 edi_734;
	word32 eax_735;
	byte SZO_736;
	byte C_737;
	word32 ecx_738;
	word32 edx_739;
	byte Z_740;
	byte CZ_741;
	esi_668();
	word32 ebx_746;
	*ebxOut = esp_729->dw0008;
	return eax_735;
}

// 00401D70: Register (ptr byte) fn00401D70(Register (ptr byte) eax, Register (ptr byte) ecx, Register word32 ebx, Register out ptr32 edxOut)
byte * fn00401D70(byte * eax, byte * ecx, word32 ebx, ptr32 & edxOut)
{
	*edxOut = edx;
	byte * esi_10 = ecx;
	byte * edi_12 = eax;
	cu8 al_14 = *ecx;
	if (al_14 != 0x00)
	{
		do
		{
			ui8 al_112;
			cu8 cl_55 = al_14 - 0x41;
			ecx = DPB(ecx, cl_55, 0);
			if (cl_55 <= 0x19)
			{
				int32 edx_86 = (int32) ((int64) ((int32) al_14 - 0x41 + ebx) % 0x1A);
				byte dl_87 = (byte) edx_86;
				ecx = (byte *) 0x1A;
				*edxOut = DPB(edx_86, dl_87 + 0x41, 0);
				al_112 = dl_87 + 0x41;
			}
			else if (al_14 <= 122 && al_14 >= 0x61)
			{
				int32 edx_106 = (int32) ((int64) ((int32) al_14 - 0x61 + ebx) % 0x1A);
				byte dl_107 = (byte) edx_106;
				ecx = (byte *) 0x1A;
				*edxOut = DPB(edx_106, dl_107 + 0x61, 0);
				al_112 = dl_107 + 0x61;
			}
			else
			{
				byte dl_117 = 0x1A - bl;
				*edxOut = DPB(edx, dl_117, 0);
				al_112 = al_14 ^ dl_117;
			}
			*edi_12 = al_112;
			esi_10 = esi_10 + 0x01;
			al_14 = *esi_10;
			edi_12 = edi_12 + 0x01;
		} while (al_14 != 0x00);
	}
	return ecx;
}

// 00401DE0: Register word32 fn00401DE0(Register ui32 ecx, Register word32 edx, Register word32 ebx, Register Eq_344 edi, Register out ptr32 ediOut)
word32 fn00401DE0(ui32 ecx, word32 edx, word32 ebx, Eq_344 edi, ptr32 & ediOut)
{
	word32 ebx_107;
	GetModuleHandleA(null);
	GetThreadLocale();
	GetLastError();
	word32 edx_65;
	fn00401D70(fp - 0x18, fp - 88, 0x13, out edx_65);
	Eq_272 eax_70 = LoadLibraryA(fp - 0x18);
	GetLastError();
	Eq_964 eax_88 = GetProcAddress(eax_70, (CHAR *) 202);
	CloseHandle(null);
	CloseHandle(null);
	<anonymous> * eax_110 = eax_88();
	ptr32 esp_104 = fp - 0x02FC;
	if (eax_110 == null)
	{
		word32 ebp_281;
		byte SCZO_282;
		word32 esi_284;
		word32 edi_285;
		word32 eax_286;
		byte SZO_287;
		byte C_288;
		word32 edx_289;
		word32 ecx_290;
		byte al_291;
		byte Z_292;
		word16 di_293;
		eax_110();
	}
	LPCSTR * esp_124 = esp_104 - 0x04;
	*esp_124 = (LPCSTR *) null;
	GetModuleHandleA(*esp_124);
	*(esp_124 - 0x04) = 0xA7;
	*(esp_124 - 0x08) = ebx_107;
	GetProcAddress(*(esp_124 - 0x08), *(esp_124 - 0x04));
	GetLastError();
	GetThreadLocale();
	*(esp_124 - 0x0C) = fp - 0x28;
	*(esp_124 - 0x10) = fp - 0x38;
	*(esp_124 - 0x14) = fp - 0x48;
	word32 ebp_159;
	byte SCZO_160;
	word32 ebx_161;
	<anonymous> * esi_162;
	word32 edi_163;
	<anonymous> * eax_164;
	byte SZO_165;
	byte C_166;
	word32 edx_167;
	word32 ecx_168;
	byte al_169;
	byte Z_170;
	word16 di_171;
	word32 esp_158;
	OLEAUT32.dll!Ordinal_318();
	if ((fp - 0x48 & fp - 0x48) != 0x00)
	{
		word32 ebp_265;
		byte SCZO_266;
		word32 ebx_267;
		word32 esi_268;
		word32 edi_269;
		word32 eax_270;
		byte SZO_271;
		byte C_272;
		word32 edx_273;
		word32 ecx_274;
		byte al_275;
		byte Z_276;
		word16 di_277;
		eax_164();
	}
	union Eq_1816 * esp_177 = esp_158 - 0x04;
	*esp_177 = (union Eq_1816 *) (fp - 0x28);
	*(esp_177 - 0x04) = (union Eq_1821 *) (fp - 0x38);
	*(esp_177 - 0x08) = (union Eq_1828 *) (fp - 0x48);
	word32 ebp_186;
	byte SCZO_187;
	word32 ebx_188;
	word32 esi_189;
	word32 edi_190;
	byte SZO_192;
	byte C_193;
	word32 edx_194;
	word32 ecx_195;
	byte al_196;
	byte Z_197;
	<anonymous> * eax_191;
	word16 di_198;
	struct Eq_1847 * esp_185;
	esi_162();
	if (eax_191 != null)
	{
		word32 ebp_251;
		byte SCZO_252;
		word32 ebx_253;
		word32 esi_254;
		word32 edi_255;
		byte SZO_257;
		byte C_258;
		word32 edx_259;
		word32 ecx_260;
		byte al_261;
		byte Z_262;
		eax_191();
	}
	if (wLoc28 != di_198)
	{
		word32 ebp_237;
		byte SCZO_238;
		word32 ebx_239;
		word32 esi_240;
		word32 edi_241;
		word32 eax_242;
		byte SZO_243;
		byte C_244;
		word32 edx_245;
		word32 ecx_246;
		byte al_247;
		byte Z_248;
		word16 di_249;
		eax_191();
	}
	word32 edi_226;
	*ediOut = esp_185->dw0000;
	return esp_185->dw0004;
}

// 00401F50: Register Eq_344 Win32CrtStartup()
Eq_344 Win32CrtStartup()
{
	word32 * ebp_5 = fp - 0x04;
	uint32 ecx_11 = 0x01E5;
	word32 edx_12 = 0x10;
	do
	{
		ecx_11 = ecx_11 >> 0x07;
		if (ecx_11 == 0x00)
			ecx_11 = 0x04;
		edx_12 = edx_12 - 0x01;
	} while (edx_12 != 0x00);
	word32 eax_27 = 400;
	word32 edx_28 = 0x03;
	do
	{
		eax_27 = eax_27 - 0x04;
		if (eax_27 != 0x00)
			eax_27 = 0x00;
		edx_28 = edx_28 - 0x01;
	} while (edx_28 != 0x00);
	word32 ebx_50;
	if (fn00401FC0(ebx, fp - 0x04, edi, out ebx_50) != 0x00)
		fn00401640(ebx_50, fp - 0x04, out ebp_5);
	*ebp_5 = 0x00;
	word32 esp_67;
	word32 ebp_68;
	word32 ecx_69;
	word32 edx_70;
	byte SCZO_71;
	byte Z_72;
	Eq_344 eax_73;
	byte SZO_74;
	byte C_75;
	word32 ebx_76;
	word32 edi_77;
	globals->ptr405384();
	return eax_73;
}

// 00401FC0: Register word32 fn00401FC0(Register word32 ebx, Register ptr32 ebp, Register word32 edi, Register out ptr32 ebxOut)
word32 fn00401FC0(word32 ebx, ptr32 ebp, word32 edi, ptr32 & ebxOut)
{
	word32 ebp_32;
	byte SCZO_33;
	word32 esi_35;
	<anonymous> * eax_36;
	word16 ax_38;
	byte SZO_41;
	byte C_42;
	byte Z_43;
	byte CZ_44;
	byte dl_45;
	ui32 ecx_285;
	word32 edx_286;
	Eq_344 edi_283;
	word32 ebx_280;
	struct Eq_1979 * esp_277;
	OLEAUT32.dll!Ordinal_318();
	if ((fp - 0x44 & fp - 0x44) != 0x00)
	{
		word32 ebp_278;
		byte SCZO_279;
		word32 esi_281;
		word32 eax_282;
		word16 ax_284;
		byte SZO_287;
		byte C_288;
		byte Z_289;
		byte CZ_290;
		byte dl_291;
		eax_36();
	}
	if (globals->dw405378 == 0x00)
	{
		globals->dw405378 = 0x01;
		union Eq_344 * esp_99 = esp_277 - 0x04;
		*esp_99 = (union Eq_344 *) 4202432;
		struct Eq_276 * edi_101;
		fn00401DE0(ecx_285, edx_286, ebx_280, edi_283, out edi_101);
		globals->t40537C = *esp_99;
		globals->t40537C.u0 = 0x00;
		Eq_344 eax_107 = globals->t40537C;
		word32 esi_109 = *((word32) eax_107 + ((word32) (*((word32) eax_107 + 0x003C)) + 0x0050));
		*esp_99 = (union Eq_344 *) 0x40;
		*(esp_99 - 0x04) = 0x1000;
		*(esp_99 - 0x08) = esi_109;
		*(esp_99 - 0x0C) = 0x00;
		Eq_2056 eax_121 = VirtualAlloc(*(esp_99 - 0x0C), *(esp_99 - 0x08), *(esp_99 - 0x04), *esp_99);
		globals->t405380 = eax_121;
		struct Eq_2083 * ebx_120 = &globals->dw403038;
		if (true)
		{
			Eq_2056 ecx_266 = eax_121;
			edi_101 = globals->t40537C - eax_121;
			do
			{
				Mem272[ecx_266 + 0x00:byte] = Mem126[edi_101 + ecx_266:byte];
				ecx_266 = ecx_266 + 0x01;
				esi_109 = esi_109 - 0x01;
			} while (esi_109 != 0x00);
		}
		Eq_275 eax_130 = eax_121 - globals->t40537C;
		if (globals->dw403038 != 0x00)
		{
			do
			{
				word32 edx_205 = 0x17;
				do
					edx_205 = edx_205 - 0x01;
				while (edx_205 != 0x00);
				uint32 eax_224 = ebx_120->t0004 - 0x08 >> 0x01;
				word16 * ecx_228 = (char *) &ebx_120->t0004 + 0x04;
				if (eax_224 != 0x00)
				{
					uint32 edx_238 = eax_224;
					do
					{
						ui32 eax_244 = (word32) *ecx_228;
						edi_101 = eax_244 & 0xF000;
						if ((eax_244 & 0xF000) == 0x3000)
						{
							edi_101 = ebx_120->ptr0000;
							word32 * eax_260 = edi_101 + ((word32) globals->t405380 + (eax_244 & 0x0FFF)) / 0x0040;
							*eax_260 = (char *) eax_130 + *eax_260;
						}
						ecx_228 = ecx_228 + 0x01;
						edx_238 = edx_238 - 0x01;
					} while (edx_238 != 0x00);
				}
				ebx_120 = ebx_120 + Mem126[ebx_120 + 0x04:word32];
			} while (ebx_120->ptr0000 != null);
		}
		*(esp_99 - 0x10) = 0x00;
		CloseHandle(*(esp_99 - 0x10));
		byte * edx_151;
		fn00401D70(fp - 0x10, &globals->b42A8B8, 0x10, out edx_151);
		*(esp_99 - 0x14) = (byte **) (fp - (byte *) 0x10);
		Eq_272 eax_156 = LoadLibraryA(*(esp_99 - 0x14));
		*(esp_99 - 0x18) = 35392525;
		*(esp_99 - 0x1C) = (HMODULE *) eax_156;
		word32 ecx_162;
		word32 edx_163;
		word32 ebx_164;
		ptr32 ebp_165;
		word32 esi_166;
		word32 edi_167;
		if (fn00401480(eax_156, edx_151, 0x10, eax_130, edi_101, dwArg00, out ecx_162, out edx_163, out ebx_164, out ebp_165, out esi_166, out edi_167) == null)
			Mem194[0x00405384:word32] = Mem160[Mem160[ebp_165 - 0x44 + 0x00:word32] + 0x28:word32] + Mem160[0x00405380:word32];
		word32 ebx_186;
		*ebxOut = *(esp_99 - 0x0C);
		return 0x00;
	}
	else
	{
		word32 ebx_90;
		*ebxOut = esp_277->dw0008;
		return 0x01;
	}
}

