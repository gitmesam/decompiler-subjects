// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401004: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	word32 ebx_105;
	word32 ebp_106;
	word32 edi_107;
	Eq_2 eax_108 = fn004010D0(edx_39 + 3082868891, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebx_105, out ebp_106, out edi_107);
	word32 ebx_110;
	word32 ebp_111;
	word32 edi_112;
	return fn004010D0(eax_108, ebx_105, ebp_106, edi_107, dwLoc2C, dwLoc16, esi, out ebx_110, out ebp_111, out edi_112);
}

// 004010D0: Register Eq_2 fn004010D0(Register Eq_2 eax, Register word32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
DWORD fn004010D0(DWORD eax, word32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_29 = DPB(ecx, DPB(dwArg00, wLoc08, 0) + 0x00, 0);
	word32 ecx_58 = -(ecx_29 + 42418);
	word32 ecx_130;
	struct Eq_62 * ebx_131;
	fn0040169E(ecx_58, ebx, dwLoc32, fp - 0x2A, out ecx_130, out ebx_131);
	word32 esp_154;
	word32 eax_155;
	byte SZO_156;
	word32 ebp_157;
	word32 edx_158;
	bool C_159;
	word16 ax_160;
	word16 cx_161;
	word32 ecx_162;
	byte SCZO_163;
	word32 esi_164;
	struct Eq_89 * ebx_165;
	word32 edi_166;
	word16 si_167;
	struct Eq_92 * fs_168;
	byte al_169;
	bool Z_170;
	byte dh_171;
	byte dl_172;
	byte bh_173;
	word16 bx_174;
	byte CZ_175;
	byte ah_176;
	byte cl_177;
	byte bl_178;
	ebx_131->ptr0018();
	ptr32 esp_183;
	word32 eax_184;
	byte SZO_185;
	word32 ebp_186;
	word32 edx_187;
	bool C_188;
	word16 ax_189;
	word16 cx_190;
	word32 ecx_191;
	byte SCZO_192;
	word32 esi_193;
	<anonymous> ** ebx_194;
	word32 edi_195;
	word16 si_196;
	struct Eq_120 * fs_197;
	byte al_198;
	bool Z_199;
	byte dh_200;
	byte dl_201;
	byte bh_202;
	word16 bx_203;
	byte CZ_204;
	byte ah_205;
	byte cl_206;
	byte bl_207;
	ebx_165->ptr001C();
	*(esp_183 - 0x04) = eax_184 + 0x06;
	*(esp_183 - 0x08) = eax_184 + 0x06;
	struct Eq_147 * esp_229;
	word32 eax_230;
	byte SZO_231;
	word32 ebp_232;
	word32 edx_233;
	bool C_234;
	word16 ax_235;
	word16 cx_236;
	word32 ecx_237;
	byte SCZO_238;
	word32 esi_239;
	word32 ebx_240;
	word32 edi_241;
	word16 si_242;
	struct Eq_161 * fs_243;
	byte al_244;
	bool Z_245;
	byte dh_246;
	byte dl_247;
	byte bh_248;
	word16 bx_249;
	byte CZ_250;
	byte ah_251;
	byte cl_252;
	byte bl_253;
	(*ebx_194)();
	esp_229->dw0038 = ebx_240;
	esp_229->dw003C = esi_239;
	*(esp_229 - 0x04) = ebx_240;
	*(esp_229 - 0x04) = *(esp_229 - 0x04) - 0x04;
	struct Eq_196 * edi_264 = *(esp_229 - 0x04);
	*(esp_229 - 0x04) = eax_230;
	*(esp_229 - 0x08) = ecx_237;
	*(esp_229 - 0x0C) = esp_229 - 0x08;
	*(esp_229 - 0x10) = 0x40;
	*(esp_229 - 0x14) = esp_229->dw0020;
	*(esp_229 - 0x18) = esp_229->dw0014;
	esp_229->dw0018 = 0x00;
	*(esp_229 - 0x1C) = ~0x00;
	struct Eq_249 * esp_295;
	struct Eq_250 Eq_262::* eax_296;
	byte SZO_297;
	word32 edx_299;
	bool C_300;
	word16 ax_301;
	word16 cx_302;
	word32 ecx_303;
	byte SCZO_304;
	word32 esi_305;
	word32 ebx_306;
	word32 edi_307;
	word16 si_308;
	struct Eq_262 * fs_309;
	byte al_310;
	bool Z_311;
	byte dh_312;
	byte dl_313;
	byte bh_314;
	word16 bx_315;
	byte CZ_316;
	byte ah_317;
	byte cl_318;
	byte bl_319;
	byte * ebp_1165;
	edi_264->ptr0010();
	struct Eq_277 * eax_321 = eax_296 + (fs_309->*eax_296).dw002F / 0x0033;
	word32 ecx_327 = eax_321->dw0003;
	esp_295->dw0030 = esp_295->dw0030 + ecx_327;
	esp_295->ptr0000 = eax_321;
	esp_295->ptr0004 = esp_295->ptr0000;
	struct Eq_277 * eax_345 = esp_295->ptr0004;
	word32 edi_350 = esp_295->dw0008;
	word32 ebx_1173 = esp_295->dw000C;
	word32 * esi_1172 = esp_295->ptr0010;
	esp_295->ptr0010 = (word32 *) ((char *) eax_345 + 0x02);
	esp_295->ptr0010 = (word32 *) ((char *) esp_295->ptr0010 + 0x01);
	word32 * eax_370 = esp_295->ptr0010;
	word32 ecx_372 = *eax_370;
	esp_295->ptr0010 = eax_370;
	word32 * eax_376 = esp_295->ptr0010;
	esp_295->dw003C = esp_295->dw003C ^ ecx_372;
	esp_295->ptr0010 = eax_376;
	esp_295->ptr0010 = esp_295->ptr001C;
	word32 * eax_391 = esp_295->ptr0010;
	word32 ecx_396 = esp_295->dw002C;
	*(esp_295 - 244) = eax_391;
	*(esp_295 - 0xF8) = eax_391;
	*(esp_295 - 0xF0) = ecx_396;
	*(esp_295 - 0xF8) = edi_350;
	*(esp_295 - 252) = 0x00;
	Eq_391 eax_416 = *(esp_295 - 252);
	do
	{
		*(esp_295 - 252) = (union Eq_391 *) eax_416;
		word32 eax_431 = *(esp_295 - 252);
		*((word32) eax_416 + (esp_295 - 0xEC)) = (byte) eax_431;
		*(esp_295 - 252) = eax_431;
		up32 eax_439 = *(esp_295 - 252);
		eax_416 = eax_439 + 0x01;
	} while (eax_439 < ~0xFE);
	*(esp_295 - 252) = eax_439 + 0x01;
	word32 edi_1174 = *(esp_295 - 0xF8);
	*(esp_295 - 0xF8) = *(esp_295 - 252);
	*(esp_295 - 0xF8) = &esp_295->dw003C + 0x02;
	byte * eax_1221 = *(esp_295 - 0xF8);
	byte SCZO_472 = cond(*eax_1221 - 121);
	ptr32 esp_1225 = esp_295 - 244;
	byte CZ_1183 = SCZO_472;
	if (*eax_1221 != 121)
	{
		struct Eq_500 * edi_985 = *(eax_1221 - 0x04);
		*(esp_295 - 0xF8) = (byte **) eax_1221;
		do
		{
			ptr32 esp_994;
			word32 eax_995;
			byte SZO_996;
			word32 ebp_997;
			word32 edx_998;
			bool C_999;
			word16 ax_1000;
			word16 cx_1001;
			word32 ecx_1002;
			byte SCZO_1003;
			word32 esi_1004;
			word32 ebx_1005;
			struct Eq_721 * edi_1006;
			word16 si_1007;
			struct Eq_723 * fs_1008;
			byte al_1009;
			bool Z_1010;
			byte dh_1011;
			byte dl_1012;
			byte bh_1013;
			word16 bx_1014;
			byte CZ_1015;
			byte ah_1016;
			byte cl_1017;
			byte bl_1018;
			edi_985->ptr001C();
			*(esp_994 - 0x04) = eax_995;
			ptr32 esp_1024;
			word32 eax_1025;
			byte SZO_1026;
			word32 ebp_1027;
			word32 edx_1028;
			bool C_1029;
			word16 ax_1030;
			word16 cx_1031;
			word32 ecx_1032;
			byte SCZO_1033;
			word32 esi_1034;
			word32 ebx_1035;
			struct Eq_754 * edi_1036;
			word16 si_1037;
			struct Eq_756 * fs_1038;
			byte al_1039;
			bool Z_1040;
			byte dh_1041;
			byte dl_1042;
			byte bh_1043;
			word16 bx_1044;
			byte CZ_1045;
			byte ah_1046;
			byte cl_1047;
			byte bl_1048;
			edi_1006->ptr001C();
			*(esp_1024 - 0x04) = eax_1025;
			ptr32 esp_1054;
			word32 eax_1055;
			byte SZO_1056;
			word32 ebp_1057;
			word32 edx_1058;
			bool C_1059;
			word16 ax_1060;
			word16 cx_1061;
			word32 ecx_1062;
			byte SCZO_1063;
			word32 esi_1064;
			word32 ebx_1065;
			struct Eq_787 * edi_1066;
			word16 si_1067;
			struct Eq_789 * fs_1068;
			byte al_1069;
			bool Z_1070;
			byte dh_1071;
			byte dl_1072;
			byte bh_1073;
			word16 bx_1074;
			byte CZ_1075;
			byte ah_1076;
			byte cl_1077;
			byte bl_1078;
			edi_1036->ptr001C();
			*(esp_1054 - 0x04) = eax_1055;
			word32 esp_1087;
			word32 eax_1088;
			byte SZO_1089;
			word32 ebp_1090;
			word32 edx_1091;
			bool C_1092;
			word16 ax_1093;
			word16 cx_1094;
			word32 ecx_1095;
			byte SCZO_1096;
			word32 esi_1097;
			word32 ebx_1098;
			struct Eq_541 * edi_1099;
			word16 si_1100;
			struct Eq_821 * fs_1101;
			byte al_1102;
			bool Z_1103;
			byte dh_1104;
			byte dl_1105;
			byte bh_1106;
			word16 bx_1107;
			byte CZ_1108;
			byte ah_1109;
			byte cl_1110;
			byte bl_1111;
			edi_1066->ptr001C();
			word32 esp_1112;
			word32 eax_1113;
			byte SZO_1114;
			word32 ebp_1115;
			word32 edx_1116;
			bool C_1117;
			word16 ax_1118;
			word16 cx_1119;
			word32 ecx_1120;
			byte SCZO_1121;
			word32 esi_1122;
			word32 ebx_1123;
			struct Eq_528 * edi_1124;
			word16 si_1125;
			struct Eq_530 * fs_1126;
			byte al_1127;
			bool Z_1128;
			byte dh_1129;
			byte dl_1130;
			byte bh_1131;
			word16 bx_1132;
			byte CZ_1133;
			byte ah_1134;
			byte cl_1135;
			byte bl_1136;
			edi_1099->ptr001C();
			word32 esp_1137;
			word32 eax_1138;
			byte SZO_1139;
			word32 ebp_1140;
			word32 edx_1141;
			bool C_1142;
			word16 ax_1143;
			word16 cx_1144;
			word32 ecx_1145;
			byte SCZO_1146;
			word32 esi_1147;
			word32 ebx_1148;
			struct Eq_557 * edi_1149;
			word16 si_1150;
			struct Eq_559 * fs_1151;
			byte al_1152;
			bool Z_1153;
			byte dh_1154;
			byte dl_1155;
			byte bh_1156;
			word16 bx_1157;
			byte CZ_1158;
			byte ah_1159;
			byte cl_1160;
			byte bl_1161;
			edi_1124->ptr001C();
			ptr32 esp_1162;
			word32 eax_1163;
			byte SZO_1164;
			word32 edx_1166;
			bool C_1167;
			word16 ax_1168;
			word16 cx_1169;
			word32 ecx_1170;
			byte SCZO_1171;
			word16 si_1175;
			struct Eq_592 * fs_1176;
			byte al_1177;
			bool Z_1178;
			byte dh_1179;
			byte dl_1180;
			byte bh_1181;
			word16 bx_1182;
			byte ah_1184;
			byte cl_1185;
			byte bl_1186;
			edi_1149->ptr001C();
			int3();
			*(esp_1162 - 0x04) = eax_1163;
			word32 eax_1195 = *(esp_1162 - 0x04);
			word16 ax_1202 = (word16) (eax_1195 + 0x01);
			cup16 ax_1206 = ax_1202 - cx_1169;
			*(esp_1162 - 0x04) = DPB(eax_1195 + 0x01, ax_1206, 0);
			word32 eax_1213 = *(esp_1162 - 0x04);
		} while (ax_1206 < 0x00);
		*(esp_1162 - 0x04) = eax_1213;
		eax_1221 = (byte *) *(esp_1162 - 0x04);
		esp_1225 = esp_1162;
	}
	struct Eq_472 * esp_500 = esp_1225 - 0x04;
	esp_500->ptr0000 = eax_1221;
	byte * eax_503 = esp_500->ptr0000;
	esp_500->ptr0000 = ebp_1165;
	*(esp_500 - 0x04) = (byte **) eax_503;
	word32 eax_510 = *(esp_500 - 0x04);
	*(esp_500 - 0x04) = esi_1172;
	*(esp_500 - 0x08) = edi_1174;
	up32 edi_520 = esp_500->dw011C;
	*(esp_500 - 0x0C) = eax_510;
	int32 esi_532 = 0x00;
	*(esp_500 - 0x0C) = 0x00;
	word32 eax_540 = *(esp_500 - 0x0C);
	*(esp_500 - 0x0C) = ebx_1173;
	*(esp_500 - 0x10) = eax_540;
	int32 ebp_534 = 0x00;
	word32 eax_547 = *(esp_500 - 0x10);
	do
	{
		struct Eq_680 * esp_560 = esp_1225 - 0x10;
		word32 ebx_562 = (word32) esp_560->a0018[ebp_534];
		*(esp_560 - 0x04) = eax_547;
		ptr32 edx_570 = esp_560->ptr0014;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		int32 eax_574 = *(esp_560 - 0x04);
		word32 edx_576 = (word32) (edx_570 + eax_574);
		*(esp_560 - 0x04) = eax_574;
		word16 bx_563 = (word16) ebx_562;
		word32 eax_582 = *(esp_560 - 0x04);
		word32 ecx_590 = ebx_562 + esi_532;
		word32 edx_594 = edx_576 + ecx_590;
		int32 edx_598 = DPB(edx_594, 0x00, 8);
		*(esp_560 - 0x04) = eax_582 + 0x01;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		up32 eax_612 = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = eax_612;
		esi_532 = edx_598;
		word32 eax_619 = *(esp_560 - 0x04);
		if (eax_612 >= edi_520)
		{
			*(esp_560 - 0x04) = eax_619;
			*(esp_560 - 0x04) = 0x00;
			eax_619 = *(esp_560 - 0x04);
		}
		byte dl_628 = esp_560->a0018[edx_598];
		*(esp_560 - 0x04) = eax_619;
		word32 eax_632 = *(esp_560 - 0x04);
		esp_560->a0018[ebp_534] = dl_628;
		ebp_534 = ebp_534 + 0x01;
		*(esp_560 - 0x04) = eax_632;
		ui32 eax_644 = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = eax_644;
		ptr32 edx_646 = esp_560->a0018 + edx_598 - eax_644;
		word32 eax_651 = *(esp_560 - 0x04);
		word16 bx_654 = DPB(bx_563, eax_651 + 0x01 + edx_646, 8);
		*(esp_560 - 0x04) = eax_651;
		int32 eax_658 = *(esp_560 - 0x04);
		eax_658 + edx_646 = (word16 *) bx_654;
		*(esp_560 - 0x04) = eax_658;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		eax_547 = *(esp_560 - 0x04);
	} while (SLICE(ebp_534, byte, 8) != 0x01);
	*(esp_560 - 0x04) = eax_547;
	word32 esi_695 = 0x00;
	int32 ebx_705 = esp_560->dw0000;
	word32 ebp_710 = esp_560->dw012C;
	ptr32 edi_711 = esp_560->ptr0010;
	esp_560->dw0000 = 0x00;
	esp_560->dw0000 = esp_560->dw0000;
	esp_560->dw0000 = esp_560->dw0000;
	int32 edx_717 = ebx_705;
	int32 eax_731 = esp_560->dw0000;
	if (!DPB(CZ_1183, false, 0))
	{
		esp_560->dw0000 = eax_731;
		eax_731 = esp_560->dw0000;
		do
		{
			word32 eax_832 = eax_731 + 0x01;
			int32 eax_837 = DPB(eax_832, 0x00, 8);
			byte cl_840 = esp_560->a0018[eax_837];
			esp_560->dw0000 = eax_837;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			word32 ebx_860 = DPB((word32) cl_840 + esi_695, 0x00, 8);
			byte dh_875 = (&esp_560->dw0000 + 0x01)[(ebx_860 + 0x14) / 0x0130];
			esp_560->dw0000 = esp_560->dw0000;
			int32 eax_880 = esp_560->dw0000;
			esp_560->a0018[eax_880] = dh_875;
			esp_560->dw0000 = eax_880;
			int32 eax_886 = esp_560->dw0000;
			esp_560->dw0000 = eax_886;
			*(esp_560 - 0x04) = eax_886;
			byte * eax_895 = &esp_560->dw0000 + 0x01 + (ebx_860 + 0x14) / 0x0130;
			*eax_895 = cl_840;
			int32 eax_900 = esp_560->dw0000;
			esp_560->dw0000 = eax_900;
			esp_560->dw0000 = esp_560->dw0000;
			word32 edx_905 = (word32) dh_875;
			esp_560->dw0000 = esp_560->dw0000;
			word32 edx_913 = DPB(edx_905, (byte) edx_905 + cl_840, 0);
			ui32 ecx_927 = (&esp_560->dw0000 + 0x01)[(edx_913 + 0x14) / 0x0130];
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			int32 eax_944 = esp_560->dw0000;
			*(edi_711 - 0x01) = *(edi_711 - 0x01) ^ (word16) (ecx_927 << 0x08);
			esp_560->dw0000 = eax_944;
			esp_560->dw0000 = esp_560->dw0000;
			edx_717 = edx_913 + 0x14;
			esi_695 = ebx_860;
			edi_711 = edi_711 + 0x01;
			eax_731 = esp_560->dw0000;
			ebp_710 = ebp_710 - 0x01;
		} while (ebp_710 != 0x00);
	}
	struct Eq_1035 * esp_748 = esp_1225 - 0x0C;
	word32 edi_752;
	*ediOut = esp_748->dw0000;
	esp_748->dw0000 = eax_731;
	esp_748->dw0004 = esp_748->dw0000;
	word32 ebp_766;
	*ebpOut = esp_748->dw0008;
	esp_748->dw0008 = esp_748->dw0004;
	esp_748->dw0114 = esp_748->dw0008;
	esp_748->t0118 = esp_748->t0118;
	esp_748->t0140 = esp_748->t0118;
	Eq_2 eax_791 = esp_748->t0140;
	esp_748->t0140 = eax_791;
	word32 ebx_798;
	*ebxOut = edx_717;
	return eax_791;
}

// 0040169E: Register ptr32 fn0040169E(Register word32 ecx, Register word32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
ptr32 fn0040169E(word32 ecx, word32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		cup16 * eax_41 = DPB(eax_24, 0x00, 0);
		cup16 ax_48 = *eax_41;
		word32 eax_57 = DPB(eax_24, ax_48 + 42421, 0);
		if (ax_48 == 42419)
			break;
		eax_24 = eax_57 - 0x00010000;
	}
	struct Eq_1276 * eax_94 = DPB(eax_24, ax_48 > 42419, 0);
	int32 ecx_149 = eax_94[(&(eax_94 + eax_94->dw003C / 0x0040)->dw003C)[0x0011] / 0x0040];
	*ecxOut = ecx_149;
	ptr32 eax_155 = eax_94 + ecx_149 / 0x0040;
	word32 ebx_162;
	*ebxOut = eax_155 + 0x04;
	return eax_155 + 0x04;
}

