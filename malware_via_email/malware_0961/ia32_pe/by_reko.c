// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401004: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	word32 ebx_105;
	word32 ebp_106;
	word32 edi_107;
	Eq_2 eax_108 = fn004010D0(edx_39 + 3082868891, ebx, ebp, edi, dwLoc2C, dwLoc16, esi, out ebx_105, out ebp_106, out edi_107);
	word32 ebx_112;
	word32 ebp_113;
	word32 edi_114;
	return fn004010D0(eax_108, ebx_105, ebp_106, edi_107, ebp, dwArg12, dwArg20, out ebx_112, out ebp_113, out edi_114);
}

// 004010D0: Register Eq_2 fn004010D0(Register Eq_2 eax, Register word32 ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
DWORD fn004010D0(DWORD eax, word32 ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	word32 ecx_29 = DPB(ecx, DPB(dwArg00, wLoc08, 0) + 0x00, 0);
	word32 ecx_58 = -(ecx_29 + 42418);
	word32 ecx_130;
	struct Eq_64 * ebx_131;
	fn0040169E(ecx_58, ebx, dwLoc32, fp - 0x2A, out ecx_130, out ebx_131);
	word32 esp_154;
	word32 eax_155;
	byte SZO_156;
	word32 ebp_157;
	word32 edx_158;
	byte C_159;
	word16 ax_160;
	word16 cx_161;
	word32 ecx_162;
	byte SCZO_163;
	word32 esi_164;
	struct Eq_91 * ebx_165;
	word32 edi_166;
	word16 si_167;
	struct Eq_94 * fs_168;
	byte al_169;
	byte Z_170;
	byte dh_171;
	byte dl_172;
	byte bh_173;
	word16 bx_174;
	byte CZ_175;
	byte ah_176;
	byte cl_177;
	byte bl_178;
	ebx_131->ptr0018();
	ptr32 esp_183;
	word32 eax_184;
	byte SZO_185;
	word32 ebp_186;
	word32 edx_187;
	byte C_188;
	word16 ax_189;
	word16 cx_190;
	word32 ecx_191;
	byte SCZO_192;
	word32 esi_193;
	<anonymous> ** ebx_194;
	word32 edi_195;
	word16 si_196;
	struct Eq_122 * fs_197;
	byte al_198;
	byte Z_199;
	byte dh_200;
	byte dl_201;
	byte bh_202;
	word16 bx_203;
	byte CZ_204;
	byte ah_205;
	byte cl_206;
	byte bl_207;
	ebx_165->ptr001C();
	*(esp_183 - 0x04) = eax_184 + 0x06;
	*(esp_183 - 0x08) = eax_184 + 0x06;
	struct Eq_149 * esp_229;
	word32 eax_230;
	byte SZO_231;
	word32 ebp_232;
	word32 edx_233;
	byte C_234;
	word16 ax_235;
	word16 cx_236;
	word32 ecx_237;
	byte SCZO_238;
	word32 esi_239;
	word32 ebx_240;
	word32 edi_241;
	word16 si_242;
	struct Eq_163 * fs_243;
	byte al_244;
	byte Z_245;
	byte dh_246;
	byte dl_247;
	byte bh_248;
	word16 bx_249;
	byte CZ_250;
	byte ah_251;
	byte cl_252;
	byte bl_253;
	(*ebx_194)();
	esp_229->dw0038 = ebx_240;
	esp_229->dw003C = esi_239;
	*(esp_229 - 0x04) = ebx_240;
	*(esp_229 - 0x04) = *(esp_229 - 0x04) - 0x04;
	struct Eq_198 * edi_264 = *(esp_229 - 0x04);
	*(esp_229 - 0x04) = eax_230;
	*(esp_229 - 0x08) = ecx_237;
	*(esp_229 - 0x0C) = esp_229 - 0x08;
	*(esp_229 - 0x10) = 0x40;
	*(esp_229 - 0x14) = esp_229->dw0020;
	*(esp_229 - 0x18) = esp_229->dw0014;
	esp_229->dw0018 = 0x00;
	*(esp_229 - 0x1C) = ~0x00;
	struct Eq_251 * esp_295;
	struct Eq_252 Eq_264::* eax_296;
	byte SZO_297;
	word32 edx_299;
	byte C_300;
	word16 ax_301;
	word16 cx_302;
	word32 ecx_303;
	byte SCZO_304;
	word32 esi_305;
	word32 ebx_306;
	word32 edi_307;
	word16 si_308;
	struct Eq_264 * fs_309;
	byte al_310;
	byte Z_311;
	byte dh_312;
	byte dl_313;
	byte bh_314;
	word16 bx_315;
	byte CZ_316;
	byte ah_317;
	byte cl_318;
	byte bl_319;
	byte * ebp_1166;
	edi_264->ptr0010();
	struct Eq_279 * eax_321 = eax_296 + (fs_309->*eax_296).dw002F / 0x0033;
	word32 ecx_327 = eax_321->dw0003;
	esp_295->dw0030 = esp_295->dw0030 + ecx_327;
	esp_295->ptr0000 = eax_321;
	esp_295->ptr0004 = esp_295->ptr0000;
	struct Eq_279 * eax_345 = esp_295->ptr0004;
	word32 edi_350 = esp_295->dw0008;
	word32 ebx_1174 = esp_295->dw000C;
	word32 * esi_1173 = esp_295->ptr0010;
	esp_295->ptr0010 = (word32 *) ((char *) eax_345 + 0x02);
	esp_295->ptr0010 = (word32 *) ((char *) esp_295->ptr0010 + 0x01);
	word32 * eax_370 = esp_295->ptr0010;
	word32 ecx_372 = *eax_370;
	esp_295->ptr0010 = eax_370;
	word32 * eax_376 = esp_295->ptr0010;
	esp_295->dw003C = esp_295->dw003C ^ ecx_372;
	esp_295->ptr0010 = eax_376;
	esp_295->ptr0010 = esp_295->ptr001C;
	word32 * eax_391 = esp_295->ptr0010;
	word32 ecx_396 = esp_295->dw002C;
	*(esp_295 - 244) = eax_391;
	*(esp_295 - 0xF8) = eax_391;
	*(esp_295 - 0xF0) = ecx_396;
	*(esp_295 - 0xF8) = edi_350;
	*(esp_295 - 252) = 0x00;
	Eq_393 eax_416 = *(esp_295 - 252);
	do
	{
		*(esp_295 - 252) = (union Eq_393 *) eax_416;
		word32 eax_431 = *(esp_295 - 252);
		*((word32) eax_416 + (esp_295 - 0xEC)) = (byte) eax_431;
		*(esp_295 - 252) = eax_431;
		up32 eax_439 = *(esp_295 - 252);
		eax_416 = eax_439 + 0x01;
	} while (eax_439 < ~0xFE);
	*(esp_295 - 252) = eax_439 + 0x01;
	word32 edi_1175 = *(esp_295 - 0xF8);
	*(esp_295 - 0xF8) = *(esp_295 - 252);
	*(esp_295 - 0xF8) = &esp_295->dw003C + 0x02;
	byte * eax_1222 = *(esp_295 - 0xF8);
	ptr32 esp_1226 = esp_295 - 244;
	if (*eax_1222 != 121)
	{
		struct Eq_495 * edi_986 = *(eax_1222 - 0x04);
		*(esp_295 - 0xF8) = (byte **) eax_1222;
		do
		{
			ptr32 esp_995;
			word32 eax_996;
			byte SZO_997;
			word32 ebp_998;
			word32 edx_999;
			byte C_1000;
			word16 ax_1001;
			word16 cx_1002;
			word32 ecx_1003;
			byte SCZO_1004;
			word32 esi_1005;
			word32 ebx_1006;
			struct Eq_717 * edi_1007;
			word16 si_1008;
			struct Eq_719 * fs_1009;
			byte al_1010;
			byte Z_1011;
			byte dh_1012;
			byte dl_1013;
			byte bh_1014;
			word16 bx_1015;
			byte CZ_1016;
			byte ah_1017;
			byte cl_1018;
			byte bl_1019;
			edi_986->ptr001C();
			*(esp_995 - 0x04) = eax_996;
			ptr32 esp_1025;
			word32 eax_1026;
			byte SZO_1027;
			word32 ebp_1028;
			word32 edx_1029;
			byte C_1030;
			word16 ax_1031;
			word16 cx_1032;
			word32 ecx_1033;
			byte SCZO_1034;
			word32 esi_1035;
			word32 ebx_1036;
			struct Eq_750 * edi_1037;
			word16 si_1038;
			struct Eq_752 * fs_1039;
			byte al_1040;
			byte Z_1041;
			byte dh_1042;
			byte dl_1043;
			byte bh_1044;
			word16 bx_1045;
			byte CZ_1046;
			byte ah_1047;
			byte cl_1048;
			byte bl_1049;
			edi_1007->ptr001C();
			*(esp_1025 - 0x04) = eax_1026;
			ptr32 esp_1055;
			word32 eax_1056;
			byte SZO_1057;
			word32 ebp_1058;
			word32 edx_1059;
			byte C_1060;
			word16 ax_1061;
			word16 cx_1062;
			word32 ecx_1063;
			byte SCZO_1064;
			word32 esi_1065;
			word32 ebx_1066;
			struct Eq_783 * edi_1067;
			word16 si_1068;
			struct Eq_785 * fs_1069;
			byte al_1070;
			byte Z_1071;
			byte dh_1072;
			byte dl_1073;
			byte bh_1074;
			word16 bx_1075;
			byte CZ_1076;
			byte ah_1077;
			byte cl_1078;
			byte bl_1079;
			edi_1037->ptr001C();
			*(esp_1055 - 0x04) = eax_1056;
			word32 esp_1088;
			word32 eax_1089;
			byte SZO_1090;
			word32 ebp_1091;
			word32 edx_1092;
			byte C_1093;
			word16 ax_1094;
			word16 cx_1095;
			word32 ecx_1096;
			byte SCZO_1097;
			word32 esi_1098;
			word32 ebx_1099;
			struct Eq_536 * edi_1100;
			word16 si_1101;
			struct Eq_817 * fs_1102;
			byte al_1103;
			byte Z_1104;
			byte dh_1105;
			byte dl_1106;
			byte bh_1107;
			word16 bx_1108;
			byte CZ_1109;
			byte ah_1110;
			byte cl_1111;
			byte bl_1112;
			edi_1067->ptr001C();
			word32 esp_1113;
			word32 eax_1114;
			byte SZO_1115;
			word32 ebp_1116;
			word32 edx_1117;
			byte C_1118;
			word16 ax_1119;
			word16 cx_1120;
			word32 ecx_1121;
			byte SCZO_1122;
			word32 esi_1123;
			word32 ebx_1124;
			struct Eq_523 * edi_1125;
			word16 si_1126;
			struct Eq_525 * fs_1127;
			byte al_1128;
			byte Z_1129;
			byte dh_1130;
			byte dl_1131;
			byte bh_1132;
			word16 bx_1133;
			byte CZ_1134;
			byte ah_1135;
			byte cl_1136;
			byte bl_1137;
			edi_1100->ptr001C();
			word32 esp_1138;
			word32 eax_1139;
			byte SZO_1140;
			word32 ebp_1141;
			word32 edx_1142;
			byte C_1143;
			word16 ax_1144;
			word16 cx_1145;
			word32 ecx_1146;
			byte SCZO_1147;
			word32 esi_1148;
			word32 ebx_1149;
			struct Eq_552 * edi_1150;
			word16 si_1151;
			struct Eq_554 * fs_1152;
			byte al_1153;
			byte Z_1154;
			byte dh_1155;
			byte dl_1156;
			byte bh_1157;
			word16 bx_1158;
			byte CZ_1159;
			byte ah_1160;
			byte cl_1161;
			byte bl_1162;
			edi_1125->ptr001C();
			ptr32 esp_1163;
			word32 eax_1164;
			byte SZO_1165;
			word32 edx_1167;
			byte C_1168;
			word16 ax_1169;
			word16 cx_1170;
			word32 ecx_1171;
			byte SCZO_1172;
			word16 si_1176;
			struct Eq_587 * fs_1177;
			byte al_1178;
			byte Z_1179;
			byte dh_1180;
			byte dl_1181;
			byte bh_1182;
			word16 bx_1183;
			byte CZ_1184;
			byte ah_1185;
			byte cl_1186;
			byte bl_1187;
			edi_1150->ptr001C();
			int3();
			*(esp_1163 - 0x04) = eax_1164;
			word32 eax_1196 = *(esp_1163 - 0x04);
			word16 ax_1203 = (word16) (eax_1196 + 0x01);
			cup16 ax_1207 = ax_1203 - cx_1170;
			*(esp_1163 - 0x04) = DPB(eax_1196 + 0x01, ax_1207, 0);
			word32 eax_1214 = *(esp_1163 - 0x04);
		} while (ax_1207 < 0x00);
		*(esp_1163 - 0x04) = eax_1214;
		eax_1222 = (byte *) *(esp_1163 - 0x04);
		esp_1226 = esp_1163;
	}
	struct Eq_467 * esp_500 = esp_1226 - 0x04;
	esp_500->ptr0000 = eax_1222;
	byte * eax_503 = esp_500->ptr0000;
	esp_500->ptr0000 = ebp_1166;
	*(esp_500 - 0x04) = (byte **) eax_503;
	word32 eax_510 = *(esp_500 - 0x04);
	*(esp_500 - 0x04) = esi_1173;
	*(esp_500 - 0x08) = edi_1175;
	up32 edi_520 = esp_500->dw011C;
	*(esp_500 - 0x0C) = eax_510;
	int32 esi_532 = 0x00;
	*(esp_500 - 0x0C) = 0x00;
	word32 eax_540 = *(esp_500 - 0x0C);
	*(esp_500 - 0x0C) = ebx_1174;
	*(esp_500 - 0x10) = eax_540;
	int32 ebp_534 = 0x00;
	word32 eax_547 = *(esp_500 - 0x10);
	do
	{
		struct Eq_676 * esp_560 = esp_1226 - 0x10;
		word32 ebx_562 = (word32) esp_560->a0018[ebp_534];
		*(esp_560 - 0x04) = eax_547;
		ptr32 edx_570 = esp_560->ptr0014;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		int32 eax_574 = *(esp_560 - 0x04);
		word32 edx_576 = (word32) (edx_570 + eax_574);
		*(esp_560 - 0x04) = eax_574;
		word16 bx_563 = (word16) ebx_562;
		word32 eax_582 = *(esp_560 - 0x04);
		word32 ecx_590 = ebx_562 + esi_532;
		word32 edx_594 = edx_576 + ecx_590;
		int32 edx_598 = DPB(edx_594, 0x00, 8);
		*(esp_560 - 0x04) = eax_582 + 0x01;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		up32 eax_612 = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = eax_612;
		esi_532 = edx_598;
		word32 eax_619 = *(esp_560 - 0x04);
		if (eax_612 >= edi_520)
		{
			*(esp_560 - 0x04) = eax_619;
			*(esp_560 - 0x04) = 0x00;
			eax_619 = *(esp_560 - 0x04);
		}
		byte dl_628 = esp_560->a0018[edx_598];
		*(esp_560 - 0x04) = eax_619;
		word32 eax_632 = *(esp_560 - 0x04);
		esp_560->a0018[ebp_534] = dl_628;
		ebp_534 = ebp_534 + 0x01;
		*(esp_560 - 0x04) = eax_632;
		ui32 eax_644 = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = eax_644;
		ptr32 edx_646 = esp_560->a0018 + edx_598 - eax_644;
		word32 eax_651 = *(esp_560 - 0x04);
		word16 bx_654 = DPB(bx_563, eax_651 + 0x01 + edx_646, 8);
		*(esp_560 - 0x04) = eax_651;
		int32 eax_658 = *(esp_560 - 0x04);
		eax_658 + edx_646 = (word16 *) bx_654;
		*(esp_560 - 0x04) = eax_658;
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		*(esp_560 - 0x04) = *(esp_560 - 0x04);
		eax_547 = *(esp_560 - 0x04);
	} while (SLICE(ebp_534, byte, 8) != 0x01);
	*(esp_560 - 0x04) = eax_547;
	word32 esi_695 = 0x00;
	int32 ebx_705 = esp_560->dw0000;
	word32 ebp_710 = esp_560->dw012C;
	ptr32 edi_711 = esp_560->ptr0010;
	esp_560->dw0000 = 0x00;
	esp_560->dw0000 = esp_560->dw0000;
	esp_560->dw0000 = esp_560->dw0000;
	int32 edx_717 = ebx_705;
	int32 eax_731 = esp_560->dw0000;
	if (true)
	{
		esp_560->dw0000 = eax_731;
		eax_731 = esp_560->dw0000;
		do
		{
			word32 eax_833 = eax_731 + 0x01;
			int32 eax_838 = DPB(eax_833, 0x00, 8);
			byte cl_841 = esp_560->a0018[eax_838];
			esp_560->dw0000 = eax_838;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			word32 ebx_861 = DPB((word32) cl_841 + esi_695, 0x00, 8);
			byte dh_876 = (&esp_560->dw0000 + 0x01)[(ebx_861 + 0x14) / 0x0130];
			esp_560->dw0000 = esp_560->dw0000;
			int32 eax_881 = esp_560->dw0000;
			esp_560->a0018[eax_881] = dh_876;
			esp_560->dw0000 = eax_881;
			int32 eax_887 = esp_560->dw0000;
			esp_560->dw0000 = eax_887;
			*(esp_560 - 0x04) = eax_887;
			byte * eax_896 = &esp_560->dw0000 + 0x01 + (ebx_861 + 0x14) / 0x0130;
			*eax_896 = cl_841;
			int32 eax_901 = esp_560->dw0000;
			esp_560->dw0000 = eax_901;
			esp_560->dw0000 = esp_560->dw0000;
			word32 edx_906 = (word32) dh_876;
			esp_560->dw0000 = esp_560->dw0000;
			word32 edx_914 = DPB(edx_906, (byte) edx_906 + cl_841, 0);
			ui32 ecx_928 = (&esp_560->dw0000 + 0x01)[(edx_914 + 0x14) / 0x0130];
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			esp_560->dw0000 = esp_560->dw0000;
			int32 eax_945 = esp_560->dw0000;
			*(edi_711 - 0x01) = *(edi_711 - 0x01) ^ (word16) (ecx_928 << 0x08);
			esp_560->dw0000 = eax_945;
			esp_560->dw0000 = esp_560->dw0000;
			edx_717 = edx_914 + 0x14;
			esi_695 = ebx_861;
			edi_711 = edi_711 + 0x01;
			eax_731 = esp_560->dw0000;
			ebp_710 = ebp_710 - 0x01;
		} while (ebp_710 != 0x00);
	}
	struct Eq_1030 * esp_748 = esp_1226 - 0x0C;
	word32 edi_752;
	*ediOut = esp_748->dw0000;
	esp_748->dw0000 = eax_731;
	esp_748->dw0004 = esp_748->dw0000;
	word32 ebp_766;
	*ebpOut = esp_748->dw0008;
	esp_748->dw0008 = esp_748->dw0004;
	esp_748->dw0114 = esp_748->dw0008;
	esp_748->t0118 = esp_748->t0118;
	esp_748->t0140 = esp_748->t0118;
	Eq_2 eax_791 = esp_748->t0140;
	esp_748->t0140 = eax_791;
	word32 ebx_798;
	*ebxOut = edx_717;
	return eax_791;
}

// 0040169E: Register ptr32 fn0040169E(Register word32 ecx, Register word32 ebx, Stack word32 dwArg00, Stack ptr32 dwArg04, Register out ptr32 ecxOut, Register out ptr32 ebxOut)
ptr32 fn0040169E(word32 ecx, word32 ebx, word32 dwArg00, ptr32 dwArg04, ptr32 & ecxOut, ptr32 & ebxOut)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		cup16 * eax_41 = DPB(eax_24, 0x00, 0);
		cup16 ax_48 = *eax_41;
		word32 eax_57 = DPB(eax_24, ax_48 + 42421, 0);
		if (ax_48 == 42419)
			break;
		eax_24 = eax_57 - 0x00010000;
	}
	struct Eq_1271 * eax_94 = DPB(eax_24, ax_48 > 42419, 0);
	int32 ecx_149 = eax_94[(&(eax_94 + eax_94->dw003C / 0x0040)->dw003C)[0x0011] / 0x0040];
	*ecxOut = ecx_149;
	ptr32 eax_155 = eax_94 + ecx_149 / 0x0040;
	word32 ebx_162;
	*ebxOut = eax_155 + 0x04;
	return eax_155 + 0x04;
}

