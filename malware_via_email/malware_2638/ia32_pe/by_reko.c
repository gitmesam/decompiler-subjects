// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401010: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_14 = OpenMutexA(0x001F0001, 0x00, &globals->t433732);
	CloseHandle(eax_14);
	GetFileType(eax_14);
	CloseHandle(eax_14);
	CloseHandle(eax_14);
l0040104F:
	GetFileSize(eax_14, 0x00);
	GetFileType(eax_14);
	Eq_3 eax_81 = OpenMutexA(0x001F0001, 0x01, &globals->t4336AF);
	do
	{
		Eq_3 eax_99 = OpenMutexA(0x001F0001, 0x00, &globals->t433749);
		if (eax_99 != 0x00)
			goto l0040104F;
		Eq_3 eax_111 = OpenMutexA(0x001F0001, 0x01, &globals->t433759);
		if (eax_111 != 0x00)
		{
			CloseHandle(dwLoc4C);
			GetFileType(dwLoc20);
			ExitProcess(0x00);
		}
		ptr32 esp_187;
		CloseHandle(eax_14);
		GetFileSize(eax_111, 0x00);
		GetFileSize(eax_14, 0x00);
		CloseHandle(eax_81);
		GetFileType(eax_81);
		Eq_3 eax_153 = OpenMutexA(0x001F0001, 0x01, &globals->t433721);
		if (eax_153 != 0x00)
		{
			GetFileType(dwLoc20);
			dwLoc40 = dwLoc40 + 0x0042D027;
			esp_187 = fp - 88;
l00401386:
			union Eq_3 * esp_190 = esp_187 - 0x04;
			*esp_190 = (union Eq_3 *) dwLoc0C;
			CloseHandle(*esp_190);
			*esp_190 = (union Eq_3 *) dwLoc2C;
			GetFileType(*esp_190);
			*esp_190 = (union Eq_3 *) 0x00;
			*(esp_190 - 0x04) = (union Eq_3 *) dwLoc1C;
			Eq_2 eax_207 = GetFileSize(*(esp_190 - 0x04), *esp_190);
			word32 esp_212;
			word32 ebp_213;
			byte SCZO_214;
			Eq_2 eax_215;
			byte SZO_216;
			bool C_217;
			bool Z_218;
			(dwLoc40 - 0x004013C8)();
			return eax_215;
		}
		Eq_3 eax_230 = OpenMutexA(0x001F0001, 0x00, &globals->t4336EB);
		esp_187 = fp - 0x5C;
		dwLoc2C = eax_230;
		if (eax_230 != 0x00)
			goto l00401386;
		Eq_147 eax_237 = LoadLibraryA(&globals->t433728);
		dwLoc1C = OpenMutexA(0x001F0001, 0x01, &globals->t4336A5);
		CloseHandle(eax_153);
		Eq_160 eax_259 = GetProcAddress(eax_237, &globals->t433776);
		Eq_3 eax_268 = OpenMutexA(0x001F0001, 0x00, &globals->t4336BA);
		GetFileSize(eax_81, 0x00);
		CloseHandle(eax_99);
		CloseHandle(eax_111);
		Eq_3 eax_294 = OpenMutexA(0x001F0001, 0x01, &globals->t433710);
		dwLoc4C = eax_294;
	} while (eax_294 != 0x00);
	GetFileSize(eax_81, 0x00);
	GetFileType(eax_230);
	OpenMutexA(0x001F0001, 0x01, &globals->t43370A);
	GetFileType(eax_294);
	GetFileSize(eax_230, 0x00);
	GetFileType(eax_99);
	do
	{
		int32 eax_347 = eax_259();
		GetFileSize(eax_81, 0x00);
		CloseHandle(eax_99);
		CloseHandle(eax_268);
	} while (OpenMutexA(0x001F0001, 0x01, &globals->t4336DA) != 0x00);
	word32 esp_390;
	word32 ebp_391;
	byte SCZO_392;
	Eq_2 eax_393;
	byte SZO_394;
	bool C_395;
	bool Z_396;
	(*((word32) (eax_347 ^ 0x80070057) + 0x00401271))();
	return eax_393;
}

