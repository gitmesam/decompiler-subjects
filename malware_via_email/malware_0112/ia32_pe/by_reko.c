// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 esi_1057 = AddAce(null, 0x00, 0x00, null, 0x00) + 0x26 + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00) + AddAce(0x00, 0x00, 0x00, 0x00, 0x00);
	BOOL ebp_1091 = 0x00;
	if (AreAnyAccessesGranted(~0x00, ~0x00) == 0x00)
		esi_1057 = esi_1057 - 0x22;
	VirtualProtect(&globals->v401000, 0x3000, 0x40, fp - 0x10);
	struct Eq_675 * eax_1082 = null;
	do
	{
		if (ebp_1091 == esi_1057)
			ebp_1091 = 0x00;
		eax_1082[0x00401490] = (struct Eq_675) (eax_1082[0x00401490] ^ *((word32) ebp_1091 + 0x00404000));
		eax_1082 = eax_1082 + 0x01;
		ebp_1091 = (Eq_3) ((word32) ebp_1091 + 0x01);
	} while (eax_1082 < (struct Eq_675 *) 5152);
	Eq_697 ecx_1105 = 4204400;
	up32 dwLoc08_1115 = 0x00;
	do
	{
		Eq_701 eax_1125 = *((word32) ecx_1105 + 0x04);
		word16 * edx_1130 = (word32) ecx_1105 + 0x08;
		if (eax_1125 - 0x08 >> 0x01 > 0x00)
		{
			esi_1057 = eax_1125 - 0x08 >> 0x01;
			do
			{
				ui32 eax_1314 = (word32) *edx_1130;
				if ((eax_1314 & 0xF000) == 0x3000)
				{
					struct Eq_722 * eax_1326 = (word32) *ecx_1105 + (eax_1314 & 0x0FFF);
					eax_1326->dw401210 = eax_1326->dw401210 + 0xF0401210;
				}
				edx_1130 = edx_1130 + 0x01;
				esi_1057 = esi_1057 - 0x01;
			} while (esi_1057 != 0x00);
		}
		Eq_701 eax_1136 = *((word32) ecx_1105 + 0x04);
		up32 edx_1138 = (word32) eax_1136 + dwLoc08_1115;
		ecx_1105 = ecx_1105 + eax_1136;
		dwLoc08_1115 = edx_1138;
	} while (edx_1138 < 228);
	struct Eq_746 * edi_1145 = &globals->t401F6C;
	struct Eq_746 * dwLoc08_1146 = &globals->t401F6C;
	Eq_750 esi_1147 = esi_1057 * 0x03;
	if (globals->dw401F7C != 0x00)
	{
		do
		{
			eax_1136 = LoadLibraryA(edi_1145->dw000C + 0x00401210);
			if (eax_1136 != 0x00)
			{
				ecx_1105 = edi_1145->dw0000;
				if (ecx_1105 == 0x00)
					ecx_1105 = edi_1145->dw0010;
				word32 * ebx_1227 = edi_1145->dw0010 + 0x00401210;
				word32 * ebp_1228 = (word32) ecx_1105 + 0x00401210;
				if (*ebp_1228 != 0x00)
				{
					do
					{
						int32 ecx_1262 = *ebp_1228;
						esi_1147 = eax_1136 + esi_1147 * 0x04;
						word16 cx_1264 = (word16) ecx_1262;
						if (ecx_1262 < 0x00)
						{
							ecx_1105 = (word32) cx_1264;
							eax_1136 = GetProcAddress(eax_1136, ecx_1105);
						}
						else
						{
							ecx_1105 = ecx_1262 + 0x00401212;
							eax_1136 = GetProcAddress(eax_1136, ecx_1262 + 0x00401212);
						}
						*ebx_1227 = (word32) eax_1136;
						ebp_1228 = ebp_1228 + 0x01;
						ebx_1227 = ebx_1227 + 0x01;
					} while (*ebp_1228 != 0x00);
					edi_1145 = dwLoc08_1146;
				}
			}
			edi_1145 = edi_1145 + 0x01;
			dwLoc08_1146 = edi_1145;
		} while (edi_1145->dw0010 != 0x00);
	}
	fn00401C60(eax_1136, ecx_1105, 0x1C60, esi_1147, edi_1145, rArg0);
	ExitProcess(0x00);
}

// 00401C60: FpuStack real64 fn00401C60(Register Eq_701 eax, Register Eq_697 ecx, Register word16 dx, Register Eq_750 esi, Register (ptr32 Eq_746) edi, FpuStack real64 rArg0)
real64 fn00401C60(Eq_701 eax, Eq_697 ecx, word16 dx, HMODULE esi, Eq_746 * edi, real64 rArg0)
{
	*((word32) ecx - 1208695585) = *((word32) ecx - 1208695585) << 0x36;
	*((word32) eax + 1714011342) = (int32) trunc(rArg0);
	edi->dw0006 = __in(dx);
	__outdw(dx, eax);
	byte al_27;
	__daa(al, &al_27);
	__aad(ax);
}

