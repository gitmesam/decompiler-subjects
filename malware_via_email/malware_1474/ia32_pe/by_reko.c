// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401158: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
l00401158:
	ptr32 esp_121 = fp;
	word32 eax_133 = 0x00418F84;
	do
	{
		word32 * esp_60 = esp_121 - 0x04;
		*esp_60 = eax_133;
		*(esp_60 - 0x04) = (struct Eq_12 **) fs->ptr0000;
		struct Eq_12 * esp_151 = esp_60 - 0x04;
l00401165:
		fs->ptr0000 = esp_151;
		struct Eq_8 * eax_104 = null;
		int8 al_103 = 0x00;
		do
		{
			eax_104->t0000 = ecx;
			esp_151 = esp_151 - 0x04;
			esp_151->dw0000 = eax_104;
			al_103 = al_103 ^ eax_104->t0000;
			ebp = ebp + 0x01;
			ebx = ebx + 0x01;
			eax_104 = DPB(eax_104, al_103, 0);
		} while (al_103 > 0x00);
		__syscall(0x94);
		esi = esi - ebp[0x001A];
		if (esi == null)
		{
			while (true)
			{
				ui32 eax_155 = eax_104 & 0xD0533475;
				byte al_156 = (byte) eax_155;
				byte ah_157 = SLICE(eax_155, byte, 8);
				struct Eq_73 * eax_160 = DPB(eax_155, al_156 - 0x77, 0);
				byte SCZO_161 = cond(al_156 - 0x77);
				if (!P)
					break;
				struct Eq_129 ** esp_177 = esp_151 - 0x02;
				*esp_177 = (struct Eq_129 **) ds;
				ds = (struct Eq_129 *) *esp_177;
				*(esp_177 - 0x02) = ebx;
				(byte *) 3460625243 = (byte *) (al_156 - 0x77);
				struct Eq_8 * edx_180 = DPB(edx, 100, 0);
				byte al_188;
				byte ah_189;
				if (DPB(SCZO_161, __aas(al_156 - 0x77, ah_157, &al_188, &ah_189), 0))
				{
					(ui32 *) 0xF045A161 = (ui32 *) 0xF045A161 ^ ebp;
					esi = (struct Eq_37 *) *(esp_177 - 0x02);
					*(esp_177 - 0x02) = (struct Eq_8 **) edx_180;
					(esp_177 - 0x02)[edx_180].t0000 = eax_160 >= (struct Eq_73 *) 1775908976;
					ecx->ptrB5224AA7 = es;
					fn0040127C(edi);
					esp_151 = esp_177 - 0x02;
					edx = (struct Eq_73 *) (edx_180 + 0x01);
					if (eax_160 >= (struct Eq_73 *) 1775908976)
						goto l00401165;
				}
				struct Eq_8 ** ds_esp_198 = ebp[0x005D];
				(ds_esp_198 - (struct Eq_216 *) 0x04)->dw0000 = edi;
				eax_104 = edx_180;
				edx = eax_160;
				ds = SLICE(ds_esp_198, selector, 32);
				esp_151 = ds_esp_198 - (struct Eq_216 *) 0x04;
			}
			eax_160[0x0046] = (struct Eq_73) (eax_160[0x0046] >> ~0x43);
			es = SLICE(esi->ptrC01677D2, selector, 32);
			__sti();
			goto l00401158;
		}
		ebp[ebx] = (struct Eq_23) (ebp[ebx] & 228);
		ebx = esp_151->dw0000;
		ebp[1346308630] = (struct Eq_23) __rol(ebp[1346308630], cl);
		ci8 v20_127 = -esi->b4334A1F6;
		esi->b4334A1F6 = v20_127;
		edx = edx - 0x01;
		word32 edi_112 = edi + 0x04;
		esi = esi + 0x01;
		byte dh_114 = SLICE(edx, byte, 8);
		esp_121 = esp_151 + 0x02;
		eax_133 = edi_112;
		cu8 al_134 = (byte) edi_112;
		edi = eax_104;
	} while (v20_127 >= 0x00);
	edx->b0000 = edx->b0000 - dh_114 - (al_134 < 0x89);
	ebp[0x0035] = (struct Eq_23) __ror(ebp[0x0035], cl);
}

// 0040127C: void fn0040127C(Register (ptr32 Eq_8) edi)
void fn0040127C(Eq_8 * edi)
{
	__lock();
}

