// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00406C03: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_10 = SwitchDesktop(dwArg04);
	if (eax_10 == 0x00)
		eax_10 = fn00406C38((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 0xF5, fp - 0x04), 0xF5);
	return eax_10;
}

// 00406C38: Register word32 fn00406C38(Register byte bl, Stack word32 dwArg00)
word32 fn00406C38(byte bl, word32 dwArg00)
{
	word32 ecx_27 = 0x01E3;
	word32 * esp_28 = fp - 0x04;
	union Eq_38 * esi_100 = dwArg00 + 181;
	Eq_41 edi_101 = VirtualAlloc(0x00, 0x00013D53, 0x3000, 0x40);
	uint32 edx_37 = DPB(971114749, bl + ~0x02, 0);
	word32 ebp_104 = 0x00;
l00406C8F:
	uint32 * esp_50 = esp_28 - 0x04;
	*esp_50 = edx_37;
	*(esp_50 - 0x04) = ecx_27;
	word32 ecx_59 = *(esp_50 - 0x04);
	*edi_101 = (word32) *edi_101 + (byte) ((char *) (*esi_100) + *esp_50);
	uint32 edx_63 = *esp_50;
	esp_28 = esp_50 + 0x01;
	esi_100 = (union Eq_38 *) ((char *) esi_100 + 0x01);
	edi_101 = edi_101 + 0x01;
	ebp_104 = ebp_104 + 0x01;
	uint32 edx_111 = edx_63 >> 0x08;
	byte dl_102 = (byte) (edx_63 >> 0x08);
	if (0x04 == ebp_104)
	{
		edx_111 = 971114749;
		dl_102 = ~0x02;
		ebp_104 = 0x00;
	}
	do
	{
		byte dl_86 = dl_102 + bl;
		word32 ecx_88 = ecx_59 - 237239;
		edx_37 = DPB(edx_111, dl_86, 0);
		ecx_27 = ecx_88 + 237238;
		if (ecx_88 != 237238)
			goto l00406C8F;
		<anonymous> * eax_93 = *esp_28;
		word32 eax_96;
		byte SCZO_97;
		byte SZO_105;
		bool C_106;
		bool Z_107;
		eax_93();
	} while (false);
	return eax_96;
}

