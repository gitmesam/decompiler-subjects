// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00414B7B: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 edi_3 = edi;
	Eq_5 ebp_33 = dwArg04;
	Eq_7 eax_12 = IsWindowEnabled(dwArg04);
	ptr32 esp_16 = fp - 0x04;
	if ((eax_12 | 0x04) == 0x04)
	{
		eax_12 = fn00414BD8((byte) GetProfileIntA(fp - 0x08, fp - 0x08, 0xF3), out ecx, out edx, out ebp_33, out esi, out edi_3);
		esp_16 = fp + 0x14;
	}
	word32 * esp_37 = esp_16 - 0x04;
	*esp_37 = ecx;
	*(esp_37 - 0x04) = (int32) eax_12;
	byte bl_42 = (byte) *(esp_37 - 0x04);
	*(esp_37 - 0x04) = (union Eq_2 *) edi_3;
	Eq_2 ecx_46 = ecx + 48707;
	if (edi_3 == esi)
		return esp_37 - 0x04;
	word32 ecx_56;
	word32 edx_57;
	word32 ebp_58;
	word32 esi_59;
	word32 edi_60;
	return fn00414C1E(ecx_46, edx, bl_42, ebp_33, esi, edi_3, out ecx_56, out edx_57, out ebp_58, out esi_59, out edi_60);
}

// 00414BD8: Register Eq_2 fn00414BD8(Register byte bl, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_2 fn00414BD8(byte bl, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	esp = fp;
	esp = fp - 0x04;
	dwLoc04 = eax;
	esp = fp - 0x08;
	dwLoc08.u0 = 0x40;
	esp = fp - 0x0C;
	dwLoc0C.u0 = 0x3000;
	esp = fp - 0x10;
	dwLoc10.u0 = 95331;
	esp = fp - 0x14;
	dwLoc14.u0 = 0x00;
	eax = VirtualAlloc(null, (word32 *) 95331, (word32 *) 0x3000, (word32 *) 0x40);
	ecx.u0 = null;
	esp = fp - 0x10;
	edi.u0 = (word32 *) 95331;
	esp = fp - 0x0C;
	esp = fp - 0x10;
	dwLoc10.u0 = 95331;
	edi.u0 = 95532;
	esi = eax;
	ecx.u0 = 0x0262;
	cl = (byte) ecx;
	esp = fp - 0x14;
	dwLoc14 = eax;
	v8 = esi;
	esi.u0 = 95532;
	edi = v8;
	edx = 1772192074;
	dl = (byte) edx;
	dl = dl + bl;
	edx = DPB(edx, dl, 0);
	ebp = null;
	SZO = cond(0x00);
	C = false;
	eax = fn00414C1E(ecx, edx, bl, ebp, esi, edi, out ecx, out edx, out ebp, out esi, out edi);
	return eax;
}

// 00414C1E: Register Eq_7 fn00414C1E(Register Eq_2 ecx, Register uint32 edx, Register byte bl, Register Eq_5 ebp, Register Eq_2 esi, Register Eq_2 edi, Register out Eq_89 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out Eq_92 esiOut, Register out Eq_93 ediOut)
BOOL fn00414C1E(Eq_2 ecx, uint32 edx, byte bl, HWND ebp, Eq_2 esi, Eq_2 edi, LPVOID & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, LPVOID & esiOut, Eq_93 & ediOut)
{
	do
	{
		*(v3 - 0x04) = edx;
		*(v3 - 0x08) = (union Eq_2 *) ecx;
		*edi = (word32) *edi + (byte) ((word32) (*esi) + *(v3 - 0x04));
		word32 ebp_36 = (char *) &ebp->unused + 0x0009676A;
		uint32 edx_30 = *(v3 - 0x04);
		word32 ecx_27 = *(v3 - 0x08);
		esi = (word32) esi + 0x01;
		edi = (word32) edi + 0x01;
		ui32 eax_120 = 0x04;
		ebp = ebp_36 - 0x00096769;
		uint32 edx_129 = edx_30 >> 0x08;
		byte dl_130 = (byte) (edx_30 >> 0x08);
		if (0x04 == ebp_36 - 0x00096769)
		{
			*(v3 - 0x04) = 1772192074;
			edx_129 = *(v3 - 0x04);
			dl_130 = (byte) edx_129;
			ebp = null;
		}
		edx = DPB(edx_129, dl_130 + bl, 0);
		ecx = ecx_27 - 0x01;
	} while (ecx_27 != 0x01);
	<anonymous> * edx_114 = *v3;
	if (edx_114 != (char *) v3 + 0x04)
	{
		word32 esp_113;
		byte SCZO_116;
		word32 esi_117;
		word32 edi_118;
		byte cl_119;
		byte SZO_121;
		byte C_122;
		word32 ebp_123;
		byte Z_124;
		byte dl_125;
		edx_114();
	}
	if ((eax_120 & edx_114) == 0x00)
	{
		word32 ecx_107;
		word32 edx_108;
		word32 ebp_109;
		word32 esi_110;
		word32 edi_111;
		return fn00414BD8(bl, out ecx_107, out edx_108, out ebp_109, out esi_110, out edi_111);
	}
	else
	{
		word32 esp_93;
		word32 edx_94;
		word32 ecx_95;
		byte SCZO_96;
		word32 esi_97;
		word32 edi_98;
		byte cl_99;
		Eq_7 eax_100;
		byte SZO_101;
		byte C_102;
		word32 ebp_103;
		byte Z_104;
		byte dl_105;
		byte bl_106;
		ecx();
		return eax_100;
	}
}

