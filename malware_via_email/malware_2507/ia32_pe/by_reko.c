// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00414B7B: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 edi_3 = edi;
	Eq_5 ebp_34 = dwArg04;
	Eq_7 eax_12 = IsWindowEnabled(dwArg04);
	ptr32 esp_17 = fp;
	if ((eax_12 | 0x04) == 0x04)
	{
		eax_12 = fn00414BD8((byte) GetProfileIntA(fp - 0x04, fp - 0x04, 0xF3), ecx, out ecx, out edx, out ebp_34, out esi, out edi_3);
		esp_17 = fp + 0x24;
	}
	union Eq_2 * esp_38 = esp_17 - 0x04;
	*esp_38 = (union Eq_2 *) ecx;
	*(esp_38 - 0x04) = (int32) eax_12;
	byte bl_43 = (byte) *(esp_38 - 0x04);
	*(esp_38 - 0x04) = (union Eq_2 *) edi_3;
	Eq_2 ecx_47 = (word32) ecx + 48707;
	if (edi_3 == esi)
		return esp_38 - 0x04;
	word32 ecx_57;
	word32 edx_58;
	word32 ebp_59;
	word32 esi_60;
	word32 edi_61;
	return fn00414C1E(ecx_47, edx, bl_43, ebp_34, esi, edi_3, out ecx_57, out edx_58, out ebp_59, out esi_60, out edi_61);
}

// 00414BD8: Register Eq_2 fn00414BD8(Register byte bl, Stack Eq_2 dwArg00, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_2 fn00414BD8(byte bl, Eq_2 dwArg00, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	esp = fp;
	esp = fp - 0x04;
	dwLoc04 = eax;
	esp = fp - 0x08;
	dwLoc08.u0 = 0x40;
	esp = fp - 0x0C;
	dwLoc0C.u0 = 0x3000;
	esp = fp - 0x10;
	dwLoc10 = 95331;
	esp = fp - 0x14;
	dwLoc14.u0 = 0x00;
	eax = VirtualAlloc(null, 95331, (word32 *) 0x3000, (word32 *) 0x40);
	esp = fp - 0x04;
	ecx = dwLoc04;
	esp = fp;
	edi = dwArg00;
	esp = fp + 0x04;
	esp = fp;
	dwArg00 = edi;
	edi = (word32) edi + 0x00C9;
	esi = eax;
	ecx.u0 = 0x0262;
	cl = (byte) ecx;
	esp = fp - 0x04;
	dwLoc04 = eax;
	v8 = esi;
	esi = edi;
	edi = v8;
	edx = 1772192074;
	dl = (byte) edx;
	dl = dl + bl;
	edx = DPB(edx, dl, 0);
	ebp = null;
	SZO = cond(0x00);
	C = false;
	eax = fn00414C1E(ecx, edx, bl, ebp, esi, edi, out ecx, out edx, out ebp, out esi, out edi);
	return eax;
}

// 00414C1E: Register Eq_7 fn00414C1E(Register Eq_2 ecx, Register uint32 edx, Register byte bl, Register Eq_5 ebp, Register Eq_2 esi, Register Eq_2 edi, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out Eq_91 esiOut, Register out Eq_92 ediOut)
BOOL fn00414C1E(Eq_2 ecx, uint32 edx, byte bl, HWND ebp, Eq_2 esi, Eq_2 edi, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, LPVOID & esiOut, LPVOID & ediOut)
{
	do
	{
		*(v3 - 0x04) = edx;
		*(v3 - 0x08) = (union Eq_2 *) ecx;
		*edi = (word32) *edi + (byte) ((word32) (*esi) + *(v3 - 0x04));
		word32 ebp_36 = (char *) &ebp->unused + 0x0009676A;
		uint32 edx_30 = *(v3 - 0x04);
		word32 ecx_27 = *(v3 - 0x08);
		esi = (word32) esi + 0x01;
		edi = (word32) edi + 0x01;
		ui32 eax_121 = 0x04;
		ebp = ebp_36 - 0x00096769;
		uint32 edx_130 = edx_30 >> 0x08;
		byte dl_131 = (byte) (edx_30 >> 0x08);
		if (0x04 == ebp_36 - 0x00096769)
		{
			*(v3 - 0x04) = 1772192074;
			edx_130 = *(v3 - 0x04);
			dl_131 = (byte) edx_130;
			ebp = null;
		}
		edx = DPB(edx_130, dl_131 + bl, 0);
		ecx = ecx_27 - 0x01;
	} while (ecx_27 != 0x01);
	<anonymous> * edx_115 = *v3;
	if (edx_115 != (char *) v3 + 0x04)
	{
		word32 esp_114;
		word32 ecx_116;
		byte SCZO_117;
		word32 esi_118;
		word32 edi_119;
		byte cl_120;
		byte SZO_122;
		bool C_123;
		word32 ebp_124;
		bool Z_125;
		byte dl_126;
		edx_115();
	}
	if ((eax_121 & edx_115) == 0x00)
	{
		word32 ecx_108;
		word32 edx_109;
		word32 ebp_110;
		word32 esi_111;
		word32 edi_112;
		return fn00414BD8(bl, dwLoc04, out ecx_108, out edx_109, out ebp_110, out esi_111, out edi_112);
	}
	else
	{
		word32 esp_93;
		word32 edx_94;
		word32 ecx_95;
		byte SCZO_96;
		word32 esi_97;
		word32 edi_98;
		byte cl_99;
		Eq_7 eax_100;
		byte SZO_101;
		bool C_102;
		word32 ebp_103;
		bool Z_104;
		byte dl_105;
		byte bl_106;
		fn00000261();
		return eax_100;
	}
}

