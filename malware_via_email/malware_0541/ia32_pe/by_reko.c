// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 1310E000: Register word32 fn1310E000(Stack (ptr byte) dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack (ptr word32) dwArg10, Stack word32 dwArg14, Stack int32 dwArg18)
word32 fn1310E000(byte * dwArg04, word32 dwArg08, word32 dwArg0C, word32 * dwArg10, word32 dwArg14, int32 dwArg18)
{
	*dwArg10 = dwArg0C;
	word16 wLoc10_104 = (word16) (uint32) ((uint64) (uint32) dwArg14 % 0x05);
	byte * dwArg08_28 = dwArg08 + dwArg14;
	while (true)
	{
		dwArg0C = dwArg0C - 0x01;
		if (dwArg0C == 0x00)
			break;
		*dwArg04 = (byte) ((int32) *dwArg08_28 ^ (word32) (*((word32) ((int32) wLoc10_104) + dwArg18)));
		word16 cx_83 = wLoc10_104 + 0x01;
		wLoc10_104 = cx_83;
		if ((int32) cx_83 == 0x05)
			wLoc10_104 = 0x00;
		dwArg04 = dwArg04 + 0x01;
		dwArg08_28 = dwArg08_28 + 0x01;
	}
	return dwArg0C;
}

// 1310E09B: Register word32 fn1310E09B(Register word32 ebp)
word32 fn1310E09B(word32 ebp)
{
}

// 1310E4E5: Register Eq_408 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_36;
	word32 ebp_37;
	word32 eax_38;
	struct Eq_653 * fs_39;
	byte SCZO_40;
	word32 ebx_41;
	word32 esi_42;
	word32 edi_43;
	byte SZO_44;
	byte C_45;
	word32 ecx_46;
	byte Z_47;
	byte al_48;
	byte bl_49;
	byte CZ_50;
	_set_app_type();
	word32 esp_53;
	word32 ebp_54;
	word32 * eax_55;
	struct Eq_670 * fs_56;
	byte SCZO_57;
	word32 ebx_58;
	word32 esi_59;
	word32 edi_60;
	byte SZO_61;
	byte C_62;
	word32 ecx_63;
	byte Z_64;
	byte al_65;
	byte bl_66;
	byte CZ_67;
	_p__fmode();
	*eax_55 = 0x00;
	word32 ebp_73;
	word32 * eax_74;
	struct Eq_690 * fs_75;
	byte SCZO_76;
	word32 ebx_77;
	word32 esi_78;
	word32 edi_79;
	byte SZO_80;
	byte C_81;
	word32 ecx_82;
	byte Z_83;
	byte al_84;
	byte bl_85;
	byte CZ_86;
	ptr32 esp_277;
	_p__commode();
	*eax_74 = 0x00;
	word32 eax_92 = *adjust_fdiv;
	fn1310E63E();
	if (eax_92 == 0x00)
	{
		*(esp_277 - 0x04) = 0x0DA00000;
		word32 esp_261;
		word32 ebp_262;
		word32 eax_263;
		struct Eq_854 * fs_264;
		byte SCZO_265;
		word32 ebx_266;
		word32 esi_267;
		word32 edi_268;
		byte SZO_269;
		byte C_270;
		word32 ecx_271;
		byte Z_272;
		byte al_273;
		byte bl_274;
		byte CZ_275;
		_setusermatherr();
		esp_277 = esp_261 + 0x04;
	}
	fn1310E629();
	ptr32 * esp_98 = esp_277 - 0x04;
	*esp_98 = fp - 0x80;
	*(esp_98 - 0x04) = fp - 0x80;
	ptr32 esp_102;
	word32 ebp_103;
	word32 eax_104;
	struct Eq_740 * fs_105;
	byte SCZO_106;
	word32 ebx_107;
	word32 esi_108;
	word32 edi_109;
	byte SZO_110;
	byte C_111;
	word32 ecx_112;
	byte Z_113;
	byte al_114;
	byte bl_115;
	byte CZ_116;
	initterm();
	*(esp_102 - 0x04) = fp - 0x70;
	*(esp_102 - 0x08) = eax_92;
	*(esp_102 - 0x0C) = fp - 0x68;
	*(esp_102 - 0x10) = fp - 116;
	*(esp_102 - 0x14) = fp - 100;
	ptr32 esp_134;
	word32 ebp_135;
	word32 eax_136;
	struct Eq_790 * fs_137;
	byte SCZO_138;
	word32 ebx_139;
	word32 esi_140;
	word32 edi_141;
	byte SZO_142;
	byte C_143;
	word32 ecx_144;
	byte Z_145;
	byte al_146;
	byte bl_147;
	byte CZ_148;
	_getmainargs();
	*(esp_134 - 0x04) = fp - 0x80;
	*(esp_134 - 0x08) = fp - 0x80;
	struct Eq_817 * esp_154;
	word32 ebp_155;
	word32 eax_156;
	struct Eq_820 * fs_157;
	byte SCZO_158;
	word32 ebx_159;
	word32 esi_160;
	word32 edi_161;
	byte SZO_162;
	byte C_163;
	word32 ecx_164;
	byte Z_165;
	byte al_166;
	cu8 bl_167;
	byte CZ_168;
	initterm();
	cu8 * esi_171 = *acmdln;
	if (*esi_171 == 0x22)
	{
		do
		{
			esi_171 = esi_171 + 0x01;
			cu8 al_238 = *esi_171;
		} while (al_238 != bl_167 && al_238 != 0x22);
		if (*esi_171 == 0x22)
		{
l1310E5AA:
			esi_171 = esi_171 + 0x01;
		}
	}
	else
	{
		while (*esi_171 > 0x20)
			esi_171 = esi_171 + 0x01;
	}
	cu8 al_180 = *esi_171;
	if (al_180 == bl_167 || al_180 > 0x20)
	{
		word32 eax_195;
		esp_154->t0020 = fp - 0x60;
		GetStartupInfoA(esp_154->t0020);
		if (0x00 != 0x00)
			eax_195 = (word32) wLoc30;
		else
		{
			esp_154->dw001C = 0x0A;
			eax_195 = esp_154->dw001C;
		}
		esp_154->dw001C = eax_195;
		esp_154->ptr0018 = esi_171;
		esp_154->dw0014 = 0x00;
		esp_154->t0010 = null;
		esp_154->t000C = GetModuleHandleA(esp_154->t0010);
		esp_154->dw002E = fn1310E09B(ebp_155);
		exit(esp_154->dw002E);
	}
	goto l1310E5AA;
}

// 1310E629: void fn1310E629()
void fn1310E629()
{
	word32 esp_6;
	word32 ecx_7;
	controlfp();
}

// 1310E63E: void fn1310E63E()
void fn1310E63E()
{
}

