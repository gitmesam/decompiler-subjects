// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040119E: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	byte dl_6;
	word32 ebp_7;
	word16 si_8;
	Eq_2 eax_9 = fn004011AD(ebp, si, dwLoc04, dwArg00, out dl_6, out ebp_7, out si_8);
	byte al_10 = (byte) eax_9;
	eax_9->b0000 = eax_9->b0000 + al_10;
	eax_9->b0000 = eax_9->b0000 + al_10;
	eax_9->b0000 = eax_9->b0000 + dl_6;
	eax_9->b0000 = eax_9->b0000 + al_10;
	byte dl_23;
	word32 ebp_24;
	word16 si_25;
	return fn004011AD(ebp_7, si_8, dwLoc04, dwArg00, out dl_23, out ebp_24, out si_25);
}

// 004011AD: Register ui32 fn004011AD(Register word32 ebp, Register word16 si, Stack word32 dwArg00, Stack (ptr Eq_12) dwArg04, Register out Eq_13 dlOut, Register out ptr32 ebpOut, Register out Eq_15 siOut)
ui32 fn004011AD(word32 ebp, word16 si, word32 dwArg00, Eq_12 * dwArg04, Eq_13 & dlOut, ptr32 & ebpOut, Eq_15 & siOut)
{
	__rol((word16) (DPB(esi, __ror(si, 0x01), 0) << 0x14 >> 0x1B), 0x08);
	byte * eax_25 = (word32) *(dwArg04 - ~0x07);
	word32 * esp_39 = fp + 0x04;
	word32 ecx_29 = __ror(dwArg00 - 0x01, 0x1B);
	word32 edx_33 = 0x00;
	while (true)
	{
		ui32 edx_42 = edx_33 + 0x90;
		byte * eax_48 = eax_25 - edx_42;
		word16 dx_43 = (word16) edx_42;
		word32 ecx_45 = ecx_29 + *esp_39;
		byte al_49 = (byte) eax_48;
		if (eax_48 == null)
			break;
		*eax_48 = *eax_48 + al_49;
		ecx_29 = ecx_45 + ebp;
		byte cl_59 = (byte) ecx_29;
		dwArg04->b2E001308 = dwArg04->b2E001308 + cl_59;
		edx_33 = *esp_39;
		dwArg04->b8900002D = dwArg04->b8900002D + cl_59;
		esp_39 = esp_39 + 0x01;
		eax_25 = DPB(eax_48, al_49 & 0x00, 0);
	}
	word32 edx_84 = DPB(edx_42, __ror(dx_43, 0x0A) + 66, 0);
	struct Eq_113 * esi_103 = DPB(1229123, (word16) esp_39, 0) + 0x00;
	__ror(edx_84 - 0xBB080ACD, 0x0F);
	word32 eax_98 = globals->dw4010B0;
	word16 ax_100 = (word16) eax_98;
	do
		esi_103 = esi_103 + 0x01;
	while (esi_103->dw0000 - eax_98 != 0x00);
	__rol(DPB(eax_98, __rol(ax_100, 11), 0), 0x17);
	word32 edx_132 = (word32) esi_103->wFFFFFFFD;
	__ror((word16) (esi_103 << 0x19), 0x02);
	union Eq_205 * edx_145 = *esp_39;
	word32 eax_151 = globals->dw40101E;
	word32 edi_155 = __rol(0x0040101E, 0x1E);
	word16 di_156 = (word16) edi_155;
	while (true)
	{
		word16 di_168 = di_156 + 0x26;
		word32 esi_162 = *edx_145;
		edx_145 = (union Eq_205 *) ((char *) edx_145 + 0x01);
		word32 edi_169 = DPB(edi_155, di_168, 0);
		if ((esi_162 ^ eax_151) == 0x00)
			break;
		di_156 = __ror(di_168, 0x0C);
		edi_155 = DPB(edi_155, di_156, 0);
	}
	word32 * esp_192 = esp_39 - 0x04;
	*esp_192 = edx_132 + 0x003F878F;
	*(esp_192 - 0x04) = fs->dw0000;
	word32 eax_205 = DPB(edx_132 + 0x003F878F, __rol((word16) (edx_132 + 0x003F878F), 11), 0);
	*(esp_192 - 0x08) = esp_192 - 0x04;
	fs->dw0000 = *(esp_192 - 0x08);
	*(esp_192 - 0x08) = 0x00;
	*(esp_192 - 0x0C) = (union Eq_205 **) edx_145;
	word32 edi_194 = -edi_169;
	word16 si_197;
	*siOut = (word16) ~((esi_162 ^ 970076013) * 0x02) | 0x3B;
	word32 ebp_219;
	*ebpOut = DPB(edi_194, (word16) edi_194 + ~0x71, 0);
	byte dl_228;
	*dlOut = 0x87;
	return (eax_205 ^ 0x68089825) + 1205542165;
}

