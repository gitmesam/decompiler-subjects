// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401015: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_21 = CreateFileA(&globals->t43600D, 0x80000000, 0x02, null, 0x03, 292, 0x00);
	if (eax_21 != ~0x00)
	{
		GetFileSize(dwLoc10, null);
		GetOEMCP();
		CreateFileA(&globals->t436048, 0xA0000000, 0x02, null, 0x03, 422, 0x00);
		GetProcessHeap();
		CloseHandle(eax_21);
		VirtualProtect(&globals->v401238, 0xE454, 0x40, fp - 0x14);
		GetFileType(dwLoc20);
		GetFileSize(dwLoc10, null);
		CreateFileA(&globals->t436023, 0x40000000, 0x04, null, 0x03, 0x0181, 0x00);
		word32 esp_258;
		word32 ebp_259;
		byte SCZO_260;
		word32 eax_261;
		bool Z_262;
		byte SZO_263;
		bool C_264;
		byte bh_265;
		byte ch_266;
		word32 edx_267;
		word16 dx_268;
		word16 ax_269;
		word32 ebx_270;
		byte cl_271;
		word32 ecx_272;
		byte al_273;
		real64 rArg0_274;
		bool P_275;
		(dwLoc1C - ~0x404011F4)();
		Eq_3 eax_279 = GetProcessHeap();
		int64 edx_eax_286 = SEQ(edx_267, eax_279 ^ 874516727);
		int32 edx_289 = (int32) (edx_eax_286 % *(eax_279 ^ 874516727));
		word16 dx_290 = (word16) edx_289;
		word16 ax_292 = (word16) (int32) (edx_eax_286 / *(eax_279 ^ 874516727));
		__outw(dx_290, ax_292);
		word32 esp_296;
		word32 ebp_297;
		byte SCZO_298;
		word32 eax_299;
		bool Z_300;
		byte SZO_301;
		Eq_202 C_302;
		byte bh_303;
		byte ch_304;
		word32 edx_305;
		word16 dx_306;
		word16 ax_307;
		cu8 * ebx_308;
		byte cl_309;
		struct Eq_210 * ecx_310;
		byte al_311;
		real64 rArg0_312;
		bool P_313;
		fnE984CD7F();
		cu8 v26_314 = (byte) C_302 + (*ebx_308 + cl_309);
		*ebx_308 = v26_314;
		byte al_321 = __inb(dx_306);
		struct Eq_230 * eax_322 = DPB(eax_299, al_321, 0);
		byte v29_323 = Mem315[eax_322 + 2294198652:byte] + al_321 + (v26_314 <u 0x00);
		eax_322->b88BEB17C = v29_323;
		byte al_329 = __inb(11);
		Eq_2 eax_330 = DPB(eax_299, al_329, 0);
		if (P_313)
			return eax_330;
		ecx_310->b5A02044D = (bool) (v29_323 < 0x00) + (ecx_310->b5A02044D + al_329);
		__wait();
		byte al_340;
		__das(227, &al_340);
	}
	else
	{
		Eq_103 eax_66 = GetModuleHandleA(&globals->t436019);
		GetCommandLineA();
		GetACP();
		GetACP();
		Eq_3 eax_78 = GetProcAddress(eax_66, &globals->t436000);
		GetProcessHeap();
		SizeofResource(null, eax_78);
		GetCurrentThreadId();
		GetFileType(eax_78);
		CreateFileA(&globals->t43602F, 0x40000000, 0x05, null, 0x03, 0x26, 0x00);
		<anonymous> * eax_152 = (eax_78() ^ 0xC0000005) + 0x00401102;
		word32 esp_154;
		word32 ebp_155;
		byte SCZO_156;
		Eq_2 eax_157;
		bool Z_158;
		byte SZO_159;
		bool C_160;
		byte bh_161;
		byte ch_162;
		word32 edx_163;
		word16 dx_164;
		word16 ax_165;
		word32 ebx_166;
		byte cl_167;
		word32 ecx_168;
		byte al_169;
		real64 rArg0_170;
		bool P_171;
		eax_152();
		return eax_157;
	}
}

