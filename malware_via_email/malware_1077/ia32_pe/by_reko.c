// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Stack word32 dwArg04, Stack (ptr32 byte) dwArg08, Stack word32 dwArg0C, Stack (ptr32 word32) dwArg10, Stack word32 dwArg14, Stack (arr Eq_26) dwArg18)
void fn00401000(word32 dwArg04, byte * dwArg08, word32 dwArg0C, word32 * dwArg10, word32 dwArg14, Eq_26 dwArg18[])
{
	*dwArg10 = dwArg0C;
	word16 wLoc0C_21 = (word16) (uint32) ((uint64) (uint32) dwArg14 % 0x05);
	byte * dwArg04_26 = dwArg04 + dwArg14;
	while (true)
	{
		dwArg0C = dwArg0C - 0x01;
		if (dwArg0C == 0x00)
			break;
		*dwArg08 = (byte) ((int32) *dwArg04_26 ^ (word32) (&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&((&(dwArg18)[(int32) wLoc0C_21].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000))[0x00].a0000)[0x00]);
		word16 cx_70 = wLoc0C_21 + 0x01;
		wLoc0C_21 = cx_70;
		if ((int32) cx_70 == 0x05)
			wLoc0C_21 = 0x00;
		dwArg08 = dwArg08 + 0x01;
		dwArg04_26 = dwArg04_26 + 0x01;
	}
}

// 004010F5: Register Eq_48 Win32CrtStartup()
Eq_48 Win32CrtStartup()
{
	<anonymous> ** eax_18 = select(0x00, null, null, null, null);
	ptr32 esp_19 = fp - 0x01EC;
	if (eax_18 != (<anonymous> **) ~0x00)
	{
		word32 eax_280;
		word32 edx_281;
		word32 ebp_282;
		byte SCZO_283;
		bool Z_284;
		word32 ecx_285;
		byte SO_286;
		byte al_287;
		bool C_288;
		byte cl_289;
		byte SZO_290;
		(*eax_18)();
	}
	Eq_69 ecx_46 = globals->t403004;
	union Eq_48 * esp_49 = esp_19 - 0x04;
	*esp_49 = (union Eq_48 *) (fp - 0x018C);
	*(esp_49 - 0x04) = 0x04;
	*(esp_49 - 0x08) = fp - 424;
	*(esp_49 - 0x0C) = 0x04;
	*(esp_49 - 0x10) = fp - 0x01AC;
	*(esp_49 - 0x14) = fp - 0x01B0;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	int32 dwLoc01C8_100 = 0x00;
	while (dwLoc01C8_100 < 0x10)
	{
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x01C4)[dwLoc01C8_100].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (Eq_288) ((char *) ecx_46 + 4206842)[dwLoc01C8_100];
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x019C)[dwLoc01C8_100].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (Eq_297) ((char *) ecx_46 + 4206842 + dwLoc01C8_100)[0x0010];
		dwLoc01C8_100 = dwLoc01C8_100 + 0x01;
	}
	word32 edx_112 = globals->dw403000;
	*esp_49 = (union Eq_48 *) (fp - 0x018C);
	*(esp_49 - 0x04) = 0x00;
	*(esp_49 - 0x08) = fp - 464;
	*(esp_49 - 0x0C) = 0x04;
	*(esp_49 - 0x10) = fp - 0x01D4;
	*(esp_49 - 0x14) = fp - 0x01D4;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	Eq_69 edx_132 = globals->t403004;
	*esp_49 = (union Eq_48 *) (fp - 0x018C);
	*(esp_49 - 0x04) = 0x04;
	*(esp_49 - 0x08) = fp - 464;
	*(esp_49 - 0x0C) = 0x04;
	*(esp_49 - 0x10) = fp - 0x01AC;
	*(esp_49 - 0x14) = fp - 0x01B0;
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	*esp_49 = 0x40;
	*(esp_49 - 0x04) = 0x3000;
	*(esp_49 - 0x08) = (LPVOID *) edx_132;
	*(esp_49 - 0x0C) = 0x00;
	Eq_247 eax_162 = VirtualAlloc(*(esp_49 - 0x0C), *(esp_49 - 0x08), *(esp_49 - 0x04), *esp_49);
	*esp_49 = 0x00;
	GetModuleHandleW(*esp_49);
	Eq_69 dwLoc01EC_175 = null;
	while (dwLoc01EC_175 < edx_132)
	{
		Mem189[eax_162 + dwLoc01EC_175:byte] = Mem166[dwLoc01EC_175 + 0x00403008:byte];
		dwLoc01EC_175 = dwLoc01EC_175 + 0x01;
	}
	*esp_49 = (union Eq_48 *) (fp - 0x018C);
	*(esp_49 - 0x04) = 0x08;
	*(esp_49 - 0x08) = fp - 0x01D8;
	*(esp_49 - 0x0C) = (LPVOID *) edx_132;
	*(esp_49 - 0x10) = (LPVOID *) eax_162;
	*(esp_49 - 0x14) = (LPVOID *) (eax_162 - (void *) 0x08);
	fn00401000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	*esp_49 = (union Eq_48 *) fp;
	*(esp_49 - 0x04) = fp - 0x018C;
	*(esp_49 - 0x08) = (LPVOID *) edx_132;
	*(esp_49 - 0x0C) = edx_112;
	*(esp_49 - 0x10) = (LPVOID *) eax_162;
	*(esp_49 - 0x14) = (char *) edx_132 + 0x00403008;
	word32 esp_240;
	word32 eax_241;
	word32 edx_242;
	word32 ebp_243;
	byte SCZO_244;
	bool Z_245;
	word32 ecx_246;
	byte SO_247;
	byte al_248;
	bool C_249;
	byte cl_250;
	byte SZO_251;
	(eax_162 + 0x1010)();
	return 0x00;
}

