// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401024: Register Eq_2 fn00401024(Register Eq_2 eax, Register word32 ecx, Register word32 edx, Register word32 ebx, Register word32 esi)
HANDLE fn00401024(HANDLE eax, word32 ecx, word32 edx, word32 ebx, word32 esi)
{
	ptr32 esp_3;
	word32 ecx_4;
	Eq_11 C_5;
	struct Eq_12 * edx_6;
	ui32 * ebx_7;
	byte SCZO_8;
	byte SCZDOP_9;
	Eq_2 eax_10;
	byte al_11;
	word32 esi_12;
	byte ah_13;
	fn00400FF9();
	return eax_10;
}

// 00412920: Register Eq_80 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	GetCommandLineA();
	GetCommandLineA();
	GetLastError();
	GetLastError();
	Eq_2 eax_25 = CreateFileW(&globals->t42F0AC, 0x40000000, 0x02, null, 0x03, 0x03, null);
	GetFileSize(eax_25, null);
	Eq_2 eax_49 = CreateFileW(&globals->t42F06B, 0x20000000, 0x01, null, 0x03, 0x01, null);
	if (eax_49 != (void *) ~0x00)
		return fn00401024(eax_49, ecx, edx, ebx, esi);
	Eq_2 eax_95 = CreateFileW(&globals->t42F050, 0x80000000, 0x06, null, 0x03, 0x0104, null);
	GetCommandLineA();
	do
	{
		GetFileSize(eax_25, null);
		GetFileType(eax_25);
		Eq_2 eax_125 = CreateFileA(&globals->t42F09C, 0x60000000, 0x01, null, 0x03, 0xA2, null);
		GetCommandLineA();
		Eq_173 eax_131 = LoadLibraryA(&globals->t42F045);
		CloseHandle(eax_49);
		GetLastError();
		Eq_185 eax_145 = GetProcAddress(eax_131, &globals->t42F000);
		CloseHandle(eax_49);
		GetFileSize(eax_49, null);
		CloseHandle(eax_95);
		GetCommandLineA();
		GetCommandLineA();
		GetFileType(eax_125);
	} while (CreateFileW(&globals->t42F081, 0x00, 0x04, null, 0x03, 0x0103, null) != (void *) ~0x00);
	GetFileSize(eax_95, null);
	int32 eax_207 = eax_145();
	GetFileSize(eax_125, null);
	GetCommandLineA();
	Eq_80 eax_232 = GetLastError();
	word32 esp_233;
	word32 ebp_234;
	byte SCZO_235;
	Eq_80 eax_236;
	bool Z_237;
	byte SZO_238;
	bool C_239;
	word32 ecx_240;
	word32 edx_241;
	word32 ebx_242;
	word32 esi_243;
	(*((word32) (eax_207 ^ 0x06BD) + 0x00412B33))();
	return eax_236;
}

