// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 1310D000: Register word32 fn1310D000(Stack (ptr32 byte) dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack (ptr32 word32) dwArg10, Stack word32 dwArg14, Stack int32 dwArg18)
word32 fn1310D000(byte * dwArg04, word32 dwArg08, word32 dwArg0C, word32 * dwArg10, word32 dwArg14, int32 dwArg18)
{
	*dwArg10 = dwArg0C;
	word32 ebx_16 = dwArg14;
	byte * dwArg08_111 = dwArg08 + dwArg14;
	while (true)
	{
		dwArg0C = dwArg0C - 0x01;
		if (dwArg0C == 0x00)
			break;
		AddAtomW((WCHAR *) 0xB8000000);
		ebx_16 = (word32) *((word32) (int32) wLoc1C + dwArg18);
		*dwArg04 = (byte) ((int32) *dwArg08_111 ^ ebx_16);
		wLoc1C = (word16) ((word32) wLoc1C + 0x01);
		if ((int32) wLoc1C == 0x05)
			wLoc1C = 0x00;
		dwArg04 = dwArg04 + 0x01;
		dwArg08_111 = dwArg08_111 + 0x01;
	}
	return ebx_16;
}

// 1310D0A9: Register Eq_50 Win32CrtStartup()
Eq_50 Win32CrtStartup()
{
	word32 esp_8;
	word32 ebp_9;
	byte SCZO_10;
	word32 eax_11;
	word16 ax_12;
	word32 ecx_13;
	word32 edx_14;
	byte SZO_15;
	bool C_16;
	word32 esi_17;
	bool Z_18;
	word32 edi_19;
	word32 ebx_20;
	byte bl_21;
	COMCTL32.dll!InitCommonControls();
	Eq_50 eax_22 = GetLastError();
	word32 esp_29;
	word32 ebp_30;
	byte SCZO_31;
	word32 eax_32;
	word16 ax_33;
	word32 ecx_34;
	word32 edx_35;
	byte SZO_36;
	bool C_37;
	word32 esi_38;
	bool Z_39;
	word32 edi_40;
	word32 ebx_41;
	byte bl_42;
	COMCTL32.dll!ImageList_DragEnter();
	Eq_19 ax_45 = AddAtomW((WCHAR *) 0x00080000);
	word32 esp_60;
	word32 ebp_61;
	byte SCZO_62;
	word32 eax_63;
	word16 ax_64;
	word32 ecx_65;
	word32 edx_66;
	byte SZO_67;
	bool C_68;
	word32 esi_69;
	bool Z_70;
	word32 edi_71;
	word32 ebx_72;
	byte bl_73;
	COMCTL32.dll!ImageList_Draw();
	word32 ecx_75 = eax_63 + edx_66;
	struct Eq_109 * v12_82 = (ecx_75 ^ 0x800401F0) + 0x930CE14A;
	word32 esi_86 = v12_82->dw0000;
	ptr32 esp_467 = fp - 772;
	if ((ecx_75 ^ 0x800401F0) != 0x800401F0)
	{
		*(fp - 776) = 0x00;
		esp_467 = fp - 776;
	}
	struct Eq_125 * esp_98 = esp_467 - 0x04;
	esp_98->t0000 = fp - 0x10;
	*(esp_98 - 0x04) = 0x04;
	*(esp_98 - 0x08) = fp - 0x023C;
	*(esp_98 - 0x0C) = fp - 0x023C;
	fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	Eq_162 eax_120 = v12_82->t0004;
	esp_98->t0008 = fp - 0x0234;
	esp_98->t0004.u0 = 0x04;
	esp_98->t0000 = fp - 0x10;
	*(esp_98 - 0x04) = 0x04;
	*(esp_98 - 0x08) = fp - 0x025C;
	*(esp_98 - 0x0C) = fp - 600;
	fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	ui32 esi_143 = v12_82->dw0008;
	esp_98->t0008 = fp - 0x0234;
	esp_98->t0004.u0 = 0x08;
	esp_98->t0000 = fp - 0x10;
	*(esp_98 - 0x04) = 0x04;
	*(esp_98 - 0x08) = fp - 0x1C;
	*(esp_98 - 0x0C) = fp - 0x14;
	fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	word32 eax_175 = v12_82->dw000C;
	esp_98->t0008 = fp - 0x0234;
	esp_98->t0004.u0 = 0x0C;
	esp_98->t0000 = fp - 0x10;
	*(esp_98 - 0x04) = 0x04;
	*(esp_98 - 0x08) = fp - 0x28;
	*(esp_98 - 0x0C) = fp - 0x1C;
	fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	Eq_282 dwLoc0248_209 = v12_82->t0010;
	esp_98->t0008 = fp - 0x0234;
	esp_98->t0004.u0 = 0x10;
	esp_98->t0000 = fp - 0x10;
	*(esp_98 - 0x04) = 0x04;
	*(esp_98 - 0x08) = fp - 600;
	*(esp_98 - 0x0C) = fp - 0x0248;
	fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	esp_98->t0008.u0 = 0x40;
	esp_98->t0004.u0 = 0x3000;
	Eq_282 edx_238 = esi_143 * 0x08 + 0x0C;
	Mem254[esp_98 + 0x00:word32] = edx_238 + eax_120 + esi_86;
	*(esp_98 - 0x04) = (ecx_75 ^ 0x800401F0) - 0x800401F0;
	ui32 dwLoc024C_233 = 0x14;
	word32 * dwLoc24_236 = (char *) &v12_82->t0010 + 0x04;
	Eq_353 eax_259 = VirtualAlloc(*(esp_98 - 0x04), esp_98->t0000, esp_98->t0004, esp_98->t0008);
	byte * dwLoc0C_266 = (char *) edx_238 + (eax_175 + 0x13100000);
	Eq_282 dwLoc0264_270 = edx_238;
	ui32 dwLoc08_271 = 0x00;
	Eq_381 dwLoc18_272 = null;
	while (true)
	{
		ptr32 esp_289 = esp_467 + 0x08;
		if (0x01 == 0x00)
			break;
		if (dwLoc0264_270 == dwLoc0248_209)
		{
			ui32 edi_395 = dwLoc08_271 + 0x01;
			dwLoc08_271 = edi_395;
			if (edi_395 == esi_143)
				break;
			word32 edi_401 = *dwLoc24_236;
			*(esp_289 - 0x04) = fp - 0x0234;
			*(esp_289 - 0x08) = dwLoc024C_233;
			*(esp_289 - 0x0C) = fp - 0x10;
			*(esp_289 - 0x10) = 0x04;
			*(esp_289 - 0x14) = fp - 0x1C - dwLoc024C_233;
			*(esp_289 - 0x18) = fp - 0x1C;
			fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
			LPVOID * eax_431 = dwLoc24_236 + 0x01;
			dwLoc0248_209 = (Eq_282) *eax_431;
			*(esp_289 - 0x04) = fp - 0x0234;
			ui32 eax_428 = dwLoc024C_233 + 0x04;
			*(esp_289 - 0x08) = eax_428;
			*(esp_289 - 0x0C) = fp - 0x10;
			*(esp_289 - 0x10) = 0x04;
			*(esp_289 - 0x14) = fp - 0x0248 - eax_428;
			*(esp_289 - 0x18) = fp - 0x0248;
			fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
			dwLoc024C_233 = eax_428 + 0x04;
			dwLoc24_236 = (word32 *) ((char *) eax_431 + 0x04);
			dwLoc0264_270 = null;
			dwLoc0C_266 = edi_401 + 0x13100000;
		}
		Mem380[eax_259 + dwLoc18_272:byte] = Mem258[dwLoc0C_266 + 0x00:byte];
		dwLoc0C_266 = dwLoc0C_266 + 0x01;
		dwLoc18_272 = dwLoc18_272 + 0x01;
		dwLoc0264_270 = (Eq_282) ((char *) dwLoc0264_270 + 0x01);
	}
	*(esp_289 - 0x04) = fp - 0x0234;
	*(esp_289 - 0x08) = (LPVOID *) edx_238;
	*(esp_289 - 0x0C) = fp - 0x0238;
	*(esp_289 - 0x10) = (LPVOID *) eax_120;
	*(esp_289 - 0x14) = (LPVOID *) (eax_259 - edx_238);
	*(esp_289 - 0x18) = (LPVOID *) eax_259;
	word32 ebx_315 = fn1310D000(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14);
	*(esp_289 - 0x04) = fp;
	*(esp_289 - 0x08) = fp - 0x0234;
	*(esp_289 - 0x0C) = (LPVOID *) eax_120;
	*(esp_289 - 0x10) = esi_86;
	*(esp_289 - 0x14) = (LPVOID *) eax_259;
	word32 edx_338 = eax_259 + eax_120;
	*(esp_289 - 0x18) = (LPVOID *) edx_338;
	ptr32 esp_342;
	word32 ebp_343;
	byte SCZO_344;
	word32 eax_345;
	word16 ax_346;
	word32 ecx_347;
	word32 edx_348;
	byte SZO_349;
	bool C_350;
	word32 esi_351;
	bool Z_352;
	word32 edi_353;
	word32 ebx_354;
	byte bl_355;
	(eax_259 + 0x0F50)();
	*(esp_342 - 0x04) = 0x00;
	ExitProcess(*(esp_342 - 0x04));
}

