// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401027: void fn00401027(Stack word32 dwArg00)
void fn00401027(word32 dwArg00)
{
}

// 00412CFA: Register Eq_3 Win32CrtStartup()
Eq_3 Win32CrtStartup()
{
	GetLastError();
	ptr32 esp_101 = fp - 0x44;
l00412D0D:
	word32 * esp_28 = esp_101 - 0x04;
	*esp_28 = 0x03;
	*(esp_28 - 0x04) = 0x00;
	ptr32 esp_30 = esp_28 - 0x04;
l00412D14:
	struct Eq_11 * esp_39 = esp_30 - 0x04;
	esp_39->t0000.u0 = 0x07;
	*(esp_39 - 0x04) = 0x40000000;
	*(esp_39 - 0x08) = 4414573;
	Eq_3 eax_45 = CreateFileW(*(esp_39 - 0x08), *(esp_39 - 0x04), esp_39->t0000, esp_39->t0004, esp_39->t0008, esp_39->t000C, esp_39->t0010);
	GetCommandLineA();
	GetCommandLineA();
	GetLastError();
	esp_39->t0010.u0 = 0x00;
	HANDLE * esp_151 = &esp_39->t0010;
	do
	{
		struct Eq_80 * esp_57 = esp_151 - 0x04;
		esp_57->t0000.u0 = 0x07;
		*(esp_57 - 0x04) = 0x03;
		*(esp_57 - 0x08) = 0x00;
		*(esp_57 - 0x0C) = 0x05;
		*(esp_57 - 0x10) = 0xE0000000;
		*(esp_57 - 0x14) = 4414408;
		Eq_3 eax_69 = CreateFileW(*(esp_57 - 0x14), *(esp_57 - 0x10), *(esp_57 - 0x0C), *(esp_57 - 0x08), *(esp_57 - 0x04), esp_57->t0000, esp_57->t0004);
		esp_30 = (char *) &esp_57->t0004 + 0x04;
		if (eax_69 != ~0x00)
			goto l00412D14;
		esp_57->t0004.u0 = 0x00;
		esp_57->t0000 = eax_45;
		GetFileSize(esp_57->t0000, esp_57->t0004);
		esp_57->t0004 = eax_69;
		CloseHandle(esp_57->t0004);
		esp_57->t0004.u0 = 0x00;
		esp_57->t0000.u0 = 0x0101;
		*(esp_57 - 0x04) = 0x03;
		*(esp_57 - 0x08) = 0x00;
		*(esp_57 - 0x0C) = 0x07;
		*(esp_57 - 0x10) = 0x40000000;
		*(esp_57 - 0x14) = 4414542;
		Eq_3 eax_100 = CreateFileA(*(esp_57 - 0x14), *(esp_57 - 0x10), *(esp_57 - 0x0C), *(esp_57 - 0x08), *(esp_57 - 0x04), esp_57->t0000, esp_57->t0004);
		esp_101 = (char *) &esp_57->t0004 + 0x04;
		if (eax_100 != ~0x00)
			goto l00412D0D;
		GetCommandLineA();
		esp_57->t0004 = eax_69;
		GetFileType(esp_57->t0004);
		GetCommandLineA();
		esp_57->t0004.u0 = 0x00;
		esp_57->t0000 = eax_100;
		GetFileSize(esp_57->t0000, esp_57->t0004);
		esp_57->t0004.u0 = 0x00;
		esp_57->t0000.u0 = 0x80;
		*(esp_57 - 0x04) = 0x03;
		*(esp_57 - 0x08) = 0x00;
		*(esp_57 - 0x0C) = 0x03;
		*(esp_57 - 0x10) = 0x00;
		*(esp_57 - 0x14) = 4414371;
		Eq_3 eax_133 = CreateFileW(*(esp_57 - 0x14), *(esp_57 - 0x10), *(esp_57 - 0x0C), *(esp_57 - 0x08), *(esp_57 - 0x04), esp_57->t0000, esp_57->t0004);
		esp_57->t0004.u0 = 0x00;
		esp_57->t0000.u0 = 292;
		*(esp_57 - 0x04) = 0x03;
		*(esp_57 - 0x08) = 0x00;
		*(esp_57 - 0x0C) = 0x00;
		*(esp_57 - 0x10) = 0x40000000;
		*(esp_57 - 0x14) = 4414441;
		Eq_3 eax_150 = CreateFileW(*(esp_57 - 0x14), *(esp_57 - 0x10), *(esp_57 - 0x0C), *(esp_57 - 0x08), *(esp_57 - 0x04), esp_57->t0000, esp_57->t0004);
		esp_151 = (HANDLE *) ((char *) &esp_57->t0004 + 0x04);
	} while (eax_150 != ~0x00);
	esp_57->t0004 = eax_133;
	CloseHandle(esp_57->t0004);
	esp_57->t0004.u0 = 0x00;
	esp_57->t0000 = eax_100;
	GetFileSize(esp_57->t0000, esp_57->t0004);
	GetLastError();
	esp_57->t0004 = eax_150;
	CloseHandle(esp_57->t0004);
	esp_57->t0004.u0 = 4414495;
	Eq_3 eax_175 = GetModuleHandleA(esp_57->t0004);
	esp_57->t0004 = eax_133;
	GetFileType(esp_57->t0004);
	esp_57->t0004.u0 = 4414413;
	esp_57->t0000 = eax_175;
	GetCommandLineA();
	Eq_512 eax_189 = GetProcAddress(esp_57->t0000, esp_57->t0004);
	esp_57->t0004 = eax_69;
	CloseHandle(esp_57->t0004);
	esp_57->t0004.u0 = 0x00;
	esp_57->t0000 = eax_100;
	GetFileSize(esp_57->t0000, esp_57->t0004);
	esp_57->t0004 = eax_150;
	CloseHandle(esp_57->t0004);
	esp_57->t0004 = eax_133;
	GetFileType(esp_57->t0004);
	esp_57->t0004.u0 = 0x00;
	esp_57->t0000 = eax_45;
	GetFileType(esp_57->t0000);
	esp_57->t0000.u0 = 0x00;
	*(esp_57 - 0x04) = 0x00;
	*(esp_57 - 0x08) = (union Eq_3 *) eax_100;
	GetFileSize(*(esp_57 - 0x08), *(esp_57 - 0x04));
	*(esp_57 - 0x04) = 0x00;
	*(esp_57 - 0x08) = (union Eq_3 *) eax_133;
	GetFileSize(*(esp_57 - 0x08), *(esp_57 - 0x04));
	*(esp_57 - 0x04) = 0x00;
	*(esp_57 - 0x08) = 0x00;
	*(esp_57 - 0x0C) = 0x0121;
	*(esp_57 - 0x10) = 0x03;
	*(esp_57 - 0x14) = 0x00;
	*(esp_57 - 0x18) = 0x04;
	*(esp_57 - 0x1C) = 0x80000000;
	*(esp_57 - 0x20) = 4414473;
	Eq_3 eax_253 = CreateFileW(*(esp_57 - 0x20), *(esp_57 - 0x1C), *(esp_57 - 0x18), *(esp_57 - 0x14), *(esp_57 - 0x10), *(esp_57 - 0x0C), *(esp_57 - 0x08));
	Eq_3 eax_259 = eax_189();
	*(esp_57 - 0x08) = 0x00;
	*(esp_57 - 0x0C) = (union Eq_3 *) eax_100;
	GetFileSize(*(esp_57 - 0x0C), *(esp_57 - 0x08));
	GetLastError();
	GetCommandLineA();
	Eq_3 eax_281 = GetCommandLineA();
	word32 ebp_283;
	byte SCZO_284;
	word32 eax_285;
	bool Z_286;
	byte SZO_287;
	bool C_288;
	ptr32 esp_282;
	(*((word32) (eax_259 ^ 0xC0000005) + 4272007))();
l00412F87:
	word32 * esp_300 = esp_282 - 0x04;
	*esp_300 = 0x00;
	*(esp_300 - 0x04) = 0x0125;
	*(esp_300 - 0x08) = 0x03;
	*(esp_300 - 0x0C) = 0x00;
	*(esp_300 - 0x10) = 0x03;
	DWORD * esp_308 = esp_300 - 0x10;
	do
	{
		struct Eq_789 * esp_314 = esp_308 - 0x04;
		esp_314->t0000.u0 = 0xA0000000;
		*(esp_314 - 0x04) = 4414394;
		esp_282 = (char *) &esp_314->t0014 + 0x04;
		if (CreateFileW(*(esp_314 - 0x04), esp_314->t0000, esp_314->t0004, esp_314->t0008, esp_314->t000C, esp_314->t0010, esp_314->t0014) != ~0x00)
			goto l00412F87;
		GetLastError();
		esp_314->t0014 = fp - 0x24;
		GetCommandLineA();
		esp_314->t0010.u0 = 0x40;
		esp_314->t000C.u0 = 0x00;
		esp_314->t0008 = eax_150;
		GetFileSize(esp_314->t0008, esp_314->t000C);
		esp_314->t000C.u0 = 72872;
		esp_314->t0008 = eax_69;
		CloseHandle(esp_314->t0008);
		esp_314->t0008 = eax_253;
		GetFileType(esp_314->t0008);
		esp_314->t0008.u0 = 0x00401000;
		VirtualProtect(esp_314->t0008, esp_314->t000C, esp_314->t0010, esp_314->t0014);
		esp_314->t0014.u0 = 0x00;
		esp_314->t0010 = eax_150;
		GetFileSize(esp_314->t0010, esp_314->t0014);
		GetCommandLineA();
		esp_314->t0014.u0 = 0x00401000;
		GetLastError();
		esp_314->t0010 = eax_259;
		esp_314->t000C.u0 = 0x00;
		esp_314->t0008.u0 = 0x0100;
		esp_314->t0004.u0 = 0x03;
		esp_314->t0000.u0 = 0x00;
		*(esp_314 - 0x04) = 0x00;
		*(esp_314 - 0x08) = 0xE0000000;
		*(esp_314 - 0x0C) = 4414505;
		Eq_3 eax_381 = CreateFileW(*(esp_314 - 0x0C), *(esp_314 - 0x08), *(esp_314 - 0x04), esp_314->t0000, esp_314->t0004, esp_314->t0008, esp_314->t000C);
		esp_314->t000C.u0 = 72872;
		esp_314->t0008.u0 = 0x00;
		esp_314->t0004 = eax_69;
		GetFileSize(esp_314->t0004, esp_314->t0008);
		GetLastError();
		esp_314->t0008 = eax_253;
		GetFileType(esp_314->t0008);
		esp_314->t0008.u0 = 0x00;
		esp_314->t0004.u0 = 0x0104;
		esp_314->t0000.u0 = 0x03;
		*(esp_314 - 0x04) = 0x00;
		*(esp_314 - 0x08) = 0x02;
		*(esp_314 - 0x0C) = 0x80000000;
		*(esp_314 - 0x10) = 4414531;
		esp_308 = (DWORD *) &esp_314->t000C;
	} while (CreateFileA(*(esp_314 - 0x10), *(esp_314 - 0x0C), *(esp_314 - 0x08), *(esp_314 - 0x04), esp_314->t0000, esp_314->t0004, esp_314->t0008) != ~0x00);
	esp_314->t0008 = eax_381;
	Eq_3 eax_425 = GetFileType(esp_314->t0008);
	word32 esp_430;
	word32 ebp_431;
	byte SCZO_432;
	word32 eax_433;
	bool Z_434;
	byte SZO_435;
	bool C_436;
	(eax_259 - ~0x40412CB3)();
	Eq_3 eax_437 = GetCommandLineA();
	fn00401027(ebp);
	return eax_437;
}

