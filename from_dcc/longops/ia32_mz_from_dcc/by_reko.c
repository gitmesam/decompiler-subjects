// subject_0800.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_0800.h"

// 0800:01FA: void _main(Register Eq_4 ds)
void _main(Eq_4 ds)
{
	int16 dx_37;
	uint16 ax_35 = fn0800_08C3(~0x8E, 0x00, ~0x00, 0x018E, out dx_37);
	fn0800_10C6(0x018E, ax_35, dx_37);
	Eq_22 dx_ax_189 = <invalid>;
	ci16 dx_82;
	byte ch_190;
	fn0800_10CF(dx_ax_189, ax_35, dx_37, out ch_190, out dx_82);
	Eq_22 cx_81 = <invalid>;
	Eq_4 dx_107;
	Eq_4 bx_108;
	_printf(SEQ(SLICE(cx_81, byte, 8), fn0800_1169((byte) (uint16) (uint8) fn0800_1187(ax_35, 0x05), dx_82, out dx_107, out bx_108)), dx_107, bx_108, ds, 404);
}

// 0800:07D8: void __LONGTOA(Register Eq_4 ds, Stack Eq_4 bArg02, Stack Eq_75 bArg04, Stack Eq_4 wArg06, Stack (memptr Eq_4 byte) wArg08, Stack Eq_4 wArg0A, Stack Eq_4 wArg0C)
// Called from:
//      __VPRINTER
void __LONGTOA(Eq_4 ds, Eq_4 bArg02, Eq_75 bArg04, Eq_4 wArg06, byte Eq_4::* wArg08, Eq_4 wArg0A, Eq_4 wArg0C)
{
	byte Eq_4::* di_127 = wArg08;
	cu8 bl_28 = (byte) wArg06;
	if (wArg06 > 0x24 || bl_28 < 0x02)
	{
l0800_0846:
		ds->*di_127 = 0x00;
		return;
	}
	Eq_4 ax_31 = wArg0A;
	Eq_4 cx_33 = wArg0C;
	if (wArg0C < 0x00 && bArg04 != 0x00)
	{
		ds->*wArg08 = 0x2D;
		ax_31 = -wArg0A;
		di_127 = wArg08 + 1;
		cx_33 = -wArg0C - (ax_31 == 0x00);
	}
	byte Eq_4::* si_109 = fp - 0x24;
	if (cx_33 != 0x00)
	{
		do
		{
			uint32 dx_ax_55 = (uint32) (uint16) cx_33;
			uint32 dx_ax_63 = SEQ((uint16) (dx_ax_55 % wArg06), ax_31);
			ds->*si_109 = (byte) (uint16) (dx_ax_63 % wArg06);
			Eq_4 ax_59 = (uint16) (dx_ax_55 /u wArg06);
			cx_33 = ax_59;
			ax_31 = (uint16) (dx_ax_63 /u wArg06);
			++si_109;
		} while (ax_59 != 0x00);
l0800_0829:
		if (ax_31 == 0x00)
		{
			word16 cx_106;
			do
			{
				byte al_119;
				--si_109;
				cu8 al_113 = ds->*si_109;
				if (al_113 < 0x0A)
					al_119 = al_113 + 0x30;
				else
					al_119 = (byte) ((word16) bArg02 + (al_113 - 0x0A));
				ds->*di_127 = al_119;
				++di_127;
				--cx_106;
			} while (cx_106 != 0x00);
			goto l0800_0846;
		}
	}
	uint32 dx_ax_82 = (uint32) (uint16) ax_31;
	ds->*si_109 = (byte) (uint16) (dx_ax_82 % wArg06);
	ax_31 = (uint16) (dx_ax_82 /u wArg06);
	++si_109;
	goto l0800_0829;
}

// 0800:08C3: Register uint16 fn0800_08C3(Register uint16 ax, Register uint16 cx, Register uint16 dx, Register uint16 bx, Register out ptr16 dxOut)
// Called from:
//      _main
uint16 fn0800_08C3(uint16 ax, uint16 cx, uint16 dx, uint16 bx, ptr16 & dxOut)
{
	uint16 ax_15 = dx;
	if (dx != 0x00)
		ax_15 = (word16) (bx * dx);
	uint16 cx_28 = ax_15;
	if (cx != 0x00)
		cx_28 = ax_15 + (word16) (ax * cx);
	uint32 dx_ax_43 = bx * ax;
	dxOut = SLICE(dx_ax_43, word16, 16) + cx_28;
	return (word16) dx_ax_43;
}

// 0800:097B: void _printf(Register Eq_4 cx, Register Eq_4 dx, Register Eq_4 bx, Register Eq_4 ds, Stack (memptr Eq_4 byte) wArg02)
// Called from:
//      _main
void _printf(Eq_4 cx, Eq_4 dx, Eq_4 bx, Eq_4 ds, byte Eq_4::* wArg02)
{
	__VPRINTER(cx, dx, bx, ds, fp + 0x04, wArg02);
}

// 0800:0B74: void __REALCVT(Register Eq_4 ds)
// Called from:
//      __VPRINTER
void __REALCVT(Eq_4 ds)
{
	(*((word16) ds + 0x0428))();
}

// 0800:0B78: Register word16 fn0800_0B78(Sequence (ptr32 Eq_209) es_di, Register Eq_4 ds, Stack Eq_4 wArg02)
// Called from:
//      __VPRINTER
word16 fn0800_0B78(struct Eq_209 * es_di, Eq_4 ds, Eq_4 wArg02)
{
	word16 di = (word16) es_di;
	bcu8 dh_13 = SLICE(wArg02, byte, 8);
	es_di->b0000 = (uint16) (dh_13 >> 0x04) + 0x03B1;
	es_di->b0001 = (uint16) (dh_13 & 0x0F) + 0x03B1;
	bcu8 dl_29 = (byte) wArg02;
	es_di->b0002 = (uint16) (dl_29 >> 0x04) + 0x03B1;
	es_di->b0003 = (uint16) (dl_29 & 0x0F) + 0x03B1;
	return di + 4;
}

// 0800:0BA3: void __VPRINTER(Register Eq_4 cx, Register Eq_4 dx, Register Eq_4 bx, Register Eq_4 ds, Stack Eq_4 wArg02, Stack (memptr Eq_4 byte) wArg04)
// Called from:
//      _printf
void __VPRINTER(Eq_4 cx, Eq_4 dx, Eq_4 bx, Eq_4 ds, Eq_4 wArg02, byte Eq_4::* wArg04)
{
	ci8 bLoc57_1221 = 0x50;
	struct Eq_257 Eq_4::* sp_1137 = fp - 0xA0;
	byte Eq_4::* wLoc98_1224 = fp - 0x56;
l0800_0C06:
	byte Eq_4::* di_1001 = wLoc98_1224;
l0800_0C0A:
	byte Eq_4::* si_1118 = wArg04;
	while (true)
	{
		byte al_37 = ds->*si_1118;
		++si_1118;
		byte al_1064 = al_37;
		if (al_37 == 0x00)
			break;
		if (al_37 == 0x25)
		{
			al_1064 = ds->*si_1118;
			++si_1118;
			if (al_1064 != 0x25)
			{
				wLoc98_1224 = di_1001;
				cu8 ch_1153 = 0x00;
				Eq_4 wLoc8E_1229 = 0x00;
				cui16 wLoc9A_1230 = 0x00;
				byte bLoc8F_1231 = 0x00;
				Eq_4 wLoc94_1232 = ~0x00;
				Eq_4 wLoc92_1233 = ~0x00;
				while (true)
				{
					Eq_4 ax_65 = (uint16) (uint8) al_1064;
					cu8 bl_68 = (byte) ax_65;
					byte bh_73 = SLICE(ax_65, byte, 8);
					byte dl_132 = (byte) ax_65;
					bx = SEQ(bh_73, bl_68 - 0x20);
					cx = SEQ(ch_1153, 0x00);
					if (bl_68 >= 0x80)
						break;
					bx = SEQ(bh_73, ds->*((word16) bx + 961));
					cx = SEQ(ch_1153, 0x00);
					dx = ax_65;
					if (bx > 0x17)
						goto l0800_1090;
					byte * es_di_1895;
					byte * es_di_1899;
					Eq_4 bx_1912;
					byte * es_di_1908;
					Eq_4 bx_1892;
					Eq_4 bx_1902;
					byte bLoc95_1275;
					Eq_4 dx_226;
					Eq_4 cx_173;
					byte Eq_361::* di_485;
					struct Eq_361 * es_488;
					Eq_4 dx_355;
					Eq_4 ax_354;
					bx <<= 0x01;
					byte bl_450 = (byte) (bx << 0x01);
					dx = ax_65;
					cx = SEQ(ch_1153, 0x00);
					switch (bx)
					{
					case 0x00:
						cx = SEQ(ch_1153, 0x00);
						if (ch_1153 > 0x00)
							goto l0800_0CA5;
						if (bLoc8F_1231 != 0x2B)
							bLoc8F_1231 = dl_132;
						break;
					case 0x01:
						cx = SEQ(ch_1153, 0x00);
						if (ch_1153 > 0x00)
							goto l0800_0CA5;
						wLoc9A_1230 |= 0x01;
						break;
					case 0x02:
						Eq_4 ax_952 = ds->*wArg02;
						wArg02 = (word16) wArg02 + 2;
						if (ch_1153 < 0x02)
						{
							wLoc94_1232 = ax_952;
							ch_1153 = 0x03;
							goto l0800_0D15;
						}
						cx = SEQ(ch_1153, 0x00);
						if (ch_1153 != 0x04)
							goto l0800_0CFE;
						wLoc92_1233 = ax_952;
						++ch_1153;
						break;
					case 0x03:
						cx = SEQ(ch_1153, 0x00);
						if (ch_1153 > 0x00)
							goto l0800_0CA5;
						wLoc9A_1230 |= 0x02;
						break;
					case 0x04:
						cx = SEQ(ch_1153, 0x00);
						if (ch_1153 >= 0x04)
							goto l0800_0CFE;
						ch_1153 = 0x04;
						break;
					case 0x05:
l0800_0D30:
						dx = bx;
						Eq_4 ax_902 = (int16) ((byte) ax_65 - 0x30);
						if (ch_1153 <= 0x02)
						{
							ch_1153 = 0x02;
							wLoc94_1232 = ax_902;
							if (wLoc94_1232 < 0x00)
								goto l0800_0D15;
							wLoc94_1232 = (word16) ax_902 + ((wLoc94_1232 << 0x03) + (wLoc94_1232 << 0x01));
						}
						else
						{
							cx = SEQ(ch_1153, 0x00);
							if (ch_1153 != 0x04)
							{
l0800_0CFE:
								goto l0800_1090;
							}
							wLoc92_1233 = ax_902;
							if (wLoc92_1233 < 0x00)
								goto l0800_0D15;
							wLoc92_1233 = (word16) ax_902 + ((wLoc92_1233 << 0x03) + (wLoc92_1233 << 0x01));
						}
						break;
					case 0x06:
						wLoc9A_1230 |= 0x10;
						ch_1153 = 0x05;
						break;
					case 0x07:
						wLoc9A_1230 = (wLoc9A_1230 | 0x0100) & ~0x10;
						ch_1153 = 0x05;
						break;
					case 0x08:
						wLoc9A_1230 = wLoc9A_1230 & ~0x10 | 0x80;
						ch_1153 = 0x05;
						break;
					case 0x09:
						if (ch_1153 > 0x00)
							goto l0800_0D30;
						if ((wLoc9A_1230 & 0x02) == 0x00)
						{
							wLoc9A_1230 |= 0x08;
							ch_1153 = 0x01;
						}
						else
						{
l0800_0D15:
						}
						break;
					case 0x0A:
						int32 dx_ax_363 = (int32) (ds->*wArg02);
						bLoc95_1275 = 0x01;
						ax_354 = (word16) dx_ax_363;
						dx_355 = SLICE(dx_ax_363, word16, 16);
						bx_1892 = SEQ(0x0A, bl_450);
						goto l0800_0DD2;
					case 11:
						bx_1912 = SEQ(0x08, bl_450);
						goto l0800_0DAA;
					case 0x0C:
						bx_1902 = SEQ(0x0A, bl_450);
						goto l0800_0DAF;
					case 0x0D:
						bx_1912 = SEQ(0x10, dl_132 + 233);
l0800_0DAA:
						bLoc8F_1231 = 0x00;
						bx_1902 = bx_1912;
l0800_0DAF:
						bLoc95_1275 = 0x00;
						ax_354 = ds->*wArg02;
						dx_355.u0 = 0x00;
						bx_1892 = bx_1902;
l0800_0DD2:
						struct Eq_578 Eq_4::* di_365 = (word16) wArg02 + 1;
						byte bh_430 = SLICE(bx_1892, byte, 8);
						Eq_4 di_366 = &di_365->t0001;
						wArg04 = si_1118;
						if ((wLoc9A_1230 & 0x10) != 0x00)
						{
							dx_355 = (ds->*di_365).t0001;
							di_366 = (char *) &di_365->t0001 + 2;
						}
						wArg02 = di_366;
						if (ax_354 == 0x00)
						{
							byte dh_1152 = SLICE(dx_355, byte, 8);
							if (dx_355 != 0x00)
								goto l0800_0E21;
							bx = bx_1892;
							if (wLoc92_1233 == 0x00)
							{
								cx = wLoc94_1232;
								dx = dx_355;
								if (wLoc94_1232 != 0x00)
								{
									dx = dx_355;
									if (wLoc94_1232 != ~0x00)
									{
										byte dl_841;
										if ((wLoc9A_1230 & 0x08) != 0x00)
											dl_841 = 0x30;
										else
											dl_841 = 0x20;
										do
										{
											dx = SEQ(dh_1152, dl_841);
											di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), dl_841, cx, dx, bx_1892);
											sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFE);
											--cx;
										} while (cx != 0x00);
									}
								}
								goto l0800_0C0A;
							}
						}
						else
						{
l0800_0E21:
							wLoc9A_1230 |= 0x04;
						}
						struct Eq_638 Eq_4::* sp_415 = sp_1137 - 2;
						(ss->*sp_415).t0000 = dx_355;
						(ss->*sp_415).tFFFFFFFE = ax_354;
						(ss->*sp_415).ptrFFFFFFFC = fp - 0x89;
						Eq_4 ax_435 = (int16) bh_430;
						(ss->*sp_415).tFFFFFFFA = ax_435;
						(ss->*sp_415).tFFFFFFF8 = SEQ(SLICE(ax_435, byte, 8), bLoc95_1275);
						(ss->*sp_415).tFFFFFFF6 = bx_1892;
						__LONGTOA(ds, (ss->*sp_415).tFFFFFFF6, (ss->*sp_415).tFFFFFFF8, (ss->*sp_415).tFFFFFFFA, (ss->*sp_415).ptrFFFFFFFC, (ss->*sp_415).tFFFFFFFE, (ss->*sp_415).t0000);
						(ss->*sp_415).t0000 = ss;
						Eq_4 es_466 = (ss->*sp_415).t0000;
						sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_415->t0000 + 2);
						dx_226 = wLoc92_1233;
						if (wLoc92_1233 > 0x00)
						{
							es_di_1899 = SEQ(es_466, fp - 0x89);
							goto l0800_0F67;
						}
						else
						{
							es_di_1908 = SEQ(es_466, fp - 0x89);
							goto l0800_0F57;
						}
					case 0x0E:
						struct Eq_458 Eq_4::* sp_267 = sp_1137 - 2;
						(ss->*sp_267).t0000 = ds->*wArg02;
						byte Eq_4::* di_264 = fp - 0x8A;
						wArg02 = (word16) wArg02 + 2;
						if ((wLoc9A_1230 & 0x20) != 0x00)
						{
							(ss->*sp_267).tFFFFFFFE = ds->*((word16) wArg02 + 2);
							(ss->*sp_267).tFFFFFFFC = ss;
							Eq_4 es_284 = (ss->*sp_267).tFFFFFFFC;
							byte Eq_4::* di_290 = fn0800_0B78(SEQ(es_284, fp - 0x8A), ds, (ss->*sp_267).tFFFFFFFE);
							es_284->*di_290 = 0x3A;
							wArg02 = (word16) wArg02 + 4;
							di_264 = di_290 + 1;
						}
						(ss->*sp_267).tFFFFFFFE = ss;
						Eq_4 es_305 = (ss->*sp_267).tFFFFFFFE;
						byte Eq_4::* di_313 = fn0800_0B78(SEQ(es_305, di_264), ds, (ss->*sp_267).t0000);
						ds->*di_313 = 0x00;
						sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_267->t0000 + 2);
						wLoc9A_1230 &= ~0x04;
						Eq_4 di_328 = di_313 - (fp - 0x8A);
						dx_226 = wLoc92_1233;
						if (wLoc92_1233 <= di_328)
							dx_226 = di_328;
						es_di_1908 = SEQ(es_305, fp - 0x8A);
						goto l0800_0F57;
					case 0x0F:
						Eq_4 cx_206 = wLoc92_1233;
						dx_226 = ax_65;
						if (wLoc92_1233 < 0x00)
							cx_206.u0 = 0x06;
						int16 wLoc06_1259;
						Eq_4 ax_240;
						struct Eq_901 Eq_4::* sp_212 = sp_1137 - 2;
						(ss->*sp_212).t0000 = wArg02;
						(ss->*sp_212).tFFFFFFFE = cx_206;
						(ss->*sp_212).ptrFFFFFFFC = fp - 0x89;
						(ss->*sp_212).tFFFFFFFA = ax_65;
						(ss->*sp_212).tFFFFFFF8 = wLoc9A_1230 & 0x01;
						if ((wLoc9A_1230 & 0x80) != 0x00)
						{
							ax_240.u0 = 0x02;
							wLoc06_1259 = 0x04;
						}
						else if ((wLoc9A_1230 & 0x0100) != 0x00)
						{
							ax_240.u0 = 0x08;
							wLoc06_1259 = 0x0A;
						}
						else
						{
							wLoc06_1259 = 0x08;
							ax_240.u0 = 0x06;
						}
						(ss->*sp_212).tFFFFFFF6 = ax_240;
						__REALCVT(ds);
						(ss->*sp_212).tFFFFFFF4 = ss;
						wArg02 = (word16) wArg02 + wLoc06_1259;
						sp_1137 = sp_212 - 0x0A;
						es_di_1908 = SEQ((ss->*sp_212).tFFFFFFF4, fp - 0x89);
l0800_0F57:
						es_488 = SLICE(es_di_1908, selector, 16);
						di_485 = (word16) es_di_1908;
						if ((wLoc9A_1230 & 0x08) != 0x00)
						{
							dx_226 = wLoc94_1232;
							es_di_1899 = es_di_1908;
							if (wLoc94_1232 > 0x00)
							{
l0800_0F67:
								es_488 = SLICE(es_di_1899, selector, 16);
								di_485 = (word16) es_di_1899;
								Eq_4 cx_492 = fn0800_0BBC(di_485, es_488);
								if (*es_di_1899 == 0x2D)
									--cx_492;
								dx_226 -= cx_492;
								if (dx_226 > 0x00)
									wLoc8E_1229 = dx_226;
							}
						}
						if (bLoc8F_1231 != 0x00 && es_488->*di_485 != 0x2D)
						{
							--di_485;
							es_488->*di_485 = bLoc8F_1231;
							Eq_855 v40_528 = wLoc8E_1229 - 0x01;
							wLoc8E_1229 = v40_528 + (v40_528 <u 0x00);
						}
						cx_173 = fn0800_0BBC(di_485, es_488);
						es_di_1895 = &(es_488->*di_485);
						goto l0800_0F98;
					case 0x10:
						union Eq_4 Eq_4::* sp_192 = sp_1137 - 2;
						ss->*sp_192 = ss;
						wArg02 = (word16) wArg02 + 2;
						sp_1137 = (struct Eq_257 Eq_4::*) ((char *) sp_192 + 2);
						cx_173.u0 = 0x01;
						dx_226 = ax_65;
						es_di_1895 = SEQ(ss->*sp_192, fp - 0x89);
						goto l0800_0F98;
					case 0x11:
						byte * es_di_138;
						bool Z_157;
						dx_226 = ax_65;
						if ((wLoc9A_1230 & 0x20) == 0x00)
						{
							word16 di_147 = ds->*wArg02;
							union Eq_4 Eq_4::* sp_150 = sp_1137 - 2;
							ss->*sp_150 = ds;
							wArg02 = (word16) wArg02 + 2;
							Z_157 = SLICE(cond(di_147), bool, 2);
							es_di_138 = SEQ(ss->*sp_150, di_147);
						}
						else
						{
							es_di_138 = ds->*wArg02;
							wArg02 = (word16) wArg02 + 4;
							Z_157 = SLICE(cond(SLICE(es_di_138, selector, 16) | (word16) es_di_138), bool, 2);
						}
						byte * es_di_1905 = es_di_138;
						if (!Z_157)
						{
							union Eq_4 Eq_4::* sp_161 = sp_1137 - 2;
							ss->*sp_161 = ds;
							es_di_1905 = SEQ(ss->*sp_161, 0x03AA);
						}
						cx_173 = fn0800_0BBC((word16) es_di_1905, SLICE(es_di_1905, selector, 16));
						if (cx_173 > wLoc92_1233)
							cx_173 = wLoc92_1233;
						es_di_1895 = es_di_1905;
l0800_0F98:
						byte Eq_4::* di_546 = (word16) es_di_1895;
						wArg04 = si_1118;
						byte Eq_4::* si_1138 = di_546;
						Eq_4 bx_559 = wLoc94_1232;
						if ((wLoc9A_1230 & 0x05) == 0x05)
						{
							if (dl_132 != 111)
							{
								if (dl_132 == 0x78 || dl_132 == 88)
								{
									Eq_4 v37_580 = wLoc8E_1229 - 0x02;
									wLoc9A_1230 |= 0x40;
									bx_559 = wLoc94_1232 - 0x02;
									wLoc8E_1229 = v37_580;
									if (v37_580 < 0x00)
										wLoc8E_1229.u0 = 0x00;
								}
l0800_0FE5:
								cx = cx_173 + wLoc8E_1229;
								if ((wLoc9A_1230 & 0x02) == 0x00)
								{
									for (; bx_559 > cx; --bx_559)
									{
										di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), 0x20, cx, dx_226, bx_559);
										sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFE);
									}
								}
								if ((wLoc9A_1230 & 0x40) != 0x00)
								{
									di_1001 = fn0800_0BC9(SEQ(ds, fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), 0x30, cx, dx_226, bx_559)), SEQ(ss, fp - 2), dl_132, cx, dx_226, bx_559);
									sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFC);
								}
								dx = wLoc8E_1229;
								if (wLoc8E_1229 > 0x00)
								{
									Eq_4 cx_703 = cx - wLoc8E_1229;
									bx_559 -= wLoc8E_1229;
									byte al_720 = *es_di_1895;
									if (al_720 == 0x2D || (al_720 == 0x20 || al_720 == 0x2B))
									{
										si_1138 = di_546 + 1;
										di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), ds->*di_546, cx_703, wLoc8E_1229, bx_559);
										sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFE);
										--cx_703;
										--bx_559;
									}
									Eq_4 cx_756 = wLoc8E_1229;
									if (wLoc8E_1229 != 0x00)
									{
										do
										{
											di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), 0x30, cx_756, cx_703, bx_559);
											sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFE);
											--cx_756;
										} while (cx_756 != 0x00);
									}
									dx = cx_756;
									cx = cx_703;
								}
								if (cx != 0x00)
								{
									bx_559 -= cx;
									do
									{
										ds->*di_1001 = ds->*si_1138;
										ci8 v42_795 = bLoc57_1221 - 0x01;
										++si_1138;
										++di_1001;
										bLoc57_1221 = v42_795;
										if (v42_795 <= 0x00)
											di_1001 = fn0800_0BD1(SEQ(ss, fp - 2), cx, dx, bx_559, di_1001);
										--cx;
									} while (cx != 0x00);
								}
								bx = bx_559;
								if (bx_559 > 0x00)
								{
									cx = bx_559;
									do
									{
										di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), 0x20, cx, dx, bx_559);
										sp_1137 = (struct Eq_257 Eq_4::*) ((char *) &sp_1137->t0000 + 0x0000FFFE);
										--cx;
									} while (cx != 0x00);
								}
								goto l0800_0C0A;
							}
							if (wLoc8E_1229 <= 0x00)
								wLoc8E_1229.u0 = 0x01;
						}
						goto l0800_0FE5;
					case 0x12:
						uint16 * es_di_103;
						wArg04 = si_1118;
						if ((wLoc9A_1230 & 0x20) == 0x00)
						{
							word16 di_107 = ds->*wArg02;
							union Eq_4 Eq_4::* sp_112 = sp_1137 - 2;
							ss->*sp_112 = ds;
							wArg02 = (word16) wArg02 + 2;
							es_di_103 = SEQ(ss->*sp_112, di_107);
						}
						else
						{
							es_di_103 = ds->*wArg02;
							wArg02 = (word16) wArg02 + 4;
						}
						*es_di_103 = (uint16) (uint8) (0x50 - bLoc57_1221);
						goto l0800_0C06;
					case 0x13:
					case 0x14:
					case 0x15:
l0800_1090:
						byte Eq_4::* si_1016 = si_1118;
						byte al_1006 = 0x25;
						do
						{
							di_1001 = fn0800_0BC9(SEQ(ds, di_1001), SEQ(ss, fp - 2), al_1006, cx, dx, bx);
							byte al_1018 = ds->*si_1016;
							++si_1016;
							al_1006 = al_1018;
						} while (al_1018 != 0x00);
						goto l0800_10A2;
					case 22:
						wLoc9A_1230 &= ~0x20;
						ch_1153 = 0x05;
						break;
					case 0x17:
						wLoc9A_1230 |= 0x20;
						ch_1153 = 0x05;
						break;
					}
					al_1064 = ds->*si_1118;
					++si_1118;
				}
l0800_0CA5:
				dx = ax_65;
				goto l0800_1090;
			}
		}
		ds->*di_1001 = al_1064;
		ci8 v15_1071 = bLoc57_1221 - 0x01;
		++di_1001;
		bLoc57_1221 = v15_1071;
		if (v15_1071 <= 0x00)
			di_1001 = fn0800_0BD1(SEQ(ss, fp - 2), cx, dx, bx, di_1001);
	}
l0800_10A2:
	if (bLoc57_1221 < 0x50)
		fn0800_0BD1(SEQ(ss, fp - 2), cx, dx, bx, di_1001);
}

// 0800:0BBC: Register word16 fn0800_0BBC(Register (memptr (ptr16 Eq_361) byte) di, Register (ptr16 Eq_361) es)
// Called from:
//      __VPRINTER
word16 fn0800_0BBC(byte Eq_361::* di, struct Eq_361 * es)
{
	word16 cx_12 = ~0x00;
	while (cx_12 != 0x00)
	{
		di = di_45 + 1;
		--cx_12;
		di_45 = di;
		if (es->*di_45 != 0x00)
			return ~cx_12 - 0x01;
	}
	return ~cx_12 - 0x01;
}

// 0800:0BC9: Register (memptr Eq_4 byte) fn0800_0BC9(Sequence (ptr32 byte) ds_di, Sequence (ptr32 Eq_296) ss_bp, Register byte al, Register Eq_4 cx, Register Eq_4 dx, Register Eq_4 bx)
// Called from:
//      __VPRINTER
byte Eq_4::* fn0800_0BC9(byte * ds_di, struct Eq_296 * ss_bp, byte al, Eq_4 cx, Eq_4 dx, Eq_4 bx)
{
	byte Eq_4::* di = (word16) ds_di;
	*ds_di = al;
	ci8 v9_11 = ss_bp->bFFFFFFAB - 0x01;
	ss_bp->bFFFFFFAB = v9_11;
	if (v9_11 <= 0x00)
		return di + 1;
	return fn0800_0BD1(ss_bp, cx, dx, bx, di + 1);
}

// 0800:0BD1: Register (memptr Eq_4 byte) fn0800_0BD1(Sequence (ptr32 Eq_296) ss_bp, Register Eq_4 cx, Register Eq_4 dx, Register Eq_4 bx, Register (memptr Eq_4 byte) di)
// Called from:
//      __VPRINTER
//      fn0800_0BC9
byte Eq_4::* fn0800_0BD1(struct Eq_296 * ss_bp, Eq_4 cx, Eq_4 dx, Eq_4 bx, byte Eq_4::* di)
{
	word16 bp = (word16) ss_bp;
	word16 di_20 = di - (bp - 0x54);
	word16 ax_34;
	(seg0800->*ss_bp->ptr000A)();
	if (ax_34 == 0x00)
		ss_bp->wFFFFFFFE = 0x01;
	ss_bp->bFFFFFFAB = 0x50;
	ss_bp->wFFFFFFA8 += di_20;
	return bp - 0x54;
}

// 0800:10C6: void fn0800_10C6(Stack Eq_22 dwArg04, Stack uint16 wArg08, Stack int16 wArg0A)
// Called from:
//      _main
void fn0800_10C6(Eq_22 dwArg04, uint16 wArg08, int16 wArg0A)
{
	word16 dx_12;
	byte ch_20;
	fn0800_10D7(0x00, dwArg04, wArg08, wArg0A, out ch_20, out dx_12);
}

// 0800:10CF: Register word16 fn0800_10CF(Stack Eq_22 dwArg04, Stack uint16 wArg08, Stack int16 wArg0A, Register out Eq_22 chOut, Register out ptr16 dxOut)
// Called from:
//      _main
word16 fn0800_10CF(Eq_22 dwArg04, uint16 wArg08, int16 wArg0A, union Eq_22 & chOut, ptr16 & dxOut)
{
	ptr16 dx_10;
	byte ch_20;
	word16 ax_7 = fn0800_10D7(0x02, dwArg04, wArg08, wArg0A, out ch_20, out dx_10);
	chOut.u0 = <invalid>;
	dxOut = dx_10;
	return ax_7;
}

// 0800:10D7: Register Eq_1137 fn0800_10D7(Register uint16 cx, Stack Eq_22 dwArg04, Stack uint16 wArg08, Stack int16 wArg0A, Register out Eq_22 chOut, Register out Eq_1137 dxOut)
// Called from:
//      fn0800_10C6
//      fn0800_10CF
Eq_1137 fn0800_10D7(uint16 cx, Eq_22 dwArg04, uint16 wArg08, int16 wArg0A, union Eq_22 & chOut, union Eq_1137 & dxOut)
{
	Eq_1137 wArg04 = (word16) dwArg04;
	Eq_1137 wArg06 = SLICE(dwArg04, word16, 16);
	Eq_1137 dx_100;
	uint16 di_16 = cx;
	Eq_1137 ax_129 = wArg04;
	if (wArg0A == 0x00 && (wArg06 == 0x00 || wArg08 == 0x00))
	{
		Eq_1137 dx_38 = (uint16) (dwArg04 % wArg08);
		ax_129.u2 = (uint16) (dwArg04 /u wArg08);
		if ((cx & 0x02) != 0x00)
			ax_129 = dx_38;
		dx_100.u0 = 0x00;
	}
	else
	{
		dx_100 = wArg06;
		int32 cx_bx_270 = SEQ(wArg0A, wArg08);
		if ((cx & 0x01) == 0x00)
		{
			dx_100 = wArg06;
			if (wArg06 < 0x00)
			{
				ax_129 = -wArg04;
				dx_100 = -wArg06 - (ax_129 == 0x00);
				di_16 = cx | 0x0C;
			}
			cx_bx_270 = SEQ(wArg0A, wArg08);
			if (wArg0A < 0x00)
			{
				uint16 bx_74 = -wArg08;
				di_16 = di_16 ^ 0x04;
				cx_bx_270 = SEQ(-wArg0A - (bx_74 == 0x00), bx_74);
			}
		}
		Eq_1137 bx_192 = (word16) cx_bx_270;
		Eq_1137 cx_81 = SLICE(cx_bx_270, word16, 16);
		word16 cx_132;
		Eq_1137 di_109 = 0x00;
		Eq_1137 si_105 = 0x00;
		for (cx_132 = 0x20; cx_132 != 0x00; --cx_132)
		{
			ax_129 <<= 0x01;
			dx_100 = __rcl(dx_100, 0x01, SLICE(cond(ax_129), bool, 1));
			si_105 = __rcl(si_105, 0x01, (dx_100 & 0x8000) != 0x00);
			di_109 = __rcl(di_109, 0x01, (si_105 & 0x8000) != 0x00);
			if (di_109 >= cx_81 && (di_109 > cx_81 || si_105 >= bx_192))
			{
				ui32 di_si_196 = SEQ(di_109, si_105) - cx_bx_270;
				si_105 = (word16) di_si_196;
				di_109 = SLICE(di_si_196, word16, 16);
				ax_129 = (word16) ax_129.u2 + 1;
			}
		}
		uint16 bx_144 = di_16;
		if ((di_16 & 0x02) != 0x00)
		{
			ax_129 = si_105;
			dx_100 = di_109;
			bx_144 = di_16 >> 0x01;
		}
		if ((bx_144 & 0x04) != 0x00)
		{
			ax_129 = -ax_129;
			dx_100 = -dx_100 - (ax_129 == 0x00);
		}
	}
	chOut.u0 = <invalid>;
	dxOut = dx_100;
	return ax_129;
}

// 0800:1169: Register cu8 fn0800_1169(Register cu8 cl, Register ci16 dx, Register out Eq_56 dxOut, Register out Eq_57 bxOut)
// Called from:
//      _main
cu8 fn0800_1169(cu8 cl, ci16 dx, union Eq_56 & dxOut, union Eq_57 & bxOut)
{
	if (cl >= 0x10)
	{
		dxOut = SLICE((int32) dx, word16, 16);
		bxOut = bx;
		return cl - 0x10;
	}
	else
	{
		dxOut = dx >> cl;
		cu8 cl_18 = -cl;
		bxOut = dx << cl_18 + 0x10;
		return cl_18 + 0x10;
	}
}

// 0800:1187: Register byte fn0800_1187(Register uint16 ax, Register cu8 cl)
// Called from:
//      _main
byte fn0800_1187(uint16 ax, cu8 cl)
{
	if (cl >= 0x10)
		return 0x00;
	return (byte) (ax << cl);
}

