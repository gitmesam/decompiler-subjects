// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0800:01FA: void _main(Register Eq_3 ds)
void _main(Eq_3 ds)
{
	_printf(ds, 404);
}

// 0800:0770: void __LONGTOA(Register Eq_3 ds, Stack byte bArg02, Stack byte bArg04, Stack Eq_7 wArg06, Stack (memptr Eq_3 byte) wArg08, Stack uint16 wArg0A, Stack Eq_16 wArg0C)
void __LONGTOA(Eq_3 ds, byte bArg02, byte bArg04, Eq_7 wArg06, byte Eq_3::*wArg08, uint16 wArg0A, Eq_16 wArg0C)
{
	byte Eq_3::* di_119 = wArg08;
	cu8 bl_25 = (byte) wArg06;
	if (wArg06 > 0x24 || bl_25 < 0x02)
	{
l0800_07DE:
		ds->*di_119 = 0x00;
		return;
	}
	uint16 ax_103 = wArg0A;
	Eq_16 cx_145 = wArg0C;
	if (wArg0C < 0x00 && bArg04 != 0x00)
	{
		ds->*wArg08 = 0x2D;
		ax_103 = -wArg0A;
		di_119 = wArg08 + 0x01;
		cx_145 = -wArg0C - (ax_103 == 0x00);
	}
	byte Eq_3::* si_104 = fp - 0x24;
	if (cx_145 != 0x00)
	{
		do
		{
			uint32 dx_ax_152 = (uint32) (uint16) cx_145;
			uint32 dx_ax_158 = SEQ((uint16) (dx_ax_152 % wArg06), ax_103);
			ds->*si_104 = (byte) (uint16) (dx_ax_158 % wArg06);
			Eq_16 ax_155 = (uint16) (dx_ax_152 /u wArg06);
			cx_145 = ax_155;
			ax_103 = (uint16) (dx_ax_158 /u wArg06);
			si_104 = si_104 + 0x01;
		} while (ax_155 != 0x00);
l0800_07C1:
		if (ax_103 == 0x00)
		{
			word16 cx_113 = si_104 + (0x24 - fp);
			do
			{
				byte al_131;
				si_104 = si_104 - 0x01;
				cu8 al_123 = ds->*si_104;
				if (al_123 < 0x0A)
					al_131 = al_123 + 0x30;
				else
					al_131 = al_123 - 0x0A + bArg02;
				ds->*di_119 = al_131;
				di_119 = di_119 + 0x01;
				cx_113 = cx_113 - 0x01;
			} while (cx_113 != 0x00);
			goto l0800_07DE;
		}
	}
	uint32 dx_ax_88 = (uint32) (uint16) ax_103;
	ds->*si_104 = (byte) (uint16) (dx_ax_88 % wArg06);
	ax_103 = (uint16) (dx_ax_88 /u wArg06);
	si_104 = si_104 + 0x01;
	goto l0800_07C1;
}

// 0800:08FA: void _printf(Register Eq_3 ds, Stack Eq_7 wArg02)
void _printf(Eq_3 ds, Eq_7 wArg02)
{
	__VPRINTER(fp - 0x02, ds, fp + 0x04, wArg02);
}

// 0800:0AF3: void __REALCVT()
void __REALCVT()
{
	word16 sp_4;
	struct Eq_128 * ds_5;
	ds->t0426();
}

// 0800:0AF7: Register Eq_132 fn0800_0AF7(Register Eq_132 di, Register Eq_3 es, Register Eq_3 ds, Stack word16 wArg02)
Eq_132 fn0800_0AF7(Eq_132 di, Eq_3 es, Eq_3 ds, word16 wArg02)
{
	bcu8 dh_8 = SLICE(wArg02, byte, 8);
	es->*di = ds->*((word16) ((uint16) (dh_8 >> 0x04)) + 0x03AF);
	es->*((word16) di + 0x01) = ds->*((word16) ((uint16) (dh_8 & 0x0F)) + 0x03AF);
	bcu8 dl_9 = (byte) wArg02;
	es->*((word16) di + 0x02) = ds->*((word16) ((uint16) (dl_9 >> 0x04)) + 0x03AF);
	es->*((word16) di + 0x03) = ds->*((word16) ((uint16) (dl_9 & 0x0F)) + 0x03AF);
	return (word16) di + 0x04;
}

// 0800:0B22: void __VPRINTER(Register mp16 bp, Register Eq_3 ds, Stack Eq_3 wArg02, Stack Eq_7 wArg04)
void __VPRINTER(mp16 bp, Eq_3 ds, Eq_3 wArg02, Eq_7 wArg04)
{
}

// 0800:0B3B: Register word16 fn0800_0B3B(Register Eq_289 di, Register Eq_3 es)
word16 fn0800_0B3B(Eq_289 di, Eq_3 es)
{
}

// 0800:0B48: Register Eq_3 fn0800_0B48(Register byte al, Register (memptr (ptr Eq_1040) Eq_225) bp, Register (memptr Eq_3 byte) di, Register Eq_3 ds, Register out Eq_308 dxOut, Register out Eq_309 bxOut, Register out Eq_310 diOut, Register out (ptr Eq_311) esOut)
Eq_3 fn0800_0B48(byte al, Eq_225 Eq_1040::*bp, byte Eq_3::*di, Eq_3 ds, Eq_308 & dxOut, Eq_309 & bxOut, Eq_310 & diOut, Eq_311 * & esOut)
{
	*dxOut = dx;
	*bxOut = bx;
	*esOut = es;
	ds->*di = al;
	ci8 v9_9 = ss->*(bp - 0x55) - 0x01;
	ss->*(bp - 0x55) = v9_9;
	word16 di_6;
	*diOut = di + 0x01;
	if (v9_9 <= 0x00)
		return cx;
	word16 dx_21;
	word16 bx_22;
	word16 di_23;
	struct Eq_1062 * es_24;
	return fn0800_0B50(bp, di + 0x01, out dx_21, out bx_22, out di_23, out es_24);
}

// 0800:0B50: Register word16 fn0800_0B50(Register (memptr (ptr Eq_1040) Eq_225) bp, Register (memptr Eq_3 byte) di, Register out ptr16 dxOut, Register out Eq_228 bxOut, Register out Eq_229 diOut, Register out (ptr Eq_230) esOut)
word16 fn0800_0B50(Eq_225 Eq_1040::*bp, byte Eq_3::*di, ptr16 & dxOut, Eq_228 & bxOut, Eq_229 & diOut, Eq_230 * & esOut)
{
	struct Eq_1071 Eq_1073::* sp_30;
	word16 bx_31;
	struct Eq_1073 * ss_32;
	word16 cx_33;
	word16 dx_34;
	struct Eq_1076 * es_35;
	union Eq_1093 Eq_1073::* bp_36;
	word16 ax_37;
	word16 di_38;
	byte SCZO_39;
	struct Eq_1081 * cs_40;
	byte SZO_41;
	byte C_42;
	byte Z_43;
	(cs->*(ss->*bp).ptr000A)();
	if (ax_37 == 0x00)
		(ss_32->*(bp_36 - 0x02)).u1 = 0x01;
	(ss_32->*(bp_36 - 0x55)).u0 = 0x50;
	(ss_32->*(bp_36 - 88)).u1 = (word16) (ss_32->*(bp_36 - 88)).u1 + di_38;
	word16 di_52;
	*diOut = bp_36 - 0x54;
	struct Eq_1114 * es_53;
	*esOut = (ss_32->*sp_30).ptr0000;
	word16 dx_55;
	*dxOut = (ss_32->*sp_30).w0002;
	word16 cx_57 = (ss_32->*sp_30).w0004;
	word16 bx_59;
	*bxOut = (ss_32->*sp_30).w0006;
	return cx_57;
}

