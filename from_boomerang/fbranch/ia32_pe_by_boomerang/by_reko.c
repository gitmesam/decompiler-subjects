// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_text.h"

// 00401000: Register word32 fn00401000(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ebpOut, Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
word32 fn00401000(Eq_3 ebx, Eq_3 esi, Eq_3 edi, ptr32 & ebpOut, ptr32 & ediOut)
{
	ptr32 edi_24;
	Eq_3 ebx_22 = fn00401114(ebx, esi, edi, out edi_24);
	struct Eq_18 * ebp_108 = fn004010E3(ebx_22, 0x0040B044);
	if ((real64) ebp_108->rFFFFFFFC == (real64) ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B058);
	if ((real64) ebp_108->rFFFFFFFC != (real64) ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B060);
	if ((real64) ebp_108->rFFFFFFFC > ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B06C);
	if ((real64) ebp_108->rFFFFFFFC <= ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B078);
	if ((real64) ebp_108->rFFFFFFFC >= ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B088);
	if ((real64) ebp_108->rFFFFFFFC < ebp_108->tFFFFFFF8)
		ebp_108 = fn004010E3(ebx_22, 0x0040B09C);
	ebpOut = ebp_108->ptr0000;
	ediOut = edi_24;
	return 0x00;
}

// 004010E3: Register word32 fn004010E3(Register Eq_3 ebx, Stack Eq_3 dwArg04)
// Called from:
//      fn00401000
word32 fn004010E3(Eq_3 ebx, Eq_3 dwArg04)
{
	word32 edi_37;
	word32 ebp_34 = fn004014C0(ebx, 0x0040B0E8, fn0040136E(&g_t40B0E8), dwArg04, out edi_37);
	fn004013F6(edi_37, 0x0040B0E8);
	return ebp_34;
}

// 00401114: Register Eq_3 fn00401114(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ediOut)
// Called from:
//      fn00401000
Eq_3 fn00401114(Eq_3 ebx, Eq_3 esi, Eq_3 edi, ptr32 & ediOut)
{
	ptr32 edi_20;
	Eq_3 ebx_18 = fn00401DBC(ebx, esi, edi, out edi_20);
	ediOut = edi_20;
	return ebx_18;
}

// 00401182: Register word32 fn00401182(Register Eq_3 ebx, Register Eq_3 edi, Stack Eq_3 dwArg04)
// Called from:
//      Win32CrtStartup
word32 fn00401182(Eq_3 ebx, Eq_3 edi, Eq_3 dwArg04)
{
	if (g_dw40BA30 != 0x02)
		fn00403391(ebx, edi);
	fn0040321A(ebx, edi, dwArg04);
	word32 eax_38;
	g_ptr40B0B8();
	return eax_38;
}

// 004011A7: Register Eq_3 Win32CrtStartup()
Eq_3 Win32CrtStartup()
{
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x18);
	fn00403D30(0x94, dwLoc0C);
	Eq_3 esp_21 = <invalid>;
	ebp_13->tFFFFFFE8 = esp_21;
	*esp_21 = 0x94;
	*((word32) esp_21 - 4) = esp_21;
	GetVersionExA(*((word32) esp_21 - 4));
	Eq_3 ecx_33 = *((word32) esp_21 + 16);
	g_t40BA5C = ecx_33;
	Eq_199 eax_35 = *((word32) esp_21 + 4);
	g_t40BA68 = eax_35;
	Eq_3 edx_37 = *((word32) esp_21 + 8);
	g_t40BA6C = edx_37;
	Eq_3 esi_39 = *((word32) esp_21 + 0x0C);
	g_t40BA60 = esi_39 & 0x7FFF;
	Eq_3 esi_144 = esi_39 & 0x7FFF;
	if (ecx_33 != 0x02)
	{
		esi_144 = esi_39 & 0x7FFF | 0x8000;
		g_t40BA60 = esi_144;
	}
	g_dw40BA64 = (word32) edx_37 + (eax_35 << 0x08);
	((word32) esp_21 - 4)->u0 = 0x00;
	Eq_232 eax_57 = GetModuleHandleA(*((word32) esp_21 - 4));
	if (eax_57->unused != 23117)
	{
l00401240:
		ebp_13->tFFFFFFE4.u0 = 0x00;
		goto l0040126C;
	}
	else
	{
		struct Eq_254 * ecx_62 = eax_57 + (&eax_57->unused)[0x0F] / 4;
		if (ecx_62->dw0000 != 0x4550)
			goto l00401240;
		bool Z_78;
		word32 eax_65 = (word32) ecx_62->w0018;
		if (eax_65 != 0x010B)
		{
			if (eax_65 != 0x020B || ecx_62->dw0084 <= 0x0E)
				goto l00401240;
			Z_78 = SLICE(cond(ecx_62->dw00F8), bool, 2);
		}
		else
		{
			if (ecx_62->dw0074 <= 0x0E)
				goto l00401240;
			Z_78 = SLICE(cond(ecx_62->dw00E8), bool, 2);
		}
		ebp_13->tFFFFFFE4 = (uint32) (uint8) Z_78;
l0040126C:
		((word32) esp_21 - 4)->u0 = 0x00;
		if (fn00403B7F(*((word32) esp_21 - 4)) != 0x00)
		{
			struct Eq_297 * ebp_147;
			Eq_3 edi_150;
			Eq_3 esi_151;
			Eq_3 ebx_148 = fn00403ADD(ebx, esi_144, 0x00, out ebp_147, out esi_151, out edi_150);
			ebp_147->tFFFFFFFC = edi_150;
			if (fn00403932() < 0x00)
			{
				((word32) esp_21 - 4)->u0 = 0x1B;
				fn00401182(ebx_148, edi_150, *((word32) esp_21 - 4));
			}
			g_t40D004 = GetCommandLineA();
			ui32 ecx_182;
			g_t40BA28 = fn00403810(out ecx_182);
			Eq_3 eax_191 = fn0040376E(ecx_182, ebx_148, esi_151);
			if (eax_191 < 0x00)
			{
				((word32) esp_21 - 4)->u0 = 0x08;
				eax_191 = fn00401182(ebx_148, edi_150, *((word32) esp_21 - 4));
			}
			if (fn0040353B(eax_191, esi_151, edi_150) < 0x00)
			{
				((word32) esp_21 - 4)->u0 = 0x09;
				fn00401182(ebx_148, edi_150, *((word32) esp_21 - 4));
			}
			((word32) esp_21 - 4)->u0 = 0x01;
			Eq_3 edi_248;
			Eq_3 esi_250;
			Eq_3 eax_246 = fn004030AF(esi_151, edi_150, *((word32) esp_21 - 4), out esi_250, out edi_248);
			ebp_147->tFFFFFFDC = eax_246;
			if (eax_246 != edi_248)
			{
				*((word32) esp_21 - 4) = eax_246;
				fn00401182(ebx_148, edi_248, *((word32) esp_21 - 4));
			}
			Eq_3 eax_277 = g_t40BA7C;
			g_t40BA80 = eax_277;
			*((word32) esp_21 - 4) = eax_277;
			*((word32) esp_21 - 8) = g_t40BA74;
			*((word32) esp_21 - 0x0C) = g_dw40BA70;
			struct Eq_154 * ebp_293;
			Eq_3 edi_296;
			Eq_3 eax_292 = fn00401000(ebx_148, esi_250, edi_248, out ebp_293, out edi_296);
			ebp_293->tFFFFFFD8 = eax_292;
			Eq_3 esp_299 = <invalid>;
			if (ebp_293->tFFFFFFE4 == edi_296)
			{
				*((word32) esp_299 + 8) = eax_292;
				fn004031DA(*((word32) esp_299 + 8));
			}
			fn004031FC();
			ebp_293->tFFFFFFFC |= ~0x00;
			word32 ebp_332;
			word32 edi_335;
			word32 esi_336;
			fn00403C0B(ebp_293, ebp_293->tFFFFFFC8, out ebp_332, out esi_336, out edi_335);
			return eax_292;
		}
		else
		{
			if (g_dw40BA30 != 0x02)
				fn00403391(ebx, 0x00);
			((word32) esp_21 - 4)->u0 = 0x1C;
			fn0040321A(ebx, 0x00, *((word32) esp_21 - 4));
			((word32) esp_21 - 8)->u0 = 0xFF;
			fn0040307F();
		}
	}
}

// 0040136E: Register word32 fn0040136E(Stack (ptr32 Eq_110) dwArg04)
// Called from:
//      fn004010E3
word32 fn0040136E(struct Eq_110 * dwArg04)
{
	if (fn00403DF1(dwArg04->t0010) == 0x00)
		return 0x00;
	ui32 eax_28;
	if (dwArg04 == &g_t40B0E8)
		eax_28 = 0x00;
	else
	{
		if (dwArg04 != &g_t40B108)
			return 0x00;
		eax_28 = 0x01;
	}
	++g_dw40BA3C;
	if ((dwArg04->w000C & 0x010C) != 0x00)
		return 0x00;
	union Eq_3 * edi_57 = eax_28 * 0x04 + 0x0040BA34;
	if (*edi_57 == 0x00)
	{
		Eq_3 eax_63 = fn00403DDF(0x1000);
		*edi_57 = (union Eq_3 *) eax_63;
		if (eax_63 == 0x00)
		{
			dwArg04->t0008 = (char *) &dwArg04->t0010 + 4;
			dwArg04->t0000 = (char *) &dwArg04->t0010 + 4;
			dwArg04->dw0018 = 0x02;
			dwArg04->dw0004 = 0x02;
l004013E5:
			dwArg04->w000C |= 0x1102;
			return 0x01;
		}
	}
	Eq_3 edi_78 = *edi_57;
	dwArg04->t0008 = edi_78;
	dwArg04->t0000 = edi_78;
	dwArg04->dw0018 = 0x1000;
	dwArg04->dw0004 = 0x1000;
	goto l004013E5;
}

// 004013F6: void fn004013F6(Stack word32 dwArg04, Stack Eq_3 dwArg08)
// Called from:
//      fn004010E3
void fn004013F6(word32 dwArg04, Eq_3 dwArg08)
{
	if (dwArg04 == 0x00)
	{
		if ((*((word32) dwArg08 + 0x0D) & 0x10) == 0x00)
			return;
		fn00403E18(dwArg08);
	}
	else
	{
		if ((*((word32) dwArg08 + 0x0D) & 0x10) == 0x00)
			return;
		fn00403E18(dwArg08);
		((word32) dwArg08 + 0x0D)->u0 = *((word32) dwArg08 + 0x0D) & ~0x11;
		*((word32) dwArg08 + 24) &= 0x00;
		*dwArg08 &= 0x00;
		*((word32) dwArg08 + 8) &= 0x00;
	}
}

// 004014C0: Register ptr32 fn004014C0(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Stack Eq_3 dwArg08, Register out Eq_3 ediOut)
// Called from:
//      fn004010E3
ptr32 fn004014C0(Eq_3 ebx, Eq_3 esi, Eq_3 edi, Eq_3 dwArg08, union Eq_3 & ediOut)
{
	word24 ebx_24_8_110 = SLICE(ebx, word24, 8);
	Eq_3 eax_9 = g_t40B498;
	Eq_656 bl_19 = *dwArg08;
	struct Eq_682 * ecx_20 = null;
	if (bl_19 != 0x00)
	{
		Eq_3 edi_30 = dwArg08;
		word32 ebx_195 = SEQ(ebx_24_8_110, bl_19);
		while (true)
		{
			ci8 bl_38 = (byte) ebx_195;
			Eq_3 edi_32 = (word32) edi_30 + 1;
			if (false)
				break;
			ui32 eax_43;
			if (bl_38 >= 0x20 && bl_38 <= 0x78)
				eax_43 = (int32) ((int32) bl_38 + 0x004090C8) & 0x0F;
			else
				eax_43 = 0x00;
			word24 ebx_24_8_111 = SLICE(ebx_195, word24, 8);
			int32 eax_57 = (int32) ecx_20->a4090E8[eax_43].b0000;
			if (eax_57 >> 0x04 <= 0x07)
			{
				(*((char *) g_a401C9A + (eax_57 >> 0x04) * 0x04))();
				ediOut = edi_32;
				return fp - 0x01D8;
			}
			edi_30 = edi_32;
			byte bl_72 = *edi_32;
			if (bl_72 == 0x00)
				break;
			ecx_20 = eax_57 >> 0x04;
			ebx_195 = SEQ(ebx_24_8_111, bl_72);
		}
	}
	fn004041A2(eax_9, ebx, esi, edi);
	ediOut = edi;
	return ebp;
}

// 00401D74: Register Eq_3 fn00401D74(Register Eq_3 eax)
// Called from:
//      fn00401DBC
Eq_3 fn00401D74(Eq_3 eax)
{
	Eq_3 eax_14;
	Eq_3 esi_10 = eax;
	if (g_t40B4A0 > 0x01)
		eax_14 = fn00404318(eax, 0x04);
	else
		eax_14 = (word32) g_ptr40B490[eax].t0000 & 0x04;
	if (eax_14 == 0x00)
		esi_10 = (eax & ~0x20) - 0x07;
	return esi_10;
}

// 00401DA6: Register word32 fn00401DA6(Register Eq_3 edx)
// Called from:
//      fn00401DBC
word32 fn00401DA6(Eq_3 edx)
{
	Eq_199 v4_6 = *((word32) edx + 4) - 0x01;
	*((word32) edx + 4) = v4_6;
	if (v4_6 < 0x00)
		return fn00404396(edx);
	byte * ecx_21 = *edx;
	word32 eax_22 = (word32) *ecx_21;
	*edx = ecx_21 + 1;
	return eax_22;
}

// 00401DBC: Register Eq_3 fn00401DBC(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ediOut)
// Called from:
//      fn00401114
Eq_3 fn00401DBC(Eq_3 ebx, Eq_3 esi, Eq_3 edi, ptr32 & ediOut)
{
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x01CC);
	ebp_13->tFFFFFFE4 = g_t40B498;
	ebp_13->tFFFFFE44.u0 = 0x00;
	ebp_13->dwFFFFFE28 = 0x00;
	ebp_13->tFFFFFE50.u0 = 0x00;
	ebp_13->tFFFFFE6C.u0 = 0x00;
	ebp_13->bFFFFFE6B = 0x00;
	ebp_13->dwFFFFFE7C = 0x00;
	ebp_13->dwFFFFFE48 = 0x00;
	Eq_3 esp_117 = fp - 8;
l00401DFF:
	Eq_3 esi_1047 = ebp_13->t000C;
l00401E02:
	byte al_36 = *esi_1047;
	if (al_36 == 0x00)
	{
l00402BDC:
		struct Eq_154 * ebp_1942 = ebp_13;
		if (ebp_13->dwFFFFFE28 == 0x01)
		{
			union Eq_3 * esp_1965 = esp_117 - 4;
			*esp_1965 = (union Eq_3 *) ebp_13->tFFFFFE44;
			fn0040403C(*esp_1965, out ebx, out ebp_1942, out edi);
		}
		word32 eax_1981 = ebp_1942->dwFFFFFE48;
		byte al_1987 = (byte) eax_1981;
		if (ebp_1942->tFFFFFE6C == ~0x00 && eax_1981 == 0x00)
			ebp_1942->bFFFFFE6B != al_1987;
		fn004041A2(ebp_1942->tFFFFFFE4, ebx, esi_1047, edi);
		word32 ebp_2769;
		word32 esi_2770;
		ptr32 edi_2166;
		Eq_3 ebx_2164 = fn00403C0B(ebp_1942, ebp_1942->tFFFFFE14, out ebp_2769, out esi_2770, out edi_2166);
		ediOut = edi_2166;
		return ebx_2164;
	}
	Eq_3 eax_45;
	Eq_3 eax_40 = (word32) al_36;
	if (g_t40B4A0 > 0x01)
	{
		struct Eq_866 * esp_49 = esp_117 - 4;
		esp_49->dw0000 = 0x08;
		esp_49->tFFFFFFFC = eax_40;
		eax_45 = fn00404318(esp_49->tFFFFFFFC, esp_49->dw0000);
	}
	else
		eax_45 = (word32) g_ptr40B490[eax_40].t0000 & 0x08;
	edi.u0 = 0x00;
	if (eax_45 != 0x00)
	{
		--ebp_13->dwFFFFFE7C;
		do
		{
			++ebp_13->dwFFFFFE7C;
			Eq_3 eax_2178 = fn00401DA6(ebp_13->t0008);
			struct Eq_954 * esp_2186 = esp_117 - 4;
			esp_2186->t0000 = eax_2178;
			Eq_3 eax_2188 = fn004044E0(esp_2186->t0000);
		} while (eax_2188 != 0x00);
		if (eax_2178 != ~0x00)
		{
			esp_2186->t0000 = ebp_13->t0008;
			esp_2186->tFFFFFFFC = eax_2178;
			fn00404474(eax_2188, esp_2186->tFFFFFFFC, esp_2186->t0000);
		}
		do
		{
			ebp_13->t000C = (word32) ebp_13->t000C + 1;
			union Eq_3 * esp_2225 = esp_117 - 4;
			*esp_2225 = (word32) *ebp_13->t000C;
			esp_117 = (char *) esp_2225 + 4;
		} while (fn004044E0(*esp_2225) != 0x00);
		goto l00401DFF;
	}
	Eq_3 eax_100;
	bool Z_1870;
	esi_1047 = ebp_13->t000C;
	if (*esi_1047 != 0x25)
	{
		++ebp_13->dwFFFFFE7C;
		Eq_3 eax_77 = fn00401DA6(ebp_13->t0008);
		ebp_13->tFFFFFE6C = eax_77;
		eax_100 = (word32) *esi_1047;
		ebp_13->t000C = (word32) esi_1047 + 1;
		byte bl_90 = (byte) eax_77;
		esi_1047 = (word32) esi_1047 + 1;
		if (eax_100 == eax_77)
		{
			ebx = eax_77;
			if ((g_ptr40B490[(word32) bl_90].b0001 & 0x80) == 0x00)
				goto l00402BBD;
			++ebp_13->dwFFFFFE7C;
			eax_100 = fn00401DA6(ebp_13->t0008);
			Eq_3 ecx_106 = (word32) *((word32) esi_1047 + 1);
			ebp_13->t000C = (word32) esi_1047 + 2;
			esi_1047 = (word32) esi_1047 + 2;
			if (ecx_106 == eax_100)
			{
				--ebp_13->dwFFFFFE7C;
				goto l00402BBD;
			}
			if (eax_100 != ~0x00)
			{
				struct Eq_1335 * esp_118 = esp_117 - 4;
				esp_118->t0000 = ebp_13->t0008;
				esp_118->tFFFFFFFC = eax_100;
				eax_100 = fn00404474(eax_100, esp_118->tFFFFFFFC, esp_118->t0000);
			}
		}
		ebx = eax_77;
		Z_1870 = SLICE(cond(eax_77 - ~0x00), bool, 2);
		goto l00402BA3;
	}
	ebp_13->dwFFFFFE60 = 0x00;
	ebp_13->bFFFFFE68 = 0x00;
	ebp_13->dwFFFFFE64 = 0x00;
	ebp_13->dwFFFFFE4C = 0x00;
	ebp_13->tFFFFFE74.u0 = 0x00;
	ebp_13->bFFFFFE5F = 0x00;
	ebp_13->bFFFFFE69 = 0x00;
	ebp_13->bFFFFFE72 = 0x00;
	ebp_13->bFFFFFE83 = 0x00;
	ebp_13->bFFFFFE6A = 0x00;
	ebp_13->bFFFFFE7B = 0x00;
	ebp_13->bFFFFFE73 = 0x01;
	ebp_13->dwFFFFFE38 = 0x00;
	do
	{
		esi_1047 = (word32) esi_1047 + 1;
		int32 ebx_153 = (word32) *esi_1047;
		Eq_3 eax_155 = (word32) (byte) ebx_153;
		if (g_t40B4A0 > 0x01)
		{
			struct Eq_1137 * esp_164 = esp_117 - 4;
			esp_164->dw0000 = 0x04;
			esp_164->tFFFFFFFC = eax_155;
			eax_100 = fn00404318(esp_164->tFFFFFFFC, esp_164->dw0000);
		}
		else
			eax_100 = (word32) g_ptr40B490[eax_155].t0000 & 0x04;
		if (eax_100 != 0x00)
		{
			++ebp_13->dwFFFFFE4C;
			eax_100 = edi * 0x05;
			edi = ebx_153 - 0x30 + eax_100 * 0x02;
			goto l00401FDE;
		}
		if (ebx_153 <= 0x4E)
		{
			if (ebx_153 == 0x4E)
				goto l00401FDE;
			if (ebx_153 != 0x2A)
			{
				if (ebx_153 == 0x46)
					goto l00401FDE;
				if (ebx_153 != 0x49)
				{
					if (ebx_153 != 0x4C)
						goto l00401FBC;
					++ebp_13->bFFFFFE73;
					goto l00401FDE;
				}
				byte cl_218 = *((word32) esi_1047 + 1);
				if (cl_218 == 0x36)
				{
					eax_100 = (word32) esi_1047 + 2;
					if (*((word32) esi_1047 + 2) != 0x34)
						goto l00401F79;
					++ebp_13->dwFFFFFE38;
					ebp_13->tFFFFFE54 &= 0x00;
					ebp_13->dwFFFFFE58 &= 0x00;
					esi_1047 = (word32) esi_1047 + 2;
					goto l00401FDE;
				}
l00401F79:
				if (cl_218 == 0x33)
				{
					eax_100 = (word32) esi_1047 + 2;
					if (*((word32) esi_1047 + 2) != 0x32)
						goto l00401F8A;
					esi_1047 = (word32) esi_1047 + 2;
					goto l00401FDE;
				}
l00401F8A:
				if (cl_218 != 100 && (cl_218 != 0x69 && (cl_218 != 111 && (cl_218 != 0x78 && cl_218 != 88))))
					goto l00401FBC;
			}
			else
				++ebp_13->bFFFFFE72;
			goto l00401FDE;
		}
		if (ebx_153 != 0x68)
		{
			if (ebx_153 != 0x6C)
			{
				if (ebx_153 == 0x77)
					goto l00401FCA;
l00401FBC:
				++ebp_13->bFFFFFE83;
			}
			else
			{
				++ebp_13->bFFFFFE73;
l00401FCA:
				++ebp_13->bFFFFFE7B;
			}
		}
		else
		{
			--ebp_13->bFFFFFE73;
			--ebp_13->bFFFFFE7B;
		}
l00401FDE:
	} while (ebp_13->bFFFFFE83 == 0x00);
	ebp_13->tFFFFFE74 = edi;
	ebp_13->t000C = esi_1047;
	if (ebp_13->bFFFFFE72 == 0x00)
	{
		Eq_3 eax_292 = ebp_13->t0010;
		ebp_13->tFFFFFE24 = eax_292;
		ebp_13->t0010 = (word32) eax_292 + 4;
		ebx = *eax_292;
		ebp_13->tFFFFFE50 = ebx;
		eax_100 = (word32) eax_292 + 4;
	}
	else
		ebx = ebp_13->tFFFFFE50;
	ebp_13->bFFFFFE83 = 0x00;
	word24 eax_24_8_631 = SLICE(eax_100, word24, 8);
	if (ebp_13->bFFFFFE7B == 0x00)
	{
		byte al_304 = *esi_1047;
		eax_100 = SEQ(eax_24_8_631, al_304);
		if (al_304 == 0x53)
		{
l0040203E:
			ebp_13->bFFFFFE7B = 0x01;
			goto l00402045;
		}
		ebp_13->bFFFFFE7B = ~0x00;
		eax_100 = SEQ(eax_24_8_631, al_304);
		if (al_304 == 0x43)
			goto l0040203E;
	}
l00402045:
	ui32 edi_315 = (word32) *esi_1047;
	ebp_13->tFFFFFE40 = edi_315 | 0x20;
	edi = edi_315 | 0x20;
	if ((edi_315 | 0x20) != 110)
	{
		if ((edi_315 | 0x20) != 99 && (edi_315 | 0x20) != 0x7B)
		{
			do
			{
				++ebp_13->dwFFFFFE7C;
				Eq_3 eax_344 = fn00401DA6(ebp_13->t0008);
				*((word32) esp_117 - 4) = eax_344;
				eax_100 = fn004044E0(*((word32) esp_117 - 4));
			} while (eax_100 != 0x00);
			ebp_13->tFFFFFE6C = eax_344;
			esi_1047 = ebp_13->t000C;
		}
		else
		{
			++ebp_13->dwFFFFFE7C;
			eax_100 = fn00401DA6(ebp_13->t0008);
			ebp_13->tFFFFFE6C = eax_100;
		}
	}
	word32 ecx_369 = ebp_13->dwFFFFFE4C;
	if (ecx_369 != 0x00 && ebp_13->tFFFFFE74 == 0x00)
	{
l004023DD:
		Z_1870 = SLICE(cond(ebp_13->tFFFFFE6C - ~0x00), bool, 2);
l00402BA3:
		if (!Z_1870)
		{
			struct Eq_1574 * esp_1882 = esp_117 - 4;
			esp_1882->t0000 = ebp_13->t0008;
			esp_1882->tFFFFFFFC = ebp_13->tFFFFFE6C;
			fn00404474(eax_100, esp_1882->tFFFFFFFC, esp_1882->t0000);
			esp_117 = (char *) &esp_1882->t0000 + 4;
		}
		goto l00402BDC;
	}
	ui32 eax_1849;
	if ((edi_315 | 0x20) > 111)
	{
		ui32 eax_382 = (edi_315 | 0x20) - 0x70;
		if (eax_382 != 0x00)
		{
			eax_100 = eax_382 - 0x03;
			if (eax_382 == 0x03)
				goto l00402393;
			if (eax_382 != 0x05)
			{
				if (eax_382 == 0x08)
					goto l00402106;
				if (eax_382 != 11)
				{
l004023D2:
					eax_100 = (word32) *esi_1047;
					if (eax_100 != ebp_13->tFFFFFE6C)
						goto l004023DD;
					--ebp_13->bFFFFFE6B;
					if (ebp_13->bFFFFFE72 == 0x00)
						ebp_13->t0010 = ebp_13->tFFFFFE24;
l00402B38:
					++ebp_13->bFFFFFE6B;
					ebp_13->t000C = (word32) ebp_13->t000C + 1;
					esi_1047 = ebp_13->t000C;
l00402BBD:
					if (ebp_13->tFFFFFE6C == ~0x00)
					{
						if (*esi_1047 != 0x25 || *((word32) ebp_13->t000C + 1) != 110)
							goto l00402BDC;
						goto l00401DFF;
					}
					goto l00401E02;
				}
				if (ebp_13->bFFFFFE7B > 0x00)
					ebp_13->bFFFFFE6A = 0x01;
				Eq_3 edi_406 = ebp_13->t000C;
				ebp_13->t000C = (word32) edi_406 + 1;
				ebp_13->ptrFFFFFE30 = (word32) edi_406 + 1;
				edi = (word32) edi_406 + 1;
				if (*((word32) edi_406 + 1) == 0x5E)
				{
					ebp_13->ptrFFFFFE30 = (word32) edi_406 + 2;
					ebp_13->bFFFFFE5F = ~0x00;
					edi = (word32) edi_406 + 2;
				}
				Eq_3 ebx_418 = ebp_13->tFFFFFE44;
				if (ebx_418 == 0x00)
				{
					ebp_13->tFFFFFFFC &= ebx_418;
					union Eq_3 * esp_440 = esp_117 - 4;
					*esp_440 = (union Eq_3 *) 0x20;
					fn00403D30(*esp_440, *esp_440);
					esp_117.u0 = <invalid>;
					ebp_13->tFFFFFFE8 = esp_117;
					ebp_13->tFFFFFE44 = esp_117;
					ebp_13->tFFFFFFFC |= ~0x00;
					ebx_418 = esp_117;
				}
				cu8 dl_480;
				struct Eq_2937 * esp_458 = esp_117 - 4;
				esp_458->t0000.u0 = 0x20;
				esp_458->tFFFFFFFC.u0 = 0x00;
				esp_458->tFFFFFFF8 = ebx_418;
				word24 eax_24_8_636 = SLICE(fn004045E0(esp_458->tFFFFFFF8, esp_458->tFFFFFFFC, esp_458->t0000), word24, 8);
				if (ebp_13->tFFFFFE40 == 0x7B && *edi == 0x5D)
				{
					((word32) ebx_418 + 11)->u0 = 0x20;
					dl_480 = 0x5D;
					edi = (word32) edi + 1;
				}
				else
				{
l0040252E:
					dl_480 = ebp_13->bFFFFFE68;
				}
				while (true)
				{
					esp_117 = (char *) &esp_458->t0000 + 4;
					ebx = ebx_418;
					cu8 al_486 = *edi;
					if (al_486 == 0x5D)
						break;
					edi = (word32) edi + 1;
					if (al_486 != 0x2D || dl_480 == 0x00)
					{
l00402515:
						ebp_13->bFFFFFE68 = al_486;
						uint32 ecx_503 = (word32) al_486;
						byte * eax_508 = (word32) ebx_418 + (ecx_503 >> 0x03);
						*eax_508 |= 0x01 << (byte) (ecx_503 & 0x07);
						eax_24_8_636 = SLICE(eax_508, word24, 8);
						goto l0040252E;
					}
					cu8 cl_496 = *edi;
					if (cl_496 == 0x5D)
						goto l00402515;
					cu8 al_523;
					edi = (word32) edi + 1;
					if (dl_480 < cl_496)
						al_523 = cl_496;
					else
					{
						al_523 = dl_480;
						dl_480 = cl_496;
					}
					if (dl_480 <= al_523)
					{
						ebp_13->dwFFFFFE2C = (word32) (al_523 - dl_480 + 0x01);
						esi_1047 = (word32) dl_480;
						do
						{
							byte * eax_542 = (word32) ebx_418 + (esi_1047 >> 0x03);
							*eax_542 |= 0x01 << (byte) (esi_1047 & 0x07);
							word32 v98_555 = ebp_13->dwFFFFFE2C - 0x01;
							ebp_13->dwFFFFFE2C = v98_555;
							eax_24_8_636 = SLICE(eax_542, word24, 8);
							esi_1047 = (word32) esi_1047 + 1;
						} while (v98_555 != 0x00);
					}
					dl_480 = 0x00;
				}
				eax_100 = SEQ(eax_24_8_636, al_486);
				if (al_486 == 0x00)
					goto l00402BDC;
				ebx = ebp_13->tFFFFFE50;
				if (ebp_13->tFFFFFE40 == 0x7B)
					ebp_13->t000C = edi;
				edi = ebp_13->tFFFFFE40;
l0040255A:
				--ebp_13->dwFFFFFE7C;
				esi_1047 = ebx;
				if (ebp_13->tFFFFFE6C != ~0x00)
				{
					struct Eq_2718 * esp_615 = esp_117 - 4;
					esp_615->t0000 = ebp_13->t0008;
					esp_615->tFFFFFFFC = ebp_13->tFFFFFE6C;
					fn00404474(eax_100, esp_615->tFFFFFFFC, esp_615->t0000);
				}
l0040257B:
				if (ebp_13->dwFFFFFE4C != 0x00)
				{
					Eq_3 eax_659 = ebp_13->tFFFFFE74;
					--ebp_13->tFFFFFE74;
					if (eax_659 == 0x00)
						goto l00402780;
				}
				++ebp_13->dwFFFFFE7C;
				Eq_3 eax_671 = fn00401DA6(ebp_13->t0008);
				ebp_13->tFFFFFE6C = eax_671;
				byte al_785 = (byte) eax_671;
				al_785 = (byte) eax_671;
				al_785 = (byte) eax_671;
				if (eax_671 != ~0x00)
				{
					if (edi == 99 || (edi == 115 && (eax_671 < 0x09 || eax_671 > 0x0D)) && eax_671 != 0x20)
					{
l00402607:
						if (ebp_13->bFFFFFE72 == 0x00)
						{
							if (ebp_13->bFFFFFE6A != 0x00)
							{
								ebp_13->bFFFFFE3C = al_785;
								if ((g_ptr40B490[(word32) al_785].b0001 & 0x80) != 0x00)
								{
									++ebp_13->dwFFFFFE7C;
									ebp_13->bFFFFFE3D = (byte) fn00401DA6(ebp_13->t0008);
								}
								struct Eq_3059 * esp_815 = esp_117 - 4;
								esp_815->t0000 = g_t40B4A0;
								esp_815->tFFFFFFFC = ebp_13 - 0x01C4;
								esp_815->tFFFFFFF8 = ebp_13 - 0x01CC;
								fn00404509(esp_815->tFFFFFFF8, esp_815->tFFFFFFFC, esp_815->t0000);
								*ebx = ebp_13->wFFFFFE34;
								ebx = (word32) ebx + 2;
							}
							else
							{
								ebx->u0 = al_785;
								ebx = (word32) ebx + 1;
							}
							ebp_13->tFFFFFE50 = ebx;
						}
						else
							esi_1047.u0 = (byte) esi_1047.u0 + 1;
						goto l0040257B;
					}
					if (edi == 0x7B)
					{
						edi = (int32) ebp_13->bFFFFFE5F;
						if ((((int32) Mem677[(eax_671 >> 0x03) + Mem677[ebp_13 + -444:word32]:byte] ^ edi) & 0x01 << SLICE(eax_671 & 0x07, byte, 0)) != 0x00)
						{
							edi = ebp_13->tFFFFFE40;
							goto l00402607;
						}
					}
				}
				--ebp_13->dwFFFFFE7C;
				if (eax_671 != ~0x00)
				{
					struct Eq_3215 * esp_730 = esp_117 - 4;
					esp_730->t0000 = ebp_13->t0008;
					esp_730->tFFFFFFFC = eax_671;
					fn00404474(eax_671, esp_730->tFFFFFFFC, esp_730->t0000);
				}
l00402780:
				if (esi_1047 != ebx)
				{
					if (ebp_13->bFFFFFE72 == 0x00)
					{
						++ebp_13->dwFFFFFE48;
						if (ebp_13->tFFFFFE40 != 99)
						{
							Eq_3 eax_767 = ebp_13->tFFFFFE50;
							if (ebp_13->bFFFFFE6A != 0x00)
								eax_767->u0 = *eax_767 & 0x00;
							else
								eax_767->u0 = 0x00;
						}
					}
					goto l00402B38;
				}
				goto l00402BDC;
			}
		}
		else
			ebp_13->bFFFFFE73 = 0x01;
l004027CF:
		ebx = ebp_13->tFFFFFE6C;
		if (ebx == 0x2D)
			ebp_13->bFFFFFE69 = 0x01;
		else if (ebx != 0x2B)
			goto l00402813;
		Eq_3 v81_853 = ebp_13->tFFFFFE74 - 0x01;
		ebp_13->tFFFFFE74 = v81_853;
		if (v81_853 != 0x00 || ecx_369 == 0x00)
		{
			++ebp_13->dwFFFFFE7C;
			ebx = fn00401DA6(ebp_13->t0008);
			goto l0040280D;
		}
		ebp_13->bFFFFFE83 = 0x01;
l00402813:
		if (ebp_13->dwFFFFFE38 != 0x00)
		{
			if (ebp_13->bFFFFFE83 == 0x00)
			{
				esi_1047.u0 = 0x80;
				do
				{
					Eq_3 eax_1619;
					if (edi != 0x78 && edi != 0x70)
					{
						if (g_t40B4A0 > 0x01)
						{
							struct Eq_1895 * esp_1668 = esp_117 - 4;
							esp_1668->dw0000 = 0x04;
							esp_1668->tFFFFFFFC = ebx;
							eax_1619 = fn00404318(esp_1668->tFFFFFFFC, esp_1668->dw0000);
						}
						else
							eax_1619 = (word32) g_ptr40B490[ebx].t0000 & 0x04;
						if (eax_1619 == 0x00)
							goto l00402908;
						if (edi == 111)
						{
							if (ebx >= 0x38)
								goto l00402908;
							Eq_3 eax_1720 = ebp_13->tFFFFFE54;
							uint32 ecx_1722 = __shld(ebp_13->dwFFFFFE58, eax_1720, 0x03);
							ebp_13->tFFFFFE54 = eax_1720 << 0x03;
							ebp_13->dwFFFFFE58 = ecx_1722;
							eax_1619 = eax_1720 << 0x03;
						}
						else
						{
							struct Eq_1941 * esp_1690 = esp_117 - 4;
							esp_1690->dw0000 = 0x00;
							esp_1690->dwFFFFFFFC = 0x0A;
							esp_1690->dwFFFFFFF8 = ebp_13->dwFFFFFE58;
							esp_1690->tFFFFFFF4 = ebp_13->tFFFFFE54;
							uint32 edx_1703;
							eax_1619 = fn00404730(esp_1690->tFFFFFFF4, esp_1690->dwFFFFFFF8, esp_1690->dwFFFFFFFC, esp_1690->dw0000, out edx_1703);
							ebp_13->tFFFFFE54 = eax_1619;
							ebp_13->dwFFFFFE58 = edx_1703;
						}
					}
					else
					{
						if (g_t40B4A0 > 0x01)
						{
							struct Eq_2129 * esp_1624 = esp_117 - 4;
							esp_1624->dw0000 = 0x80;
							esp_1624->tFFFFFFFC = ebx;
							eax_1619 = fn00404318(esp_1624->tFFFFFFFC, esp_1624->dw0000);
						}
						else
							eax_1619 = (word32) g_ptr40B490[ebx].t0000 & 0x80;
						if (eax_1619 != 0x00)
						{
							Eq_3 eax_1646 = ebp_13->tFFFFFE54;
							uint32 ecx_1648 = __shld(ebp_13->dwFFFFFE58, eax_1646, 0x04);
							ebp_13->tFFFFFE54 = eax_1646 << 0x04;
							ebp_13->dwFFFFFE58 = ecx_1648;
							eax_1619 = fn00401D74(ebx);
							ebx = eax_1619;
						}
						else
						{
l00402908:
							++ebp_13->bFFFFFE83;
						}
					}
					if (ebp_13->bFFFFFE83 == 0x00)
					{
						++ebp_13->dwFFFFFE64;
						ui64 v53_v52_2369 = SEQ(ebp_13->dwFFFFFE58, ebp_13->tFFFFFE54) + (int64) (ebx - 0x30);
						ebp_13->tFFFFFE54 = (word32) v53_v52_2369;
						ebp_13->dwFFFFFE58 = SLICE(v53_v52_2369, word32, 32);
						if (ebp_13->dwFFFFFE4C != 0x00)
						{
							Eq_3 v54_1772 = ebp_13->tFFFFFE74 - 0x01;
							ebp_13->tFFFFFE74 = v54_1772;
							if (v54_1772 != 0x00)
								goto l00402947;
							ebp_13->bFFFFFE83 = 0x01;
						}
						else
						{
l00402947:
							++ebp_13->dwFFFFFE7C;
							ebx = fn00401DA6(ebp_13->t0008);
						}
					}
					else
					{
						--ebp_13->dwFFFFFE7C;
						if (ebx != ~0x00)
						{
							*((word32) esp_117 - 4) = ebp_13->t0008;
							*((word32) esp_117 - 8) = ebx;
							fn00404474(eax_1619, *((word32) esp_117 - 8), *((word32) esp_117 - 4));
						}
					}
				} while (ebp_13->bFFFFFE83 == 0x00);
				ebp_13->tFFFFFE6C = ebx;
			}
			if (ebp_13->bFFFFFE69 != 0x00)
			{
				Eq_3 eax_1801 = -ebp_13->tFFFFFE54;
				uint32 ecx_1805 = -(ebp_13->dwFFFFFE58 + (eax_1801 == 0x00));
				ebp_13->tFFFFFE54 = eax_1801;
				ebp_13->dwFFFFFE58 = ecx_1805;
			}
		}
		else
		{
			if (ebp_13->bFFFFFE83 == 0x00)
			{
				esi_1047.u0 = 0x80;
				do
				{
					Eq_3 eax_1446;
					if (edi != 0x78 && edi != 0x70)
					{
						if (g_t40B4A0 > 0x01)
						{
							struct Eq_2195 * esp_1491 = esp_117 - 4;
							esp_1491->dw0000 = 0x04;
							esp_1491->tFFFFFFFC = ebx;
							eax_1446 = fn00404318(esp_1491->tFFFFFFFC, esp_1491->dw0000);
						}
						else
							eax_1446 = (word32) g_ptr40B490[ebx].t0000 & 0x04;
						if (eax_1446 == 0x00)
							goto l00402A4F;
						if (edi == 111)
						{
							if (ebx >= 0x38)
								goto l00402A4F;
							ebp_13->dwFFFFFE60 <<= 0x03;
						}
						else
						{
							ui32 eax_1514 = ebp_13->dwFFFFFE60;
							ebp_13->dwFFFFFE60 = eax_1514 * 0x0A;
							eax_1446 = eax_1514 * 0x0A;
						}
					}
					else
					{
						if (g_t40B4A0 > 0x01)
						{
							struct Eq_2406 * esp_1451 = esp_117 - 4;
							esp_1451->dw0000 = 0x80;
							esp_1451->tFFFFFFFC = ebx;
							eax_1446 = fn00404318(esp_1451->tFFFFFFFC, esp_1451->dw0000);
						}
						else
							eax_1446 = (word32) g_ptr40B490[ebx].t0000 & 0x80;
						if (eax_1446 != 0x00)
						{
							ebp_13->dwFFFFFE60 <<= 0x04;
							eax_1446 = fn00401D74(ebx);
							ebx = eax_1446;
						}
						else
						{
l00402A4F:
							++ebp_13->bFFFFFE83;
						}
					}
					if (ebp_13->bFFFFFE83 == 0x00)
					{
						++ebp_13->dwFFFFFE64;
						ebp_13->dwFFFFFE60 = (word32) ebx + (ebp_13->dwFFFFFE60 - 0x30);
						if (ebp_13->dwFFFFFE4C != 0x00)
						{
							Eq_3 v66_1569 = ebp_13->tFFFFFE74 - 0x01;
							ebp_13->tFFFFFE74 = v66_1569;
							if (v66_1569 != 0x00)
								goto l00402A8E;
							ebp_13->bFFFFFE83 = 0x01;
						}
						else
						{
l00402A8E:
							++ebp_13->dwFFFFFE7C;
							ebx = fn00401DA6(ebp_13->t0008);
						}
					}
					else
					{
						--ebp_13->dwFFFFFE7C;
						if (ebx != ~0x00)
						{
							*((word32) esp_117 - 4) = ebp_13->t0008;
							*((word32) esp_117 - 8) = ebx;
							fn00404474(eax_1446, *((word32) esp_117 - 8), *((word32) esp_117 - 4));
						}
					}
				} while (ebp_13->bFFFFFE83 == 0x00);
				ebp_13->tFFFFFE6C = ebx;
			}
			if (ebp_13->bFFFFFE69 != 0x00)
				ebp_13->dwFFFFFE60 = -ebp_13->dwFFFFFE60;
		}
		if (edi == 0x46)
			ebp_13->dwFFFFFE64 &= 0x00;
		if (ebp_13->dwFFFFFE64 != 0x00)
		{
			if (ebp_13->bFFFFFE72 != 0x00)
				goto l00402B38;
			++ebp_13->dwFFFFFE48;
			ebx = ebp_13->tFFFFFE50;
			eax_1849 = ebp_13->dwFFFFFE60;
l00402B0C:
			Eq_1548 ax_1910 = (word16) eax_1849;
			if (ebp_13->dwFFFFFE38 != 0x00)
			{
				*ebx = ebp_13->tFFFFFE54;
				*((word32) ebx + 4) = ebp_13->dwFFFFFE58;
			}
			else if (ebp_13->bFFFFFE73 != 0x00)
				*ebx = eax_1849;
			else
				*ebx = ax_1910;
			goto l00402B38;
		}
		goto l00402BDC;
	}
	else
	{
		if ((edi_315 | 0x20) == 111)
			goto l004027CF;
		if ((edi_315 | 0x20) != 99)
		{
			if ((edi_315 | 0x20) != 100)
			{
				if ((edi_315 | 0x20) <= 100)
					goto l004023D2;
				if ((edi_315 | 0x20) > 0x67)
				{
					if ((edi_315 | 0x20) != 0x69)
					{
						if ((edi_315 | 0x20) == 110)
						{
							eax_1849 = ebp_13->dwFFFFFE7C;
							if (ebp_13->bFFFFFE72 != 0x00)
								goto l00402B38;
							goto l00402B0C;
						}
						goto l004023D2;
					}
					union Eq_3 * esp_1275 = esp_117 - 4;
					*esp_1275 = (union Eq_3 *) 100;
					edi = *esp_1275;
l00402106:
					ebx = ebp_13->tFFFFFE6C;
					if (ebx == 0x2D)
						ebp_13->bFFFFFE69 = 0x01;
					else if (ebx != 0x2B)
						goto l004026A8;
					Eq_3 v38_1289 = ebp_13->tFFFFFE74 - 0x01;
					ebp_13->tFFFFFE74 = v38_1289;
					if (v38_1289 == 0x00 && ecx_369 != 0x00)
						ebp_13->bFFFFFE83 = 0x01;
					else
					{
						++ebp_13->dwFFFFFE7C;
						Eq_3 eax_1304 = fn00401DA6(ebp_13->t0008);
						ebp_13->tFFFFFE6C = eax_1304;
						ebx = eax_1304;
					}
l004026A8:
					if (ebx != 0x30)
						goto l00402813;
					word32 * esp_1365;
					++ebp_13->dwFFFFFE7C;
					Eq_3 eax_1323 = fn00401DA6(ebp_13->t0008);
					ebp_13->tFFFFFE6C = eax_1323;
					byte bl_1331 = (byte) eax_1323;
					if (bl_1331 != 0x78)
					{
						ebx = eax_1323;
						if (bl_1331 != 88)
						{
							ebp_13->dwFFFFFE64 = 0x01;
							if (edi != 0x78)
							{
								if (ebp_13->dwFFFFFE4C != 0x00)
								{
									Eq_3 v40_1407 = ebp_13->tFFFFFE74 - 0x01;
									ebp_13->tFFFFFE74 = v40_1407;
									if (v40_1407 == 0x00)
										++ebp_13->bFFFFFE83;
								}
								esp_1365 = esp_117 - 4;
								*esp_1365 = 111;
								goto l004026F9;
							}
							--ebp_13->dwFFFFFE7C;
							if (eax_1323 != ~0x00)
							{
								struct Eq_1813 * esp_1381 = esp_117 - 4;
								esp_1381->t0000 = ebp_13->t0008;
								esp_1381->tFFFFFFFC = eax_1323;
								fn00404474(eax_1323, esp_1381->tFFFFFFFC, esp_1381->t0000);
							}
							union Eq_3 * esp_1397 = esp_117 - 4;
							*esp_1397 = (union Eq_3 *) 0x30;
							ebx = *esp_1397;
l0040280D:
							ebp_13->tFFFFFE6C = ebx;
							goto l00402813;
						}
					}
					++ebp_13->dwFFFFFE7C;
					Eq_3 eax_1342 = fn00401DA6(ebp_13->t0008);
					ebp_13->tFFFFFE6C = eax_1342;
					ebx = eax_1342;
					if (ebp_13->dwFFFFFE4C != 0x00)
					{
						ebp_13->tFFFFFE74 -= 0x02;
						if (ebp_13->tFFFFFE74 < 0x01)
							++ebp_13->bFFFFFE83;
					}
					esp_1365 = esp_117 - 4;
					*esp_1365 = 0x78;
l004026F9:
					edi = *esp_1365;
					esp_117 = esp_1365 + 1;
					goto l00402813;
				}
				Eq_3 edi_2263;
				Eq_3 ebx_1271 = ebp_13->tFFFFFE6C;
				esi_1047 = ebp_13 - 0x017C;
				byte bl_886 = (byte) ebx_1271;
				if (ebx_1271 == 0x2D)
				{
					ebp_13->bFFFFFE84 = bl_886;
					esi_1047 = ebp_13 - 0x017B;
				}
				else if (ebx_1271 != 0x2B)
				{
					edi_2263 = ebp_13->t0008;
l00402168:
					if (ebp_13->dwFFFFFE4C == 0x00 || ebp_13->tFFFFFE74 > 0x015D)
						ebp_13->tFFFFFE74.u0 = 0x015D;
					while (true)
					{
						Eq_3 eax_1001;
						if (g_t40B4A0 > 0x01)
						{
							struct Eq_2534 * esp_924 = esp_117 - 4;
							esp_924->dw0000 = 0x04;
							esp_924->tFFFFFFFC = ebx_1271;
							eax_1001 = fn00404318(esp_924->tFFFFFFFC, esp_924->dw0000);
						}
						else
							eax_1001 = (word32) g_ptr40B490[ebx_1271].t0000 & 0x04;
						Eq_2552 bl_953 = (byte) ebx_1271;
						if (eax_1001 == 0x00)
							break;
						eax_1001 = ebp_13->tFFFFFE74;
						--ebp_13->tFFFFFE74;
						if (eax_1001 == 0x00)
							break;
						++ebp_13->dwFFFFFE64;
						*esi_1047.u0 = bl_953;
						++ebp_13->dwFFFFFE7C;
						Eq_3 eax_1265 = fn00401DA6(edi_2263);
						ebp_13->tFFFFFE6C = eax_1265;
						esi_1047.u0 = (byte) esi_1047.u0 + 1;
						ebx_1271 = eax_1265;
					}
					ebx = ebx_1271;
					if (g_t40B4A4 == bl_953)
					{
						eax_1001 = ebp_13->tFFFFFE74;
						--ebp_13->tFFFFFE74;
						if (eax_1001 != 0x00)
						{
							++ebp_13->dwFFFFFE7C;
							ebx = fn00401DA6(edi_2263);
							*esi_1047.u0 = g_t40B4A4;
							esi_1047.u0 = (byte) esi_1047.u0 + 1;
							while (true)
							{
								ebp_13->tFFFFFE6C = ebx;
								Eq_2785 bl_1243 = (byte) ebx;
								if (g_t40B4A0 > 0x01)
								{
									*((word32) esp_117 - 4) = 0x04;
									*((word32) esp_117 - 8) = ebx;
									eax_1001 = fn00404318(*((word32) esp_117 - 8), *((word32) esp_117 - 4));
								}
								else
									eax_1001 = (word32) g_ptr40B490[ebx].t0000 & 0x04;
								if (eax_1001 == 0x00)
									break;
								eax_1001 = ebp_13->tFFFFFE74;
								--ebp_13->tFFFFFE74;
								if (eax_1001 == 0x00)
									break;
								++ebp_13->dwFFFFFE64;
								*esi_1047.u0 = bl_1243;
								++ebp_13->dwFFFFFE7C;
								esi_1047.u0 = (byte) esi_1047.u0 + 1;
								ebx = fn00401DA6(edi_2263);
							}
						}
					}
					Eq_3 esp_1097 = esp_117;
					if (ebp_13->dwFFFFFE64 == 0x00 || ebx != 101 && ebx != 0x45)
					{
l00402324:
						--ebp_13->dwFFFFFE7C;
						edi = edi_2263;
						if (ebx != ~0x00)
						{
							struct Eq_3406 * esp_1141 = esp_1097 - 4;
							esp_1141->t0000 = edi_2263;
							esp_1141->tFFFFFFFC = ebx;
							fn00404474(eax_1001, esp_1141->tFFFFFFFC, esp_1141->t0000);
						}
						esp_117 = esp_1097;
						if (ebp_13->dwFFFFFE64 != 0x00)
						{
							if (ebp_13->bFFFFFE72 == 0x00)
							{
								++ebp_13->dwFFFFFE48;
								esi_1047->u0 = 0x00;
								struct Eq_3466 * esp_1177 = esp_1097 - 4;
								esp_1177->ptr0000 = ebp_13 - 0x017C;
								esp_1177->tFFFFFFFC = ebp_13->tFFFFFE50;
								int32 eax_1182 = (int32) ebp_13->bFFFFFE73;
								esp_1177->dwFFFFFFF8 = eax_1182 - 0x01;
								word32 esp_1211;
								word32 edx_1214;
								g_ptr40B350();
								esp_117 = esp_1211 + 0x0C;
							}
							goto l00402B38;
						}
						goto l00402BDC;
					}
					eax_1001 = ebp_13->tFFFFFE74;
					--ebp_13->tFFFFFE74;
					if (eax_1001 == 0x00)
						goto l00402324;
					esi_1047->u0 = 101;
					++ebp_13->dwFFFFFE7C;
					Eq_3 eax_1060 = fn00401DA6(edi_2263);
					ebp_13->tFFFFFE6C = eax_1060;
					esi_1047 = (word32) esi_1047 + 1;
					Eq_3321 al_1072 = (byte) eax_1060;
					ebx = eax_1060;
					if (eax_1060 == 0x2D)
					{
						*esi_1047 = al_1072;
						esi_1047 = (word32) esi_1047 + 1;
					}
					else if (eax_1060 != 0x2B)
						goto l004022E4;
					Eq_3 eax_1078 = ebp_13->tFFFFFE74;
					--ebp_13->tFFFFFE74;
					if (eax_1078 != 0x00)
						goto l004022CF;
					ebp_13->tFFFFFE74 &= eax_1078;
l004022E4:
					Eq_3367 bl_1221 = (byte) ebx;
					if (g_t40B4A0 > 0x01)
					{
						struct Eq_3381 * esp_1098 = esp_1097 - 4;
						esp_1098->dw0000 = 0x04;
						esp_1098->tFFFFFFFC = ebx;
						eax_1001 = fn00404318(esp_1098->tFFFFFFFC, esp_1098->dw0000);
					}
					else
						eax_1001 = (word32) g_ptr40B490[ebx].t0000 & 0x04;
					if (eax_1001 != 0x00)
					{
						eax_1001 = ebp_13->tFFFFFE74;
						--ebp_13->tFFFFFE74;
						if (eax_1001 != 0x00)
						{
							++ebp_13->dwFFFFFE64;
							*esi_1047 = bl_1221;
							esi_1047 = (word32) esi_1047 + 1;
l004022CF:
							++ebp_13->dwFFFFFE7C;
							Eq_3 eax_1233 = fn00401DA6(edi_2263);
							ebp_13->tFFFFFE6C = eax_1233;
							ebx = eax_1233;
							goto l004022E4;
						}
					}
					goto l00402324;
				}
				--ebp_13->tFFFFFE74;
				++ebp_13->dwFFFFFE7C;
				edi_2263 = ebp_13->t0008;
				Eq_3 eax_898 = fn00401DA6(edi_2263);
				ebp_13->tFFFFFE6C = eax_898;
				ebx_1271 = eax_898;
				goto l00402168;
			}
			goto l004027CF;
		}
		if (ecx_369 == 0x00)
		{
			ebp_13->dwFFFFFE4C = 0x01;
			ebp_13->tFFFFFE74 = (word32) ebp_13->tFFFFFE74 + 1;
		}
l00402393:
		if (ebp_13->bFFFFFE7B > 0x00)
			ebp_13->bFFFFFE6A = 0x01;
		goto l0040255A;
	}
}

// 0040307F: void fn0040307F()
// Called from:
//      Win32CrtStartup
//      fn00403119
void fn0040307F()
{
	Eq_232 eax_6 = GetModuleHandleA(0x004091D0);
	struct Eq_3536 * esp_16 = fp;
	if (eax_6 != null)
	{
		Eq_3556 eax_15 = GetProcAddress(eax_6, 0x004091C0);
		esp_16 = fp;
		if (eax_15 != null)
		{
			eax_15();
			esp_16 = fp - 4;
		}
	}
	union Eq_3 * esp_30 = esp_16 - 4;
	*esp_30 = (union Eq_3 *) esp_16->t0004;
	ExitProcess(*esp_30);
}

// 004030AF: Register word32 fn004030AF(Register Eq_3 esi, Register Eq_3 edi, Stack Eq_3 dwArg04, Register out Eq_3 esiOut, Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
word32 fn004030AF(Eq_3 esi, Eq_3 edi, Eq_3 dwArg04, union Eq_3 & esiOut, ptr32 & ediOut)
{
	ptr32 esp_18 = fp;
	<anonymous> * eax_5 = g_ptr40B0AC;
	if (eax_5 != null)
	{
		word32 esp_12;
		word32 edx_119;
		eax_5();
		dwLoc04 = dwArg04;
		esp_18 = esp_12 + 4;
	}
	struct Eq_3576 * esp_20 = esp_18 - 4;
	esp_20->t0000 = esi;
	esp_20->tFFFFFFFC = edi;
	ptr32 esp_24 = esp_20 - 4;
	word32 eax_128 = 0x00;
	word32 * esi_32 = g_a40B00C;
	if (false)
	{
		do
		{
			if (eax_128 != 0x00)
				goto l00403116;
			<anonymous> * ecx_40 = *esi_32;
			if (ecx_40 != null)
			{
				word32 edx_121;
				ecx_40();
			}
			++esi_32;
		} while (esi_32 < &g_dw40B01C);
		if (eax_128 != 0x00)
		{
l00403116:
			esiOut = dwLoc04;
			ediOut = dwLoc08;
			return eax_128;
		}
	}
	union Eq_3 * esp_63 = esp_24 - 4;
	*esp_63 = (union Eq_3 *) 4209441;
	fn004053B0(*esp_63);
	word32 * esi_72 = g_a40B000;
	if (false)
	{
		do
		{
			<anonymous> * eax_81 = *esi_72;
			if (eax_81 != null)
			{
				word32 edx_92;
				eax_81();
			}
			++esi_72;
		} while (esi_72 < &g_dw40B008);
	}
	eax_128 = 0x00;
	goto l00403116;
}

// 00403119: void fn00403119(Stack Eq_3 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
// Called from:
//      fn004031DA
//      fn004031EB
//      fn004031FC
void fn00403119(Eq_3 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	byte bArg0C = (byte) dwArg0C;
	word24 nArg0D = SLICE(dwArg0C, word24, 8);
	if (g_dw40BA9C == 0x01)
		TerminateProcess(GetCurrentProcess(), dwArg04);
	g_dw40BA98 = 0x01;
	g_b40BA94 = bArg0C;
	if (dwArg08 == 0x00)
	{
		Eq_3 ecx_34 = g_t40BFE8;
		if (ecx_34 != 0x00)
		{
			union Eq_3 * eax_38 = g_ptr40BFE4;
			union Eq_3 * eax_39 = eax_38 - 0x04;
			bool C_140 = SLICE(cond(eax_38 - 0x04 - ecx_34), bool, 1);
			while (true)
			{
				g_ptr40BFE4 = eax_39;
				if (!C_140)
					break;
				Eq_3 eax_44 = *eax_39;
				if (eax_44 != 0x00)
				{
					word32 ecx_55;
					eax_44();
				}
				union Eq_3 * eax_59 = g_ptr40BFE4;
				eax_39 = eax_59 - 0x04;
				C_140 = SLICE(cond(eax_59 - 0x04 - g_t40BFE8), bool, 1);
			}
		}
		word24 nArg0D_184 = SLICE(dwArg0C, word24, 8);
		byte bArg0C_204 = (byte) dwArg0C;
		word32 * edi_65 = g_a40B020;
		if (false)
		{
			do
			{
				<anonymous> * eax_69 = *edi_65;
				if (eax_69 != null)
				{
					word32 ecx_79;
					eax_69();
				}
				++edi_65;
			} while (edi_65 < &g_dw40B028);
		}
	}
	word24 nArg0D_189 = SLICE(dwArg0C, word24, 8);
	byte bArg0C_208 = (byte) dwArg0C;
	word32 * edi_108 = g_a40B02C;
	if (false)
	{
		do
		{
			<anonymous> * eax_94 = *edi_108;
			if (eax_94 != null)
			{
				word32 ecx_104;
				eax_94();
			}
			++edi_108;
		} while (edi_108 < &g_dw40B030);
	}
	if (dwArg0C != 0x00)
		return;
	g_dw40BA9C = 0x01;
	fn0040307F();
}

// 004031DA: void fn004031DA(Stack Eq_3 dwArg04)
// Called from:
//      Win32CrtStartup
void fn004031DA(Eq_3 dwArg04)
{
	fn00403119(dwArg04, 0x00, 0x00);
}

// 004031EB: void fn004031EB(Stack Eq_3 dwArg04)
// Called from:
//      fn00406F0F
void fn004031EB(Eq_3 dwArg04)
{
	fn00403119(dwArg04, 0x01, 0x00);
}

// 004031FC: void fn004031FC()
// Called from:
//      Win32CrtStartup
void fn004031FC()
{
	fn00403119(0x00, 0x00, 0x01);
}

// 0040321A: void fn0040321A(Register Eq_3 ebx, Register Eq_3 edi, Stack Eq_3 dwArg04)
// Called from:
//      fn00401182
//      Win32CrtStartup
//      fn00403391
void fn0040321A(Eq_3 ebx, Eq_3 edi, Eq_3 dwArg04)
{
	Eq_3 eax_9 = g_t40B498;
	uint32 eax_22 = 0x00;
	while (dwArg04 != g_a40B360[eax_22])
	{
		++eax_22;
		if (eax_22 >= 0x13)
			break;
	}
	Eq_3 esi_273 = eax_22 << 0x03;
	if (dwArg04 == *((word32) esi_273 + 4240224))
	{
		word32 eax_40 = g_dw40BA30;
		if (eax_40 != 0x01 && (eax_40 != 0x00 || g_dw40B0BC != 0x01))
		{
			if (dwArg04 != 252)
			{
				if (GetModuleFileNameA(null, fp - 0x0110, 0x0104) == 0x00)
					fn00404F20(fp - 0x0110, 4232652);
				Eq_3 edi_126 = fp - 0x0110;
				if (fn00404080(fp - 0x0110) > 0x3B)
				{
					edi_126 = (word32) fn00404080(fp - 0x0110) + (fp - 331);
					fn004054F0(edi_126, &g_b4095C8, 0x03);
				}
				fn00403D30((word32) fn00404080(*((word32) esi_273 + 4240228)) + ((word32) fn00404080(edi_126) + 28) + 0x03 & ~0x03, edi_126);
				Eq_3 esp_208 = <invalid>;
				((word32) esp_208 - 4)->u0 = 4232620;
				*((word32) esp_208 - 8) = esp_208;
				*((word32) esp_208 - 0x0C) = fn00404F20(*((word32) esp_208 - 8), *((word32) esp_208 - 4));
				*((word32) esp_208 - 16) = esp_208;
				fn00404F30(*((word32) esp_208 - 16), *((word32) esp_208 - 0x0C));
				((word32) esp_208 - 20)->u0 = 4232616;
				*((word32) esp_208 - 24) = esp_208;
				fn00404F30(*((word32) esp_208 - 24), *((word32) esp_208 - 20));
				*((word32) esp_208 - 28) = *((word32) esi_273 + 4240228);
				*((word32) esp_208 - 32) = esp_208;
				fn00404F30(*((word32) esp_208 - 32), *((word32) esp_208 - 28));
				*((word32) esp_208 - 36) = 0x00012010;
				*((word32) esp_208 - 40) = 0x00409580;
				*((word32) esp_208 - 44) = esp_208;
				ebx = fn004053EA(*((word32) esp_208 - 44), *((word32) esp_208 - 40), *((word32) esp_208 - 36), *((word32) esp_208 - 0x0022), *((word32) esp_208 - 33), out esi_273, out edi);
			}
		}
		else
		{
			WriteFile(GetStdHandle(~0x0B), *((word32) esi_273 + 4240228), fn00404080(*((word32) esi_273 + 4240228)), fp + 0x04, null);
			esi_273 = (word32) esi_273 + 4240228;
		}
	}
	fn004041A2(eax_9, ebx, esi_273, edi);
}

// 00403391: void fn00403391(Register Eq_3 ebx, Register Eq_3 edi)
// Called from:
//      fn00401182
//      Win32CrtStartup
void fn00403391(Eq_3 ebx, Eq_3 edi)
{
	word32 eax_5 = g_dw40BA30;
	if (eax_5 == 0x01 || eax_5 == 0x00 && g_dw40B0BC == 0x01)
	{
		fn0040321A(ebx, edi, 252);
		<anonymous> * eax_29 = g_ptr40BAA0;
		if (eax_29 != null)
		{
			word32 ecx_38;
			word32 edx_40;
			eax_29();
		}
		fn0040321A(ebx, edi, 0xFF);
	}
}

// 0040353B: Register Eq_3 fn0040353B(Register Eq_3 eax, Register Eq_3 esi, Register Eq_3 edi)
// Called from:
//      Win32CrtStartup
Eq_3 fn0040353B(Eq_3 eax, Eq_3 esi, Eq_3 edi)
{
	if (g_dw40BFEC == 0x00)
		eax = fn004059DE(0x00, esi, edi);
	Eq_3 eax_135;
	Eq_3 esi_25 = g_t40BA28;
	ui32 edi_204 = 0x00;
	if (esi_25 != 0x00)
	{
		while (true)
		{
			Eq_3 al_32 = *esi_25;
			if (al_32 == 0x00)
				break;
			if (al_32 != 0x3D)
				++edi_204;
			esi_25 = (word32) fn00404080(esi_25) + ((word32) esi_25 + 1);
		}
		eax = fn00403DDF(edi_204 * 0x04 + 0x04);
		g_t40BA7C = eax;
		Eq_3 edi_118 = eax;
		if (eax != 0x00)
		{
			Eq_3 esi_158 = g_t40BA28;
			while (*esi_158 != 0x00)
			{
				Eq_3 eax_91 = fn00404080(esi_158);
				if (*esi_158 != 0x3D)
				{
					Eq_3 eax_106 = fn00403DDF((word32) eax_91 + 1);
					*edi_118 = eax_106;
					if (eax_106 == 0x00)
					{
						Eq_3 ebx_128;
						word32 ebp_295;
						word32 edi_296;
						ui32 eax_124 = fn0040403C(g_t40BA7C, out ebx_128, out ebp_295, out edi_296);
						g_t40BA7C = ebx_128;
						eax_135 = eax_124 | ~0x00;
						goto l004035E6;
					}
					edi_118 = (word32) fn00404F20(eax_106, esi_158) + 4;
				}
				esi_158 = (word32) esi_158 + ((word32) eax_91 + 1);
			}
			Eq_3 ebx_167;
			union Eq_3 * edi_168;
			word32 ebp_294;
			fn0040403C(g_t40BA28, out ebx_167, out ebp_294, out edi_168);
			g_t40BA28 = ebx_167;
			*edi_168 = (union Eq_3 *) ebx_167;
			g_dw40BFE0 = 0x01;
			eax_135.u0 = 0x00;
l004035E6:
			return eax_135;
		}
	}
	eax_135 = eax | ~0x00;
	return eax_135;
}

// 00403602: void fn00403602(Register Eq_3 eax, Register (ptr32 Eq_4125) ecx, Register (ptr32 word32) esi, Stack Eq_3 dwArg04, Stack (ptr32 word32) dwArg08)
// Called from:
//      fn0040376E
void fn00403602(Eq_3 eax, struct Eq_4125 * ecx, word32 * esi, Eq_3 dwArg04, word32 * dwArg08)
{
	word24 ecx_24_8_611 = SLICE(ecx, word24, 8);
	*esi = 0x00;
	*dwArg08 = 0x01;
	word32 * ebx_14 = dwArg08;
	uint32 edx_15 = 0x00;
	struct Eq_4125 * edi_107 = ecx;
	if (dwArg04 != 0x00)
	{
		*dwArg04 = ecx;
		ecx_24_8_611 = SLICE(dwArg04, word24, 8);
		dwArg04 = (word32) dwArg04 + 4;
	}
	do
	{
		uip32 ecx_689;
		if (*eax == 0x22)
		{
			eax = (word32) eax + 1;
			edx_15 = (uint32) (uint8) (edx_15 == 0x00);
			ecx_689 = 0x22;
		}
		else
		{
			++*esi;
			if (edi_107 != null)
			{
				edi_107->b0000 = (byte) *eax;
				++edi_107;
			}
			byte cl_47 = *eax;
			eax = (word32) eax + 1;
			if (((word32) cl_47 + 4242593 & 0x04) != 0x00)
			{
				++*esi;
				if (edi_107 != null)
				{
					edi_107->b0000 = (byte) *eax;
					++edi_107;
				}
				eax = (word32) eax + 1;
			}
			ebx_14 = dwArg08;
			ecx_689 = SEQ(ecx_24_8_611, cl_47);
			if (cl_47 == 0x00)
			{
				--eax;
				goto l0040367B;
			}
		}
		ecx_24_8_611 = SLICE(ecx_689, word24, 8);
		byte cl_101 = (byte) ecx_689;
	} while (edx_15 != 0x00 || cl_101 != 0x20 && cl_101 != 0x09);
	if (edi_107 != null)
		edi_107->bFFFFFFFF = 0x00;
l0040367B:
	uint32 dwLoc08_447 = ecx & 0x00;
	while (*eax != 0x00)
	{
		while (true)
		{
			byte cl_130 = *eax;
			if (cl_130 != 0x20 && cl_130 != 0x09)
				break;
			eax = (word32) eax + 1;
		}
		if (*eax == 0x00)
			break;
		if (dwArg04 != 0x00)
		{
			*dwArg04 = edi_107;
			dwArg04 = (word32) dwArg04 + 4;
		}
		++*ebx_14;
l004036B4:
		word32 ebx_182 = 0x01;
		uint32 edx_183 = 0x00;
		while (true)
		{
			byte dl_196 = (byte) edx_183;
			if (*eax != 0x5C)
				break;
			eax = (word32) eax + 1;
			++edx_183;
		}
		uint32 edx_227 = edx_183;
		if (*eax == 0x22)
		{
			if ((dl_196 & 0x01) == 0x00)
			{
				if (dwLoc08_447 != 0x00)
				{
					Eq_3 ecx_204 = (word32) eax + 1;
					if (*ecx_204 != 0x22)
						goto l004036DE;
					eax = ecx_204;
				}
				else
				{
l004036DE:
					ebx_182 = 0x00;
				}
				dwLoc08_447 = (uint32) (uint8) (dwLoc08_447 == 0x00);
			}
			edx_227 = edx_183 >> 0x01;
		}
		for (; edx_227 != 0x00; --edx_227)
		{
			if (edi_107 != null)
			{
				edi_107->b0000 = 0x5C;
				++edi_107;
			}
			++*esi;
		}
		byte cl_262 = *eax;
		if (cl_262 != 0x00 && (dwLoc08_447 != 0x00 || cl_262 != 0x20 && cl_262 != 0x09))
		{
			if (ebx_182 != 0x00)
			{
				if (edi_107 != null)
				{
					if (((word32) cl_262 + 4242593 & 0x04) != 0x00)
					{
						edi_107->b0000 = cl_262;
						++*esi;
						++edi_107;
						eax = (word32) eax + 1;
					}
					edi_107->b0000 = (byte) *eax;
					++edi_107;
				}
				else if (((word32) cl_262 + 4242593 & 0x04) != 0x00)
				{
					++*esi;
					eax = (word32) eax + 1;
				}
				++*esi;
			}
			eax = (word32) eax + 1;
			goto l004036B4;
		}
		if (edi_107 != null)
		{
			edi_107->b0000 = 0x00;
			++edi_107;
		}
		++*esi;
		ebx_14 = dwArg08;
	}
	if (dwArg04 != 0x00)
		*dwArg04 &= 0x00;
	++*ebx_14;
}

// 0040376E: Register ui32 fn0040376E(Register ui32 ecx, Register Eq_3 ebx, Register Eq_3 esi)
// Called from:
//      Win32CrtStartup
ui32 fn0040376E(ui32 ecx, Eq_3 ebx, Eq_3 esi)
{
	if (g_dw40BFEC == 0x00)
		fn004059DE(ebx, esi, 0x00);
	Eq_3 ebx_50;
	g_b40BBAC = 0x00;
	GetModuleFileNameA(null, 4242088, 0x0104);
	Eq_3 eax_45 = g_t40D004;
	g_dw40BA8C = 4242088;
	if (eax_45 != 0x00)
	{
		ebx_50 = eax_45;
		if (*eax_45 != 0x00)
		{
l004037B6:
			ui32 eax_121;
			fn00403602(ebx_50, null, fp - 0x0C, 0x00, fp - 0x08);
			Eq_3 eax_86 = fn00403DDF(ecx * 0x05);
			if (eax_86 == 0x00)
				eax_121 = eax_86 | ~0x00;
			else
			{
				fn00403602(ebx_50, (word32) eax_86 + (ecx << 0x02), fp - 0x0C, eax_86, fp - 0x08);
				g_dw40BA70 = ecx - 0x01;
				g_t40BA74 = eax_86;
				eax_121 = 0x00;
			}
			return eax_121;
		}
	}
	ebx_50.u0 = 4242088;
	goto l004037B6;
}

// 00403810: Register Eq_3 fn00403810(Register out Eq_3 ecxOut)
// Called from:
//      Win32CrtStartup
Eq_3 fn00403810(union Eq_3 & ecxOut)
{
	Eq_3 eax_129;
	Eq_3 dwLoc04_286 = ecx;
	word32 eax_38 = g_dw40BBB0;
	Eq_3 esi_131 = 0x00;
	if (eax_38 == 0x00)
	{
		Eq_3 eax_31 = GetEnvironmentStringsW();
		esi_131 = eax_31;
		if (eax_31 != 0x00)
		{
			g_dw40BBB0 = 0x01;
l0040385E:
			if (esi_131 != 0x00)
			{
l0040386A:
				Eq_3 eax_152 = esi_131;
				if (*esi_131 != 0x00)
				{
					do
					{
						do
							eax_152 += 0x02;
						while (*eax_152 != 0x00);
						eax_152 += 0x02;
					} while (Mem147[eax_152 + 0x02:word16] != 0x00);
				}
				Eq_3 eax_189 = (eax_152 - esi_131 >> 0x01) + 0x01;
				Eq_3 ebx_170 = 0x00;
				dwLoc04_286 = eax_189;
				Eq_3 eax_199 = WideCharToMultiByte(0x00, 0x00, esi_131, eax_189, 0x00, 0x00, 0x00, 0x00);
				if (eax_199 != 0x00)
				{
					Eq_3 eax_206 = fn00403DDF(eax_199);
					Eq_3 dwLoc08_308 = eax_206;
					if (eax_206 != 0x00)
					{
						if (WideCharToMultiByte(0x00, 0x00, esi_131, eax_189, eax_206, eax_199, 0x00, 0x00) == 0x00)
						{
							Eq_3 ebx_247;
							word32 ebp_470;
							word32 edi_471;
							fn0040403C(eax_206, out ebx_247, out ebp_470, out edi_471);
							dwLoc08_308 = ebx_247;
						}
						ebx_170 = dwLoc08_308;
					}
				}
				FreeEnvironmentStringsW(esi_131);
				eax_129 = ebx_170;
				goto l0040392B;
			}
			Eq_3 eax_138 = GetEnvironmentStringsW();
			esi_131 = eax_138;
			if (eax_138 != 0x00)
				goto l0040386A;
l004038E3:
			eax_129.u0 = 0x00;
			goto l0040392B;
		}
		if (GetLastError() == 0x78)
		{
			g_dw40BBB0 = 0x02;
			eax_38 = 0x02;
		}
		else
			eax_38 = g_dw40BBB0;
	}
	if (eax_38 != 0x01)
	{
		if (eax_38 == 0x02 || eax_38 == 0x00)
		{
			Eq_3 eax_50 = GetEnvironmentStrings();
			Eq_3 esi_111 = eax_50;
			if (eax_50 != 0x00)
			{
				Eq_3 eax_60;
				eax_60 = eax_50;
				eax_60 = eax_50;
				if (*eax_50 != 0x00)
				{
					do
					{
						do
							++eax_60;
						while (*eax_60 != 0x00);
						++eax_60;
					} while (Mem56[eax_60 + 0x01:byte] != 0x00);
				}
				Eq_3 edi_110;
				Eq_4646 eax_72 = eax_60 - eax_50;
				word32 eax_83 = fn00403DDF(eax_72 + 0x01);
				if (eax_83 == 0x00)
					edi_110.u0 = 0x00;
				else
					fn00405A00(eax_83, eax_50, eax_72 + 0x01, out esi_111, out edi_110);
				FreeEnvironmentStringsA(esi_111);
				eax_129 = edi_110;
l0040392B:
				ecxOut = dwLoc04_286;
				return eax_129;
			}
		}
		goto l004038E3;
	}
	goto l0040385E;
}

// 00403932: Register ui32 fn00403932()
// Called from:
//      Win32CrtStartup
ui32 fn00403932()
{
	ui32 eax_262;
	Eq_3 eax_23 = fn00403DDF(0x0100);
	if (eax_23 == 0x00)
		eax_262 = eax_23 | ~0x00;
	else
	{
		g_t40BEE0 = eax_23;
		g_t40BEC8.u0 = 0x20;
		Eq_3 ecx_22 = (word32) eax_23 + 0x0100;
		while (eax_23 < ecx_22)
		{
			*eax_23 |= ~0x00;
			((word32) eax_23 + 4)->u0 = 0x00;
			((word32) eax_23 + 5)->u0 = 0x0A;
			eax_23 = (word32) eax_23 + 8;
			ecx_22 = (word32) g_t40BEE0 + 0x0100;
		}
		GetStartupInfoA(fp - 0x44);
		if (wLoc12 != 0x00 && dwLoc10 != null)
		{
			Eq_3 esi_119 = *dwLoc10;
			byte * ebp_127 = (char *) dwLoc10 + 4;
			word32 ebx_122 = esi_119 + (dwLoc10 + 0x04);
			if (esi_119 >= 0x0800)
				esi_119.u0 = 0x0800;
			if (g_t40BEC8 < esi_119)
			{
				word32 * edi_113 = g_a40BEE4;
				do
				{
					Eq_3 eax_110 = fn00403DDF(0x0100);
					if (eax_110 == 0x00)
					{
						esi_119 = g_t40BEC8;
						break;
					}
					g_t40BEC8 = (word32) g_t40BEC8 + 32;
					*edi_113 = (word32) eax_110;
					Eq_3 ecx_111 = (word32) eax_110 + 0x0100;
					while (eax_110 < ecx_111)
					{
						*eax_110 |= ~0x00;
						((word32) eax_110 + 4)->u0 = 0x00;
						((word32) eax_110 + 5)->u0 = 0x0A;
						eax_110 = (word32) eax_110 + 8;
						ecx_111 = *edi_113 + 0x0100;
					}
					++edi_113;
				} while (g_t40BEC8 < esi_119);
			}
			Eq_3 edi_118 = 0x00;
			if (esi_119 > 0x00)
			{
				do
				{
					Eq_3 eax_124 = *ebx_122;
					if (eax_124 != ~0x00)
					{
						byte cl_128 = *ebp_127;
						if ((cl_128 & 0x01) != 0x00 && ((cl_128 & 0x08) != 0x00 || GetFileType(eax_124) != 0x00))
						{
							struct Eq_4918 * eax_153 = (char *) *((char *) &g_t40BEE0 + (edi_118 >> 0x05) * 0x04) + (edi_118 & 0x1F) * 0x08;
							eax_153->dw0000 = *ebx_122;
							eax_153->b0004 = *ebp_127;
						}
					}
					edi_118 = (word32) edi_118 + 1;
					++ebp_127;
					++ebx_122;
				} while (edi_118 < esi_119);
			}
		}
		int32 ebx_182;
		for (ebx_182 = 0x00; ebx_182 < 0x03; ++ebx_182)
		{
			struct Eq_4778 * esi_188 = (word32) g_t40BEE0 + ebx_182 * 0x08;
			if (esi_188->t0000 == ~0x00)
			{
				Eq_3 eax_204;
				esi_188->b0004 = 0x81;
				if (ebx_182 == 0x00)
					eax_204.u0 = ~0x09;
				else
					eax_204 = 0x00 - (ebx_182 == 0x01) + ~0x0A;
				Eq_3 eax_215 = GetStdHandle(eax_204);
				if (eax_215 != ~0x00)
				{
					Eq_3 eax_222 = GetFileType(eax_215);
					if (eax_222 == 0x00)
						goto l00403AAD;
					esi_188->t0000 = eax_215;
					if ((eax_222 & 0xFF) == 0x02)
						goto l00403AAD;
					if ((eax_222 & 0xFF) == 0x03)
						esi_188->b0004 |= 0x08;
				}
				else
				{
l00403AAD:
					esi_188->b0004 |= 0x40;
				}
			}
			else
				esi_188->b0004 |= 0x80;
		}
		SetHandleCount(g_t40BEC8);
		eax_262 = 0x00;
	}
	return eax_262;
}

// 00403ADD: Register Eq_3 fn00403ADD(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
Eq_3 fn00403ADD(Eq_3 ebx, Eq_3 esi, Eq_3 edi, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x0C);
	ebp_13->tFFFFFFE4.u0 = 4234748;
	struct Eq_4955 * esp_24 = fp - 8;
	while (ebp_13->tFFFFFFE4 < 4234748)
	{
		ebp_13->tFFFFFFFC &= 0x00;
		<anonymous> * eax_35 = *ebp_13->tFFFFFFE4;
		if (eax_35 != null)
			eax_35();
		ebp_13->tFFFFFFFC |= ~0x00;
		ebp_13->tFFFFFFE4 = (word32) ebp_13->tFFFFFFE4 + 4;
	}
	ptr32 ebp_25;
	ptr32 edi_28;
	ptr32 esi_29;
	Eq_3 ebx_26 = fn00403C0B(ebp_13, esp_24->tFFFFFFFC, out ebp_25, out esi_29, out edi_28);
	ebpOut = ebp_25;
	esiOut = esi_29;
	ediOut = edi_28;
	return ebx_26;
}

// 00403B65: Register word32 fn00403B65()
// Called from:
//      fn00403B7F
word32 fn00403B65()
{
	if (g_t40BA5C != 0x02 || g_t40BA68 < 0x05)
		return 0x03;
	return 0x01;
}

// 00403B7F: Register word32 fn00403B7F(Stack Eq_3 bArg04)
// Called from:
//      Win32CrtStartup
word32 fn00403B7F(Eq_3 bArg04)
{
	Eq_3 eax_17 = HeapCreate((uint32) (uint8) (dwArg04 == 0x00), 0x1000, 0x00);
	g_t40BEC0 = eax_17;
	if (eax_17 == 0x00)
		return 0x00;
	word32 eax_23 = fn00403B65();
	g_dw40BEC4 = eax_23;
	if (eax_23 != 0x03 || fn00405D3D(1016) != 0x00)
		return 0x01;
	HeapDestroy(g_t40BEC0);
	return 0x00;
}

// 00403BD0: Register ptr32 fn00403BD0(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Stack Eq_3 dwArg00, Stack ui32 dwArg08)
// Called from:
//      Win32CrtStartup
//      fn00401DBC
//      fn00403ADD
//      fn004041A2
//      fn00406F0F
//      fn004070AD
//      fn00407455
//      fn0040854D
ptr32 fn00403BD0(Eq_3 ebx, Eq_3 esi, Eq_3 edi, Eq_3 dwArg00, ui32 dwArg08)
{
	struct Eq_5063 * esp_14 = fp - 8 - dwArg08;
	esp_14->tFFFFFFFC = ebx;
	esp_14->tFFFFFFF8 = esi;
	esp_14->tFFFFFFF4 = edi;
	esp_14->tFFFFFFF0 = dwArg00;
	fs->ptr0000 = fp - 0x08;
	return fp + 0x08;
}

// 00403C0B: Register word32 fn00403C0B(Register (ptr32 Eq_154) ebp, Stack Eq_3 dwArg00, Register out Eq_3 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
//      fn00401DBC
//      fn00403ADD
//      fn004070AD
//      fn00407455
//      fn0040854D
word32 fn00403C0B(struct Eq_154 * ebp, Eq_3 dwArg00, union Eq_3 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	fs->dw0000 = ebp->dwFFFFFFF0;
	Eq_3 ebp_17 = ebp->t0000;
	ebp->t0000 = dwArg00;
	ebpOut = ebp_17;
	esiOut = dwArg08;
	ediOut = dwArg04;
	return dwArg0C;
}

// 00403D30: void fn00403D30(Register Eq_3 eax, Stack Eq_3 dwArg00)
// Called from:
//      Win32CrtStartup
//      fn00401DBC
//      fn0040321A
//      fn00406F0F
//      fn004070AD
//      fn00407455
//      fn0040854D
void fn00403D30(Eq_3 eax, Eq_3 dwArg00)
{
	if (eax >= 0x1000)
	{
		ptr32 ecx_10 = (word32) fp + 4;
		do
		{
			ecx_10 -= 0x1000;
			eax -= 0x1000;
		} while (eax >= 0x1000);
		(ecx_10 - eax)->tFFFFFFFC = dwArg00;
	}
	else
		Mem40[-eax + fp:word32] = dwArg00;
}

// 00403D6D: Register Eq_3 fn00403D6D(Stack Eq_3 dwArg04)
// Called from:
//      fn00403DB3
Eq_3 fn00403D6D(Eq_3 dwArg04)
{
	Eq_3 eax_15;
	Eq_3 esi_31 = dwArg04;
	if (g_dw40BEC4 == 0x03 && dwArg04 <= g_t40BC84)
	{
		eax_15 = fn00406564(dwArg04, dwArg04);
		if (eax_15 != 0x00)
			return eax_15;
	}
	if (dwArg04 == 0x00)
		esi_31 = (word32) dwArg04 + 1;
	if (g_dw40BEC4 != 0x01)
		esi_31 = esi_31 + 0x0F & ~0x0F;
	eax_15 = HeapAlloc(g_t40BEC0, 0x00, esi_31);
	return eax_15;
}

// 00403DB3: Register word32 fn00403DB3(Stack Eq_3 dwArg04, Stack word32 dwArg08)
// Called from:
//      fn00403DDF
word32 fn00403DB3(Eq_3 dwArg04, word32 dwArg08)
{
	word32 eax_12;
	if (dwArg04 <= ~0x1F)
	{
		do
		{
			eax_12 = fn00403D6D(dwArg04);
			if (eax_12 != 0x00 || dwArg08 == eax_12)
				return eax_12;
		} while (fn00406B77(dwArg04) != 0x00);
	}
	eax_12 = 0x00;
	return eax_12;
}

// 00403DDF: Register word32 fn00403DDF(Stack Eq_3 dwArg04)
// Called from:
//      fn0040136E
//      fn0040353B
//      fn0040376E
//      fn00403810
//      fn00403932
//      fn00406E65
//      fn00407455
//      fn004080DE
word32 fn00403DDF(Eq_3 dwArg04)
{
	return fn00403DB3(dwArg04, g_dw40BC48);
}

// 00403DF1: Register ui32 fn00403DF1(Stack Eq_3 dwArg04)
// Called from:
//      fn0040136E
ui32 fn00403DF1(Eq_3 dwArg04)
{
	if (dwArg04 < g_t40BEC8)
		return (int32) *((char *) *((char *) &g_t40BEE0 + (dwArg04 >> 0x05) * 0x04) + ((dwArg04 & 0x1F) * 0x08 + 4)) & 0x40;
	return 0x00;
}

// 00403E18: void fn00403E18(Stack Eq_3 dwArg04)
// Called from:
//      fn004013F6
//      fn00406F0F
void fn00403E18(Eq_3 dwArg04)
{
	Eq_3 eax_11 = *((word32) dwArg04 + 0x0C);
	cui16 ax_18 = (word16) eax_11;
	if (((byte) eax_11 & 0x03) == 0x02 && (ax_18 & 0x0108) != 0x00)
	{
		Eq_3 eax_22 = *((word32) dwArg04 + 8);
		Eq_3 edi_27 = *dwArg04 - eax_22;
		if (edi_27 > 0x00)
		{
			if (fn00406B92(*((word32) dwArg04 + 16), eax_22, edi_27) == edi_27)
			{
				Eq_3 eax_51 = *((word32) dwArg04 + 0x0C);
				if ((byte) eax_51 < 0x00)
					*((word32) dwArg04 + 0x0C) = eax_51 & ~0x02;
			}
			else
				*((word32) dwArg04 + 0x0C) |= 0x20;
		}
	}
	Eq_3 eax_67 = *((word32) dwArg04 + 8);
	*((word32) dwArg04 + 4) &= 0x00;
	*dwArg04 = eax_67;
}

// 0040403C: Register Eq_3 fn0040403C(Stack Eq_3 dwArg04, Register out Eq_910 ebxOut, Register out (ptr32 Eq_911) ebpOut, Register out Eq_912 ediOut)
// Called from:
//      fn00401DBC
//      fn0040353B
//      fn00403810
//      fn00406F0F
//      fn004070AD
//      fn00407455
//      fn004080DE
//      fn004084DF
//      fn0040854D
Eq_3 fn0040403C(Eq_3 dwArg04, union Eq_910 & ebxOut, struct Eq_911 & ebpOut, union Eq_912 & ediOut)
{
	if (dwArg04 != 0x00)
	{
		if (g_dw40BEC4 == 0x03)
		{
			Eq_3 eax_15 = fn00405D85(dwArg04);
			if (eax_15 != 0x00)
			{
				struct Eq_911 * ebp_47;
				Eq_910 ebx_48;
				Eq_912 edi_49;
				word32 esi_121;
				Eq_3 eax_43 = fn00405DB0(eax_15, dwArg04, out ebx_48, out ebp_47, out esi_121, out edi_49);
				ebxOut = ebx_48;
				ebpOut = ebp_47;
				ediOut = edi_49;
				return eax_43;
			}
		}
		eax = HeapFree(g_t40BEC0, 0x00, dwArg04);
	}
	ebxOut = ebx;
	ebpOut = ebp;
	ediOut = edi;
	return eax;
}

// 00404080: Register ptr32 fn00404080(Stack Eq_3 dwArg04)
// Called from:
//      fn0040321A
//      fn0040353B
//      fn00406F0F
//      fn0040854D
ptr32 fn00404080(Eq_3 dwArg04)
{
	Eq_3 ecx_12 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_12 = (word32) ecx_12 + 1;
			if (*ecx_12 == 0x00)
				return ecx_12 - 0x01 - dwArg04;
		} while ((ecx_12 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_29 = *ecx_12;
			ecx_12 = (word32) ecx_12 + 4;
		} while (((eax_29 ^ ~0x00 ^ eax_29 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_38 = *((word32) ecx_12 - 4);
		byte ah_48 = SLICE(eax_38, byte, 8);
		if ((byte) eax_38 == 0x00)
			return ecx_12 - 0x04 - dwArg04;
		if (ah_48 == 0x00)
			return ecx_12 - 0x03 - dwArg04;
		if ((eax_38 & 0x00FF0000) == 0x00)
			return ecx_12 - 0x02 - dwArg04;
	} while ((eax_38 & 0xFF000000) != 0x00);
	return ecx_12 - 0x01 - dwArg04;
}

// 004041A2: Register Eq_3 fn004041A2(Register Eq_3 ecx, Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi)
// Called from:
//      fn004014C0
//      fn00401DBC
//      fn0040321A
//      fn0040566C
//      fn004057F8
//      fn00406B92
//      fn0040850A
//      fn0040854D
Eq_3 fn004041A2(Eq_3 ecx, Eq_3 ebx, Eq_3 esi, Eq_3 edi)
{
	if (ecx == g_t40B498)
		return ;
	struct Eq_154 * ebp_17 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x08);
	ebp_17->tFFFFFFFC &= 0x00;
	fn00406F0F(ebx, esi, edi);
	ebp_17->tFFFFFFFC |= ~0x00;
	ExitProcess(0x03);
}

// 00404245: Register Eq_3 fn00404245(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08)
// Called from:
//      fn004070AD
//      fn0040854D
Eq_3 fn00404245(Eq_3 dwArg04, Eq_3 dwArg08)
{
	Eq_3 esi_19;
	Eq_3 esi_11 = dwArg04 *s dwArg08;
	esi_19 = esi_11;
	if (esi_11 == 0x00)
		esi_19 = (word32) esi_11 + 1;
	do
	{
		Eq_3 eax_145;
		Eq_3 edi_21 = 0x00;
		if (esi_19 <= ~0x1F)
		{
			if (g_dw40BEC4 == 0x03)
			{
				Eq_5451 esi_28 = (word32) esi_19 + 0x0F;
				esi_19 = esi_28 & ~0x0F;
				if (esi_11 > g_t40BC84)
					goto l00404283;
				Eq_3 eax_36 = fn00406564(esi_28 & ~0x0F, esi_11);
				edi_21 = eax_36;
				if (eax_36 == 0x00)
					goto l00404283;
				fn004045E0(eax_36, 0x00, esi_11);
			}
			else
			{
l00404283:
				Eq_3 eax_73 = HeapAlloc(g_t40BEC0, 0x08, esi_19);
				edi_21 = eax_73;
				if (eax_73 == 0x00)
					goto l00404298;
			}
l004042BA:
			eax_145 = edi_21;
			return eax_145;
		}
l00404298:
		if (g_dw40BC48 == 0x00)
			goto l004042BA;
		eax_145 = fn00406B77(esi_19);
	} while (eax_145 != 0x00);
	return eax_145;
}

// 00404318: Register ui32 fn00404318(Stack Eq_3 dwArg04, Stack ui32 dwArg08)
// Called from:
//      fn00401D74
//      fn00401DBC
//      fn004044E0
//      fn00408A26
ui32 fn00404318(Eq_3 dwArg04, ui32 dwArg08)
{
	word16 wArg06_108 = SLICE(dwArg04, word16, 16);
	ui32 eax_75;
	if (dwArg04 > 0xFF)
	{
		word32 ebx_139;
		word32 esi_140;
		word32 edi_141;
		ui32 eax_67 = fn004070AD(ebx, esi, edi, out ebx_139, out esi_140, out edi_141);
		if (eax_67 == 0x00)
			return eax_67;
		eax_75 = (word32) wArg06_108;
		return eax_75 & dwArg08;
	}
	else
	{
		eax_75 = (word32) g_ptr40B490[dwArg04].t0000;
		return eax_75 & dwArg08;
	}
}

// 00404396: Register ui32 fn00404396(Stack Eq_3 dwArg04)
// Called from:
//      fn00401DA6
ui32 fn00404396(Eq_3 dwArg04)
{
	Eq_3 eax_147 = *((word32) dwArg04 + 0x0C);
	byte al_9 = (byte) eax_147;
	if ((al_9 & 131) == 0x00 || (al_9 & 0x40) != 0x00)
		return eax_147 | ~0x00;
	if ((al_9 & 0x02) == 0x00)
	{
		Eq_3 eax_27;
		*((word32) dwArg04 + 0x0C) = eax_147 | 0x01;
		if (((word16) (eax_147 | 0x01) & 0x010C) == 0x00)
			eax_27 = fn00406E65(dwArg04);
		else
		{
			eax_27 = *((word32) dwArg04 + 8);
			*dwArg04 = eax_27;
		}
		Eq_199 eax_53 = fn00407267(eax_27, *((word32) dwArg04 + 16), *((word32) dwArg04 + 8), *((word32) dwArg04 + 24));
		*((word32) dwArg04 + 4) = eax_53;
		if (eax_53 == 0x00 || eax_53 == ~0x00)
		{
			eax_147 = (0x00 - (eax_53 == 0x00) & 0x10) + 0x10;
			*((word32) dwArg04 + 0x0C) |= eax_147;
			*((word32) dwArg04 + 4) &= 0x00;
			return eax_147 | ~0x00;
		}
		else
		{
			Eq_3 edx_82 = *((word32) dwArg04 + 0x0C);
			if (((byte) edx_82 & 0x82) == 0x00)
			{
				struct Eq_5632 * edi_101;
				Eq_3 ecx_87 = *((word32) dwArg04 + 16);
				if (ecx_87 != ~0x00)
					edi_101 = (struct Eq_5632 *) ((char *) *((char *) &g_t40BEE0 + (ecx_87 >> 0x05) * 0x04) + (ecx_87 & 0x1F) * 0x08);
				else
					edi_101 = &g_t40B480;
				if ((edi_101->b0004 & 0x82) == 0x82)
					*((word32) dwArg04 + 0x0C) = edx_82 | 0x2000;
			}
			if (*((word32) dwArg04 + 24) == 0x0200)
			{
				Eq_3 ecx_121 = *((word32) dwArg04 + 0x0C);
				byte ch_126 = SLICE(ecx_121, byte, 8);
				if (((byte) ecx_121 & 0x08) != 0x00 && (ch_126 & 0x04) == 0x00)
					((word32) dwArg04 + 24)->u0 = 0x1000;
			}
			Eq_3 ecx_133 = *dwArg04;
			*((word32) dwArg04 + 4) = eax_53 - 0x01;
			ui32 eax_139 = (word32) *ecx_133;
			*dwArg04 = (word32) ecx_133 + 1;
			return eax_139;
		}
	}
	else
	{
		*((word32) dwArg04 + 0x0C) = eax_147 | 0x20;
		eax_147 |= 0x20;
		return eax_147 | ~0x00;
	}
}

// 00404474: Register Eq_3 fn00404474(Register Eq_3 eax, Stack Eq_3 dwArg04, Stack Eq_3 dwArg08)
// Called from:
//      fn00401DBC
Eq_3 fn00404474(Eq_3 eax, Eq_3 dwArg04, Eq_3 dwArg08)
{
	Eq_3 eax_125;
	byte bl_62 = (byte) dwArg04;
	if (dwArg04 != ~0x00)
	{
		Eq_3 eax_14 = *((word32) dwArg08 + 0x0C);
		ci8 al_15 = (byte) eax_14;
		if ((al_15 & 0x01) != 0x00)
		{
l00404492:
			if (*((word32) dwArg08 + 8) == 0x00)
				fn00406E65(dwArg08);
			eax = *dwArg08;
			if (eax == *((word32) dwArg08 + 8))
			{
				if (*((word32) dwArg08 + 4) != 0x00)
					goto l004044C0;
				*dwArg08 = (word32) eax + 1;
			}
			--*dwArg08;
			Eq_3 eax_57 = *dwArg08;
			if ((*((word32) dwArg08 + 0x0C) & 0x40) != 0x00)
			{
				if (*eax_57 != bl_62)
				{
					*dwArg08 = (word32) eax_57 + 1;
					eax = (word32) eax_57 + 1;
					goto l004044C0;
				}
			}
			else
				eax_57->u0 = bl_62;
			Eq_3 eax_68 = *((word32) dwArg08 + 0x0C);
			*((word32) dwArg08 + 4) = (word32) *((word32) dwArg08 + 4) + 1;
			*((word32) dwArg08 + 0x0C) = eax_68 & ~0x10 | 0x01;
			eax_125 = dwArg04 & 0xFF;
			return eax_125;
		}
		eax = eax_14;
		if (al_15 >= 0x00)
			goto l004044C0;
		eax = eax_14;
		if ((al_15 & 0x02) == 0x00)
			goto l00404492;
	}
l004044C0:
	eax_125 = eax | ~0x00;
	return eax_125;
}

// 004044E0: Register Eq_3 fn004044E0(Stack Eq_3 dwArg04)
// Called from:
//      fn00401DBC
Eq_3 fn004044E0(Eq_3 dwArg04)
{
	if (g_t40B4A0 <= 0x01)
		return (word32) g_ptr40B490[dwArg04].t0000 & 0x08;
	return fn00404318(dwArg04, 0x08);
}

// 00404509: void fn00404509(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn00401DBC
void fn00404509(Eq_3 dwArg04, Eq_3 dwArg08, Eq_3 dwArg0C)
{
	if (dwArg08 == 0x00 || dwArg0C == 0x00)
		return;
	byte al_20 = *dwArg08;
	if (al_20 == 0x00)
	{
		if (dwArg04 != 0x00)
			*dwArg04 = 0x00;
		return;
	}
	if (g_t40BC54 == 0x00)
	{
		if (dwArg04 != 0x00)
			*dwArg04 = (word16) al_20;
		return;
	}
	if ((g_ptr40B490[(word32) al_20].b0001 & 0x80) == 0x00)
	{
		if (MultiByteToWideChar(g_t40BC64, 0x09, dwArg08, 0x01, dwArg04, (uint32) (uint8) (dwArg04 != 0x00)) != 0x00)
			return;
		goto l0040459B;
	}
	bool C_93;
	Eq_3 eax_58 = g_t40B4A0;
	if (eax_58 > 0x01)
	{
		C_93 = SLICE(cond(dwArg0C - eax_58), bool, 1);
		if (dwArg0C < eax_58)
		{
l00404594:
			if (!C_93 && *((word32) dwArg08 + 1) != 0x00)
				return;
l0040459B:
			g_t40BA50.u0 = 0x2A;
			return;
		}
		Eq_3 eax_83 = MultiByteToWideChar(g_t40BC64, 0x09, dwArg08, eax_58, dwArg04, (uint32) (uint8) (dwArg04 != 0x00));
		eax_58 = g_t40B4A0;
		if (eax_83 != 0x00)
			return;
	}
	C_93 = SLICE(cond(dwArg0C - eax_58), bool, 1);
	goto l00404594;
}

// 004045E0: Register word32 fn004045E0(Stack Eq_3 dwArg04, Stack Eq_3 bArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn00401DBC
//      fn00404245
//      fn004070AD
//      fn00407455
//      fn0040854D
word32 fn004045E0(Eq_3 dwArg04, Eq_3 bArg08, Eq_3 dwArg0C)
{
	Eq_3 edx_24 = dwArg0C;
	if (dwArg0C == 0x00)
		return;
	uint32 eax_36 = (uint32) (uint8) bArg08;
	Eq_3 al_12 = bArg08;
	Eq_3 edi_16 = dwArg04;
	byte al_81 = (byte) eax_36;
	if (dwArg0C >= 0x04)
	{
		ui32 ecx_19 = -dwArg04;
		ui32 ecx_20 = ecx_19 & 0x03;
		if ((ecx_19 & 0x03) != 0x00)
		{
			edx_24 = dwArg0C - (ecx_19 & 0x03);
			do
			{
				edi_16->u0 = al_81;
				edi_16 = (word32) edi_16 + 1;
				--ecx_20;
			} while (ecx_20 != 0x00);
		}
		al_12 = (byte) (eax_36 * 0x01010101);
		edx_24 &= 0x03;
		uint32 ecx_50 = edx_24 >> 0x02;
		if (ecx_50 != 0x00)
		{
			while (true)
			{
				al_12 = (byte) (eax_36 * 0x01010101);
				if (ecx_50 == 0x00)
					break;
				*edi_16 = eax_36 * 0x01010101;
				edi_16 = (word32) edi_16 + 4;
				--ecx_50;
			}
			if (edx_24 == 0x00)
				return;
		}
	}
	do
	{
		*edi_16 = al_12;
		edi_16 = (word32) edi_16 + 1;
		--edx_24;
	} while (edx_24 != 0x00);
	return;
}

// 00404730: Register word32 fn00404730(Stack Eq_3 dwArg04, Stack uint32 dwArg08, Stack uint32 dwArg0C, Stack uint32 dwArg10, Register out ptr32 edxOut)
// Called from:
//      fn00401DBC
word32 fn00404730(Eq_3 dwArg04, uint32 dwArg08, uint32 dwArg0C, uint32 dwArg10, ptr32 & edxOut)
{
	if ((dwArg10 | dwArg08) != 0x00)
	{
		uint64 edx_eax_23 = dwArg0C * dwArg04;
		edxOut = SLICE(edx_eax_23, word32, 32) + (word32) (dwArg0C * dwArg08 + dwArg10 * dwArg04);
		return (word32) edx_eax_23;
	}
	else
	{
		uint64 edx_eax_30 = dwArg0C * dwArg04;
		edxOut = SLICE(edx_eax_30, word32, 32);
		return (word32) edx_eax_30;
	}
}

// 00404BE0: Register ptr32 fn00404BE0(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack uint32 dwArg0C, Register out Eq_3 ediOut)
// Called from:
//      fn00405DB0
ptr32 fn00404BE0(Eq_3 dwArg04, Eq_3 dwArg08, uint32 dwArg0C, union Eq_3 & ediOut)
{
	Eq_3 esi_14 = dwArg08;
	Eq_3 edi_16 = dwArg04;
	Eq_3 eax_19 = (word32) dwArg08 + dwArg0C;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_19)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
				{
				case 0x04:
					ediOut = edi;
					return ebp;
				case 0x05:
					*dwArg04 = *dwArg08;
					ediOut = edi;
					return ebp;
				case 0x06:
					*dwArg04 = *dwArg08;
					*((word32) dwArg04 + 1) = *((word32) dwArg08 + 1);
					ediOut = edi;
					return ebp;
				case 0x07:
					*dwArg04 = *dwArg08;
					*((word32) dwArg04 + 1) = *((word32) dwArg08 + 1);
					*((word32) dwArg04 + 2) = *((word32) dwArg08 + 2);
					ediOut = edi;
					return ebp;
				}
			}
		}
		else
		{
			uint32 ecx_167 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (dwArg0C >> 0x02)
				{
				case 0x00:
l00404D23:
					(*((char *) g_a404D2C + (dwArg0C & 0x03) * 0x04))();
					ediOut = edi_16;
					return fp - 4;
				case 0x01:
l00404D10:
					(dwArg04 - 0x04)[dwArg0C >> 0x02] = (dwArg08 - 0x04)[dwArg0C >> 0x02];
					edi_16 = dwArg04 + (dwArg0C >>u 0x02) * 0x04;
					goto l00404D23;
				case 0x02:
l00404D08:
					*((word32) (dwArg04 - 0x08) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x08)[dwArg0C >> 0x02];
					goto l00404D10;
				case 0x03:
l00404D00:
					*((word32) (dwArg04 - 0x0C) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x0C)[dwArg0C >> 0x02];
					goto l00404D08;
				case 0x04:
l00404CF8:
					*((word32) (dwArg04 - 0x10) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x10)[dwArg0C >> 0x02];
					goto l00404D00;
				case 0x05:
l00404CF0:
					*((word32) (dwArg04 - 0x14) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x14)[dwArg0C >> 0x02];
					goto l00404CF8;
				case 0x06:
l00404CE8:
					*((word32) (dwArg04 - 0x18) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x18)[dwArg0C >> 0x02];
					goto l00404CF0;
				case 0x07:
					*((word32) (dwArg04 - 0x1C) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x1C)[dwArg0C >> 0x02];
					goto l00404CE8;
				}
			}
			else
			{
				for (; ecx_167 != 0x00; --ecx_167)
				{
					*edi_16 = *esi_14;
					esi_14 = (word32) esi_14 + 4;
					edi_16 = (word32) edi_16 + 4;
				}
				(*((char *) g_a404D2C + (dwArg0C & 0x03) * 0x04))();
				ediOut = edi_16;
				return fp - 4;
			}
		}
	}
	else
	{
		struct Eq_6008 * esi_107 = (word32) dwArg08 + (dwArg0C - 0x04);
		Eq_3 edi_108 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_108 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
				{
				case 0x00:
					ediOut = edi;
					return ebp;
				case 0x01:
					((word32) edi_108 + 3)->u0 = esi_107->b0003;
					ediOut = edi;
					return ebp;
				case 0x02:
					((word32) edi_108 + 3)->u0 = esi_107->b0003;
					((word32) edi_108 + 2)->u0 = esi_107->b0002;
					ediOut = edi;
					return ebp;
				case 0x03:
					((word32) edi_108 + 3)->u0 = esi_107->b0003;
					((word32) edi_108 + 2)->u0 = esi_107->b0002;
					((word32) edi_108 + 1)->u0 = esi_107->b0001;
					ediOut = edi;
					return ebp;
				}
			}
		}
		else
		{
			uint32 ecx_109 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (-(dwArg0C >> 0x02))
				{
				case 0x00:
					(*((char *) g_a404EC8 + (dwArg0C & 0x03) * 0x04))();
					ediOut = edi_108;
					return fp - 4;
				}
			}
			else
			{
				for (; ecx_109 != 0x00; --ecx_109)
				{
					*edi_108 = esi_107->dw0000;
					esi_107 -= 4;
					edi_108 -= 4;
				}
				(*((char *) g_a404EC8 + (dwArg0C & 0x03) * 0x04))();
				ediOut = edi_108;
				return fp - 4;
			}
		}
	}
}

// 00404F20: Register word32 fn00404F20(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08)
// Called from:
//      fn0040321A
//      fn0040353B
//      fn00406F0F
word32 fn00404F20(Eq_3 dwArg04, Eq_3 dwArg08)
{
	return fn00404F95(dwArg04, dwArg08);
}

// 00404F30: Register word32 fn00404F30(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08)
// Called from:
//      fn0040321A
//      fn00406F0F
word32 fn00404F30(Eq_3 dwArg04, Eq_3 dwArg08)
{
	Eq_3 ecx_12 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		do
		{
			ecx_12 = (word32) ecx_12 + 1;
			if (*ecx_12 == 0x00)
				goto l00404F83;
		} while ((ecx_12 & 0x03) != 0x00);
	}
	do
	{
		do
		{
			word32 eax_26 = *ecx_12;
			ecx_12 = (word32) ecx_12 + 4;
		} while (((eax_26 ^ ~0x00 ^ eax_26 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_35 = *((word32) ecx_12 - 4);
		byte ah_51 = SLICE(eax_35, byte, 8);
		if ((byte) eax_35 == 0x00)
			return fn00404F95(ecx_12 - 0x04, dwArg08);
		if (ah_51 == 0x00)
			return fn00404F95(ecx_12 - 0x03, dwArg08);
		if ((eax_35 & 0x00FF0000) == 0x00)
			return fn00404F95(ecx_12 - 0x02, dwArg08);
	} while ((eax_35 & 0xFF000000) != 0x00);
l00404F83:
	Eq_3 edi_84 = ecx_12 - 0x01;
	return fn00404F95(edi_84, dwArg08);
}

// 00404F95: Register Eq_3 fn00404F95(Register Eq_3 edi, Stack Eq_3 dwArg0C)
// Called from:
//      fn00404F20
//      fn00404F30
Eq_3 fn00404F95(Eq_3 edi, Eq_3 dwArg0C)
{
	Eq_6335 edx_131;
	Eq_3 ecx_12 = dwArg0C;
	if ((dwArg0C & 0x03) != 0x00)
	{
		do
		{
			byte dl_11 = *ecx_12;
			ecx_12 = (word32) ecx_12 + 1;
			edx_131 = SEQ(edx_24_8, dl_11);
			if (dl_11 == 0x00)
				goto l00405010;
			edi->u0 = dl_11;
			edi = (word32) edi + 1;
		} while ((ecx_12 & 0x03) != 0x00);
	}
l00404FBE:
	edx_131 = *ecx_12;
	Eq_6363 eax_25 = *ecx_12;
	byte dl_34 = (byte) edx_131;
	byte dh_48 = SLICE(edx_131, byte, 8);
	ecx_12 = (word32) ecx_12 + 4;
	if (((eax_25 ^ ~0x00 ^ (word32) eax_25 + 0x7EFEFEFF) & 0x81010100) != 0x00)
	{
		if (dl_34 == 0x00)
		{
l00405010:
			edi->u0 = (byte) edx_131;
			return;
		}
		Eq_6384 dx_52 = (word16) edx_131;
		Eq_6386 dx_62 = (word16) edx_131;
		if (dh_48 == 0x00)
		{
			*edi = dx_52;
			return;
		}
		if ((edx_131 & 0x00FF0000) == 0x00)
		{
			*edi = dx_62;
			((word32) edi + 2)->u0 = 0x00;
			return;
		}
		if ((edx_131 & 0xFF000000) == 0x00)
		{
			*edi = edx_131;
			return;
		}
	}
	*edi = edx_131;
	edi = (word32) edi + 4;
	goto l00404FBE;
}

// 0040532E: Register Eq_3 fn0040532E(Stack Eq_3 dwArg04)
// Called from:
//      fn004053B0
Eq_3 fn0040532E(Eq_3 dwArg04)
{
	up32 eax_10 = fn00408240(g_t40BFE8);
	union Eq_3 * ecx_19 = g_ptr40BFE4;
	Eq_3 eax_21 = g_t40BFE8;
	if (eax_10 < (ecx_19 - eax_21) + 0x04)
	{
		up32 ecx_27 = 0x0800;
		if (eax_10 < 0x0800)
			ecx_27 = eax_10;
		word32 esi_43;
		Eq_3 eax_41 = fn004080DE(eax_21, ecx_27 + eax_10, out esi_43);
		if (eax_41 == 0x00)
		{
			word32 esi_134;
			eax_41 = fn004080DE(g_t40BFE8, esi_43 + 0x10, out esi_134);
			if (eax_41 == 0x00)
				return eax_41;
		}
		int32 ecx_80 = g_ptr40BFE4 - g_t40BFE8;
		g_t40BFE8 = eax_41;
		ecx_19 = (word32) eax_41 + (ecx_80 >> 0x02) * 0x04;
		g_ptr40BFE4 = ecx_19;
	}
	*ecx_19 = (union Eq_3 *) dwArg04;
	g_ptr40BFE4 = (union Eq_3 *) ((char *) g_ptr40BFE4 + 4);
	return dwArg04;
}

// 004053B0: void fn004053B0(Stack Eq_3 dwArg04)
// Called from:
//      fn004030AF
void fn004053B0(Eq_3 dwArg04)
{
	fn0040532E(dwArg04);
}

// 004053EA: Register word32 fn004053EA(Stack Eq_3 dwArg04, Stack word32 dwArg08, Stack Eq_3935 wArg0C, Stack byte bArg0E, Stack byte bArg0F, Register out (ptr32 Eq_3953) esiOut, Register out ptr32 ediOut)
// Called from:
//      fn0040321A
//      fn00406F0F
word32 fn004053EA(Eq_3 dwArg04, word32 dwArg08, Eq_3935 wArg0C, byte bArg0E, byte bArg0F, struct Eq_3953 & esiOut, ptr32 & ediOut)
{
	ptr32 * esp_184;
	ptr32 ebx_12 = 0x00;
	if (g_t40BBE0 != null)
	{
l0040546A:
		word32 dwArg0C_226;
		struct Eq_6501 * esp_106 = fp - 0x20;
		Eq_3556 eax_76 = g_t40BBEC;
		if (eax_76 == null)
		{
l004054AF:
			Eq_3556 eax_118 = g_t40BBE4;
			if (eax_118 != null)
			{
				ptr32 eax_129;
				word32 ecx_130;
				eax_118();
				ebx_12 = eax_129;
				if (eax_129 != 0x00)
				{
					Eq_3556 eax_137 = g_t40BBE8;
					if (eax_137 != null)
					{
						esp_106->ptrFFFFFFFC = eax_129;
						ptr32 eax_144;
						word32 ecx_145;
						eax_137();
						ebx_12 = eax_144;
					}
				}
			}
			goto l004054CE;
		}
		else
		{
			word32 eax_87;
			word32 ecx_88;
			eax_76();
			if (eax_87 != 0x00)
			{
				esp_106->ptrFFFFFFFC = fp - 0x08;
				esp_106->dwFFFFFFF8 = 0x0C;
				esp_106->ptrFFFFFFF4 = fp - 0x14;
				esp_106->dwFFFFFFF0 = 0x01;
				esp_106->dwFFFFFFEC = eax_87;
				word32 eax_107;
				g_t40BBF0();
				if (eax_107 != 0x00 && (bLoc0C & 0x01) != 0x00)
					goto l004054AF;
			}
			if (g_t40BA68 >= 0x04)
				dwArg0C_226 = SEQ(bArg0F, bArg0E | 0x20, wArg0C);
			else
				dwArg0C_226 = SEQ(bArg0F, bArg0E | 0x04, wArg0C);
l004054CE:
			struct Eq_6605 * esp_166 = esp_106 - 4;
			esp_166->dw0000 = dwArg0C_226;
			esp_166->dwFFFFFFFC = dwArg08;
			esp_166->tFFFFFFF8 = dwArg04;
			esp_166->ptrFFFFFFF4 = ebx_12;
			word32 ecx_186;
			g_t40BBE0();
l004054DE:
			struct Eq_6637 * esp_194 = esp_184 + 1;
			ptr32 edi_193 = *esp_184;
			word32 ebx_197 = esp_194->dw0004;
			esiOut = esp_194->ptr0000;
			ediOut = edi_193;
			return ebx_197;
		}
	}
	else
	{
		Eq_232 eax_23 = LoadLibraryA(4234112);
		if (eax_23 != null)
		{
			Eq_3556 eax_33 = GetProcAddress(eax_23, 0x00409B74);
			g_t40BBE0 = eax_33;
			if (eax_33 != null)
			{
				g_t40BBE4 = GetProcAddress(eax_23, 4234084);
				g_t40BBE8 = GetProcAddress(eax_23, 0x00409B50);
				if (g_t40BA5C == 0x02)
				{
					Eq_3556 eax_62 = GetProcAddress(eax_23, 0x00409B34);
					g_t40BBF0 = eax_62;
					if (eax_62 != null)
						g_t40BBEC = GetProcAddress(eax_23, 4234012);
				}
				goto l0040546A;
			}
		}
		esp_184 = fp - 0x20;
		goto l004054DE;
	}
}

// 004054F0: void fn004054F0(Stack Eq_3 dwArg04, Stack (ptr32 byte) dwArg08, Stack uint32 dwArg0C)
// Called from:
//      fn0040321A
//      fn00406F0F
void fn004054F0(Eq_3 dwArg04, byte * dwArg08, uint32 dwArg0C)
{
	uint32 ecx_31 = dwArg0C;
	if (dwArg0C == 0x00)
		return;
	uint32 ecx_129;
	byte al_173;
	uint32 ecx_113;
	uint32 ebx_117 = dwArg0C;
	byte * esi_171 = dwArg08;
	Eq_3 edi_111 = dwArg04;
	if ((dwArg08 & 0x03) == 0x00)
	{
		ecx_113 = dwArg0C >> 0x02;
		if (dwArg0C >> 0x02 == 0x00)
			goto l00405543;
	}
	else
	{
		do
		{
			al_173 = *esi_171;
			edi_111->u0 = al_173;
			++esi_171;
			edi_111 = (word32) edi_111 + 1;
			--ecx_31;
			if (ecx_31 == 0x00)
				return;
			if (al_173 == 0x00)
			{
				while ((edi_111 & 0x03) != 0x00)
				{
					edi_111->u0 = al_173;
					edi_111 = (word32) edi_111 + 1;
					--ecx_31;
					if (ecx_31 == 0x00)
						return;
				}
				ebx_117 = ecx_31;
				ecx_129 = ecx_31 >> 0x02;
				if (ecx_129 != 0x00)
				{
l004055F7:
					do
					{
						*edi_111 = 0x00;
						edi_111 = (word32) edi_111 + 4;
						--ecx_129;
					} while (ecx_129 != 0x00);
l00405603:
					al_173 = 0x00;
					ebx_117 &= 0x03;
					if (ebx_117 == 0x00)
						return;
				}
				do
				{
					edi_111->u0 = al_173;
					edi_111 = (word32) edi_111 + 1;
l00405588:
					--ebx_117;
				} while (ebx_117 != 0x00);
				return;
			}
		} while ((esi_171 & 0x03) != 0x00);
		ebx_117 = ecx_31;
		ecx_113 = ecx_31 >> 0x02;
		if (ecx_31 >> 0x02 == 0x00)
		{
l0040553E:
			ebx_117 &= 0x03;
			if (ebx_117 == 0x00)
				return;
l00405543:
			do
			{
				al_173 = *esi_171;
				edi_111->u0 = al_173;
				++esi_171;
				edi_111 = (word32) edi_111 + 1;
				if (al_173 == 0x00)
					goto l00405588;
				--ebx_117;
			} while (ebx_117 != 0x00);
			return;
		}
	}
	do
	{
		Eq_6683 edx_74 = *esi_171;
		Eq_6687 eax_70 = *esi_171;
		byte dl_79 = (byte) edx_74;
		byte dh_88 = SLICE(edx_74, byte, 8);
		esi_171 += 4;
		if (((eax_70 ^ ~0x00 ^ (word32) eax_70 + 0x7EFEFEFF) & 0x81010100) != 0x00)
		{
			if (dl_79 != 0x00)
			{
				if (dh_88 != 0x00)
				{
					if ((edx_74 & 0x00FF0000) != 0x00)
					{
						if ((edx_74 & 0xFF000000) != 0x00)
							goto l00405595;
						*edi_111 = edx_74;
					}
					else
						*edi_111 = edx_74 & 0xFFFF;
				}
				else
					*edi_111 = edx_74 & 0xFF;
			}
			else
				*edi_111 = 0x00;
			edi_111 = (word32) edi_111 + 4;
			ecx_129 = ecx_113 - 0x01;
			if (ecx_129 != 0x00)
				goto l004055F7;
			goto l00405603;
		}
l00405595:
		*edi_111 = edx_74;
		edi_111 = (word32) edi_111 + 4;
		--ecx_113;
	} while (ecx_113 != 0x00);
	goto l0040553E;
}

// 00405614: Register Eq_3 fn00405614(Register Eq_3 eax)
// Called from:
//      fn004057F8
Eq_3 fn00405614(Eq_3 eax)
{
	if (eax == 0x03A4)
		return 0x0411;
	if (eax == 0x03A8)
		return 0x0804;
	if (eax == 949)
		return 0x0412;
	if (eax == 0x03B6)
		return 0x0404;
	return 0x00;
}

// 00405643: void fn00405643()
// Called from:
//      fn004057F8
void fn00405643()
{
	word32 ecx_12;
	struct Eq_6842 * edi_14 = g_a40BCA0;
	for (ecx_12 = 0x40; ecx_12 != 0x00; --ecx_12)
	{
		edi_14->b0000 = (byte) 0x00;
		++edi_14;
	}
	edi_14->b0000 = 0x00;
	g_t40BDA4.u0 = 0x00;
	g_dw40BC98 = 0x00;
	g_dw40BC94 = 0x00;
	g_dw40BDB0 = 0x00;
	g_dw40BDB4 = 0x00;
	g_dw40BDB8 = 0x00;
}

// 0040566C: void fn0040566C(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi)
// Called from:
//      fn004057F8
void fn0040566C(Eq_3 ebx, Eq_3 esi, Eq_3 edi)
{
	Eq_6879 ebp_230 = fp - 4;
	if (GetCPInfo(g_t40BDA4, fp - 0x1C) == 0x01)
	{
		Eq_6896 eax_437 = 0x00;
		do
		{
			*((word32) eax_441 + (fp - 0x011C)) = (byte) eax_441;
			eax_437 = (word32) eax_441 + 1;
			eax_441 = eax_437;
		} while (eax_441 < 0xFF);
		byte al_122 = bLoc16;
		if (bLoc16 != 0x00)
		{
			byte * edx_123 = fp - 0x15;
			do
			{
				Eq_6958 ecx_97 = (word32) *edx_123;
				Eq_6958 eax_99 = (word32) al_122;
				if (eax_99 <= ecx_97)
				{
					word32 ecx_102 = ecx_97 - eax_99;
					uint32 ecx_105;
					struct Eq_6966 * edi_108 = (word32) eax_99 + (fp - 0x011C);
					for (ecx_105 = ecx_102 + 0x01 >> 0x02; ecx_105 != 0x00; --ecx_105)
					{
						edi_108->dw0000 = 0x20202020;
						edi_108 += 4;
					}
					ui32 ecx_113;
					for (ecx_113 = ecx_102 + 0x01 & 0x03; ecx_113 != 0x00; --ecx_113)
					{
						edi_108->dw0000 = (word32) 0x20;
						++edi_108;
					}
				}
				byte * edx_119 = edx_123 + 1;
				al_122 = *edx_119;
				edx_123 = edx_119 + 1;
			} while (al_122 != 0x00);
		}
		Eq_3 ebx_169;
		Eq_3 edi_171;
		Eq_3 esi_173;
		fn004070AD(ebx, 0x0100, edi, out ebx_169, out esi_173, out edi_171);
		Eq_3 edi_202;
		Eq_3 esi_203;
		Eq_6923 esi_234;
		word32 ebp_440;
		ebx = fn00407455(fn00407455(ebx_169, esi_173, edi_171, out ebp_440, out esi_203, out edi_202), esi_203, edi_202, out ebp_230, out esi_234, out edi);
		Eq_6923 eax_242 = 0x00;
		do
		{
			Eq_6998 cl_261;
			byte cl_249 = *((word32) (ebp_230 - 0x0518) + eax_242 * 0x02);
			if ((cl_249 & 0x01) != 0x00)
			{
				*((word32) eax_242 + 4242593) |= 0x10;
				cl_261 = Mem263[ebp_230 - 0x0218 + eax_242:byte];
				goto l0040577E;
			}
			if ((cl_249 & 0x02) != 0x00)
			{
				*((word32) eax_242 + 4242593) |= 0x20;
				cl_261 = Mem258[ebp_230 - 0x0318 + eax_242:byte];
l0040577E:
				*((word32) eax_242 + 4242880) = cl_261;
			}
			else
				*((word32) eax_242 + 4242880) = 0x00;
			eax_242 = (word32) eax_242 + 1;
		} while (eax_242 < esi_234);
	}
	else
	{
		struct Eq_6894 * eax_25;
		do
		{
			Eq_6998 cl_47;
			byte al_45 = (byte) eax_25;
			byte al_52 = (byte) eax_25;
			if (eax_25 >= (struct Eq_6894 *) 0x41 && eax_25 <= (struct Eq_6894 *) 0x5A)
			{
				eax_25[4242593] = (struct Eq_6894) (eax_25[4242593] | 0x10);
				cl_47 = al_52 + 0x20;
				goto l004057C1;
			}
			if (eax_25 >= (struct Eq_6894 *) 0x61 && eax_25 <= (struct Eq_6894 *) 122)
			{
				eax_25[4242593] = (struct Eq_6894) (eax_25[4242593] | 0x20);
				cl_47 = al_45 - 0x20;
l004057C1:
				eax_25[4242880] = (struct Eq_6894) cl_47;
			}
			else
				eax_25[4242880] = (struct Eq_6894) 0x00;
			++eax_25;
		} while (eax_25 < (struct Eq_6894 *) 0x0100);
	}
	fn004041A2(*((word32) ebp_230 - 4), ebx, esi, edi);
}

// 004057F8: void fn004057F8(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Stack Eq_3 dwArg04)
// Called from:
//      fn004059DE
void fn004057F8(Eq_3 ebx, Eq_3 esi, Eq_3 edi, Eq_3 dwArg04)
{
	Eq_3 eax_29;
	Eq_3 eax_9 = g_t40B498;
	g_dw40BBF4 = 0x00;
	Eq_3 esi_153 = dwArg04;
	Eq_3 ebx_124 = 0x00;
	if (dwArg04 == ~0x01)
	{
		g_dw40BBF4 = 0x01;
		eax_29 = GetOEMCP();
	}
	else if (dwArg04 == ~0x02)
	{
		g_dw40BBF4 = 0x01;
		eax_29 = GetACP();
	}
	else
	{
		if (dwArg04 != ~0x03)
		{
l0040585B:
			if (esi_153 == g_t40BDA4)
			{
l004059CA:
				goto l004059D1;
			}
			Eq_3 edi_154;
			if (esi_153 != 0x00)
			{
				ui32 edx_161 = 0x00;
				struct Eq_7138 * eax_160;
				do
				{
					if (eax_160->dw0000 == esi_153)
					{
						word32 ecx_159;
						struct Eq_7142 * edi_158 = g_a40BCA0;
						for (ecx_159 = 0x40; ecx_159 != 0x00; --ecx_159)
						{
							edi_158->b0000 = (byte) 0x00;
							++edi_158;
						}
						edi_158->b0000 = 0x00;
						ui32 ecx_67 = edx_161 * 0x03;
						byte * dwLoc20_387 = g_a40B4E0;
						ebx_124 = (ecx_67 << 0x04) + 0x0040B4F8;
						do
						{
							byte al_115 = *ebx_124;
							Eq_3 esi_112 = ebx_124;
							while (al_115 != 0x00)
							{
								byte dl_88 = *((word32) esi_112 + 1);
								if (dl_88 == 0x00)
									break;
								struct Eq_7354 * eax_105 = (word32) al_115;
								struct Eq_7354 * edi_93 = (word32) dl_88;
								if (eax_105 <= edi_93)
								{
									byte dl_98 = *dwLoc20_387;
									do
									{
										eax_105[4242593] = (struct Eq_7354) (eax_105[4242593] | dl_98);
										++eax_105;
									} while (eax_105 <= edi_93);
								}
								struct Eq_7359 * esi_111 = (word32) esi_112 + 1;
								esi_112 = &esi_111->b0001;
								al_115 = esi_111->b0001;
							}
							byte * v19_118 = dwLoc20_387 + 1;
							dwLoc20_387 = v19_118;
							ebx_124 = (word32) ebx_124 + 8;
						} while (v19_118 < (byte *) ~0x0040B4DB);
						g_t40BDA4 = dwArg04;
						g_dw40BC98 = 0x01;
						word32 eax_130 = fn00405614(dwArg04);
						struct Eq_7330 * esi_140 = (ecx_67 << 0x04) + 4240620;
						g_dw40BDB0 = esi_140->dw0000;
						g_dw40BDB4 = esi_140->dw0004;
						g_dw40BC94 = eax_130;
						g_dw40BDB8 = esi_140->dw0008;
						esi_153 = &esi_140->dw0008 + 1;
						edi_154.u0 = 0x0040BDBC;
						goto l004059C5;
					}
					++eax_160;
					++edx_161;
				} while (eax_160 < (struct Eq_7138 *) ~0x0040B3F7);
				if (GetCPInfo(esi_153, fp - 0x1C) == 0x01)
				{
					word32 ecx_193;
					struct Eq_7167 * edi_195 = g_a40BCA0;
					for (ecx_193 = 0x40; ecx_193 != 0x00; --ecx_193)
					{
						edi_195->b0000 = (byte) 0x00;
						++edi_195;
					}
					edi_195->b0000 = 0x00;
					g_t40BDA4 = esi_153;
					g_dw40BC94 = 0x00;
					if (dwLoc1C > 0x01)
					{
						if (bLoc16 != 0x00)
						{
							struct Eq_7207 * ecx_213 = fp - 0x15;
							do
							{
								byte dl_216 = ecx_213->b0000;
								if (dl_216 == 0x00)
									break;
								struct Eq_7210 * eax_220;
								struct Eq_7210 * edx_221 = (word32) dl_216;
								for (eax_220 = (word32) ecx_213->bFFFFFFFF; eax_220 <= edx_221; ++eax_220)
									eax_220[4242593] = (struct Eq_7210) (eax_220[4242593] | 0x04);
								byte * ecx_234 = ecx_213 + 1;
								ecx_213 = (struct Eq_7207 *) (ecx_234 + 1);
							} while (*ecx_234 != 0x00);
						}
						struct Eq_7205 * eax_241;
						do
						{
							eax_241[4242593] = (struct Eq_7205) (eax_241[4242593] | 0x08);
							++eax_241;
						} while (eax_241 < (struct Eq_7205 *) 0xFF);
						g_dw40BC94 = fn00405614(esi_153);
						g_dw40BC98 = 0x01;
					}
					else
						g_dw40BC98 = 0x00;
					g_dw40BDB0 = 0x00;
					g_dw40BDB4 = 0x00;
					g_dw40BDB8 = 0x00;
					edi_154.u0 = 0x0040BDBC;
l004059C5:
					fn0040566C(ebx_124, esi_153, edi_154);
					goto l004059CA;
				}
				if (g_dw40BBF4 == 0x00)
				{
l004059D1:
					fn004041A2(eax_9, ebx, esi, edi);
					return;
				}
			}
			fn00405643();
			edi_154 = edi;
			goto l004059C5;
		}
		eax_29 = g_t40BC64;
		g_dw40BBF4 = 0x01;
	}
	dwArg04 = eax_29;
	esi_153 = eax_29;
	goto l0040585B;
}

// 004059DE: Register word32 fn004059DE(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi)
// Called from:
//      fn0040353B
//      fn0040376E
word32 fn004059DE(Eq_3 ebx, Eq_3 esi, Eq_3 edi)
{
	if (g_dw40BFEC == 0x00)
	{
		fn004057F8(ebx, esi, edi, ~0x02);
		g_dw40BFEC = 0x01;
	}
	return 0x00;
}

// 00405A00: Register ptr32 fn00405A00(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack Eq_3 dwArg0C, Register out Eq_3 esiOut, Register out Eq_3 ediOut)
// Called from:
//      fn00403810
//      fn004080DE
ptr32 fn00405A00(Eq_3 dwArg04, Eq_3 dwArg08, Eq_3 dwArg0C, union Eq_3 & esiOut, union Eq_3 & ediOut)
{
	Eq_3 esi_14 = dwArg08;
	Eq_3 edi_16 = dwArg04;
	word32 eax_19 = dwArg0C + dwArg08;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_19)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
				{
				case 0x04:
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x05:
					*dwArg04 = *dwArg08;
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x06:
					*dwArg04 = *dwArg08;
					*((word32) dwArg04 + 1) = *((word32) dwArg08 + 1);
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x07:
					*dwArg04 = *dwArg08;
					*((word32) dwArg04 + 1) = *((word32) dwArg08 + 1);
					*((word32) dwArg04 + 2) = *((word32) dwArg08 + 2);
					esiOut = esi;
					ediOut = edi;
					return ebp;
				}
			}
		}
		else
		{
			uint32 ecx_167 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (dwArg0C >> 0x02)
				{
				case 0x00:
l00405B43:
					(*((char *) g_a405B4C + (dwArg0C & 0x03) * 0x04))();
					esiOut = esi_14;
					ediOut = edi_16;
					return fp - 4;
				case 0x01:
l00405B30:
					(dwArg04 - 0x04)[dwArg0C >> 0x02] = (dwArg08 - 0x04)[dwArg0C >> 0x02];
					Eq_7469 eax_210 = (dwArg0C >> 0x02) * 0x04;
					esi_14 = dwArg08 + eax_210;
					edi_16 = dwArg04 + eax_210;
					goto l00405B43;
				case 0x02:
l00405B28:
					*((word32) (dwArg04 - 0x08) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x08)[dwArg0C >> 0x02];
					goto l00405B30;
				case 0x03:
l00405B20:
					*((word32) (dwArg04 - 0x0C) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x0C)[dwArg0C >> 0x02];
					goto l00405B28;
				case 0x04:
l00405B18:
					*((word32) (dwArg04 - 0x10) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x10)[dwArg0C >> 0x02];
					goto l00405B20;
				case 0x05:
l00405B10:
					*((word32) (dwArg04 - 0x14) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x14)[dwArg0C >> 0x02];
					goto l00405B18;
				case 0x06:
l00405B08:
					*((word32) (dwArg04 - 0x18) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x18)[dwArg0C >> 0x02];
					goto l00405B10;
				case 0x07:
					*((word32) (dwArg04 - 0x1C) + (dwArg0C >> 0x02) * 0x04) = (dwArg08 - 0x1C)[dwArg0C >> 0x02];
					goto l00405B08;
				}
			}
			else
			{
				for (; ecx_167 != 0x00; --ecx_167)
				{
					*edi_16 = *esi_14;
					esi_14 = (word32) esi_14 + 4;
					edi_16 = (word32) edi_16 + 4;
				}
				(*((char *) g_a405B4C + (dwArg0C & 0x03) * 0x04))();
				esiOut = esi_14;
				ediOut = edi_16;
				return fp - 4;
			}
		}
	}
	else
	{
		Eq_3 esi_107 = (word32) dwArg08 + (dwArg0C - 0x04);
		Eq_3 edi_108 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_108 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
				{
				case 0x00:
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x01:
					*((word32) edi_108 + 3) = *((word32) esi_107 + 3);
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x02:
					*((word32) edi_108 + 3) = *((word32) esi_107 + 3);
					*((word32) edi_108 + 2) = *((word32) esi_107 + 2);
					esiOut = esi;
					ediOut = edi;
					return ebp;
				case 0x03:
					*((word32) edi_108 + 3) = *((word32) esi_107 + 3);
					*((word32) edi_108 + 2) = *((word32) esi_107 + 2);
					*((word32) edi_108 + 1) = *((word32) esi_107 + 1);
					esiOut = esi;
					ediOut = edi;
					return ebp;
				}
			}
		}
		else
		{
			uint32 ecx_109 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (-(dwArg0C >> 0x02))
				{
				case 0x00:
					(*((char *) g_a405CE8 + (dwArg0C & 0x03) * 0x04))();
					esiOut = esi_107;
					ediOut = edi_108;
					return fp - 4;
				}
			}
			else
			{
				for (; ecx_109 != 0x00; --ecx_109)
				{
					*edi_108 = *esi_107;
					esi_107 -= 4;
					edi_108 -= 4;
				}
				(*((char *) g_a405CE8 + (dwArg0C & 0x03) * 0x04))();
				esiOut = esi_107;
				ediOut = edi_108;
				return fp - 4;
			}
		}
	}
}

// 00405D3D: Register Eq_3 fn00405D3D(Stack Eq_3 dwArg04)
// Called from:
//      fn00403B7F
Eq_3 fn00405D3D(Eq_3 dwArg04)
{
	Eq_3 eax_11 = HeapAlloc(g_t40BEC0, 0x00, 0x0140);
	g_t40BC80 = eax_11;
	if (eax_11 == 0x00)
		return eax_11;
	g_t40BC78 &= 0x00;
	g_dw40BC7C &= 0x00;
	g_t40BC88 = eax_11;
	g_t40BC84 = dwArg04;
	g_dw40BC8C = 0x10;
	return 0x01;
}

// 00405D85: Register Eq_3 fn00405D85(Stack Eq_3 dwArg04)
// Called from:
//      fn0040403C
//      fn004080DE
//      fn00408240
Eq_3 fn00405D85(Eq_3 dwArg04)
{
	Eq_3 eax_19 = g_t40BC80;
	Eq_3 ecx_8 = (word32) eax_19 + g_dw40BC7C * 0x14;
	while (eax_19 < ecx_8)
	{
		if (dwArg04 - *((word32) eax_19 + 0x0C) < 0x00100000)
			return eax_19;
		eax_19.u0 = (byte) eax_19.u0 + 20;
	}
	eax_19.u0 = 0x00;
	return eax_19;
}

// 00405DB0: Register Eq_3 fn00405DB0(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Register out (ptr32 Eq_5314) ebxOut, Register out ptr32 ebpOut, Register out Eq_5316 esiOut, Register out Eq_5317 ediOut)
// Called from:
//      fn0040403C
//      fn004080DE
Eq_3 fn00405DB0(Eq_3 dwArg04, Eq_3 dwArg08, struct Eq_5314 & ebxOut, ptr32 & ebpOut, union Eq_5316 & esiOut, LPVOID & ediOut)
{
	uint32 edi_19 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_3 eax_10 = *((word32) dwArg04 + 16);
	word32 ecx_26 = *((word32) dwArg08 - 4);
	struct Eq_7726 * ebp_451 = fp - 4;
	struct Eq_7730 * esp_15 = fp - 0x1C;
	struct Eq_7733 * esi_20 = (word32) dwArg08 - 4;
	Eq_7735 edi_21 = edi_19 >> 0x0F;
	Eq_3 ecx_24 = (word32) eax_10 + ((edi_19 >> 0x0F) *s 0x0204 + 0x0144);
	int32 ecx_112 = ecx_26 - 0x01;
	int32 dwLoc08_506 = ecx_26 - 0x01;
	if (((byte) (ecx_26 - 0x01) & 0x01) == 0x00)
	{
		struct Eq_7769 * ebx_36 = ecx_26 - 0x01 + ((word32) dwArg08 - 4);
		int32 edx_37 = ebx_36->dw0000;
		int32 edx_39 = *((word32) dwArg08 - 8);
		if (((byte) edx_37 & 0x01) == 0x00)
		{
			Eq_7794 edx_48 = (edx_37 >> 0x04) - 0x01;
			if (edx_48 > 0x3F)
				&edx_48.u0->t0000 = 0x3F;
			if (ebx_36->ptr0004 == ebx_36->ptr0008)
			{
				if (edx_48 < 0x20)
				{
					uint32 ebx_89 = ~(0x80000000 >> (byte) edx_48);
					*((word32) eax_10 + ((edi_19 >> 0x0F) * 0x04 + 0x0044)) &= ebx_89;
					word32 ecx_88 = edx_48 + 0x04 + eax_10;
					Eq_7855 v18_94 = *ecx_88 - 0x01;
					*ecx_88 = v18_94;
					if (v18_94 == 0x00)
						*dwArg04 &= ebx_89;
				}
				else
				{
					uint32 ebx_69 = ~(0x80000000 >> (byte) (edx_48 - 0x20));
					*((word32) eax_10 + ((edi_19 >> 0x0F) * 0x04 + 0x00C4)) &= ebx_69;
					word32 ecx_68 = edx_48 + 0x04 + eax_10;
					Eq_7855 v21_75 = *ecx_68 - 0x01;
					*ecx_68 = v21_75;
					if (v21_75 == 0x00)
						*((word32) dwArg04 + 4) &= ebx_69;
				}
			}
			ebx_36->ptr0008->ptr0004 = ebx_36->ptr0004;
			ebx_36->ptr0004->ptr0008 = ebx_36->ptr0008;
			ecx_112 = ecx_26 - 0x01 + edx_37;
			dwLoc08_506 = ecx_112;
		}
		Eq_7786 edx_122 = ecx_112 >> 0x04;
		Eq_3 edx_123 = edx_122 - 0x01;
		if (edx_122 > 0x40)
			edx_123.u0 = 0x3F;
		Eq_3 ebx_144;
		if ((edx_39 & 0x01) == 0x00)
		{
			struct Eq_7733 * esi_150 = (word32) dwArg08 - 4 - edx_39;
			ebx_144 = (edx_39 >> 0x04) - 0x01;
			if (ebx_144 > 0x3F)
				ebx_144.u0 = 0x3F;
			int32 ecx_167 = ecx_112 + edx_39;
			edx_123 = (ecx_167 >> 0x04) - 0x01;
			dwLoc08_506 = ecx_167;
			if (edx_123 > 0x3F)
				edx_123.u0 = 0x3F;
			if (ebx_144 != edx_123)
			{
				if (esi_150->ptr0004 == esi_150->ptr0008)
				{
					if (ebx_144 < 0x20)
					{
						uint32 esi_222 = ~(0x80000000 >> (byte) ebx_144);
						*((word32) eax_10 + ((edi_19 >> 0x0F) * 0x04 + 0x0044)) &= esi_222;
						byte v25_227 = *((word32) eax_10 + ((byte) ebx_144.u0 + 4)) - 0x01;
						((word32) eax_10 + ((byte) ebx_144.u0 + 4))->u0 = v25_227;
						if (v25_227 == 0x00)
							*dwArg04 &= esi_222;
					}
					else
					{
						uint32 esi_193 = ~(0x80000000 >> (byte) (ebx_144 - 0x20));
						*((word32) eax_10 + ((edi_19 >> 0x0F) * 0x04 + 0x00C4)) &= esi_193;
						byte v29_210 = *((word32) eax_10 + ((byte) ebx_144.u0 + 4)) - 0x01;
						((word32) eax_10 + ((byte) ebx_144.u0 + 4))->u0 = v29_210;
						if (v29_210 == 0x00)
							*((word32) dwArg04 + 4) &= esi_193;
					}
				}
				esi_150->ptr0008->ptr0004 = esi_150->ptr0004;
				esi_150->ptr0004->ptr0008 = esi_150->ptr0008;
			}
			esi_20 = esi_150;
		}
		else
			ebx_144 = dwArg04;
		struct Eq_5314 ** esp_362 = fp - 0x20;
		if ((edx_39 & 0x01) != 0x00 || ebx_144 != edx_123)
		{
			struct Eq_7733 * ecx_266 = (word32) ecx_24 + edx_123 * 0x08;
			struct Eq_7733 * ebx_267 = ecx_266->ptr0004;
			esi_20->ptr0008 = ecx_266;
			esi_20->ptr0004 = ebx_267;
			ecx_266->ptr0004 = esi_20;
			esi_20->ptr0004->ptr0008 = esi_20;
			if (esi_20->ptr0004 == esi_20->ptr0008)
			{
				byte cl_282 = Mem274[edx_123 + 0x04 + eax_10:byte];
				Mem286[edx_123 + 0x04 + eax_10:byte] = cl_282 + 0x01;
				if (edx_123 < 0x20)
				{
					if (cl_282 == 0x00)
						*dwArg04 |= 0x80000000 >> (byte) edx_123;
					word32 eax_334 = eax_10 + 0x44 + (edi_19 >>u 0x0F) * 0x04;
					*eax_334 |= 0x80000000 >> (byte) edx_123;
				}
				else
				{
					if (cl_282 == 0x00)
						*((word32) dwArg04 + 4) |= 0x80000000 >> (byte) (edx_123 - (struct Eq_8153 *) 0x20);
					word32 eax_310 = eax_10 + 0xC4 + (edi_19 >>u 0x0F) * 0x04;
					*eax_310 |= 0x80000000 >> (byte) (edx_123 - (struct Eq_8141 *) 0x20);
				}
			}
		}
		esi_20->dw0000 = dwLoc08_506;
		esi_20[(dwLoc08_506 - 0x04) / 0x0C] = (struct Eq_7733) dwLoc08_506;
		Eq_7855 v33_351 = *ecx_24 - 0x01;
		*ecx_24 = v33_351;
		eax_10 = ecx_24;
		if (v33_351 == 0x00)
		{
			Eq_3 eax_355 = g_t40BC78;
			if (eax_355 != 0x00)
			{
				VirtualFree((word32) *((word32) eax_355 + 0x0C) + (g_t40BC90 << 0x0F), 0x8000, 0x4000);
				Eq_3 eax_382 = g_t40BC78;
				*((word32) eax_382 + 8) |= 0x80000000 >> g_t40BC90;
				Eq_3 eax_390 = *((word32) g_t40BC78 + 16);
				Eq_7735 ecx_391 = g_t40BC90;
				*((word32) eax_390 + (ecx_391 * 0x04 + 0x00C4)) &= 0x00;
				Eq_3 eax_396 = *((word32) g_t40BC78 + 16);
				((word32) eax_396 + 67)->u0 = *((word32) eax_396 + 67) - 0x01;
				Eq_3 eax_399 = g_t40BC78;
				esp_362 = fp - 0x20;
				if (*((word32) *((word32) eax_399 + 16) + 67) == 0x00)
				{
					*((word32) eax_399 + 4) &= ~0x01;
					eax_399 = g_t40BC78;
				}
				if (*((word32) eax_399 + 8) == ~0x00)
				{
					VirtualFree(*((word32) eax_399 + 0x0C), 0x00, 0x8000);
					HeapFree(g_t40BEC0, 0x00, *((word32) g_t40BC78 + 16));
					Eq_3 eax_439 = g_t40BC78;
					ebp_451 = fn00404BE0(eax_439, (word32) eax_439 + 20, (word32) g_t40BC80 + ((g_dw40BC7C * 0x14 - eax_439) - 0x14), out edi_21);
					Eq_3 eax_461 = ebp_451->t0008;
					--g_dw40BC7C;
					esp_362 = fp - 44;
					if (eax_461 > g_t40BC78)
						ebp_451->t0008 -= 0x14;
					g_t40BC88 = g_t40BC80;
				}
			}
			eax_10 = ebp_451->t0008;
			g_t40BC78 = eax_10;
			g_t40BC90 = edi_21;
		}
		ebx = (struct Eq_5314 *) *esp_362;
		esp_15 = (struct Eq_7730 *) ((char *) esp_362 + 4);
	}
	Eq_5317 edi_492 = esp_15->t0000;
	Eq_5316 esi_494 = esp_15->t0004;
	ptr32 ebp_498 = ebp_451->ptr0000;
	ebxOut = ebx;
	ebpOut = ebp_498;
	esiOut = esi_494;
	ediOut = edi_492;
	return eax_10;
}

// 004060C8: Register (ptr32 Eq_8347) fn004060C8()
// Called from:
//      fn00406564
struct Eq_8347 * fn004060C8()
{
	ui32 eax_33 = g_dw40BC7C;
	ui32 ecx_6 = g_dw40BC8C;
	if (eax_33 == ecx_6)
	{
		Eq_3 eax_25 = HeapReAlloc(g_t40BEC0, 0x00, g_t40BC80, ecx_6 + 0x50 + ecx_6 * 0x04 << 0x02);
		if (eax_25 == 0x00)
			return null;
		g_dw40BC8C += 0x10;
		g_t40BC80 = eax_25;
		eax_33 = g_dw40BC7C;
	}
	struct Eq_8347 * eax_133;
	struct Eq_8347 * esi_50 = (word32) g_t40BC80 + eax_33 * 0x14;
	Eq_3 eax_51 = HeapAlloc(g_t40BEC0, 0x08, 0x41C4);
	esi_50->t0010 = eax_51;
	if (eax_51 != 0x00)
	{
		Eq_3 eax_65 = VirtualAlloc(0x00, 0x00100000, 0x2000, 0x04);
		esi_50->t000C = eax_65;
		if (eax_65 != 0x00)
		{
			esi_50->dw0008 |= ~0x00;
			esi_50->dw0000 = 0x00;
			esi_50->dw0004 = 0x00;
			++g_dw40BC7C;
			Eq_3 eax_77 = esi_50->t0010;
			*eax_77 |= ~0x00;
			eax_133 = esi_50;
			return eax_133;
		}
		HeapFree(g_t40BEC0, 0x00, esi_50->t0010);
	}
	eax_133 = null;
	return eax_133;
}

// 0040617F: Register int32 fn0040617F(Stack Eq_3 dwArg04)
// Called from:
//      fn00406564
int32 fn0040617F(Eq_3 dwArg04)
{
	Eq_3 eax_14;
	Eq_3 esi_21 = *((word32) dwArg04 + 16);
	int32 ebx_25 = 0x00;
	for (eax_14 = *((word32) dwArg04 + 8); eax_14 >= 0x00; eax_14 <<= 0x01)
		++ebx_25;
	struct Eq_8485 * eax_41 = (word32) esi_21 + (ebx_25 *s 0x0204 + 0x0144);
	word32 edx_47;
	eax_49 = eax_41;
	for (edx_47 = 0x3F; edx_47 != 0x00; --edx_47)
	{
		struct Eq_8485 * eax_49;
		eax_49[1] = (struct Eq_8485) eax_49;
		eax_49->dw0004 = eax_49;
		++eax_49;
	}
	int32 eax_160;
	ui32 edi_65 = ebx_25 << 0x0F;
	Eq_3 edi_68 = (word32) *((word32) dwArg04 + 0x0C) + edi_65;
	Eq_3 eax_73 = VirtualAlloc(edi_68, 0x8000, 0x1000, 0x04);
	if (eax_73 == 0x00)
		eax_160 = eax_73 | ~0x00;
	else
	{
		if (edi_68 <=u edi_68 + 0x7000)
		{
			word32 eax_104 = edi_68 + 0x10;
			word32 ecx_106;
			do
			{
				*((word32) eax_104 - 8) |= ~0x00;
				*((word32) eax_104 + 0x0FEC) |= ~0x00;
				Mem99[eax_104 + 0x00:word32] = eax_104 + 0x0FFC;
				*((word32) eax_104 - 4) = 0x0FF0;
				Mem102[eax_104 + 0x04:word32] = eax_104 + ~0x1003;
				*((word32) eax_104 + 0x0FE8) = 0x0FF0;
				eax_104 += 0x1000;
				--ecx_106;
			} while (ecx_106 != 0x00);
		}
		struct Eq_8528 * edx_121 = (struct Eq_13555 *) 0x7000 + ((word32) (*((word32) dwArg04 + 0x0C)) + edi_65) / 0x00001000;
		Mem119[eax_41 + 0x01FC:word32] = edi_68 + 0x0C;
		*((word32) edi_68 + 20) = eax_41 + 63;
		eax_41[64] = (struct Eq_8485) ((char *) edx_121 + 0x0C);
		edx_121->ptr0010 = eax_41 + 63;
		*((word32) esi_21 + (ebx_25 * 0x04 + 0x0044)) &= 0x00;
		*((word32) esi_21 + (ebx_25 * 0x04 + 0x00C4)) = 0x01;
		byte al_136 = *((word32) esi_21 + 67);
		((word32) esi_21 + 67)->u0 = al_136 + 0x01;
		if (al_136 == 0x00)
			*((word32) dwArg04 + 4) |= 0x01;
		*((word32) dwArg04 + 8) &= ~(0x80000000 >> (byte) ebx_25);
		eax_160 = ebx_25;
	}
	return eax_160;
}

// 00406285: Register word32 fn00406285(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn004080DE
word32 fn00406285(Eq_3 dwArg04, Eq_3 dwArg08, Eq_3 dwArg0C)
{
	word32 eax_247;
	int32 ecx_30 = *((word32) dwArg08 - 4);
	struct Eq_8659 * edi_34 = (word32) dwArg08 + (ecx_30 - 0x05);
	Eq_8663 edx_23 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_3 eax_10 = *((word32) dwArg04 + 16);
	int32 ebx_35 = edi_34->dw0000;
	int32 ecx_28 = (word32) eax_10 + ((edx_23 >> 0x0F) *s 0x0204 + 0x0144);
	int32 esi_31 = (word32) dwArg0C + 23 & ~0x0F;
	byte bl_238 = (byte) ebx_35;
	byte bLoc08_480 = (byte) ebx_35;
	if (esi_31 > ecx_30 - 0x01)
	{
		if ((bl_238 & 0x01) != 0x00 || esi_31 > ebx_35 + (ecx_30 - 0x01))
		{
			eax_247 = 0x00;
			return eax_247;
		}
		Eq_8706 ecx_252 = (ebx_35 >> 0x04) - 0x01;
		Eq_8706 dwLoc0C_513 = ecx_252;
		if (ecx_252 > 0x3F)
		{
			ecx_252.u0 = 0x3F;
			dwLoc0C_513.u0 = 0x3F;
		}
		byte cl_292 = (byte) ecx_252;
		if (edi_34->ptr0004 == edi_34->ptr0008)
		{
			if (ecx_252 < 0x20)
			{
				uint32 ebx_296 = ~(0x80000000 >> cl_292);
				*((word32) eax_10 + ((edx_23 >> 0x0F) * 0x04 + 0x0044)) &= ebx_296;
				byte * ecx_295 = (word32) eax_10 + ((word32) dwLoc0C_513.u0 + 4);
				byte v20_301 = *ecx_295 - 0x01;
				*ecx_295 = v20_301;
				if (v20_301 == 0x00)
					*dwArg04 &= ebx_296;
			}
			else
			{
				uint32 ebx_277 = ~(0x80000000 >> (byte) ((word32) ecx_252.u0 - 32));
				*((word32) eax_10 + ((edx_23 >> 0x0F) * 0x04 + 0x00C4)) &= ebx_277;
				byte * ecx_276 = (word32) eax_10 + ((word32) dwLoc0C_513.u0 + 4);
				byte v26_283 = *ecx_276 - 0x01;
				*ecx_276 = v26_283;
				if (v26_283 == 0x00)
					*((word32) dwArg04 + 4) &= ebx_277;
			}
		}
		edi_34->ptr0008->ptr0004 = edi_34->ptr0004;
		edi_34->ptr0004->ptr0008 = edi_34->ptr0008;
		int32 v31_323 = ebx_35 + ((ecx_30 - 0x01) - esi_31);
		if (v31_323 > 0x00)
		{
			union Eq_8952 * edi_331 = (v31_323 >> 0x04) - 0x01;
			struct Eq_9023 * ecx_333 = dwArg08 - 0x04 + esi_31;
			if (edi_331 > (union Eq_8952 *) 0x3F)
				edi_331 = (union Eq_8952 *) 0x3F;
			struct Eq_9023 * ebx_345 = ecx_28 + edi_331 * 0x08;
			ecx_333->ptr0004 = ebx_345->ptr0004;
			ecx_333->ptr0008 = ebx_345;
			ebx_345->ptr0004 = ecx_333;
			ecx_333->ptr0004->ptr0008 = ecx_333;
			if (ecx_333->ptr0004 == ecx_333->ptr0008)
			{
				Eq_9111 eax_381;
				byte cl_401;
				byte cl_360 = Mem354[edi_331 + 0x04 + eax_10:byte];
				Mem364[edi_331 + 0x04 + eax_10:byte] = cl_360 + 0x01;
				if (edi_331 < (union Eq_8952 *) 0x20)
				{
					if (cl_360 == 0x00)
						*dwArg04 |= 0x80000000 >> (byte) edi_331;
					eax_381 = eax_10 + 0x44 + (edx_23 >>u 0x0F) * 0x04;
					cl_401 = (byte) edi_331;
				}
				else
				{
					if (cl_360 == 0x00)
						*((word32) dwArg04 + 4) |= 0x80000000 >> (byte) (edi_331 - (union Eq_8952 *) 0x20);
					eax_381 = eax_10 + 0xC4 + (edx_23 >>u 0x0F) * 0x04;
					cl_401 = (byte) (edi_331 - (union Eq_8952 *) 0x20);
				}
				*eax_381 |= 0x80000000 >> cl_401;
			}
			int32 * eax_425 = dwArg08 - 0x04 + esi_31;
			*eax_425 = v31_323;
			eax_425[v31_323 - 0x04] = v31_323;
		}
		*((word32) dwArg08 - 4) = esi_31 + 0x01;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(dwArg08 - 0x08)[esi_31 / 4].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0] = esi_31 + 0x01;
	}
	else if (esi_31 < ecx_30 - 0x01)
	{
		int32 v17_41 = ecx_30 - 0x01 - esi_31;
		*((word32) dwArg08 - 4) = esi_31 + 0x01;
		struct Eq_8734 * ebx_45 = dwArg08 - 0x04 + esi_31;
		ebx_45->dwFFFFFFFC = esi_31 + 0x01;
		int32 dwArg0C_476 = v17_41;
		union Eq_8952 * ecx_196 = (v17_41 >> 0x04) - 0x01;
		if (ecx_196 > (union Eq_8952 *) 0x3F)
			ecx_196 = (union Eq_8952 *) 0x3F;
		if ((bLoc08_480 & 0x01) == 0x00)
		{
			Eq_8785 esi_64 = (ebx_35 >> 0x04) - 0x01;
			if (esi_64 > 0x3F)
				&esi_64.u0->t0000 = 0x3F;
			if (edi_34->ptr0004 == edi_34->ptr0008)
			{
				if (esi_64 < 0x20)
				{
					uint32 ebx_109 = ~(0x80000000 >> (byte) esi_64);
					*((word32) eax_10 + ((edx_23 >> 0x0F) * 0x04 + 0x0044)) &= ebx_109;
					word32 esi_108 = esi_64 + 0x04 + eax_10;
					Eq_8952 v23_114 = *esi_108 - 0x01;
					*esi_108 = v23_114;
					if (v23_114 == 0x00)
						*dwArg04 &= ebx_109;
				}
				else
				{
					uint32 ebx_88 = ~(0x80000000 >> (byte) (esi_64 - 0x20));
					*((word32) eax_10 + ((edx_23 >> 0x0F) * 0x04 + 0x00C4)) &= ebx_88;
					word32 ecx_87 = esi_64 + 0x04 + eax_10;
					Eq_8952 v29_95 = *ecx_87 - 0x01;
					*ecx_87 = v29_95;
					if (v29_95 == 0x00)
						*((word32) dwArg04 + 4) &= ebx_88;
				}
			}
			edi_34->ptr0008->ptr0004 = edi_34->ptr0004;
			edi_34->ptr0004->ptr0008 = edi_34->ptr0008;
			int32 esi_137 = v17_41 + ebx_35;
			dwArg0C_476 = esi_137;
			ecx_196 = (esi_137 >> 0x04) - 0x01;
			if (ecx_196 > (union Eq_8952 *) 0x3F)
				ecx_196 = (union Eq_8952 *) 0x3F;
		}
		struct Eq_8734 * ecx_155 = ecx_28 + ecx_196 * 0x08;
		struct Eq_8734 * edi_156 = ecx_155->ptr0004;
		ebx_45->ptr0008 = ecx_155;
		ebx_45->ptr0004 = edi_156;
		ecx_155->ptr0004 = ebx_45;
		ebx_45->ptr0004->ptr0008 = ebx_45;
		if (ebx_45->ptr0004 == ebx_45->ptr0008)
		{
			Eq_9066 eax_194;
			byte cl_172 = Mem165[ecx_196 + 0x04 + eax_10:byte];
			Mem176[ecx_196 + 0x04 + eax_10:byte] = cl_172 + 0x01;
			if (ecx_196 < (union Eq_8952 *) 0x20)
			{
				if (cl_172 == 0x00)
					*dwArg04 |= 0x80000000 >> (byte) ecx_196;
				eax_194 = eax_10 + 0x44 + (edx_23 >>u 0x0F) * 0x04;
			}
			else
			{
				if (cl_172 == 0x00)
					*((word32) dwArg04 + 4) |= 0x80000000 >> (byte) (ecx_196 - (union Eq_8952 *) 0x20);
				eax_194 = eax_10 + 0xC4 + (edx_23 >>u 0x0F) * 0x04;
				ecx_196 -= (union Eq_8952 *) 0x20;
			}
			*eax_194 |= 0x80000000 >> (byte) ecx_196;
		}
		ebx_45->dw0000 = dwArg0C_476;
		ebx_45[(dwArg0C_476 - 0x04) / 0x0C] = (struct Eq_8734) dwArg0C_476;
	}
	eax_247 = 0x01;
	return eax_247;
}

// 00406564: Register ptr32 fn00406564(Register Eq_3 esi, Stack Eq_3 dwArg04)
// Called from:
//      fn00403D6D
//      fn00404245
//      fn004080DE
ptr32 fn00406564(Eq_3 esi, Eq_3 dwArg04)
{
	uint32 dwLoc0C_531;
	uint32 esi_33;
	int32 ecx_13 = (word32) dwArg04 + 23 & ~0x0F;
	int32 ecx_26 = (ecx_13 >> 0x04) - 0x01;
	ui32 eax_10 = g_dw40BC7C;
	Eq_3 edx_11 = g_t40BC80;
	byte cl_39 = (byte) ecx_26;
	Eq_3 edi_28 = (word32) edx_11 + eax_10 * 0x14;
	if (ecx_26 < 0x20)
	{
		esi_33 = (esi | ~0x00) >> cl_39;
		dwLoc0C_531 = dwLoc0C | ~0x00;
	}
	else
	{
		esi_33 = 0x00;
		dwLoc0C_531 = (eax_10 * 0x05 | ~0x00) >> (byte) (ecx_26 + ~0x1F);
	}
	Eq_3 eax_46 = g_t40BC88;
	Eq_3 ebx_105 = eax_46;
	bool C_517 = SLICE(cond(eax_46 - edi_28), bool, 1);
	while (true)
	{
		Eq_3 dwArg04_535 = ebx_105;
		if (!C_517 || (*((word32) ebx_105 + 4) & dwLoc0C_531 | *ebx_105 & esi_33) != 0x00)
			break;
		ebx_105 = (word32) ebx_105 + 20;
		C_517 = SLICE(cond(ebx_105 - edi_28), bool, 1);
	}
	ptr32 eax_171;
	if (ebx_105 != edi_28)
	{
l004065FE:
		g_t40BC88 = ebx_105;
		struct Eq_9283 * eax_176 = *((word32) ebx_105 + 16);
		Eq_7735 edx_177 = eax_176->t0000;
		Eq_7735 dwLoc08_547 = edx_177;
		if (edx_177 == ~0x00 || ((eax_176->a00C4)[edx_177] & dwLoc0C_531 | (eax_176->a0044)[edx_177] & esi_33) == 0x00)
		{
			dwLoc08_547 = edx_177 & 0x00;
			ui32 * ecx_208 = eax_176->a0044 + 33;
			if ((eax_176->a00C4[0] & dwLoc0C_531 | (eax_176->a0044)[0] & esi_33) == 0x00)
			{
				do
				{
					ecx_208 = ecx_815 + 1;
					dwLoc08_547 = (word32) dwLoc08_547 + 1;
					ecx_815 = ecx_208;
				} while ((*ecx_815 & dwLoc0C_531 | *ecx_208 & esi_33) == 0x00);
			}
			edx_177 = dwLoc08_547;
		}
		struct Eq_9345 * ecx_240 = eax_176 + (edx_177 *s 0x0204 + 0x0144) / 0x00C4;
		int32 edi_244 = 0x00;
		int32 ecx_247 = eax_176->a0044[edx_177] & esi_33;
		if (ecx_247 == 0x00)
		{
			ecx_247 = eax_176->a00C4[edx_177] & dwLoc0C_531;
			edi_244 = 0x20;
		}
		for (; ecx_247 >= 0x00; ecx_247 <<= 0x01)
			++edi_244;
		struct Eq_9391 * edx_276 = ecx_240->a0004[edi_244].ptr0000.dw0000;
		int32 ecx_278 = edx_276->dw0000 - ecx_13;
		int32 esi_281 = (ecx_278 >> 0x04) - 0x01;
		if (esi_281 > 0x3F)
			esi_281 = 0x3F;
		if (esi_281 == edi_244)
		{
l0040680E:
			if (ecx_278 != 0x00)
			{
				edx_276->dw0000 = ecx_278;
				edx_276[(ecx_278 - 0x04) / 0x0C] = (struct Eq_9391) ecx_278;
			}
			goto l0040681D;
		}
		if (edx_276->ptr0004 == edx_276->ptr0008)
		{
			if (edi_244 < 0x20)
			{
				uint32 ebx_332 = ~(0x80000000 >> (byte) edi_244);
				eax_176->a0044[dwLoc08_547] = ebx_332 & (eax_176->a0044)[dwLoc08_547];
				byte * edi_331 = (char *) &eax_176->t0000 + 4 + edi_244;
				byte v19_337 = *edi_331 - 0x01;
				*edi_331 = v19_337;
				if (v19_337 == 0x00)
				{
					*dwArg04_535 &= ebx_332;
					ebx_105 = dwArg04_535;
					goto l00406771;
				}
l0040676E:
				ebx_105 = dwArg04_535;
				goto l00406771;
			}
			ui32 * ecx_309 = eax_176->a00C4 + dwLoc08_547;
			uint32 ebx_311 = ~(0x80000000 >> (byte) (edi_244 - 0x20));
			*ecx_309 &= ebx_311;
			byte * edi_310 = (char *) &eax_176->t0000 + 4 + edi_244;
			byte v23_316 = *edi_310 - 0x01;
			*edi_310 = v23_316;
			if (v23_316 != 0x00)
				goto l0040676E;
			*((word32) dwArg04_535 + 4) &= ebx_311;
			ebx_105 = dwArg04_535;
		}
l00406771:
		edx_276->ptr0008->ptr0004 = edx_276->ptr0004;
		edx_276->ptr0004->ptr0008 = edx_276->ptr0008;
		if (ecx_278 == 0x00)
		{
l0040681D:
			int32 * edx_459 = edx_276 + ecx_278 / 0x0C;
			*edx_459 = ecx_13 + 0x01;
			(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(edx_459 - 0x04)[ecx_13 / 4].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0] = ecx_13 + 0x01;
			word32 ecx_464 = ecx_240->dw0000;
			ecx_240->dw0000 = ecx_464 + 0x01;
			if (ecx_464 == 0x00 && (ebx_105 == g_t40BC78 && dwLoc08_547 == g_t40BC90))
				g_t40BC78 &= 0x00;
			eax_176->t0000 = dwLoc08_547;
			eax_171 = edx_459 + 1;
			return eax_171;
		}
		struct Eq_9391 * ecx_366 = ecx_240 + esi_281 * 2;
		struct Eq_9391 * edi_367 = ecx_366->ptr0004;
		edx_276->ptr0008 = ecx_366;
		edx_276->ptr0004 = edi_367;
		ecx_366->ptr0004 = edx_276;
		edx_276->ptr0004->ptr0008 = edx_276;
		if (edx_276->ptr0004 == edx_276->ptr0008)
		{
			byte cl_378 = eax_176[(esi_281 + 0x04) / 0x00C4];
			eax_176[(esi_281 + 0x04) / 0x00C4] = (struct Eq_9283) (cl_378 + 0x01);
			if (esi_281 < 0x20)
			{
				if (cl_378 == 0x00)
					*ebx_105 |= 0x80000000 >> (byte) esi_281;
				eax_176->a0044[dwLoc08_547] |= 0x80000000 >> (byte) esi_281;
			}
			else
			{
				if (cl_378 == 0x00)
					*((word32) ebx_105 + 4) |= 0x80000000 >> (byte) (esi_281 - 0x20);
				ui32 * edi_405 = eax_176->a00C4 + dwLoc08_547;
				*edi_405 |= 0x80000000 >> (byte) (esi_281 - 0x20);
			}
		}
		goto l0040680E;
	}
	ebx_105 = edx_11;
	while (true)
	{
		dwArg04_535 = ebx_105;
		if (ebx_105 >= eax_46 || (*((word32) ebx_105 + 4) & dwLoc0C_531 | *ebx_105 & esi_33) != 0x00)
			break;
		ebx_105 = (word32) ebx_105 + 20;
	}
	if (ebx_105 != eax_46)
		goto l004065FE;
	while (ebx_105 < edi_28 && *((word32) ebx_105 + 8) == 0x00)
	{
		ebx_105 = (word32) ebx_105 + 20;
		dwArg04_535 = ebx_105;
	}
	if (ebx_105 == edi_28)
	{
		ebx_105 = edx_11;
		while (true)
		{
			dwArg04_535 = ebx_105;
			if (ebx_105 >= eax_46 || *((word32) ebx_105 + 8) != 0x00)
				break;
			ebx_105 = (word32) ebx_105 + 20;
		}
		if (ebx_105 == eax_46)
		{
			Eq_3 eax_132 = fn004060C8();
			ebx_105 = eax_132;
			dwArg04_535 = eax_132;
			if (eax_132 == 0x00)
			{
l004066DA:
				eax_171 = 0x00;
				return eax_171;
			}
		}
	}
	**((word32) ebx_105 + 16) = fn0040617F(ebx_105);
	if (**((word32) ebx_105 + 16) != ~0x00)
		goto l004065FE;
	goto l004066DA;
}

// 00406B77: Register word32 fn00406B77(Stack Eq_3 dwArg04)
// Called from:
//      fn00403DB3
//      fn00404245
//      fn004080DE
word32 fn00406B77(Eq_3 dwArg04)
{
	<anonymous> * eax_5 = g_ptr40BC44;
	if (eax_5 == null)
		return 0x00;
	word32 eax_13;
	eax_5();
	if (eax_13 == 0x00)
		return 0x00;
	return 0x01;
}

// 00406B92: Register word32 fn00406B92(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn00403E18
word32 fn00406B92(Eq_3 dwArg04, Eq_3 dwArg08, Eq_3 dwArg0C)
{
	Eq_3 eax_11 = g_t40B498;
	if (dwArg04 < g_t40BEC8)
	{
		struct Eq_9752 ** ebx_134 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_29 = (dwArg04 & 0x1F) << 0x03;
		byte al_30 = ((char *) *ebx_134 + 4)[esi_29];
		if ((al_30 & 0x01) != 0x00)
		{
			Eq_3 dwLoc0414_331 = 0x00;
			if (dwArg0C == 0x00)
				return fn004041A2(eax_11, ebx, esi, edi);
			if ((al_30 & 0x20) != 0x00)
				fn004082D7(dwArg04, 0x00, 0x02);
			Eq_3 dwArg04_345;
			struct Eq_9775 * eax_70 = (char *) *ebx_134 + esi_29;
			if ((eax_70->b0004 & 0x80) != 0x00)
			{
				Eq_3 dwLoc0410_350 = dwArg08;
				dwArg04_345.u0 = 0x00;
				if (dwArg0C <= 0x00)
					goto l00406D29;
				do
				{
					int32 edi_129 = 0x00;
					Eq_3 ecx_109 = dwLoc0410_350 - dwArg08;
					Eq_9825 eax_111 = fp - 0x040C;
					while (ecx_109 < dwArg0C)
					{
						++dwLoc0410_350;
						byte dl_120 = *dwLoc0410_350;
						++ecx_109;
						if (dl_120 == 0x0A)
						{
							*eax_111 = 0x0D;
							++eax_111;
							++edi_129;
						}
						*eax_111 = dl_120;
						++eax_111;
						++edi_129;
						if (edi_129 >= 0x0400)
							break;
					}
					Eq_3 edi_147 = eax_111 - (fp - 0x040C);
					if (WriteFile(*((char *) *ebx_134 + esi_29), fp - 0x040C, edi_147, fp - 0x0418, null) == 0x00)
					{
						dwArg04_345 = GetLastError();
l00406CBB:
						break;
					}
					dwLoc0414_331 += dwLoc0418;
					if (dwLoc0418 < edi_147)
						goto l00406CBB;
				} while (dwLoc0410_350 - dwArg08 < dwArg0C);
			}
			else if (WriteFile(eax_70->t0000, dwArg08, dwArg0C, fp - 0x0418, null) != 0x00)
			{
				dwArg04_345.u0 = 0x00;
				dwLoc0414_331 = dwLoc0418;
			}
			else
				dwArg04_345 = GetLastError();
			if (dwLoc0414_331 != 0x00)
				return fn004041A2(eax_11, ebx, esi, edi);
			if (dwArg04_345 != 0x00)
			{
				if (dwArg04_345 != 0x05)
				{
					fn00408278(dwArg04_345);
					return fn004041A2(eax_11, ebx, esi, edi);
				}
				g_t40BA54.u0 = 0x05;
l00406D5F:
				g_t40BA50.u0 = 0x09;
				return fn004041A2(eax_11, ebx, esi, edi);
			}
l00406D29:
			if ((((char *) *ebx_134 + 4)[esi_29] & 0x40) != 0x00 && *dwArg08 == 0x1A)
				return fn004041A2(eax_11, ebx, esi, edi);
			g_t40BA50.u0 = 0x1C;
			g_t40BA54.u0 = 0x00;
			return fn004041A2(eax_11, ebx, esi, edi);
		}
	}
	g_t40BA54 &= 0x00;
	goto l00406D5F;
}

// 00406DD9: void fn00406DD9(Stack Eq_3 dwArg04, Stack Eq_9790 dwArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn00407267
void fn00406DD9(Eq_3 dwArg04, Eq_9790 dwArg08, Eq_3 dwArg0C)
{
	if (dwArg04 < g_t40BEC8)
	{
		struct Eq_9937 ** edi_21 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_23 = (dwArg04 & 0x1F) << 0x03;
		if ((((char *) *edi_21 + 4)[esi_23] & 0x01) != 0x00)
		{
			Eq_3 eax_34 = fn004083F0(dwArg04);
			if (eax_34 != ~0x00)
			{
				Eq_3 eax_60;
				if (SetFilePointer(eax_34, dwArg08, null, dwArg0C) == ~0x00)
					eax_60 = GetLastError();
				else
					eax_60.u0 = 0x00;
				if (eax_60 == 0x00)
				{
					byte * eax_72 = (char *) *edi_21 + 4 + esi_23;
					*eax_72 &= ~0x02;
					return;
				}
				else
				{
					fn00408278(eax_60);
					return;
				}
			}
l00406E54:
			g_t40BA50.u0 = 0x09;
			return;
		}
	}
	g_t40BA54 &= 0x00;
	goto l00406E54;
}

// 00406E65: Register Eq_3 fn00406E65(Stack Eq_3 dwArg04)
// Called from:
//      fn00404396
//      fn00404474
Eq_3 fn00406E65(Eq_3 dwArg04)
{
	++g_dw40BA3C;
	Eq_3 eax_10 = fn00403DDF(0x1000);
	*((word32) dwArg04 + 8) = eax_10;
	if (eax_10 != 0x00)
	{
		*((word32) dwArg04 + 0x0C) |= 0x08;
		*((word32) dwArg04 + 24) = 0x1000;
	}
	else
	{
		*((word32) dwArg04 + 0x0C) |= 0x04;
		*((word32) dwArg04 + 8) = (word32) dwArg04 + 20;
		*((word32) dwArg04 + 24) = 0x02;
	}
	Eq_3 eax_38 = *((word32) dwArg04 + 8);
	*((word32) dwArg04 + 4) &= 0x00;
	*dwArg04 = eax_38;
	return eax_38;
}

// 00406F0F: void fn00406F0F(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi)
// Called from:
//      fn004041A2
void fn00406F0F(Eq_3 ebx, Eq_3 esi, Eq_3 edi)
{
	Eq_3 esp_241;
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x0118);
	ebp_13->tFFFFFFE4 = g_t40B498;
	<anonymous> * eax_20 = g_ptr40BC6C;
	if (eax_20 != null)
	{
		ebp_13->tFFFFFFFC.u0 = 0x00;
		word32 esp_250;
		eax_20();
		ebp_13->tFFFFFFFC |= ~0x00;
		esp_241 = esp_250 + 8;
	}
	else
	{
		Eq_3 edi_151;
		word32 esi_134;
		if (ebp_13->t0008 != 0x01)
		{
			ebp_13->tFFFFFED8.u0 = 4234328;
			edi_151.u0 = 0x00409D0C;
			esi_134 = 212;
		}
		else
		{
			ebp_13->tFFFFFED8.u0 = 0x00409B98;
			edi_151.u0 = 4234296;
			esi_134 = 0xB9;
		}
		ebp_13->tFFFFFFE0.u0 = 0x00;
		if (GetModuleFileNameA(null, ebp_13 - 292, 0x0104) == 0x00)
			edi_151 = fn00404F20(ebp_13 - 292, 4232652);
		Eq_3 ebx_102 = ebp_13 - 292;
		if (fn00404080(ebp_13 - 292) > 0x31)
		{
			ebx_102 = (word32) fn00404080(ebp_13 - 292) + (ebp_13 - 0x0155);
			fn004054F0(ebx_102, &g_b4095C8, 0x03);
		}
		fn00403D30((word32) fn00404080(ebx_102) + 0x0C + esi_134 + 0x03 & ~0x03, ebx_102);
		Eq_3 esp_141 = <invalid>;
		ebp_13->tFFFFFFE8 = esp_141;
		*((word32) esp_141 - 4) = edi_151;
		*((word32) esp_141 - 8) = esp_141;
		fn00404F20(*((word32) esp_141 - 8), *((word32) esp_141 - 4));
		((word32) esp_141 - 0x0C)->u0 = 4232616;
		*((word32) esp_141 - 16) = esp_141;
		fn00404F30(*((word32) esp_141 - 16), *((word32) esp_141 - 0x0C));
		((word32) esp_141 - 20)->u0 = 4234124;
		*((word32) esp_141 - 24) = esp_141;
		fn00404F30(*((word32) esp_141 - 24), *((word32) esp_141 - 20));
		*((word32) esp_141 - 28) = ebx_102;
		*((word32) esp_141 - 32) = esp_141;
		*((word32) esp_141 - 36) = fn00404F30(*((word32) esp_141 - 32), *((word32) esp_141 - 28));
		*((word32) esp_141 - 40) = esp_141;
		fn00404F30(*((word32) esp_141 - 40), *((word32) esp_141 - 36));
		*((word32) esp_141 - 44) = ebp_13->tFFFFFED8;
		*((word32) esp_141 - 48) = esp_141;
		fn00404F30(*((word32) esp_141 - 48), *((word32) esp_141 - 44));
		*((word32) esp_141 - 52) = 0x00012010;
		*((word32) esp_141 - 56) = 0x00409580;
		*((word32) esp_141 - 60) = esp_141;
		fn004053EA(*((word32) esp_141 - 60), *((word32) esp_141 - 56), *((word32) esp_141 - 52), *((word32) esp_141 - 50), *((word32) esp_141 - 49), out esi, out edi);
		esp_241 = esp_141;
	}
	struct Eq_10087 * esp_265 = esp_241 - 4;
	esp_265->t0000.u0 = 0x03;
	fn004031EB(esp_265->t0000);
	int3();
	esp_265->tFFFFFFFC = esi;
	Eq_3 esi_275 = esp_265->t0004;
	Eq_7716 al_281 = *((word32) esi_275 + 0x0C);
	esp_265->tFFFFFFF8 = edi;
	if ((al_281 & 0x40) == 0x00)
	{
		if ((al_281 & 131) != 0x00)
		{
			esp_265->tFFFFFFF4 = esi_275;
			// Failed to bind call argument.
			// Please report this issue at https://github.com/uxmal/reko
			Eq_3 stackArg4 = <invalid>;
			fn00403E18(stackArg4);
			esp_265->tFFFFFFF0 = esi_275;
			word32 edi_312;
			Eq_3 eax_308 = fn004084DF(esp_265->tFFFFFFF0, out edi_312);
			esp_265->tFFFFFFEC = *((word32) esi_275 + 16);
			if (fn0040842C(eax_308, esp_265->tFFFFFFEC) >= 0x00)
			{
				Eq_3 eax_331 = *((word32) esi_275 + 28);
				if (eax_331 != 0x00)
				{
					esp_265->tFFFFFFF4 = eax_331;
					word32 ebp_426;
					word32 edi_427;
					word32 ebx_425;
					fn0040403C(esp_265->tFFFFFFF4, out ebx_425, out ebp_426, out edi_427);
					*((word32) esi_275 + 28) &= 0x00;
				}
			}
		}
	}
	*((word32) esi_275 + 0x0C) &= 0x00;
}

// 004070AD: Register Eq_3 fn004070AD(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out Eq_3 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
// Called from:
//      fn00404318
//      fn0040566C
//      fn00408A26
Eq_3 fn004070AD(Eq_3 ebx, Eq_3 esi, Eq_3 edi, union Eq_3 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	struct Eq_154 * ebp_110 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x1C);
	Eq_3 esi_121 = 0x00;
	if (g_dw40BC70 == 0x00)
	{
		if (GetStringTypeW(0x01, 4234556, 0x01, ebp_110 - 0x1C) != 0x00)
			g_dw40BC70 = 0x01;
		else if (GetLastError() == 0x78)
			g_dw40BC70 = 0x02;
	}
	Eq_3 eax_166;
	word32 eax_43 = g_dw40BC70;
	if (eax_43 != 0x02 && eax_43 != 0x00)
	{
		if (eax_43 == 0x01)
		{
			ebp_110->tFFFFFFDC.u0 = 0x00;
			ebp_110->tFFFFFFE0.u0 = 0x00;
			if (ebp_110->t0018 == 0x00)
				ebp_110->t0018 = g_t40BC64;
			Eq_3 eax_200 = MultiByteToWideChar(ebp_110->t0018, (uint32) (uint8) (ebp_110->t0020 != 0x00) * 0x08 + 0x01, ebp_110->t000C, ebp_110->t0010, 0x00, 0x00);
			ebp_110->tFFFFFFD8 = eax_200;
			if (eax_200 != 0x00)
			{
				ebp_110->tFFFFFFFC &= 0x00;
				fn00403D30(eax_200 * 0x02 + 0x03 & ~0x03, 0x00);
				Eq_3 esp_217 = <invalid>;
				ebp_110->tFFFFFFE8 = esp_217;
				ebp_110->tFFFFFFD4 = esp_217;
				*((word32) esp_217 - 4) = eax_200 * 0x02;
				((word32) esp_217 - 8)->u0 = 0x00;
				*((word32) esp_217 - 0x0C) = esp_217;
				fn004045E0(*((word32) esp_217 - 0x0C), *((word32) esp_217 - 8), *((word32) esp_217 - 4));
				ebp_110->tFFFFFFFC |= ~0x00;
				Eq_3 esi_223 = esp_217;
				if (esp_217 != 0x00)
				{
l004071B6:
					*((word32) esp_217 - 4) = eax_200;
					*((word32) esp_217 - 8) = esi_223;
					*((word32) esp_217 - 0x0C) = ebp_110->t0010;
					*((word32) esp_217 - 16) = ebp_110->t000C;
					((word32) esp_217 - 20)->u0 = 0x01;
					*((word32) esp_217 - 24) = ebp_110->t0018;
					Eq_3 eax_288 = MultiByteToWideChar(*((word32) esp_217 - 24), *((word32) esp_217 - 20), *((word32) esp_217 - 16), *((word32) esp_217 - 0x0C), *((word32) esp_217 - 8), *((word32) esp_217 - 4));
					if (eax_288 != 0x00)
					{
						*((word32) esp_217 - 4) = ebp_110->t0014;
						*((word32) esp_217 - 8) = eax_288;
						*((word32) esp_217 - 0x0C) = esi_223;
						*((word32) esp_217 - 16) = ebp_110->t0008;
						ebp_110->tFFFFFFDC = GetStringTypeW(*((word32) esp_217 - 16), *((word32) esp_217 - 0x0C), *((word32) esp_217 - 8), *((word32) esp_217 - 4));
					}
					if (ebp_110->tFFFFFFE0 != 0x00)
					{
						*((word32) esp_217 - 4) = esi_223;
						word32 ebx_423;
						word32 edi_424;
						fn0040403C(*((word32) esp_217 - 4), out ebx_423, out ebp_110, out edi_424);
					}
					eax_166 = ebp_110->tFFFFFFDC;
					goto l0040725E;
				}
				*((word32) esp_217 - 4) = eax_200;
				((word32) esp_217 - 8)->u0 = 0x02;
				Eq_3 eax_250 = fn00404245(*((word32) esp_217 - 8), *((word32) esp_217 - 4));
				esi_223 = eax_250;
				if (eax_250 != 0x00)
				{
					ebp_110->tFFFFFFE0.u0 = 0x01;
					goto l004071B6;
				}
			}
		}
		goto l00407216;
	}
	Eq_3 ebx_111 = ebp_110->t001C;
	if (ebx_111 == 0x00)
		ebx_111 = g_t40BC54;
	Eq_3 edi_59 = ebp_110->t0018;
	if (edi_59 == 0x00)
		edi_59 = g_t40BC64;
	Eq_3 eax_84 = fn0040850A(ebx_111, 0x00, edi_59, ebx_111);
	if (eax_84 != ~0x00)
	{
		if (eax_84 != edi_59)
		{
			word32 edi_422;
			Eq_3 eax_109 = fn0040854D(ebx_111, 0x00, edi_59, out ebx_111, out ebp_110, out edi_422);
			esi_121 = eax_109;
			if (eax_109 == 0x00)
				goto l00407216;
			ebp_110->t000C = eax_109;
		}
		Eq_3 edi_146 = GetStringTypeA(ebx_111, ebp_110->t0008, ebp_110->t000C, ebp_110->t0010, ebp_110->t0014);
		if (esi_121 != 0x00)
		{
			word32 ebx_425;
			fn0040403C(esi_121, out ebx_425, out ebp_110, out edi_146);
		}
		eax_166 = edi_146;
l0040725E:
		ptr32 edi_347;
		ptr32 esi_348;
		word32 ebp_421;
		ebxOut = fn00403C0B(ebp_110, ebp_110->tFFFFFFC4, out ebp_421, out esi_348, out edi_347);
		esiOut = esi_348;
		ediOut = edi_347;
		return eax_166;
	}
	else
	{
l00407216:
		eax_166.u0 = 0x00;
		goto l0040725E;
	}
}

// 00407267: Register Eq_3 fn00407267(Register Eq_3 eax, Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Stack Eq_3 dwArg0C)
// Called from:
//      fn00404396
Eq_3 fn00407267(Eq_3 eax, Eq_3 dwArg04, Eq_3 dwArg08, Eq_3 dwArg0C)
{
	Eq_3 eax_255;
	if (dwArg04 < g_t40BEC8)
	{
		struct Eq_10772 ** edi_23 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_26 = (dwArg04 & 0x1F) << 0x03;
		eax = (char *) *edi_23 + esi_26;
		Eq_7914 dl_28 = *((word32) eax + 4);
		if ((dl_28 & 0x01) != 0x00)
		{
			ui32 dwLoc10_334 = dwLoc10 & 0x00;
			Eq_3 ebx_184 = dwArg08;
			Eq_3 ecx_42 = dwArg08;
			if (dwArg0C != 0x00 && (dl_28 & 0x02) == 0x00)
			{
				if ((dl_28 & 0x48) != 0x00 && *((word32) eax + 5) != 0x0A)
				{
					*dwArg08 = ((char *) *edi_23 + 5)[esi_26];
					((char *) *edi_23 + 5)[esi_26] = 0x0A;
					--dwArg0C;
					ecx_42 = (word32) dwArg08 + 1;
					dwLoc10_334 = 0x01;
				}
				if (ReadFile(*((char *) *edi_23 + esi_26), ecx_42, dwArg0C, fp - 0x14, null) != 0x00)
				{
					Eq_3 v20_88 = dwLoc10_334 + dwLoc14;
					struct Eq_10772 * ecx_87 = *edi_23;
					Eq_3 dwLoc10_348 = v20_88;
					if ((ecx_87->a0004[esi_26] & 0x80) != 0x00)
					{
						if (dwLoc14 != 0x00 && *dwArg08 == 0x0A)
						{
							byte * eax_109 = ecx_87->a0004 + esi_26;
							*eax_109 |= 0x04;
						}
						else
						{
							byte * eax_103 = (char *) *edi_23 + 4 + esi_26;
							*eax_103 &= ~0x04;
						}
						word32 ecx_119 = v20_88 + dwArg08;
						Eq_3 dwLoc0C_354 = dwArg08;
						if (dwArg08 < ecx_119)
						{
							do
							{
								byte al_127 = *dwLoc0C_354;
								if (al_127 == 0x1A)
								{
									struct Eq_10772 * eax_131 = *edi_23;
									if ((eax_131->a0004[esi_26] & 0x40) == 0x00)
									{
										byte * esi_136 = eax_131->a0004 + esi_26;
										*esi_136 |= 0x02;
									}
									break;
								}
								if (al_127 != 0x0D)
								{
									ebx_184->u0 = al_127;
									ebx_184 = (word32) ebx_184 + 1;
									dwLoc0C_354 = (word32) dwLoc0C_354 + 1;
									goto l00407413;
								}
								if (dwLoc0C_354 < ecx_119 - 0x01)
								{
									if (*((word32) dwLoc0C_354 + 1) == 0x0A)
									{
										dwLoc0C_354 = (word32) dwLoc0C_354 + 2;
										goto l004073F5;
									}
									dwLoc0C_354 = (word32) dwLoc0C_354 + 1;
									goto l0040740F;
								}
								dwLoc0C_354 = (word32) dwLoc0C_354 + 1;
								if (ReadFile(*((char *) *edi_23 + esi_26), fp - 0x05, 0x01, fp - 0x14, null) == 0x00 && GetLastError() != 0x00 || dwLoc14 == 0x00)
								{
l0040740F:
									ebx_184->u0 = 0x0D;
									goto l00407412;
								}
								if ((((char *) *edi_23 + 4)[esi_26] & 0x48) != 0x00)
								{
									if (bLoc05 == 0x0A)
										goto l004073F5;
									ebx_184->u0 = 0x0D;
									((char *) *edi_23 + 5)[esi_26] = bLoc05;
									goto l00407412;
								}
								if (ebx_184 == dwArg08 && bLoc05 == 0x0A)
								{
l004073F5:
									ebx_184->u0 = 0x0A;
l00407412:
									ebx_184 = (word32) ebx_184 + 1;
									goto l00407413;
								}
								fn00406DD9(dwArg04, ~0x00, 0x01);
								if (bLoc05 != 0x0A)
									goto l0040740F;
l00407413:
							} while (dwLoc0C_354 < ecx_119);
						}
						dwLoc10_348 = ebx_184 - dwArg08;
					}
					eax_255 = dwLoc10_348;
					return eax_255;
				}
				eax = GetLastError();
				if (eax == 0x05)
				{
					g_t40BA54.u0 = 0x05;
l00407443:
					g_t40BA50.u0 = 0x09;
					goto l0040744D;
				}
				if (eax != 0x6D)
				{
					eax = fn00408278(eax);
l0040744D:
					eax_255 = eax | ~0x00;
					return eax_255;
				}
			}
			eax_255.u0 = 0x00;
			return eax_255;
		}
	}
	g_t40BA54 &= 0x00;
	goto l00407443;
}

// 00407455: Register Eq_3 fn00407455(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
// Called from:
//      fn0040566C
Eq_3 fn00407455(Eq_3 ebx, Eq_3 esi, Eq_3 edi, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x38);
	if (g_dw40BC74 == 0x00)
	{
		esi.u0 = 0x01;
		if (LCMapStringW(0x00, 0x0100, 4234556, 0x01, 0x00, 0x00) != 0x00)
			g_dw40BC74 = 0x01;
		else if (GetLastError() == 0x78)
			g_dw40BC74 = 0x02;
	}
	if (ebp_13->t0014 > 0x00)
	{
		Eq_3 ecx_50 = ebp_13->t0014;
		Eq_3 eax_51 = ebp_13->t0010;
		do
		{
			--ecx_50;
			if (*eax_51 == 0x00)
				goto l004074BB;
			eax_51 = (word32) eax_51 + 1;
		} while (ecx_50 != 0x00);
		ecx_50 |= ~0x00;
l004074BB:
		ebp_13->t0014 = (word32) ebp_13->t0014 + ((eax_51 | ~0x00) - ecx_50);
	}
	Eq_3 ebx_182 = 0x00;
	word32 eax_78 = g_dw40BC74;
	if (eax_78 != 0x02 && eax_78 != 0x00)
	{
		if (eax_78 == 0x01)
		{
			ebp_13->tFFFFFFD4.u0 = 0x00;
			ebp_13->tFFFFFFC8.u0 = 0x00;
			ebp_13->tFFFFFFCC.u0 = 0x00;
			if (ebp_13->t0020 == 0x00)
				ebp_13->t0020 = g_t40BC64;
			Eq_3 eax_437 = MultiByteToWideChar(ebp_13->t0020, (uint32) (uint8) (ebp_13->dw0024 != 0x00) * 0x08 + 0x01, ebp_13->t0010, ebp_13->t0014, 0x00, 0x00);
			ebp_13->tFFFFFFD0 = eax_437;
			if (eax_437 != 0x00)
			{
				ebp_13->tFFFFFFFC.u0 = 0x01;
				fn00403D30(eax_437 * 0x02 + 0x03 & ~0x03, 0x00);
				Eq_3 esp_450 = <invalid>;
				ebp_13->tFFFFFFE8 = esp_450;
				ebp_13->tFFFFFFE4 = esp_450;
				ebp_13->tFFFFFFFC |= ~0x00;
				if (ebp_13->tFFFFFFE4 != 0x00)
				{
l00407587:
					*((word32) esp_450 - 4) = eax_437;
					*((word32) esp_450 - 8) = ebp_13->tFFFFFFE4;
					*((word32) esp_450 - 0x0C) = ebp_13->t0014;
					*((word32) esp_450 - 16) = ebp_13->t0010;
					((word32) esp_450 - 20)->u0 = 0x01;
					*((word32) esp_450 - 24) = ebp_13->t0020;
					Eq_3 esp_503 = esp_450;
					if (MultiByteToWideChar(*((word32) esp_450 - 24), *((word32) esp_450 - 20), *((word32) esp_450 - 16), *((word32) esp_450 - 0x0C), *((word32) esp_450 - 8), *((word32) esp_450 - 4)) != 0x00)
					{
						((word32) esp_450 - 4)->u0 = 0x00;
						((word32) esp_450 - 8)->u0 = 0x00;
						*((word32) esp_450 - 0x0C) = eax_437;
						*((word32) esp_450 - 16) = ebp_13->tFFFFFFE4;
						*((word32) esp_450 - 20) = ebp_13->t000C;
						*((word32) esp_450 - 24) = ebp_13->t0008;
						Eq_3 eax_523 = LCMapStringW(*((word32) esp_450 - 24), *((word32) esp_450 - 20), *((word32) esp_450 - 16), *((word32) esp_450 - 0x0C), *((word32) esp_450 - 8), *((word32) esp_450 - 4));
						ebp_13->tFFFFFFD4 = eax_523;
						esp_503 = esp_450;
						if (eax_523 == 0x00)
							goto l0040768A;
						if ((ebp_13->b000D & 0x04) != 0x00)
						{
							if (ebp_13->t001C != 0x00 && eax_523 <= ebp_13->t001C)
							{
								*((word32) esp_450 - 4) = ebp_13->t001C;
								*((word32) esp_450 - 8) = ebp_13->t0018;
								*((word32) esp_450 - 0x0C) = eax_437;
								*((word32) esp_450 - 16) = ebp_13->tFFFFFFE4;
								*((word32) esp_450 - 20) = ebp_13->t000C;
								*((word32) esp_450 - 24) = ebp_13->t0008;
								LCMapStringW(*((word32) esp_450 - 24), *((word32) esp_450 - 20), *((word32) esp_450 - 16), *((word32) esp_450 - 0x0C), *((word32) esp_450 - 8), *((word32) esp_450 - 4));
								esp_503 = esp_450;
							}
							goto l0040768A;
						}
						ebp_13->tFFFFFFFC.u0 = 0x02;
						fn00403D30(eax_523 * 0x02 + 0x03 & ~0x03, *((word32) esp_450 - 4));
						Eq_3 esp_539 = <invalid>;
						ebp_13->tFFFFFFE8 = esp_539;
						ebp_13->tFFFFFFE0 = esp_539;
						ebp_13->tFFFFFFFC |= ~0x00;
						if (ebp_13->tFFFFFFE0 != 0x00)
						{
l00407651:
							*((word32) esp_539 - 4) = eax_523;
							*((word32) esp_539 - 8) = ebp_13->tFFFFFFE0;
							*((word32) esp_539 - 0x0C) = eax_437;
							*((word32) esp_539 - 16) = ebp_13->tFFFFFFE4;
							*((word32) esp_539 - 20) = ebp_13->t000C;
							*((word32) esp_539 - 24) = ebp_13->t0008;
							esp_503 = esp_539;
							if (LCMapStringW(*((word32) esp_539 - 24), *((word32) esp_539 - 20), *((word32) esp_539 - 16), *((word32) esp_539 - 0x0C), *((word32) esp_539 - 8), *((word32) esp_539 - 4)) != 0x00)
							{
								((word32) esp_539 - 4)->u0 = 0x00;
								((word32) esp_539 - 8)->u0 = 0x00;
								if (ebp_13->t001C == 0x00)
								{
									((word32) esp_539 - 0x0C)->u0 = 0x00;
									((word32) esp_539 - 16)->u0 = 0x00;
								}
								else
								{
									*((word32) esp_539 - 0x0C) = ebp_13->t001C;
									*((word32) esp_539 - 16) = ebp_13->t0018;
								}
								*((word32) esp_539 - 20) = eax_523;
								*((word32) esp_539 - 24) = ebp_13->tFFFFFFE0;
								((word32) esp_539 - 28)->u0 = 0x00;
								*((word32) esp_539 - 32) = ebp_13->t0020;
								WideCharToMultiByte(*((word32) esp_539 - 32), *((word32) esp_539 - 28), *((word32) esp_539 - 24), *((word32) esp_539 - 20), *((word32) esp_539 - 16), *((word32) esp_539 - 0x0C), *((word32) esp_539 - 8), *((word32) esp_539 - 4));
								esp_503 = esp_539;
							}
							goto l0040768A;
						}
						*((word32) esp_539 - 4) = eax_523 * 0x02;
						Eq_3 eax_556 = fn00403DDF(*((word32) esp_539 - 4));
						ebp_13->tFFFFFFE0 = eax_556;
						esp_503 = esp_539;
						if (eax_556 != 0x00)
						{
							ebp_13->tFFFFFFCC.u0 = 0x01;
							goto l00407651;
						}
					}
l0040768A:
					if (ebp_13->tFFFFFFCC != 0x00)
					{
						union Eq_3 * esp_658 = esp_503 - 4;
						*esp_658 = (union Eq_3 *) ebp_13->tFFFFFFE0;
						word32 edi_836;
						fn0040403C(*esp_658, out ebx_182, out ebp_13, out edi_836);
					}
					if (ebp_13->tFFFFFFC8 != ebx_182)
					{
						union Eq_3 * esp_679 = esp_503 - 4;
						*esp_679 = (union Eq_3 *) ebp_13->tFFFFFFE4;
						word32 ebx_837;
						word32 edi_838;
						fn0040403C(*esp_679, out ebx_837, out ebp_13, out edi_838);
					}
					goto l00407808;
				}
				*((word32) esp_450 - 4) = eax_437 * 0x02;
				Eq_3 eax_467 = fn00403DDF(*((word32) esp_450 - 4));
				ebp_13->tFFFFFFE4 = eax_467;
				if (eax_467 != 0x00)
				{
					ebp_13->tFFFFFFC8.u0 = 0x01;
					goto l00407587;
				}
			}
		}
		goto l004076E0;
	}
	ebp_13->tFFFFFFD8.u0 = 0x00;
	ebp_13->tFFFFFFC4.u0 = 0x00;
	if (ebp_13->t0008 == 0x00)
		ebp_13->t0008 = g_t40BC54;
	if (ebp_13->t0020 == 0x00)
		ebp_13->t0020 = g_t40BC64;
	Eq_3 eax_131 = fn0040850A(0x00, esi, 0x00, ebp_13->t0008);
	ebp_13->tFFFFFFC0 = eax_131;
	if (eax_131 == ~0x00)
	{
l004076E0:
		goto l00407808;
	}
	Eq_3 esp_163;
	if (eax_131 == ebp_13->t0020)
	{
		LCMapStringA(ebp_13->t0008, ebp_13->t000C, ebp_13->t0010, ebp_13->t0014, ebp_13->t0018, ebp_13->t001C);
		esp_163 = fp - 0x08;
		goto l004077F8;
	}
	Eq_3 edi_184;
	Eq_3 eax_180 = fn0040854D(0x00, esi, 0x00, out ebx_182, out ebp_13, out edi_184);
	ebp_13->tFFFFFFD8 = eax_180;
	if (eax_180 == ebx_182)
		goto l004076E0;
	Eq_3 eax_210 = LCMapStringA(ebp_13->t0008, ebp_13->t000C, eax_180, ebp_13->t0014, ebx_182, ebx_182);
	ebp_13->tFFFFFFDC = eax_210;
	esp_163 = fp - 0x08;
	if (eax_210 != ebx_182)
	{
		ebp_13->tFFFFFFFC = ebx_182;
		fn00403D30((word32) eax_210 + 3 & ~0x03, ebx_182);
		Eq_3 esp_223 = <invalid>;
		ebp_13->tFFFFFFE8 = esp_223;
		ebp_13->tFFFFFFBC = esp_223;
		*((word32) esp_223 - 4) = eax_210;
		*((word32) esp_223 - 8) = ebx_182;
		*((word32) esp_223 - 0x0C) = esp_223;
		fn004045E0(*((word32) esp_223 - 0x0C), *((word32) esp_223 - 8), *((word32) esp_223 - 4));
		edi_184 = esp_223;
		ebp_13->tFFFFFFFC |= ~0x00;
		if (esp_223 == ebx_182)
		{
			*((word32) esp_223 - 4) = ebp_13->tFFFFFFDC;
			Eq_3 eax_254 = fn00403DDF(*((word32) esp_223 - 4));
			edi_184 = eax_254;
			if (eax_254 == ebx_182)
			{
l004077A6:
				esp_163 = esp_223;
				goto l004077D0;
			}
			*((word32) esp_223 - 4) = ebp_13->tFFFFFFDC;
			*((word32) esp_223 - 8) = ebx_182;
			*((word32) esp_223 - 0x0C) = eax_254;
			fn004045E0(*((word32) esp_223 - 0x0C), *((word32) esp_223 - 8), *((word32) esp_223 - 4));
			ebp_13->tFFFFFFC4.u0 = 0x01;
		}
		*((word32) esp_223 - 4) = ebp_13->tFFFFFFDC;
		*((word32) esp_223 - 8) = edi_184;
		*((word32) esp_223 - 0x0C) = ebp_13->t0014;
		*((word32) esp_223 - 16) = ebp_13->tFFFFFFD8;
		*((word32) esp_223 - 20) = ebp_13->t000C;
		*((word32) esp_223 - 24) = ebp_13->t0008;
		Eq_3 eax_304 = LCMapStringA(*((word32) esp_223 - 24), *((word32) esp_223 - 20), *((word32) esp_223 - 16), *((word32) esp_223 - 0x0C), *((word32) esp_223 - 8), *((word32) esp_223 - 4));
		ebp_13->tFFFFFFDC = eax_304;
		if (eax_304 == ebx_182)
			goto l004077A6;
		*((word32) esp_223 - 4) = ebp_13->t001C;
		*((word32) esp_223 - 8) = ebp_13->t0018;
		*((word32) esp_223 - 0x0C) = ebp_13 - 0x24;
		*((word32) esp_223 - 16) = edi_184;
		*((word32) esp_223 - 20) = ebp_13->t0020;
		*((word32) esp_223 - 24) = ebp_13->tFFFFFFC0;
		fn0040854D(ebx_182, eax_210, edi_184, out ebx_182, out ebp_13, out edi_184);
		esp_163 = esp_223;
	}
l004077D0:
	if (ebp_13->tFFFFFFC4 != ebx_182)
	{
		union Eq_3 * esp_361 = esp_163 - 4;
		*esp_361 = (union Eq_3 *) edi_184;
		word32 edi_833;
		fn0040403C(*esp_361, out ebx_182, out ebp_13, out edi_833);
		esp_163 = (char *) esp_361 + 4;
	}
l004077F8:
	if (ebp_13->tFFFFFFD8 != ebx_182)
	{
		union Eq_3 * esp_384 = esp_163 - 4;
		*esp_384 = (union Eq_3 *) ebp_13->tFFFFFFD8;
		word32 edi_835;
		word32 ebx_834;
		fn0040403C(*esp_384, out ebx_834, out ebp_13, out edi_835);
	}
l00407808:
	ptr32 ebp_721;
	ptr32 edi_724;
	ptr32 esi_725;
	Eq_3 ebx_722 = fn00403C0B(ebp_13, ebp_13->tFFFFFFA8, out ebp_721, out esi_725, out edi_724);
	ebpOut = ebp_721;
	esiOut = esi_725;
	ediOut = edi_724;
	return ebx_722;
}

// 004080DE: Register Eq_3 fn004080DE(Stack Eq_3 dwArg04, Stack Eq_3 dwArg08, Register out ptr32 esiOut)
// Called from:
//      fn0040532E
Eq_3 fn004080DE(Eq_3 dwArg04, Eq_3 dwArg08, ptr32 & esiOut)
{
	Eq_3 eax_26;
	Eq_3 ebx_173 = dwArg04;
	if (dwArg04 == 0x00)
		eax_26 = fn00403DDF(dwArg08);
	else
	{
		word32 * esp_109 = fp - 16;
		Eq_3 esi_170 = dwArg08;
		if (dwArg08 == 0x00)
		{
			word32 ebx_543;
			word32 edi_545;
			word32 ebp_544;
			fn0040403C(dwArg04, out ebx_543, out ebp_544, out edi_545);
			esp_109 = fp - 16;
		}
		else if (g_dw40BEC4 == 0x03)
		{
			do
			{
				Eq_3 edi_174 = 0x00;
				if (esi_170 <= ~0x1F)
				{
					struct Eq_12018 * esp_78 = esp_109 - 4;
					esp_78->t0000 = ebx_173;
					Eq_3 eax_81 = fn00405D85(esp_78->t0000);
					Eq_3 ebp_172 = eax_81;
					esp_109 = (word32 *) ((char *) &esp_78->t0000 + 4);
					if (eax_81 != 0x00)
					{
						if (esi_170 <= g_t40BC84)
						{
							esp_78->t0000 = esi_170;
							esp_78->tFFFFFFFC = ebx_173;
							esp_78->tFFFFFFF8 = eax_81;
							esp_109 = (word32 *) ((char *) &esp_78->t0000 + 4);
							if (fn00406285(esp_78->tFFFFFFF8, esp_78->tFFFFFFFC, esp_78->t0000) != 0x00)
							{
								edi_174 = ebx_173;
								goto l00408182;
							}
							esp_78->t0000 = esi_170;
							Eq_3 eax_115 = fn00406564(esi_170, esp_78->t0000);
							esp_109 = (word32 *) ((char *) &esp_78->t0000 + 4);
							if (eax_115 == 0x00)
								goto l00408186;
							Eq_3 eax_128 = *((word32) ebx_173 - 4);
							Eq_3 eax_129 = eax_128 - 0x01;
							if (eax_128 - 0x01 >= esi_170)
								eax_129 = esi_170;
							esp_78->t0000 = eax_129;
							esp_78->tFFFFFFFC = ebx_173;
							esp_78->tFFFFFFF8 = eax_115;
							word32 esi_548;
							word32 edi_549;
							fn00405A00(esp_78->tFFFFFFF8, esp_78->tFFFFFFFC, esp_78->t0000, out esi_548, out edi_549);
							esp_78->tFFFFFFF4 = ebx_173;
							Eq_3 eax_156 = fn00405D85(esp_78->tFFFFFFF4);
							esp_78->tFFFFFFF0 = ebx_173;
							esp_78->tFFFFFFEC = eax_156;
							fn00405DB0(esp_78->tFFFFFFEC, esp_78->tFFFFFFF0, out ebx_173, out ebp_172, out esi_170, out edi_174);
							Eq_3 esp_175 = <invalid>;
							esp_109 = (word32) esp_175 + 24;
l00408182:
							if (edi_174 == 0x00)
								goto l00408186;
						}
						else
						{
l00408186:
							if (esi_170 == 0x00)
								++esi_170;
							word32 esi_195 = esi_170 + 0x0F;
							struct Eq_12105 * esp_200 = esp_109 - 4;
							esp_200->t0000 = esi_195 & ~0x0F;
							esp_200->tFFFFFFFC.u0 = 0x00;
							esp_200->tFFFFFFF8 = g_t40BEC0;
							Eq_3 eax_207 = HeapAlloc(esp_200->tFFFFFFF8, esp_200->tFFFFFFFC, esp_200->t0000);
							esi_170 = esi_195 & ~0x0F;
							esp_109 = (word32 *) ((char *) &esp_200->t0000 + 4);
							edi_174 = eax_207;
							if (eax_207 != 0x00)
							{
								Eq_3 eax_216 = *((word32) ebx_173 - 4);
								Eq_3 eax_217 = eax_216 - 0x01;
								if (eax_216 - 0x01 >= (esi_195 & ~0x0F))
									eax_217 = esi_195 & ~0x0F;
								esp_200->t0000 = eax_217;
								esp_200->tFFFFFFFC = ebx_173;
								esp_200->tFFFFFFF8 = eax_207;
								word32 esi_546;
								word32 edi_547;
								Eq_3 ebp_232 = fn00405A00(esp_200->tFFFFFFF8, esp_200->tFFFFFFFC, esp_200->t0000, out esi_546, out edi_547);
								esp_200->tFFFFFFF4 = ebx_173;
								esp_200->tFFFFFFF0 = ebp_232;
								fn00405DB0(esp_200->tFFFFFFF0, esp_200->tFFFFFFF4, out ebx_173, out ebp_172, out esi_170, out edi_174);
								Eq_3 esp_253 = <invalid>;
								esp_109 = (word32) esp_253 + 20;
							}
						}
						if (ebp_172 == 0x00)
							goto l004081C6;
					}
					else
					{
l004081C6:
						if (esi_170 == 0x00)
							++esi_170;
						word32 esi_275 = esi_170 + 0x0F;
						struct Eq_12212 * esp_282 = esp_109 - 4;
						esp_282->t0000 = esi_275 & ~0x0F;
						esp_282->tFFFFFFFC = ebx_173;
						esp_282->tFFFFFFF8.u0 = 0x00;
						esp_282->tFFFFFFF4 = g_t40BEC0;
						esi_170 = esi_275 & ~0x0F;
						esp_109 = (word32 *) ((char *) &esp_282->t0000 + 4);
						edi_174 = HeapReAlloc(esp_282->tFFFFFFF4, esp_282->tFFFFFFF8, esp_282->tFFFFFFFC, esp_282->t0000);
					}
					if (edi_174 == 0x00)
						goto l004081E7;
l00408201:
					eax_26 = edi_174;
					goto l0040823B;
				}
l004081E7:
				if (g_dw40BC48 == 0x00)
					goto l00408201;
				union Eq_3 * esp_314 = esp_109 - 4;
				*esp_314 = (union Eq_3 *) esi_170;
				esp_109 = (word32 *) ((char *) esp_314 + 4);
			} while (fn00406B77(*esp_314) != 0x00);
		}
		else
		{
			do
			{
				eax_26.u0 = 0x00;
				if (esi_170 <= ~0x1F)
				{
					if (esi_170 == 0x00)
						++esi_170;
					eax_26 = HeapReAlloc(g_t40BEC0, 0x00, dwArg04, esi_170);
					esp_109 = fp - 0x10;
					if (eax_26 != 0x00)
						goto l0040823B;
				}
				esp_109 = fp - 16;
				if (g_dw40BC48 == 0x00)
					goto l0040823B;
				esp_109 = fp - 16;
			} while (fn00406B77(esi_170) != 0x00);
		}
		eax_26.u0 = 0x00;
l0040823B:
		esi = *esp_109;
	}
	esiOut = esi;
	return eax_26;
}

// 00408240: Register Eq_3 fn00408240(Stack Eq_3 dwArg04)
// Called from:
//      fn0040532E
Eq_3 fn00408240(Eq_3 dwArg04)
{
	if (g_dw40BEC4 != 0x03 || fn00405D85(dwArg04) == 0x00)
		return HeapSize(g_t40BEC0, 0x00, dwArg04);
	return *((word32) dwArg04 - 4) - 0x09;
}

// 00408278: Register Eq_3 fn00408278(Stack Eq_3 dwArg04)
// Called from:
//      fn00406B92
//      fn00406DD9
//      fn00407267
//      fn004082D7
//      fn0040842C
Eq_3 fn00408278(Eq_3 dwArg04)
{
	g_t40BA54 = dwArg04;
	uint32 ecx_11;
	for (ecx_11 = 0x00; ecx_11 < 0x2D; ++ecx_11)
	{
		if (dwArg04 == g_a40B5F8[ecx_11])
		{
			Eq_3 eax_15 = g_a40B5FC[ecx_11];
			g_t40BA50 = eax_15;
			return eax_15;
		}
	}
	if (dwArg04 < 0x13 || dwArg04 > 0x24)
	{
		if (dwArg04 >= 188)
		{
			g_t40BA50.u0 = 0x08;
			if (dwArg04 <= 202)
				return dwArg04;
		}
		g_t40BA50.u0 = 22;
		return dwArg04;
	}
	else
	{
		g_t40BA50.u0 = 0x0D;
		return dwArg04;
	}
}

// 004082D7: void fn004082D7(Stack Eq_3 dwArg04, Stack Eq_9790 dwArg08, Stack Eq_3 dwArg10)
// Called from:
//      fn00406B92
void fn004082D7(Eq_3 dwArg04, Eq_9790 dwArg08, Eq_3 dwArg10)
{
	if (dwArg04 < g_t40BEC8)
	{
		struct Eq_12413 ** edi_26 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_28 = (dwArg04 & 0x1F) << 0x03;
		if ((((char *) *edi_26 + 4)[esi_28] & 0x01) != 0x00)
		{
			Eq_3 eax_43 = fn004083F0(dwArg04);
			if (eax_43 != ~0x00)
			{
				if (SetFilePointer(eax_43, dwArg08, fp - 0x08, dwArg10) == ~0x00)
				{
					Eq_3 eax_70 = GetLastError();
					if (eax_70 != 0x00)
					{
						fn00408278(eax_70);
						return;
					}
				}
				byte * eax_78 = (char *) *edi_26 + 4 + esi_28;
				*eax_78 &= ~0x02;
				return;
			}
l00408362:
			g_t40BA50.u0 = 0x09;
			return;
		}
	}
	g_t40BA54 &= 0x00;
	goto l00408362;
}

// 00408376: void fn00408376(Stack Eq_3 dwArg04)
// Called from:
//      fn0040842C
void fn00408376(Eq_3 dwArg04)
{
	if (dwArg04 < g_t40BEC8)
	{
		ui32 (** edi_17)[] = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		ui32 (* esi_20)[] = (dwArg04 & 0x1F) << 0x03;
		word32 eax_21 = Mem12[edi_17 + 0x00:word32] + esi_20;
		if ((eax_21->b0004 & 0x01) != 0x00 && eax_21->dw0000 != ~0x00)
		{
			if (g_dw40B0BC == 0x01)
			{
				Eq_3 dwLoc10_89;
				if (dwArg04 != 0x00)
				{
					if (dwArg04 != 0x01)
					{
						if (dwArg04 != 0x02)
							goto l004083CF;
						dwLoc10_89.u0 = ~0x0B;
					}
					else
						dwLoc10_89.u0 = ~0x0A;
				}
				else
					dwLoc10_89.u0 = ~0x09;
				SetStdHandle(dwLoc10_89, 0x00);
			}
l004083CF:
			ui32 (* eax_68)[] = *edi_17;
			Mem72[esi_20 + eax_68:word32] = Mem67[esi_20 + eax_68:word32] | ~0x00;
			return;
		}
	}
	g_t40BA54 &= 0x00;
	g_t40BA50.u0 = 0x09;
}

// 004083F0: Register ui32 fn004083F0(Stack Eq_3 dwArg04)
// Called from:
//      fn00406DD9
//      fn004082D7
//      fn0040842C
ui32 fn004083F0(Eq_3 dwArg04)
{
	Eq_3 eax_12 = dwArg04;
	if (dwArg04 < g_t40BEC8)
	{
		eax_12 = (char *) *((char *) &g_t40BEE0 + (dwArg04 >> 0x05) * 0x04) + (dwArg04 & 0x1F) * 0x08;
		if ((*((word32) eax_12 + 4) & 0x01) != 0x00)
			return *eax_12;
	}
	g_t40BA54 &= 0x00;
	g_t40BA50.u0 = 0x09;
	return eax_12 | ~0x00;
}

// 0040842C: Register Eq_3 fn0040842C(Register Eq_3 eax, Stack Eq_3 dwArg04)
// Called from:
//      fn00406F0F
Eq_3 fn0040842C(Eq_3 eax, Eq_3 dwArg04)
{
	Eq_3 eax_130;
	if (dwArg04 < g_t40BEC8)
	{
		union Eq_3 * ebx_23 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		eax = *ebx_23;
		int32 esi_25 = (dwArg04 & 0x1F) << 0x03;
		if (((word32) eax + 4 + esi_25 & 0x01) != 0x00)
		{
			Eq_3 ebp_114;
			if (fn004083F0(dwArg04) != ~0x00 && (dwArg04 != 0x01 && dwArg04 != 0x02 || fn004083F0(0x01) != fn004083F0(0x02)) && CloseHandle(fn004083F0(dwArg04)) == 0x00)
				ebp_114 = GetLastError();
			else
				ebp_114.u0 = 0x00;
			fn00408376(dwArg04);
			((char *) *ebx_23 + 4)[esi_25] = 0x00;
			if (ebp_114 == 0x00)
			{
				eax_130.u0 = 0x00;
				return eax_130;
			}
			eax = fn00408278(ebp_114);
l004084D7:
			eax_130 = eax | ~0x00;
			return eax_130;
		}
	}
	g_t40BA54 &= 0x00;
	g_t40BA50.u0 = 0x09;
	goto l004084D7;
}

// 004084DF: Register Eq_7716 fn004084DF(Stack Eq_3 dwArg04, Register out ptr32 ediOut)
// Called from:
//      fn00406F0F
Eq_7716 fn004084DF(Eq_3 dwArg04, ptr32 & ediOut)
{
	Eq_7716 eax_32 = *((word32) dwArg04 + 0x0C);
	byte al_9 = (byte) eax_32;
	if ((al_9 & 131) != 0x00 && (al_9 & 0x08) != 0x00)
	{
		word32 ebx_74;
		word32 ebp_75;
		fn0040403C(*((word32) dwArg04 + 8), out ebx_74, out ebp_75, out edi);
		*((word32) dwArg04 + 0x0C) &= ~0x0408;
		*dwArg04 = 0x00;
		((word32) dwArg04 + 8)->u0 = 0x00;
		*((word32) dwArg04 + 4) = 0x00;
		eax_32.u0 = 0x00;
	}
	ediOut = edi;
	return eax_32;
}

// 0040850A: Register ui32 fn0040850A(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Stack Eq_3 dwArg04)
// Called from:
//      fn004070AD
//      fn00407455
ui32 fn0040850A(Eq_3 ebx, Eq_3 esi, Eq_3 edi, Eq_3 dwArg04)
{
	ui32 eax_31;
	Eq_3 eax_9 = g_t40B498;
	int32 eax_22 = GetLocaleInfoA(dwArg04, 0x1004, fp - 0x10, 0x06);
	if (eax_22 == 0x00)
		eax_31 = eax_22 | ~0x00;
	else
		eax_31 = fn004089CE(fp - 0x10);
	fn004041A2(eax_9, ebx, esi, edi);
	return eax_31;
}

// 0040854D: Register Eq_3 fn0040854D(Register Eq_3 ebx, Register Eq_3 esi, Register Eq_3 edi, Register out Eq_3 ebxOut, Register out (ptr32 Eq_10711) ebpOut, Register out (ptr32 Eq_10712) ediOut)
// Called from:
//      fn004070AD
//      fn00407455
Eq_3 fn0040854D(Eq_3 ebx, Eq_3 esi, Eq_3 edi, union Eq_3 & ebxOut, struct Eq_10711 & ebpOut, struct Eq_10712 & ediOut)
{
	Eq_3 eax_341;
	struct Eq_154 * ebp_13 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x38);
	ebp_13->tFFFFFFE4 = g_t40B498;
	ebp_13->tFFFFFFCC.u0 = 0x00;
	ebp_13->tFFFFFFBC.u0 = 0x00;
	Eq_3 ebx_135 = *ebp_13->t0014;
	ebp_13->tFFFFFFC0 = ebx_135;
	ebp_13->tFFFFFFC4.u0 = 0x00;
	Eq_3 esp_197 = fp - 8;
	Eq_3 edi_20 = 0x00;
	Eq_3 eax_27 = ebp_13->t0008;
	if (eax_27 == ebp_13->t000C)
	{
		ebx_135 = ebp_13->tFFFFFFB8;
		goto l004086F6;
	}
	if (GetCPInfo(eax_27, ebp_13 - 0x30) != 0x00 && (ebp_13->tFFFFFFD0 == 0x01 && (GetCPInfo(ebp_13->t000C, ebp_13 - 0x30) != 0x00 && ebp_13->tFFFFFFD0 == 0x01)))
		ebp_13->tFFFFFFC4.u0 = 0x01;
	Eq_3 dwLoc0C_388 = ebp_13 - 0x30;
	if (ebp_13->tFFFFFFC4 != 0x00)
	{
		if (ebx_135 != ~0x00)
			esi = ebx_135;
		else
		{
			Eq_3 v23_67 = ebp_13->t0010;
			dwLoc0C_388 = v23_67;
			esi = (word32) fn00404080(v23_67) + 1;
		}
		ebp_13->tFFFFFFC8 = esi;
	}
	else
		esi = ebp_13->tFFFFFFC8;
	if (ebp_13->tFFFFFFC4 == 0x00)
	{
		Eq_3 eax_111 = MultiByteToWideChar(ebp_13->t0008, 0x01, ebp_13->t0010, ebx_135, 0x00, 0x00);
		ebp_13->tFFFFFFC8 = eax_111;
		dwLoc0C_388.u0 = 0x00;
		esi = eax_111;
		if (eax_111 == 0x00)
			goto l0040864A;
	}
	ebp_13->tFFFFFFFC.u0 = 0x00;
	fn00403D30(esi * 0x02 + 0x03 & ~0x03, dwLoc0C_388);
	Eq_3 esp_129 = <invalid>;
	ebp_13->tFFFFFFE8 = esp_129;
	ebp_13->tFFFFFFB8 = esp_129;
	*((word32) esp_129 - 4) = esi * 0x02;
	((word32) esp_129 - 8)->u0 = 0x00;
	*((word32) esp_129 - 0x0C) = esp_129;
	fn004045E0(*((word32) esp_129 - 0x0C), *((word32) esp_129 - 8), *((word32) esp_129 - 4));
	ebp_13->tFFFFFFFC |= ~0x00;
	ebx_135 = esp_129;
	if (esp_129 == 0x00)
	{
		*((word32) esp_129 - 4) = esi;
		((word32) esp_129 - 8)->u0 = 0x02;
		Eq_3 eax_162 = fn00404245(*((word32) esp_129 - 8), *((word32) esp_129 - 4));
		ebx_135 = eax_162;
		if (eax_162 == 0x00)
		{
l0040864A:
			eax_341.u0 = 0x00;
			goto l00408705;
		}
		ebp_13->tFFFFFFBC.u0 = 0x01;
	}
	*((word32) esp_129 - 4) = esi;
	*((word32) esp_129 - 8) = ebx_135;
	*((word32) esp_129 - 0x0C) = ebp_13->tFFFFFFC0;
	*((word32) esp_129 - 16) = ebp_13->t0010;
	((word32) esp_129 - 20)->u0 = 0x01;
	*((word32) esp_129 - 24) = ebp_13->t0008;
	esp_197 = esp_129;
	if (MultiByteToWideChar(*((word32) esp_129 - 24), *((word32) esp_129 - 20), *((word32) esp_129 - 16), *((word32) esp_129 - 0x0C), *((word32) esp_129 - 8), *((word32) esp_129 - 4)) != 0x00)
	{
		if (ebp_13->t0018 != 0x00)
		{
			((word32) esp_129 - 4)->u0 = 0x00;
			((word32) esp_129 - 8)->u0 = 0x00;
			*((word32) esp_129 - 0x0C) = ebp_13->t001C;
			*((word32) esp_129 - 16) = ebp_13->t0018;
			*((word32) esp_129 - 20) = esi;
			*((word32) esp_129 - 24) = ebx_135;
			((word32) esp_129 - 28)->u0 = 0x00;
			*((word32) esp_129 - 32) = ebp_13->t000C;
			esp_197 = esp_129;
			if (WideCharToMultiByte(*((word32) esp_129 - 32), *((word32) esp_129 - 28), *((word32) esp_129 - 24), *((word32) esp_129 - 20), *((word32) esp_129 - 16), *((word32) esp_129 - 0x0C), *((word32) esp_129 - 8), *((word32) esp_129 - 4)) != 0x00)
				ebp_13->tFFFFFFCC = ebp_13->t0018;
			goto l004086F6;
		}
		if (ebp_13->tFFFFFFC4 != 0x00)
		{
l004086B3:
			*((word32) esp_129 - 4) = esi;
			((word32) esp_129 - 8)->u0 = 0x01;
			Eq_3 eax_234 = fn00404245(*((word32) esp_129 - 8), *((word32) esp_129 - 4));
			ebp_13->tFFFFFFCC = eax_234;
			esp_197 = esp_129;
			if (eax_234 != 0x00)
			{
				((word32) esp_129 - 4)->u0 = 0x00;
				((word32) esp_129 - 8)->u0 = 0x00;
				*((word32) esp_129 - 0x0C) = esi;
				*((word32) esp_129 - 16) = eax_234;
				*((word32) esp_129 - 20) = esi;
				*((word32) esp_129 - 24) = ebx_135;
				((word32) esp_129 - 28)->u0 = 0x00;
				*((word32) esp_129 - 32) = ebp_13->t000C;
				Eq_3 eax_268 = WideCharToMultiByte(*((word32) esp_129 - 32), *((word32) esp_129 - 28), *((word32) esp_129 - 24), *((word32) esp_129 - 20), *((word32) esp_129 - 16), *((word32) esp_129 - 0x0C), *((word32) esp_129 - 8), *((word32) esp_129 - 4));
				esp_197 = esp_129;
				if (eax_268 == 0x00)
				{
					*((word32) esp_129 - 4) = ebp_13->tFFFFFFCC;
					fn0040403C(*((word32) esp_129 - 4), out ebx_135, out ebp_13, out edi_20);
					ebp_13->tFFFFFFCC = edi_20;
					esp_197 = esp_129;
				}
				else if (ebp_13->tFFFFFFC0 != ~0x00)
					*ebp_13->t0014 = eax_268;
			}
			goto l004086F6;
		}
		((word32) esp_129 - 4)->u0 = 0x00;
		((word32) esp_129 - 8)->u0 = 0x00;
		((word32) esp_129 - 0x0C)->u0 = 0x00;
		((word32) esp_129 - 16)->u0 = 0x00;
		*((word32) esp_129 - 20) = esi;
		*((word32) esp_129 - 24) = ebx_135;
		((word32) esp_129 - 28)->u0 = 0x00;
		*((word32) esp_129 - 32) = ebp_13->t000C;
		Eq_3 eax_223 = WideCharToMultiByte(*((word32) esp_129 - 32), *((word32) esp_129 - 28), *((word32) esp_129 - 24), *((word32) esp_129 - 20), *((word32) esp_129 - 16), *((word32) esp_129 - 0x0C), *((word32) esp_129 - 8), *((word32) esp_129 - 4));
		esp_197 = esp_129;
		esi = eax_223;
		if (eax_223 != 0x00)
			goto l004086B3;
	}
l004086F6:
	if (ebp_13->tFFFFFFBC != edi_20)
	{
		union Eq_3 * esp_324 = esp_197 - 4;
		*esp_324 = (union Eq_3 *) ebx_135;
		fn0040403C(*esp_324, out ebx_135, out ebp_13, out edi_20);
	}
	eax_341 = ebp_13->tFFFFFFCC;
l00408705:
	fn004041A2(ebp_13->tFFFFFFE4, ebx_135, esi, edi_20);
	struct Eq_10711 * ebp_375;
	struct Eq_10712 * edi_378;
	word32 esi_422;
	ebxOut = fn00403C0B(ebp_13, ebp_13->tFFFFFFA8, out ebp_375, out esi_422, out edi_378);
	ebpOut = ebp_375;
	ediOut = edi_378;
	return eax_341;
}

// 004089CE: Register int32 fn004089CE(Stack (ptr32 byte) dwArg04)
// Called from:
//      fn0040850A
int32 fn004089CE(byte * dwArg04)
{
	byte * esi_26 = dwArg04;
	while (fn00408A26(cl, (word32) *esi_26) != 0x00)
		++esi_26;
	int32 ecx_37;
	int32 ecx_28 = (word32) *esi_26;
	byte * esi_29 = esi_26 + 1;
	if (ecx_28 != 0x2D)
	{
		ecx_37 = ecx_28;
		if (ecx_28 != 0x2B)
		{
l004089F8:
			int32 eax_40 = 0x00;
			while (true)
			{
				int32 ecx_49;
				if (ecx_37 >= 0x30 && ecx_37 <= 0x39)
					ecx_49 = ecx_37 - 0x30;
				else
					ecx_49 = ecx_37 | ~0x00;
				if (ecx_49 == ~0x00)
					break;
				eax_40 = ecx_49 + eax_40 * 0x0A;
				ecx_37 = (word32) *esi_29;
				++esi_29;
			}
			if (ecx_28 == 0x2D)
				eax_40 = -eax_40;
			return eax_40;
		}
	}
	ecx_37 = (word32) *esi_29;
	++esi_29;
	goto l004089F8;
}

// 00408A26: Register Eq_3 fn00408A26(Register byte cl, Stack Eq_3 dwArg04)
// Called from:
//      fn004089CE
Eq_3 fn00408A26(byte cl, Eq_3 dwArg04)
{
	cui16 wLoc08_111 = (word16) ecx;
	if (dwArg04 <= 0xFF)
	{
		if (g_t40B4A0 <= 0x01)
			return (word32) g_ptr40B490[dwArg04].t0000 & 0x08;
		return fn00404318(dwArg04, 0x08);
	}
	else
	{
		byte bLoc08_126 = (byte) (wLoc08_111 & 0x00);
		if (g_dw40BC98 == 0x00)
			return 0x00;
		word32 ebx_160;
		word32 esi_161;
		word32 edi_162;
		if (fn004070AD(ebx, esi, edi, out ebx_160, out esi_161, out edi_162) == 0x00 || (false || (bLoc08_126 & 0x08) == 0x00))
			return 0x00;
		return 0x01;
	}
}

