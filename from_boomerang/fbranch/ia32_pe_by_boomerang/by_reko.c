// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register word32 fn00401000(Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out ptr32 ediOut)
word32 fn00401000(Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, ptr32 & ediOut)
{
	*ediOut = edi;
	Eq_4 ebp_18;
	word32 ebx_19 = fn00401114(edx, ebx, esi, edi, 0x0040B040, out ebp_18);
	*(fp - 0x14) = (real64) *(ebp_18 - 0x08);
	*(fp - 0x1C) = (real64) *(ebp_18 - 0x04);
	*(fp - 0x20) = 0x0040B044;
	Eq_4 ebp_31 = fn004010E3(ebx_19, ebp_18);
	if ((real64) *(ebp_31 - 0x04) == (real64) (*(ebp_31 - 0x08)))
	{
		*(fp - 0x10) = 0x0040B058;
		ebp_31 = fn004010E3(ebx_19, ebp_31);
	}
	if ((real64) *(ebp_31 - 0x04) != (real64) (*(ebp_31 - 0x08)))
	{
		*(fp - 0x10) = 0x0040B060;
		ebp_31 = fn004010E3(ebx_19, ebp_31);
	}
	if ((real64) *(ebp_31 - 0x04) > *(ebp_31 - 0x08))
	{
		*(fp - 0x10) = 0x0040B06C;
		ebp_31 = fn004010E3(ebx_19, ebp_31);
	}
	if ((real64) *(ebp_31 - 0x04) <= *(ebp_31 - 0x08))
	{
		*(fp - 0x10) = 0x0040B078;
		ebp_31 = fn004010E3(ebx_19, ebp_31);
	}
	if ((real64) *(ebp_31 - 0x04) >= *(ebp_31 - 0x08))
	{
		*(fp - 0x10) = 0x0040B088;
		ebp_31 = fn004010E3(ebx_19, ebp_31);
	}
	if ((real64) *(ebp_31 - 0x04) < *(ebp_31 - 0x08))
	{
		*(fp - 0x10) = 0x0040B09C;
		fn004010E3(ebx_19, ebp_31);
	}
	return 0x00;
}

// 004010E3: Register Eq_4 fn004010E3(Register word32 ebx, Register Eq_4 ebp)
Eq_4 fn004010E3(word32 ebx, Eq_4 ebp)
{
	Eq_3 edx_15;
	Eq_4 eax_16 = fn0040136E(ebp, &globals->t40B0E8, out edx_15);
	*(fp - 0x14) = &fp->dw0004 + 0x01;
	*(fp - 0x18) = fp->dw0004;
	*(fp - 0x1C) = 0x0040B0E8;
	Eq_3 edx_27 = fn004014C0(edx_15, ebp, 0x0040B0E8, eax_16, dwArg04);
	*(fp - 0x20) = 0x0040B0E8;
	*(fp - 0x24) = (union Eq_4 *) eax_16;
	fn004013F6(edx_27, ebp, dwArg00, dwArg04);
	return ebp;
}

// 00401114: Register Eq_4 fn00401114(Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack word32 dwArg04, Register out ptr32 ebpOut)
Eq_4 fn00401114(Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, word32 dwArg04, ptr32 & ebpOut)
{
	word32 ebp_15;
	return fn00401DBC(edx, ebx, esi, edi, out ebp_15);
}

// 00401182: Register word32 fn00401182(Register Eq_4 ebx, Register Eq_4 ebp, Register Eq_4 edi, Register out ptr32 edxOut)
word32 fn00401182(Eq_4 ebx, Eq_4 ebp, Eq_4 edi, ptr32 & edxOut)
{
	if (globals->t40BA30 != 0x02)
		fn00403391(ebx, ebp, edi);
	*(fp - 0x04) = fp->dw0004;
	word32 edx_12;
	word32 eax_13 = fn0040321A(ebx, ebp, edi, dwArg00, out edx_12);
	*(fp - 0x08) = 0xFF;
	word32 esp_16;
	byte SCZO_17;
	byte Z_18;
	word32 ecx_19;
	word32 ebx_20;
	word32 ebp_21;
	word32 edi_22;
	word32 eax_23;
	word32 edx_24;
	globals->ptr40B0B8();
	return eax_23;
}

// 004011A7: Register Eq_4 Win32CrtStartup()
Eq_4 Win32CrtStartup()
{
	Eq_4 ebp_10 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x004090D8, 0x18);
	fn00403D30((byte *) 0x94, 0x18);
	*(ebp_10 - 0x18) = fp - 0x08;
	*(fp - 0x08) = 0x94;
	*(fp - 0x0C) = fp - 0x08;
	GetVersionExA(*(fp - 0x0C));
	word32 ecx_19 = fp->dw0008;
	globals->dw40BA5C = ecx_19;
	uint32 eax_21 = *(fp - 0x04);
	globals->dw40BA68 = eax_21;
	word32 edx_24 = fp->dw0000;
	globals->dw40BA6C = edx_24;
	ui32 esi_26 = fp->dw0004;
	globals->t40BA60 = esi_26 & 0x7FFF;
	Eq_4 esi_242 = esi_26 & 0x7FFF;
	if (ecx_19 != 0x02)
	{
		esi_242 = esi_26 & 0x7FFF | 0x8000;
		globals->t40BA60 = esi_242;
	}
	globals->dw40BA64 = (eax_21 << 0x08) + edx_24;
	*(fp - 0x10) = 0x00;
	Eq_399 eax_42 = GetModuleHandleA(*(fp - 0x10));
	if (eax_42->unused != 23117)
	{
l00401240:
		*(ebp_10 - 0x1C) = 0x00;
		goto l0040126C;
	}
	else
	{
		struct Eq_424 * ecx_204 = eax_42 + (&eax_42->unused)[0x0F] / 0x04;
		if (ecx_204->dw0000 != 0x4550)
			goto l00401240;
		byte Z_215;
		word32 eax_208 = (word32) ecx_204->w0018;
		if (eax_208 != 0x010B)
		{
			if (eax_208 != 0x020B || ecx_204->dw0084 <= 0x0E)
				goto l00401240;
			Z_215 = cond(ecx_204->dw00F8);
		}
		else
		{
			if (ecx_204->dw0074 <= 0x0E)
				goto l00401240;
			Z_215 = cond(ecx_204->dw00E8);
		}
		*(ebp_10 - 0x1C) = (word32) Z_215;
l0040126C:
		*(fp - 0x14) = 0x00;
		if (fn00403B7F(dwArg00) == 0x00)
		{
			if (globals->t40BA30 != 0x02)
				fn00403391(ebx, ebp_10, 0x00);
			*(fp - 0x14) = 0x1C;
			word32 edx_186;
			fn0040321A(ebx, ebp_10, 0x00, dwArg00, out edx_186);
			*(fp - 0x18) = 0xFF;
			fn0040307F();
		}
		word32 edi_66;
		Eq_4 ebp_67 = fn00403ADD(ebx, esi_242, 0x00, out edi_66);
		*(ebp_67 - 0x04) = edi_66;
		Eq_4 ebx_70;
		Eq_4 edi_71;
		word32 ecx_179;
		if (fn00403932(ebp_67, out ecx_179, out ebx_70, out edi_71) < 0x00)
		{
			*(fp - 0x14) = 0x1B;
			word32 edx_177;
			fn00401182(ebx_70, ebp_67, edi_71, out edx_177);
			ecx_179 = *(fp - 0x14);
		}
		globals->t40D004 = GetCommandLineA();
		Eq_3 edx_81;
		Eq_4 ebp_82;
		globals->ptr40BA28 = fn00403810(ecx_179, out edx_81, out ebp_82);
		Eq_4 ebx_86;
		Eq_4 edi_87;
		Eq_3 edx_170;
		Eq_4 eax_171 = fn0040376E(edx_81, ebp_82, out edx_170, out ebx_86, out edi_87);
		if (eax_171 < 0x00)
		{
			*(fp - 0x14) = 0x08;
			eax_171 = fn00401182(ebx_86, ebp_82, edi_87, out edx_170);
		}
		Eq_4 ebp_98;
		if (fn0040353B(eax_171, edx_170, ebx_86, ebp_82, edi_87, out ebp_98) < 0x00)
		{
			*(fp - 0x14) = 0x09;
			word32 edx_164;
			fn00401182(ebx_86, ebp_98, edi_87, out edx_164);
		}
		*(fp - 0x14) = 0x01;
		Eq_4 ebx_107;
		Eq_4 ebp_108;
		Eq_4 esi_109;
		Eq_4 edi_110;
		Eq_3 edx_106;
		Eq_4 eax_111 = fn004030AF(ebx_86, ebp_98, esi_242, edi_87, dwArg00, out edx_106, out ebx_107, out ebp_108, out esi_109, out edi_110);
		*(ebp_108 - 0x24) = (union Eq_4 *) eax_111;
		if (eax_111 != edi_110)
		{
			*(fp - 0x14) = (union Eq_4 *) eax_111;
			fn00401182(ebx_107, ebp_108, edi_110, out edx_106);
		}
		Eq_4 eax_121 = globals->t40BA7C;
		globals->t40BA80 = eax_121;
		*(fp - 0x14) = (union Eq_4 *) eax_121;
		*(fp - 0x18) = (union Eq_4 *) globals->t40BA74;
		*(fp - 0x1C) = globals->dw40BA70;
		word32 edi_131;
		word32 eax_132 = fn00401000(edx_106, ebx_107, esi_109, edi_110, out edi_131);
		*(ebp_108 - 0x28) = eax_132;
		if (*(ebp_108 - 0x1C) == edi_131)
		{
			*(fp - 0x14) = eax_132;
			fn004031DA(dwArg00);
		}
		Eq_4 esi_139;
		Eq_4 ebp_140 = fn004031FC(out esi_139);
		*(ebp_140 - 0x04) = *(ebp_140 - 0x04) | ~0x00;
		word32 ebx_149;
		word32 ebp_150;
		word32 esi_151;
		word32 edi_152;
		fn00403C0B(ebp_140, 0x18, dwArg00, dwArg04, dwArg08, out ebx_149, out ebp_150, out esi_151, out edi_152);
		return esi_139;
	}
}

// 0040136E: Register word32 fn0040136E(Register Eq_4 ebp, Stack (ptr Eq_185) dwArg04, Register out ptr32 edxOut)
word32 fn0040136E(Eq_4 ebp, Eq_185 * dwArg04, ptr32 & edxOut)
{
	*edxOut = edx;
	struct Eq_185 * esi_102 = dwArg04;
	if (fn00403DF1(dwArg04->t0010) == 0x00)
		return 0x00;
	ui32 eax_120;
	if (dwArg04 == &globals->t40B0E8)
		eax_120 = 0x00;
	else
	{
		if (dwArg04 != &globals->t40B108)
			return 0x00;
		eax_120 = 0x01;
	}
	globals->dw40BA3C = globals->dw40BA3C + 0x01;
	if ((dwArg04->w000C & 0x010C) != 0x00)
		return 0x00;
	union Eq_4 * edi_103 = eax_120 * 0x04 + 0x0040BA34;
	word32 ebx_101 = 0x1000;
	if (*edi_103 == 0x00)
	{
		word32 edx_100;
		Eq_4 eax_104 = fn00403DDF(ebp, 0x1000, out edx_100, out ebx_101, out esi_102, out edi_103);
		*edi_103 = (union Eq_4 *) eax_104;
		if (eax_104 == 0x00)
		{
			*(fp - 0x10) = 0x02;
			esi_102->t0008 = (char *) &esi_102->t0010 + 0x04;
			esi_102->t0000 = (char *) &esi_102->t0010 + 0x04;
			word32 eax_116 = *(fp - 0x10);
			esi_102->dw0018 = eax_116;
			esi_102->dw0004 = eax_116;
l004013E5:
			esi_102->w000C = esi_102->w000C | 0x1102;
			return 0x01;
		}
	}
	Eq_4 edi_92 = *edi_103;
	esi_102->t0008 = edi_92;
	esi_102->t0000 = edi_92;
	esi_102->dw0018 = ebx_101;
	esi_102->dw0004 = ebx_101;
	goto l004013E5;
}

// 004013F6: void fn004013F6(Register Eq_3 edx, Register Eq_4 ebp, Stack word32 dwArg04, Stack Eq_4 dwArg08)
void fn004013F6(Eq_3 edx, Eq_4 ebp, word32 dwArg04, Eq_4 dwArg08)
{
	if (dwArg04 == 0x00)
	{
		if ((*((word32) dwArg08 + 0x0D) & 0x10) == 0x00)
			return;
		fn00403E18(edx, ebp, dwArg08);
	}
	else
	{
		if ((*((word32) dwArg08 + 0x0D) & 0x10) == 0x00)
			return;
		fn00403E18(edx, ebp, dwArg08);
		((word32) dwArg08 + 0x0D)->u0 = *((word32) dwArg08 + 0x0D) & ~0x11;
		*((word32) dwArg08 + 0x0018) = *((word32) dwArg08 + 0x0018) & 0x00;
		*dwArg08 = *dwArg08 & 0x00;
		*((word32) dwArg08 + 0x08) = *((word32) dwArg08 + 0x08) & 0x00;
	}
}

// 00401432: Register Eq_3 fn00401432(Register Eq_3 al, Register Eq_3 ecx, Register Eq_3 edx, Register Eq_4 ebp, Register Eq_932 esi, Register Eq_3 edi, Register out ptr32 ebxOut, Register out Eq_935 ebpOut, Register out ptr32 esiOut, Register out (ptr Eq_937) ediOut)
Eq_3 fn00401432(Eq_3 al, Eq_3 ecx, Eq_3 edx, Eq_4 ebp, Eq_932 esi, Eq_3 edi, ptr32 & ebxOut, Eq_935 & ebpOut, ptr32 & esiOut, Eq_937 * & ediOut)
{
	*ebxOut = ebx;
	*ebpOut = ebp;
	*esiOut = esi;
	*ediOut = edi;
	if ((*((word32) ecx + 0x0C) & 0x40) == 0x00 || *((word32) ecx + 0x08) != 0x00)
	{
		ui32 eax_52;
		int32 v8_43 = *((word32) ecx + 0x04) - 0x01;
		*((word32) ecx + 0x04) = v8_43;
		if (v8_43 >= 0x00)
		{
			edx = *ecx;
			*edx = al;
			*ecx = (word32) *ecx + 0x01;
			eax_52 = (word32) al;
		}
		else
			eax_52 = fn00403F26(edx, ebp, edi, (int32) al, ecx, out edx);
		if (eax_52 == ~0x00)
		{
			*esi = *esi | eax_52;
			return edx;
		}
	}
	*esi = (word32) *esi + 0x01;
	return edx;
}

// 00401465: Register Eq_3 fn00401465(Register Eq_932 eax, Register Eq_3 edx, Register Eq_3 edi, Register out ptr32 ediOut)
Eq_3 fn00401465(Eq_932 eax, Eq_3 edx, Eq_3 edi, ptr32 & ediOut)
{
}

// 00401489: Register Eq_3 fn00401489(Register Eq_932 eax, Register (ptr byte) ecx, Register Eq_3 edx, Register Eq_4 ebp, Register Eq_3 edi, Stack Eq_4 dwArg04, Register out Eq_1060 blOut, Register out (ptr Eq_1061) ebpOut, Register out ptr32 ediOut)
Eq_3 fn00401489(Eq_932 eax, byte * ecx, Eq_3 edx, Eq_4 ebp, Eq_3 edi, Eq_4 dwArg04, Eq_1060 & blOut, Eq_1061 * & ebpOut, ptr32 & ediOut)
{
}

// 004014C0: Register Eq_3 fn004014C0(Register Eq_3 edx, Register Eq_4 ebp, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg08)
Eq_3 fn004014C0(Eq_3 edx, Eq_4 ebp, Eq_4 esi, Eq_4 edi, Eq_4 dwArg08)
{
}

// 00401D74: Register Eq_4 fn00401D74(Register Eq_4 eax, Register Eq_4 ebx, Register Eq_4 edi, Register out ptr32 edxOut, Register out (ptr Eq_3176) ebpOut, Register out Eq_3177 ediOut)
Eq_4 fn00401D74(Eq_4 eax, Eq_4 ebx, Eq_4 edi, ptr32 & edxOut, Eq_3176 * & ebpOut, Eq_3177 & ediOut)
{
	*ebpOut = ebp;
	*ediOut = edi;
	*edxOut = edx;
	Eq_4 eax_16;
	Eq_4 esi_22 = eax;
	if (globals->t40B4A0 > 0x01)
	{
		word32 edx_39;
		word32 ebx_40;
		word32 edi_41;
		eax_16 = fn00404318(ebx, eax, edi, eax, out edx_39, out ebx_40, out edi_41);
	}
	else
		eax_16 = (word32) globals->ptr40B490[eax].t0000 & 0x04;
	if (eax_16 == 0x00)
		esi_22 = (eax & ~0x20) - 0x07;
	return esi_22;
}

// 00401DA6: Register word32 fn00401DA6(Register Eq_4 edx, Register Eq_4 ebp, Register Eq_4 esi, Register out Eq_3223 edxOut, Register out (ptr Eq_3224) ebxOut, Register out (ptr Eq_3225) esiOut, Register out (ptr byte) ediOut)
word32 fn00401DA6(Eq_4 edx, Eq_4 ebp, Eq_4 esi, Eq_3223 & edxOut, Eq_3224 * & ebxOut, Eq_3225 * & esiOut, byte * & ediOut)
{
	*edxOut = edx;
	*esiOut = esi;
	*ebxOut = ebx;
	*ediOut = edi;
	int32 v4_4 = *((word32) edx + 0x04) - 0x01;
	*((word32) edx + 0x04) = v4_4;
	if (v4_4 < 0x00)
	{
		word32 edx_32;
		word32 ebx_33;
		word32 edi_34;
		return fn00404396(ebp, esi, edx, out edx_32, out ebx_33, out edi_34);
	}
	else
	{
		byte * ecx_21 = *edx;
		word32 eax_22 = (word32) *ecx_21;
		*edx = ecx_21 + 0x01;
		return eax_22;
	}
}

// 00401DBC: Register Eq_4 fn00401DBC(Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out ptr32 ebpOut)
Eq_4 fn00401DBC(Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, ptr32 & ebpOut)
{
}

// 0040307F: void fn0040307F()
void fn0040307F()
{
	struct Eq_6748 * esp_18 = fp - 0x04;
	Eq_399 eax_4 = GetModuleHandleA(0x004091D0);
	if (eax_4 != null)
	{
		esp_18 = fp - 0x0C;
		Eq_6776 eax_27 = GetProcAddress(eax_4, 0x004091C0);
		if (eax_27 != null)
		{
			eax_27();
			esp_18 = fp - 0x10;
		}
	}
	union Eq_4 * esp_21 = esp_18 - 0x04;
	*esp_21 = (union Eq_4 *) esp_18->t0004;
	ExitProcess(*esp_21);
}

// 004030AF: Register word32 fn004030AF(Register Eq_4 ebx, Register Eq_4 ebp, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004030AF(Eq_4 ebx, Eq_4 ebp, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
}

// 00403119: Register Eq_4 fn00403119(Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_4 fn00403119(Eq_4 dwArg04, word32 dwArg08, word32 dwArg0C, ptr32 & esiOut, ptr32 & ediOut)
{
	word32 * esp_111 = fp - 0x0C;
	if (globals->dw40BA9C == 0x01)
	{
		TerminateProcess(GetCurrentProcess(), dwArg04);
		esp_111 = fp - 0x14;
	}
	globals->dw40BA98 = 0x01;
	globals->b40BA94 = bArg0C;
	if (dwArg08 == 0x00)
	{
		Eq_4 ecx_102 = globals->t40BFE8;
		if (ecx_102 != 0x00)
		{
			union Eq_4 * eax_151 = globals->ptr40BFE4;
			union Eq_4 * eax_152 = eax_151 - 0x04;
			bool C_155 = cond(eax_151 - 0x04 - ecx_102);
			while (true)
			{
				globals->ptr40BFE4 = eax_152;
				if (!C_155)
					break;
				Eq_4 eax_170 = *eax_152;
				if (eax_170 != 0x00)
				{
					word32 ebp_187;
					word32 esi_188;
					byte SZO_189;
					byte C_190;
					byte SCZO_191;
					word32 edi_192;
					byte Z_193;
					word32 eax_194;
					byte al_195;
					word32 ecx_196;
					eax_170();
				}
				union Eq_4 * eax_179 = globals->ptr40BFE4;
				eax_152 = eax_179 - 0x04;
				C_155 = cond(eax_179 - 0x04 - globals->t40BFE8);
			}
		}
		word32 * edi_116 = &globals->dw40B020;
		if (false)
		{
			do
			{
				<anonymous> * eax_124 = *edi_116;
				if (eax_124 != null)
				{
					word32 ebp_141;
					word32 esi_142;
					byte SZO_143;
					byte C_144;
					byte SCZO_145;
					byte Z_147;
					word32 eax_148;
					byte al_149;
					word32 ecx_150;
					eax_124();
				}
				edi_116 = edi_116 + 0x01;
			} while (edi_116 < &globals->dw40B028);
		}
	}
	word32 * edi_43 = &globals->dw40B02C;
	if (false)
	{
		do
		{
			<anonymous> * eax_75 = *edi_43;
			if (eax_75 != null)
			{
				word32 ebp_92;
				word32 esi_93;
				byte SZO_94;
				byte C_95;
				byte SCZO_96;
				byte Z_98;
				word32 eax_99;
				byte al_100;
				word32 ecx_101;
				eax_75();
			}
			edi_43 = edi_43 + 0x01;
		} while (edi_43 < &globals->dw40B030);
	}
	union Eq_4 * esp_55 = esp_111 + 0x01;
	word32 edi_54;
	*ediOut = *esp_111;
	word32 esi_56;
	*esiOut = *esp_55;
	union Eq_4 * esp_57 = (char *) esp_55 + 0x04;
	if (dwArg0C == 0x00)
	{
		*esp_55 = (union Eq_4 *) dwArg04;
		globals->dw40BA9C = 0x01;
		fn0040307F();
		esp_57 = esp_55;
	}
	return *esp_57;
}

// 004031DA: void fn004031DA(Stack Eq_4 dwArg04)
void fn004031DA(Eq_4 dwArg04)
{
	word32 esi_10;
	word32 edi_11;
	fn00403119(dwArg04, 0x00, 0x00, out esi_10, out edi_11);
}

// 004031EB: Register word32 fn004031EB(Stack Eq_4 dwArg04, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004031EB(Eq_4 dwArg04, ptr32 & esiOut, ptr32 & ediOut)
{
	word32 esi_10;
	word32 edi_11;
	return fn00403119(dwArg04, 0x01, 0x00, out esi_10, out edi_11);
}

// 004031FC: Register word32 fn004031FC(Register out ptr32 esiOut)
word32 fn004031FC(ptr32 & esiOut)
{
	word32 esi_8;
	word32 edi_9;
	return fn00403119(0x00, 0x00, 0x01, out esi_8, out edi_9);
}

// 0040321A: Register Eq_4 fn0040321A(Register Eq_4 ebx, Register Eq_4 ebp, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out ptr32 edxOut)
Eq_4 fn0040321A(Eq_4 ebx, Eq_4 ebp, Eq_4 edi, Eq_4 dwArg04, ptr32 & edxOut)
{
}

// 00403391: void fn00403391(Register Eq_4 ebx, Register Eq_4 ebp, Register Eq_4 edi)
void fn00403391(Eq_4 ebx, Eq_4 ebp, Eq_4 edi)
{
	Eq_4 eax_3 = globals->t40BA30;
	if (eax_3 == 0x01 || eax_3 == 0x00 && globals->dw40B0BC == 0x01)
	{
		word32 edx_24;
		fn0040321A(ebx, ebp, edi, 252, out edx_24);
		<anonymous> * eax_26 = globals->ptr40BAA0;
		ptr32 esp_31 = fp;
		if (eax_26 != null)
		{
			word32 eax_48;
			byte SCZO_49;
			byte Z_50;
			byte SZO_51;
			byte C_52;
			word32 ecx_53;
			word32 edx_57;
			eax_26();
		}
		*(esp_31 - 0x04) = 0xFF;
		word32 edx_43;
		fn0040321A(ebx, ebp, edi, dwArg00, out edx_43);
	}
}

// 0040353B: Register Eq_4 fn0040353B(Register Eq_4 eax, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 ebp, Register Eq_4 edi, Register out ptr32 ebpOut)
Eq_4 fn0040353B(Eq_4 eax, Eq_3 edx, Eq_4 ebx, Eq_4 ebp, Eq_4 edi, ptr32 & ebpOut)
{
}

// 00403602: Register uint32 fn00403602(Register Eq_4 eax, Register (ptr byte) ecx, Register (ptr word32) esi, Stack Eq_4 dwArg04, Stack (ptr word32) dwArg08)
uint32 fn00403602(Eq_4 eax, byte * ecx, word32 * esi, Eq_4 dwArg04, word32 * dwArg08)
{
}

// 0040376E: Register ui32 fn0040376E(Register Eq_3 edx, Register Eq_4 ebp, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ediOut)
ui32 fn0040376E(Eq_3 edx, Eq_4 ebp, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ediOut)
{
	Eq_4 ebp_119 = fp - 0x04;
	Eq_4 edi_120 = 0x00;
	if (globals->dw40BFEC == 0x00)
	{
		word32 ebx_118;
		fn004059DE(edx, 0x00, out ebx_118, out ebp_119, out edi_120);
	}
	Eq_4 ebx_113;
	*(fp - 0x1C) = 0x0104;
	*(fp - 0x20) = 4242088;
	*(fp - 0x24) = (union Eq_4 *) edi_120;
	globals->b40BBAC = 0x00;
	GetModuleFileNameA(*(fp - 0x24), *(fp - 0x20), *(fp - 0x1C));
	Eq_4 eax_36 = globals->t40D004;
	globals->dw40BA8C = 4242088;
	if (eax_36 != edi_120)
	{
		ebx_113 = eax_36;
		if (*eax_36 != 0x00)
		{
l004037B6:
			ui32 eax_108;
			*(fp - 0x28) = ebp_119 - 0x04;
			*(fp - 44) = (union Eq_4 *) edi_120;
			fn00403602(ebx_113, null, ebp_119 - 0x08, dwArg00, dwArg04);
			*(fp - 0x30) = *(ebp_119 - 0x08) + (*(ebp_119 - 0x04) << 0x02);
			word32 edx_61;
			Eq_4 ebx_62;
			word32 esi_63;
			word32 edi_64;
			Eq_4 eax_65 = fn00403DDF(ebp_119, dwArg00, out edx_61, out ebx_62, out esi_63, out edi_64);
			if (eax_65 == 0x00)
				eax_108 = eax_65 | ~0x00;
			else
			{
				*(fp - 0x28) = ebp_119 - 0x04;
				*(fp - 44) = (union Eq_4 *) eax_65;
				word32 edx_99;
				*edxOut = fn00403602(ebx_62, (word32) eax_65 + esi_63, ebp_119 - 0x08, dwArg00, dwArg04);
				globals->dw40BA70 = *(ebp_119 - 0x04) - 0x01;
				globals->t40BA74 = eax_65;
				eax_108 = 0x00;
			}
			word32 edi_77;
			*ediOut = *(fp - 0x24);
			word32 ebx_81;
			*ebxOut = *(fp - 0x1C);
			return eax_108;
		}
	}
	ebx_113.u0 = 4242088;
	goto l004037B6;
}

// 00403810: Register Eq_4 fn00403810(Register word32 ecx, Register out ptr32 edxOut, Register out ptr32 ebpOut)
Eq_4 fn00403810(word32 ecx, ptr32 & edxOut, ptr32 & ebpOut)
{
	*edxOut = edx;
	Eq_4 eax_133;
	word32 eax_212 = globals->dw40BBB0;
	Eq_4 ebx_127 = 0x00;
	Eq_4 bx_206 = 0x00;
	Eq_8084 esi_125 = 0x00;
	struct Eq_8086 * esp_130 = fp - 0x18;
	if (eax_212 == 0x00)
	{
		Eq_8084 eax_280 = GetEnvironmentStringsW();
		esi_125 = eax_280;
		if (eax_280 != 0x00)
		{
			globals->dw40BBB0 = 0x01;
l0040385E:
			if (esi_125 != 0x00)
			{
l0040386A:
				Eq_8084 eax_188 = esi_125;
				if (*esi_125 != bx_206)
				{
					do
					{
						do
							eax_188 = eax_188 + 0x02;
						while (*eax_188 != bx_206);
						eax_188 = eax_188 + 0x02;
					} while (Mem0[eax_188 + 0x02:word16] != bx_206);
				}
				struct Eq_8123 * esp_93 = esp_130 - 0x04;
				esp_93->t0000.u0 = 0x00;
				*(esp_93 - 0x04) = 0x00;
				*(esp_93 - 0x08) = 0x00;
				*(esp_93 - 0x0C) = 0x00;
				int32 eax_103 = (eax_188 - esi_125 >> 0x01) + 0x01;
				*(esp_93 - 0x10) = eax_103;
				*(esp_93 - 0x14) = (union Eq_8084 *) esi_125;
				*(esp_93 - 0x18) = 0x00;
				*(esp_93 - 0x1C) = 0x00;
				esp_93->dw0018 = eax_103;
				struct Eq_8179 * esp_110 = esp_93 - 0x1C;
				Eq_4 eax_113 = WideCharToMultiByte(*(esp_93 - 0x1C), *(esp_93 - 0x18), *(esp_93 - 0x14), *(esp_93 - 0x10), *(esp_93 - 0x0C), *(esp_93 - 0x08), *(esp_93 - 0x04), esp_93->t0000);
				if (eax_113 != 0x00)
				{
					*(esp_93 - 0x20) = (union Eq_4 *) eax_113;
					word32 edx_137;
					word32 edi_140;
					Eq_4 eax_141 = fn00403DDF(eax_113, dwArg00, out edx_137, out ebx_127, out esi_125, out edi_140);
					*(esp_93 - 0x0C) = (union Eq_4 *) eax_141;
					esp_110 = esp_93 - 0x1C;
					if (eax_141 != ebx_127)
					{
						*(esp_93 - 0x20) = (union Eq_4 *) ebx_127;
						*(esp_93 - 0x24) = (union Eq_4 *) ebx_127;
						*(esp_93 - 0x28) = (union Eq_4 *) eax_113;
						*(esp_93 - 44) = (union Eq_4 *) eax_141;
						*(esp_93 - 0x30) = *(esp_93 - 0x08);
						*(esp_93 - 0x34) = (union Eq_8084 *) esi_125;
						*(esp_93 - 0x38) = (union Eq_4 *) ebx_127;
						*(esp_93 - 0x3C) = (union Eq_4 *) ebx_127;
						if (WideCharToMultiByte(*(esp_93 - 0x3C), *(esp_93 - 0x38), *(esp_93 - 0x34), *(esp_93 - 0x30), *(esp_93 - 44), *(esp_93 - 0x28), *(esp_93 - 0x24), *(esp_93 - 0x20)) == 0x00)
						{
							*(esp_93 - 0x40) = *(esp_93 - 44);
							word32 edx_180;
							word32 ebx_181;
							word32 ebp_182;
							word32 edi_183;
							fn0040403C(eax_113, dwArg00, out edx_180, out ebx_181, out ebp_182, out edi_183);
							*(esp_93 - 44) = ebx_181;
						}
						esp_110 = esp_130 - 0x40;
						ebx_127 = esp_110->t0010;
					}
				}
				esp_130 = esp_110 - 0x04;
				esp_130->t0000 = esi_125;
				FreeEnvironmentStringsW(esp_130->t0000);
				eax_133 = ebx_127;
				goto l0040392B;
			}
			Eq_8084 eax_197 = GetEnvironmentStringsW();
			esi_125 = eax_197;
			if (eax_197 != 0x00)
				goto l0040386A;
l004038E3:
			eax_133.u0 = 0x00;
			goto l0040392B;
		}
		if (GetLastError() == 0x78)
		{
			globals->dw40BBB0 = 0x02;
			eax_212 = 0x02;
		}
		else
			eax_212 = globals->dw40BBB0;
	}
	if (eax_212 != 0x01)
	{
		if (eax_212 == 0x02 || eax_212 == 0x00)
		{
			Eq_8401 eax_218 = GetEnvironmentStrings();
			if (eax_218 != 0x00)
			{
				Eq_8401 eax_224;
				eax_224 = eax_218;
				eax_224 = eax_218;
				if (*eax_218 != 0x00)
				{
					do
					{
						do
							eax_224 = eax_224 + 0x01;
						while (*eax_224 != 0x00);
						eax_224 = eax_224 + 0x01;
					} while (Mem0[eax_224 + 0x01:byte] != 0x00);
				}
				Eq_4 edi_246;
				Eq_8422 eax_225 = eax_224 - eax_218;
				word32 edx_232;
				Eq_4 ebx_233;
				word32 edi_235;
				word32 esi_234;
				word32 eax_236 = fn00403DDF(eax_225 + 0x01, eax_225 + 0x01, out edx_232, out ebx_233, out esi_234, out edi_235);
				if (eax_236 == ebx_233)
					edi_246.u0 = 0x00;
				else
				{
					Mem258[fp - 0x1C + 0x00:word32] = eax_225 + 0x01;
					*(fp - 0x20) = esi_234;
					*(fp - 0x24) = (union Eq_4 *) eax_236;
					word32 ebp_265;
					word32 edx_268;
					*edxOut = fn00405A00(dwArg00, dwArg04, dwArg08, out ebp_265, out esi_234, out edi_246);
				}
				*(fp - 0x1C) = esi_234;
				FreeEnvironmentStringsA(*(fp - 0x1C));
				esp_130 = fp - 0x1C;
				eax_133 = edi_246;
l0040392B:
				word32 ebp_46;
				*ebpOut = esp_130->dw0008;
				return eax_133;
			}
		}
		goto l004038E3;
	}
	goto l0040385E;
}

// 00403932: Register ui32 fn00403932(Register Eq_4 ebp, Register out ptr32 ecxOut, Register out ptr32 ebxOut, Register out ptr32 ediOut)
ui32 fn00403932(Eq_4 ebp, ptr32 & ecxOut, ptr32 & ebxOut, ptr32 & ediOut)
{
}

// 00403ADD: Register word32 fn00403ADD(Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out ptr32 ediOut)
word32 fn00403ADD(Eq_4 ebx, Eq_4 esi, Eq_4 edi, ptr32 & ediOut)
{
	Eq_4 ebp_10 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x004095E8, 0x0C);
	*(ebp_10 - 0x1C) = 4234748;
	while (*(ebp_10 - 0x1C) < 4234748)
	{
		*(ebp_10 - 0x04) = *(ebp_10 - 0x04) & 0x00;
		<anonymous> * eax_31 = **(ebp_10 - 0x1C);
		if (eax_31 != null)
		{
			word32 esp_50;
			byte SCZO_52;
			byte C_53;
			byte SZO_54;
			word32 eax_55;
			byte Z_56;
			word32 ebx_57;
			word32 esi_58;
			word32 edi_59;
			word16 cx_60;
			eax_31();
		}
		*(ebp_10 - 0x04) = *(ebp_10 - 0x04) | ~0x00;
		*(ebp_10 - 0x1C) = *(ebp_10 - 0x1C) + 0x04;
	}
	word32 ebx_64;
	word32 ebp_65;
	word32 esi_66;
	word32 edi_67;
	fn00403C0B(ebp_10, 0x0C, dwArg00, dwArg04, dwArg08, out ebx_64, out ebp_65, out esi_66, out edi_67);
	return ebp_65;
}

// 00403B65: Register word32 fn00403B65()
word32 fn00403B65()
{
	if (globals->dw40BA5C != 0x02 || globals->dw40BA68 < 0x05)
		return 0x03;
	return 0x01;
}

// 00403B7F: Register word32 fn00403B7F(Stack Eq_4 dwArg04)
word32 fn00403B7F(Eq_4 dwArg04)
{
	Eq_4 eax_14 = HeapCreate((word32) (dwArg04 == 0x00), 0x1000, 0x00);
	globals->t40BEC0 = eax_14;
	if (eax_14 == 0x00)
		return 0x00;
	word32 eax_39 = fn00403B65();
	globals->dw40BEC4 = eax_39;
	if (eax_39 != 0x03 || fn00405D3D() != 0x00)
		return 0x01;
	*(fp - 0x10) = (union Eq_4 *) globals->t40BEC0;
	HeapDestroy(*(fp - 0x10));
	return 0x00;
}

// 00403BD0: Register ptr32 fn00403BD0(Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack word32 dwArg00, Stack word32 dwArg04, Stack ui32 dwArg08)
ptr32 fn00403BD0(Eq_4 ebx, Eq_4 esi, Eq_4 edi, word32 dwArg00, word32 dwArg04, ui32 dwArg08)
{
	ptr32 esp_14 = fp - 0x08 - dwArg08;
	*(esp_14 - 0x04) = (union Eq_4 *) ebx;
	*(esp_14 - 0x08) = (union Eq_4 *) esi;
	*(esp_14 - 0x0C) = (union Eq_4 *) edi;
	*(esp_14 - 0x10) = dwArg00;
	fs->ptr0000 = fp - 0x08;
	return fp + 0x08;
}

// 00403C0B: Register word16 fn00403C0B(Register Eq_4 ebp, Stack word32 dwArg00, Stack Eq_4 dwArg04, Stack Eq_402 dwArg08, Stack Eq_402 dwArg0C, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word16 fn00403C0B(Eq_4 ebp, word32 dwArg00, Eq_4 dwArg04, Eq_402 dwArg08, Eq_402 dwArg0C, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	fs->dw0000 = *(ebp - 0x10);
	word32 ebp_20;
	*ebpOut = (word32) *ebp;
	*ebp = dwArg00;
	word32 edi_12;
	*ediOut = dwArg04;
	word32 esi_15;
	*esiOut = dwArg08;
	word32 ebx_18;
	*ebxOut = dwArg0C;
	return (word16) dwArg00;
}

// 00403D30: void fn00403D30(Register (ptr byte) eax, Stack Eq_4 dwArg00)
void fn00403D30(byte * eax, Eq_4 dwArg00)
{
	if (eax >= (byte *) 0x1000)
	{
		ptr32 ecx_29 = (word32) fp + 0x04;
		do
		{
			ecx_29 = ecx_29 - 0x1000;
			eax = eax - 0x1000;
		} while (eax >= (byte *) 0x1000);
		*(ecx_29 - eax - 0x04) = (union Eq_4 *) dwArg00;
	}
	else
		Mem24[-eax + fp:word32] = dwArg00;
}

// 00403D6D: Register Eq_4 fn00403D6D(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ediOut)
Eq_4 fn00403D6D(Eq_4 ebp, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ediOut)
{
	*edxOut = edx;
	*ebxOut = ebx;
	*ediOut = edi;
	Eq_4 eax_29;
	Eq_4 esi_51 = dwArg04;
	if (globals->dw40BEC4 == 0x03 && dwArg04 <= globals->t40BC84)
	{
		word32 edx_77;
		byte bl_78;
		eax_29 = fn00406564(ebp, dwArg04, dwArg04, SLICE(dwArg04, byte, 24), out edx_77, out bl_78);
		if (eax_29 != 0x00)
			return eax_29;
	}
	if (dwArg04 == 0x00)
		esi_51 = (word32) dwArg04 + 0x01;
	if (globals->dw40BEC4 != 0x01)
		esi_51 = esi_51 + 0x0F & ~0x0F;
	eax_29 = HeapAlloc(globals->t40BEC0, 0x00, esi_51);
	return eax_29;
}

// 00403DB3: Register word32 fn00403DB3(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00403DB3(Eq_4 ebp, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
}

// 00403DDF: Register word32 fn00403DDF(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out Eq_822 esiOut, Register out (ptr Eq_4) ediOut)
word32 fn00403DDF(Eq_4 ebp, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, Eq_822 & esiOut, Eq_4 * & ediOut)
{
	word32 edx_11;
	word32 ebx_12;
	word32 esi_13;
	word32 edi_14;
	return fn00403DB3(ebp, dwArg04, out edx_11, out ebx_12, out esi_13, out edi_14);
}

// 00403DF1: Register ui32 fn00403DF1(Stack Eq_4 dwArg04)
ui32 fn00403DF1(Eq_4 dwArg04)
{
	if (dwArg04 < globals->t40BEC8)
		return (int32) (&globals->t40BEE0)[dwArg04 >> 0x05]->a0004[dwArg04 & 0x1F].b0000 & 0x40;
	return 0x00;
}

// 00403E18: void fn00403E18(Register Eq_3 edx, Register Eq_4 ebp, Stack Eq_4 dwArg04)
void fn00403E18(Eq_3 edx, Eq_4 ebp, Eq_4 dwArg04)
{
	Eq_4 eax_11 = *((word32) dwArg04 + 0x0C);
	cui16 ax_12 = (word16) eax_11;
	if (((byte) eax_11 & 0x03) == 0x02 && (ax_12 & 0x0108) != 0x00)
	{
		Eq_4 eax_53 = *((word32) dwArg04 + 0x08);
		Eq_4 edi_59 = *dwArg04 - eax_53;
		if (edi_59 > 0x00)
		{
			word32 edx_85;
			if (fn00406B92(edx, ebp, *((word32) dwArg04 + 0x0010), eax_53, edi_59, out edx_85) == edi_59)
			{
				Eq_4 eax_90 = *((word32) dwArg04 + 0x0C);
				if ((byte) eax_90 < 0x00)
					*((word32) dwArg04 + 0x0C) = eax_90 & ~0x02;
			}
			else
				*((word32) dwArg04 + 0x0C) = *((word32) dwArg04 + 0x0C) | 0x20;
		}
	}
	Eq_4 eax_39 = *((word32) dwArg04 + 0x08);
	*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & 0x00;
	*dwArg04 = eax_39;
}

// 00403F26: Register ui32 fn00403F26(Register Eq_3 edx, Register Eq_4 ebp, Register Eq_3 edi, Stack Eq_4 dwArg04, Stack Eq_3 dwArg08, Register out ptr32 edxOut)
ui32 fn00403F26(Eq_3 edx, Eq_4 ebp, Eq_3 edi, Eq_4 dwArg04, Eq_3 dwArg08, ptr32 & edxOut)
{
	*edxOut = edx;
	Eq_4 eax_113;
	ui32 eax_129;
	Eq_4 eax_15 = *((word32) dwArg08 + 0x0C);
	Eq_3 esi_100 = dwArg08;
	byte al_16 = (byte) eax_15;
	Eq_4 ebx_101 = *((word32) dwArg08 + 0x0010);
	if ((al_16 & 0x82) != 0x00 && (al_16 & 0x40) == 0x00)
	{
		if ((al_16 & 0x01) == 0x00)
		{
l00403F5F:
			Eq_4 eax_80 = *((word32) dwArg08 + 0x0C);
			*((word32) dwArg08 + 0x04) = *((word32) dwArg08 + 0x04) & 0x00;
			Eq_4 eax_88 = eax_80 & ~0x10 | 0x02;
			*((word32) dwArg08 + 0x0C) = eax_88;
			Eq_4 dwArg08_110 = dwArg08 & 0x00;
			if (((word16) eax_88 & 0x010C) == 0x00 && (dwArg08 != 0x0040B0E8 && dwArg08 != 0x0040B108 || fn00403DF1(ebx_101) == 0x00))
				fn00406E65(fp - 0x04, out edx, out ebx_101, out esi_100, out edi);
			Eq_4 edi_112;
			*(fp - 0x10) = (union Eq_3 *) edi;
			if ((*((word32) esi_100 + 0x0C) & 0x0108) == 0x00)
			{
				*(fp - 0x14) = 0x01;
				*(fp - 0x18) = fp + 0x04;
				*(fp - 0x1C) = (union Eq_4 *) ebx_101;
				word32 edx_221;
				eax_113 = fn00406B92(edx, fp - 0x04, dwArg00, dwArg04, dwArg08 & 0x00, out edx_221);
				edi_112.u0 = 0x01;
				dwArg08_110 = eax_113;
				goto l00404019;
			}
			Eq_4 eax_134 = *((word32) esi_100 + 0x08);
			word32 edi_137 = *esi_100;
			*esi_100 = (word32) eax_134 + 0x01;
			*((word32) esi_100 + 0x04) = *((word32) esi_100 + 0x0018) - 0x01;
			edi_112 = edi_137 - eax_134;
			if (edi_112 > 0x00)
			{
				*(fp - 0x14) = (union Eq_4 *) edi_112;
				*(fp - 0x18) = (union Eq_4 *) eax_134;
				*(fp - 0x1C) = (union Eq_4 *) ebx_101;
				word32 edx_179;
				dwArg08_110 = fn00406B92(edx, fp - 0x04, dwArg00, dwArg04, dwArg08 & 0x00, out edx_179);
			}
			else
			{
				struct Eq_9521 * eax_185;
				if (ebx_101 != ~0x00)
					eax_185 = (&globals->t40BEE0)[ebx_101 >> 0x05] + (ebx_101 & 0x1F) * 0x08;
				else
					eax_185 = &globals->t40B480;
				if ((eax_185->b0004 & 0x20) == 0x00)
				{
l00403FFB:
					eax_113 = *((word32) esi_100 + 0x08);
					*eax_113 = bArg04;
l00404019:
					if (dwArg08_110 == edi_112)
					{
						eax_129 = dwArg04 & 0xFF;
						return eax_129;
					}
					*((word32) esi_100 + 0x0C) = *((word32) esi_100 + 0x0C) | 0x20;
l00404035:
					eax_129 = eax_113 | ~0x00;
					return eax_129;
				}
				*(fp - 0x14) = 0x02;
				*(fp - 0x18) = 0x00;
				*(fp - 0x1C) = (union Eq_4 *) ebx_101;
				fn00406DD9(dwArg00, dwArg04, dwArg08 & 0x00);
			}
			goto l00403FFB;
		}
		*((word32) dwArg08 + 0x04) = *((word32) dwArg08 + 0x04) & 0x00;
		if ((al_16 & 0x10) != 0x00)
		{
			*dwArg08 = *((word32) dwArg08 + 0x08);
			*((word32) dwArg08 + 0x0C) = eax_15 & ~0x01;
			goto l00403F5F;
		}
	}
	*((word32) dwArg08 + 0x0C) = eax_15 | 0x20;
	eax_113 = eax_15 | 0x20;
	goto l00404035;
}

// 0040403C: Register Eq_4 fn0040403C(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out (ptr Eq_1904) ebpOut, Register out Eq_1905 ediOut)
Eq_4 fn0040403C(Eq_4 ebp, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, Eq_1904 * & ebpOut, Eq_1905 & ediOut)
{
	*edxOut = edx;
	*ebxOut = ebx;
	*ebpOut = ebp;
	*ediOut = edi;
	if (dwArg04 == 0x00)
		return eax;
	if (globals->dw40BEC4 == 0x03)
	{
		word32 edx_66;
		Eq_4 eax_67 = fn00405D85(dwArg04, out edx_66);
		if (eax_67 != 0x00)
		{
			word32 edx_78;
			return fn00405DB0(ebp, eax_67, dwArg04, bLoc05, out edx_78);
		}
	}
	eax = HeapFree(globals->t40BEC0, 0x00, dwArg04);
	return eax;
}

// 00404080: Register ptr32 fn00404080(Stack Eq_4 dwArg04, Register out Eq_3057 edxOut)
ptr32 fn00404080(Eq_4 dwArg04, Eq_3057 & edxOut)
{
}

// 0040410B: Register Eq_4 fn0040410B(Stack Eq_4 dwArg04, Stack cup16 wArg08)
Eq_4 fn0040410B(Eq_4 dwArg04, cup16 wArg08)
{
	Eq_4 eax_108 = dwArg04;
	if (dwArg04 != 0x00)
	{
		if (globals->t40BC54 == 0x00)
		{
			Eq_9747 cl_79 = (byte) wArg08;
			if (wArg08 <= 0xFF)
			{
				*dwArg04 = cl_79;
				eax_108.u0 = 0x01;
				return eax_108;
			}
		}
		else
		{
			eax_108 = WideCharToMultiByte(globals->t40BC64, 0x00, fp + 0x08, 0x01, dwArg04, globals->t40B4A0, 0x00, fp + 0x04);
			if (eax_108 != 0x00 && 0x00 == 0x00)
				return eax_108;
		}
		globals->t40BA50.u0 = 0x2A;
		eax_108 = eax_108 | ~0x00;
		return eax_108;
	}
	else
	{
		eax_108.u0 = 0x00;
		return eax_108;
	}
}

// 004041A2: void fn004041A2(Register Eq_4 ecx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi)
void fn004041A2(Eq_4 ecx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi)
{
	if (ecx == globals->t40B498)
		return;
	Eq_4 ebp_14 = fn00403BD0(ebx, esi, edi, dwLoc0C, 4234000, 0x08);
	*(ebp_14 - 0x04) = *(ebp_14 - 0x04) & 0x00;
	*(fp - 0x0C) = 0x00;
	*(fp - 0x10) = 0x01;
	ptr32 ebp_24 = fn00406F0F(edx, ebx, esi, edi);
	*(ebp_24 - 0x04) = *(ebp_24 - 0x04) | ~0x00;
	*(fp - 0x0C) = 0x03;
	ExitProcess(*(fp - 0x0C));
}

// 004041B0: Register uint32 fn004041B0(Stack Eq_4 dwArg04, Stack uint32 dwArg08, Stack Eq_4 dwArg0C, Stack uint32 dwArg10, Register out ptr32 ecxOut, Register out Eq_2848 edxOut, Register out ptr32 ebxOut)
uint32 fn004041B0(Eq_4 dwArg04, uint32 dwArg08, Eq_4 dwArg0C, uint32 dwArg10, ptr32 & ecxOut, Eq_2848 & edxOut, ptr32 & ebxOut)
{
	uint32 esi_116;
	Eq_4 eax_104;
	uint32 edx_106;
	uint32 ebx_117;
	if (dwArg10 == 0x00)
	{
		uint64 edx_eax_50 = (uint64) (uint32) dwArg08;
		uint32 eax_58 = (uint32) (SEQ((uint32) (edx_eax_50 % dwArg0C), dwArg04) /u dwArg0C);
		uint32 eax_53 = (uint32) (edx_eax_50 /u dwArg0C);
		uint64 edx_eax_65 = dwArg0C * eax_58;
		ebx_117 = eax_53;
		esi_116 = eax_58;
		eax_104 = (word32) edx_eax_65;
		edx_106 = SLICE(edx_eax_65, word32, 32) + (word32) (dwArg0C * eax_53);
	}
	else
	{
		uint32 ecx_72 = dwArg10;
		Eq_4 ebx_73 = dwArg0C;
		uint32 edx_74 = dwArg08;
		Eq_4 eax_75 = dwArg04;
		do
		{
			uint32 ecx_81 = ecx_72 >> 0x01;
			edx_74 = edx_74 >> 0x01;
			ebx_73 = __rcr(ebx_73, 0x01, cond(ecx_81));
			eax_75 = __rcr(eax_75, 0x01, cond(edx_74));
			uint64 edx_eax_91 = SEQ(edx_74, eax_75);
			ecx_72 = ecx_81;
		} while (ecx_81 != 0x00);
		uint32 eax_97 = (uint32) (edx_eax_91 /u ebx_73);
		uint64 edx_eax_103 = eax_97 * dwArg0C;
		esi_116 = eax_97;
		eax_104 = (word32) edx_eax_103;
		edx_106 = SLICE(edx_eax_103, word32, 32) + (word32) (dwArg10 * eax_97);
		if (edx_106 < 0x00 || (edx_106 > dwArg08 || edx_106 >= dwArg08 && eax_104 > dwArg04))
		{
			word64 edx_eax_129 = SEQ(edx_106, eax_104 - dwArg0C) - _;
			esi_116 = eax_97 - 0x01;
			eax_104 = (word32) edx_eax_129;
			edx_106 = SLICE(edx_eax_129, word32, 32);
		}
		ebx_117 = 0x00;
	}
	word64 edx_eax_25 = SEQ(edx_106, eax_104 - dwArg04) - _;
	word32 eax_29 = -(word32) edx_eax_25;
	word32 edx_35;
	*edxOut = ebx_117;
	word32 ebx_36;
	*ebxOut = -SLICE(edx_eax_25, word32, 32) - (eax_29 == 0x00);
	word32 ecx_37;
	*ecxOut = eax_29;
	return esi_116;
}

// 00404245: Register Eq_4 fn00404245(Register Eq_4 ebx, Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_402 dwArg08, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out Eq_9931 esiOut, Register out Eq_9932 ediOut)
Eq_4 fn00404245(Eq_4 ebx, Eq_4 ebp, Eq_4 dwArg04, Eq_402 dwArg08, ptr32 & edxOut, ptr32 & ebxOut, Eq_9931 & esiOut, Eq_9932 & ediOut)
{
}

// 00404318: Register ui32 fn00404318(Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out Eq_3206 edxOut, Register out (ptr Eq_3207) ebxOut, Register out (ptr byte) ediOut)
ui32 fn00404318(Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, Eq_3206 & edxOut, Eq_3207 * & ebxOut, byte * & ediOut)
{
	*edxOut = edx;
	*ebxOut = ebx;
	*ediOut = edi;
	ui32 eax_140;
	struct Eq_10079 * ebp_128 = fp - 0x04;
	if (dwArg04 > ~0xFE)
	{
		Eq_3 edx_96 = (word32) (byte) (dwArg04 >> 0x08);
		word16 cx_125;
		word32 edx_126;
		word32 ebx_127;
		word32 esi_129;
		word32 edi_130;
		ui32 eax_131 = fn004070AD((word16) (fp + 0x06), edx_96, ebx, esi, edi, out cx_125, out edx_126, out ebx_127, out ebp_128, out esi_129, out edi_130);
		if (eax_131 == 0x00)
			return eax_131;
		eax_140 = (word32) ebp_128->w000A;
		return eax_140 & ebp_128->dw000C;
	}
	else
	{
		eax_140 = (word32) globals->ptr40B490[dwArg04].t0000;
		return eax_140 & ebp_128->dw000C;
	}
}

// 00404396: Register ui32 fn00404396(Register Eq_4 ebp, Register Eq_4 esi, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ediOut)
ui32 fn00404396(Eq_4 ebp, Eq_4 esi, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ediOut)
{
	*ebxOut = ebx;
	*ediOut = edi;
	*edxOut = edx;
	Eq_4 eax_111 = *((word32) dwArg04 + 0x0C);
	Eq_4 esi_198 = dwArg04;
	byte al_9 = (byte) eax_111;
	if ((al_9 & 131) == 0x00 || (al_9 & 0x40) != 0x00)
		return eax_111 | ~0x00;
	if ((al_9 & 0x02) == 0x00)
	{
		Eq_4 eax_200;
		*((word32) dwArg04 + 0x0C) = eax_111 | 0x01;
		if (((word16) (eax_111 | 0x01) & 0x010C) == 0x00)
		{
			word32 edx_196;
			word32 ebx_197;
			eax_200 = fn00406E65(ebp, out edx_196, out ebx_197, out esi_198, out edi);
		}
		else
		{
			eax_200 = *((word32) dwArg04 + 0x08);
			*dwArg04 = eax_200;
		}
		*(fp - 0x08) = (word32) *((word32) esi_198 + 0x0018);
		*(fp - 0x0C) = (word32) *((word32) esi_198 + 0x08);
		*(fp - 0x10) = (int32) *((word32) esi_198 + 0x0010);
		word32 edx_96;
		ui32 eax_97 = fn00407267(eax_200, ebp, dwArg00, dwArg04, dwArg08, out edx_96);
		*((word32) esi_198 + 0x04) = eax_97;
		if (eax_97 == 0x00 || eax_97 == ~0x00)
		{
			eax_111 = (0x00 - (-eax_97 == 0x00) & 0x10) + 0x10;
			*((word32) esi_198 + 0x0C) = *((word32) esi_198 + 0x0C) | eax_111;
			*((word32) esi_198 + 0x04) = *((word32) esi_198 + 0x04) & 0x00;
			return eax_111 | ~0x00;
		}
		else
		{
			Eq_4 edx_123 = *((word32) esi_198 + 0x0C);
			*edxOut = edx_123;
			if (((byte) edx_123 & 0x82) == 0x00)
			{
				struct Eq_10291 * edi_171;
				int32 ecx_164 = *((word32) esi_198 + 0x0010);
				*(fp - 0x08) = edi;
				if (ecx_164 != ~0x00)
					edi_171 = (&globals->t40BEE0)[ecx_164 >> 0x05] + (ecx_164 & 0x1F) * 0x08;
				else
					edi_171 = &globals->t40B480;
				word32 edi_179;
				*ediOut = *(fp - 0x08);
				if ((edi_171->b0004 & 0x82) == 0x82)
				{
					*((word32) esi_198 + 0x0C) = edx_123 | 0x2000;
					word32 edx_181;
					*edxOut = edx_123 | 0x2000;
				}
			}
			if (*((word32) esi_198 + 0x0018) == 0x0200)
			{
				Eq_4 ecx_154 = *((word32) esi_198 + 0x0C);
				byte ch_156 = SLICE(ecx_154, byte, 8);
				if (((byte) ecx_154 & 0x08) != 0x00 && (ch_156 & 0x04) == 0x00)
					*((word32) esi_198 + 0x0018) = 0x1000;
			}
			byte * ecx_143 = *esi_198;
			*((word32) esi_198 + 0x04) = eax_97 - 0x01;
			ui32 eax_146 = (word32) *ecx_143;
			*esi_198 = ecx_143 + 0x01;
			return eax_146;
		}
	}
	else
	{
		*((word32) dwArg04 + 0x0C) = eax_111 | 0x20;
		eax_111 = eax_111 | 0x20;
		return eax_111 | ~0x00;
	}
}

// 00404474: Register Eq_4 fn00404474(Register Eq_4 eax, Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_402 dwArg08, Register out Eq_3542 edxOut, Register out (ptr byte) ediOut)
Eq_4 fn00404474(Eq_4 eax, Eq_4 ebp, Eq_4 dwArg04, Eq_402 dwArg08, Eq_3542 & edxOut, byte * & ediOut)
{
	*edxOut = edx;
	*ediOut = edi;
	Eq_4 eax_26;
	Eq_4 ebx_113 = dwArg04;
	byte bl_7 = (byte) dwArg04;
	if (dwArg04 == ~0x00)
	{
l004044C0:
		eax_26 = eax | ~0x00;
		return eax_26;
	}
	else
	{
		eax = *((word32) dwArg08 + 0x0C);
		Eq_402 esi_114 = dwArg08;
		ci8 al_56 = (byte) eax;
		if ((al_56 & 0x01) == 0x00 && (al_56 >= 0x00 || (al_56 & 0x02) != 0x00))
			goto l004044C0;
		if (*((word32) dwArg08 + 0x08) == 0x00)
		{
			word32 edx_112;
			word32 edi_115;
			fn00406E65(ebp, out edx_112, out ebx_113, out esi_114, out edi_115);
		}
		eax = *esi_114;
		if (eax == *((word32) esi_114 + 0x08))
		{
			if (*((word32) esi_114 + 0x04) != 0x00)
				goto l004044C0;
			*esi_114 = (word32) eax + 0x01;
		}
		*esi_114 = *esi_114 - 0x01;
		Eq_4 eax_82 = *esi_114;
		if ((*((word32) esi_114 + 0x0C) & 0x40) != 0x00)
		{
			if (*eax_82 != bl_7)
			{
				*esi_114 = (word32) eax_82 + 0x01;
				eax = (word32) eax_82 + 0x01;
				goto l004044C0;
			}
		}
		else
			eax_82->u0 = bl_7;
		Eq_4 eax_86 = *((word32) esi_114 + 0x0C);
		*((word32) esi_114 + 0x04) = (word32) *((word32) esi_114 + 0x04) + 0x01;
		*((word32) esi_114 + 0x0C) = eax_86 & ~0x10 | 0x01;
		eax_26 = ebx_113 & 0xFF;
		return eax_26;
	}
}

// 004044E0: Register Eq_4 fn004044E0(Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out (ptr Eq_3476) ebpOut, Register out (ptr Eq_3477) esiOut, Register out Eq_3478 ediOut)
Eq_4 fn004044E0(Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, Eq_3476 * & ebpOut, Eq_3477 * & esiOut, Eq_3478 & ediOut)
{
	*ebpOut = ebp;
	*esiOut = esi;
	*ebxOut = ebx;
	*ediOut = edi;
	*edxOut = edx;
	if (globals->t40B4A0 <= 0x01)
		return (word32) globals->ptr40B490[dwArg04].t0000 & 0x08;
	word32 edx_30;
	word32 ebx_31;
	word32 edi_32;
	return fn00404318(ebx, esi, edi, dwArg04, out edx_30, out ebx_31, out edi_32);
}

// 00404509: void fn00404509(Stack Eq_4 dwArg04, Stack Eq_402 dwArg08, Stack Eq_402 dwArg0C)
void fn00404509(Eq_4 dwArg04, Eq_402 dwArg08, Eq_402 dwArg0C)
{
	if (dwArg08 == 0x00 || dwArg0C == 0x00)
		return;
	Eq_4 al_64 = *dwArg08;
	if (al_64 == 0x00)
	{
		if (dwArg04 != 0x00)
			*dwArg04 = 0x00;
		return;
	}
	if (globals->t40BC54 == 0x00)
	{
		if (dwArg04 != 0x00)
			*dwArg04 = (word16) al_64;
		return;
	}
	if ((globals->ptr40B490[(word32) al_64].b0001 & 0x80) == 0x00)
	{
		if (MultiByteToWideChar(globals->t40BC64, 0x09, dwArg08, 0x01, dwArg04, (word32) (dwArg04 != 0x00)) != 0x00)
			return;
		goto l0040459B;
	}
	bool C_146;
	Eq_402 eax_126 = globals->t40B4A0;
	if (eax_126 > 0x01)
	{
		C_146 = cond(dwArg0C - eax_126);
		if (dwArg0C < eax_126)
		{
l00404594:
			if (!C_146 && *((word32) dwArg08 + 0x01) != 0x00)
				return;
l0040459B:
			globals->t40BA50.u0 = 0x2A;
			return;
		}
		Eq_4 eax_191 = MultiByteToWideChar(globals->t40BC64, 0x09, dwArg08, eax_126, dwArg04, (word32) (dwArg04 != 0x00));
		eax_126 = globals->t40B4A0;
		if (eax_191 != 0x00)
			return;
	}
	C_146 = cond(dwArg0C - eax_126);
	goto l00404594;
}

// 004045E0: Register Eq_402 fn004045E0(Stack Eq_4 dwArg04, Stack byte bArg08, Stack Eq_402 dwArg0C)
Eq_402 fn004045E0(Eq_4 dwArg04, byte bArg08, Eq_402 dwArg0C)
{
	Eq_402 edx_3 = dwArg0C;
	if (dwArg0C == 0x00)
		return dwArg0C;
	byte al_22 = bArg08;
	ui32 eax_23 = (word32) bArg08;
	Eq_4 edi_27 = dwArg04;
	if (dwArg0C >= 0x04)
	{
		ui32 ecx_52 = -dwArg04;
		ui32 ecx_53 = ecx_52 & 0x03;
		if ((ecx_52 & 0x03) != 0x00)
		{
			edx_3 = dwArg0C - (ecx_52 & 0x03);
			do
			{
				edi_27->u0 = bArg08;
				edi_27 = (word32) edi_27 + 0x01;
				ecx_53 = ecx_53 - 0x01;
			} while (ecx_53 != 0x00);
		}
		Eq_10628 eax_64 = eax_23 * 0x01010000 + eax_23 * 0x0101;
		al_22 = (byte) eax_64;
		edx_3 = edx_3 & 0x03;
		uint32 ecx_68 = edx_3 >> 0x02;
		if (ecx_68 != 0x00)
		{
			while (ecx_68 != 0x00)
			{
				*edi_27 = eax_64;
				edi_27 = (word32) edi_27 + 0x04;
				ecx_68 = ecx_68 - 0x01;
			}
			if (edx_3 == 0x00)
				return edx_3;
		}
	}
	do
	{
		edi_27->u0 = al_22;
		edi_27 = (word32) edi_27 + 0x01;
		edx_3 = edx_3 - 0x01;
	} while (edx_3 != 0x00);
	return edx_3;
}

// 00404730: Register word32 fn00404730(Stack Eq_4 dwArg04, Stack Eq_402 dwArg08, Stack Eq_402 dwArg0C, Stack uint32 dwArg10, Register out ptr32 edxOut)
word32 fn00404730(Eq_4 dwArg04, Eq_402 dwArg08, Eq_402 dwArg0C, uint32 dwArg10, ptr32 & edxOut)
{
	if ((dwArg10 | dwArg08) != 0x00)
	{
		uint64 edx_eax_40 = dwArg0C * dwArg04;
		word32 edx_43;
		*edxOut = SLICE(edx_eax_40, word32, 32) + ((word32) (dwArg0C * dwArg08) + (word32) (dwArg10 * dwArg04));
		return (word32) edx_eax_40;
	}
	else
	{
		uint64 edx_eax_24 = dwArg0C * dwArg04;
		word32 edx_26;
		*edxOut = SLICE(edx_eax_24, word32, 32);
		return (word32) edx_eax_24;
	}
}

// 00404BE0: Register ui32 fn00404BE0(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack (ptr Eq_10689) dwArg0C, Register out (ptr Eq_10690) ebpOut, Register out Eq_10691 ediOut)
ui32 fn00404BE0(Eq_4 dwArg04, Eq_4 dwArg08, Eq_10689 * dwArg0C, Eq_10690 * & ebpOut, Eq_10691 & ediOut)
{
	Eq_4 esi_13 = dwArg08;
	Eq_4 edi_17 = dwArg04;
	word32 eax_20 = dwArg0C + dwArg08;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C >= (struct Eq_10689 *) 0x04)
			{
				word32 esp_71;
				word32 ebp_72;
				word32 edi_73;
				word32 esi_74;
				word32 ecx_75;
				word32 eax_76;
				ui32 edx_77;
				byte SCZO_78;
				byte CZ_79;
				byte C_80;
				byte SZO_81;
				byte Z_82;
				byte D_83;
				(*((char *) globals->a404C40 + (dwArg04 & 0x03) * 0x04))();
				return edx_77;
			}
		}
		else
		{
			uint32 ecx_42 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 >= 0x08)
			{
				while (ecx_42 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = (word32) esi_13 + 0x04;
					edi_17 = (word32) edi_17 + 0x04;
					ecx_42 = ecx_42 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 edi_58;
					*ediOut = edi;
					word32 ebp_60;
					*ebpOut = ebp;
					return dwArg0C & 0x03;
				}
			}
		}
	}
	else
	{
		word32 * esi_101 = (word32) dwArg08 + (dwArg0C - 0x04);
		word32 * edi_102 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_102 & 0x03) != 0x00)
		{
			if (dwArg0C >= (struct Eq_10689 *) 0x04)
			{
				word32 esp_135;
				word32 ebp_136;
				word32 edi_137;
				word32 esi_138;
				word32 ecx_139;
				word32 eax_140;
				ui32 edx_141;
				byte SCZO_142;
				byte CZ_143;
				byte C_144;
				byte SZO_145;
				byte Z_146;
				byte D_147;
				(*((char *) globals->a404DCC + (edi_102 & 0x03) * 0x04))();
				return edx_141;
			}
		}
		else
		{
			uint32 ecx_103 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_112 = -(dwArg0C >> 0x02);
				word32 esp_115;
				word32 ebp_116;
				word32 edi_117;
				word32 esi_118;
				word32 ecx_119;
				word32 eax_120;
				ui32 edx_121;
				byte SCZO_122;
				byte CZ_123;
				byte C_124;
				byte SZO_125;
				byte Z_126;
				byte D_127;
				(*((char *) globals->a404E78 + ecx_112 * 0x04))();
				return edx_121;
			}
			else
			{
				while (ecx_103 != 0x00)
				{
					*edi_102 = *esi_101;
					esi_101 = esi_101 - 0x04;
					edi_102 = edi_102 - 0x04;
					ecx_103 = ecx_103 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 edi_108;
					*ediOut = edi;
					word32 ebp_110;
					*ebpOut = ebp;
					return dwArg0C & 0x03;
				}
			}
		}
	}
}

// 00404F20: Register word32 fn00404F20(Stack Eq_4 dwArg04)
word32 fn00404F20(Eq_4 dwArg04)
{
	word32 edi_7;
	fn00404F95(dwArg04, out edi_7);
	return edi_7;
}

// 00404F30: Register word32 fn00404F30(Stack Eq_4 dwArg04, Register out ptr32 ediOut)
word32 fn00404F30(Eq_4 dwArg04, ptr32 & ediOut)
{
}

// 00404F95: Register Eq_10918 fn00404F95(Register Eq_4 edi, Register out ptr32 ediOut)
Eq_10918 fn00404F95(Eq_4 edi, ptr32 & ediOut)
{
}

// 0040532E: Register Eq_4 fn0040532E(Register Eq_4 ebx, Register Eq_4 ebp, Register (ptr word32) esi, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ebpOut)
Eq_4 fn0040532E(Eq_4 ebx, Eq_4 ebp, word32 * esi, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ebpOut)
{
	*ebxOut = ebx;
	*ebpOut = ebp;
	up32 eax_9 = fn00408240(globals->t40BFE8);
	union Eq_4 * ecx_12 = globals->ptr40BFE4;
	Eq_4 eax_14 = globals->t40BFE8;
	up32 edx_16 = ecx_12 - eax_14;
	word32 edx_17;
	*edxOut = edx_16 + 0x04;
	if (eax_9 < edx_16 + 0x04)
	{
		up32 ecx_102 = 0x0800;
		if (eax_9 < 0x0800)
			ecx_102 = eax_9;
		*(fp - 0x08) = ecx_102 + eax_9;
		*(fp - 0x0C) = (union Eq_4 *) eax_14;
		word32 edx_61;
		Eq_4 eax_62 = fn004080DE(ebx, ebp, dwArg00, dwArg04, out edx_61);
		if (eax_62 == 0x00)
		{
			*(fp - 0x08) = eax_9 + 0x10;
			*(fp - 0x0C) = (union Eq_4 *) globals->t40BFE8;
			word32 edx_91;
			eax_62 = fn004080DE(ebx, ebp, dwArg00, dwArg04, out edx_91);
			if (eax_62 == 0x00)
				return eax_62;
		}
		int32 ecx_78 = globals->ptr40BFE4 - globals->t40BFE8;
		globals->t40BFE8 = eax_62;
		ecx_12 = (word32) eax_62 + (ecx_78 >> 0x02) * 0x04;
		globals->ptr40BFE4 = ecx_12;
	}
	Eq_4 eax_42 = fp->t0004;
	*ecx_12 = (union Eq_4 *) eax_42;
	globals->ptr40BFE4 = (union Eq_4 *) ((char *) globals->ptr40BFE4 + 0x04);
	return eax_42;
}

// 004053B0: Register word32 fn004053B0(Register Eq_4 ebx, Register Eq_4 ebp, Register (ptr word32) esi, Stack word32 dwArg04, Register out ptr32 ebxOut, Register out ptr32 ebpOut)
word32 fn004053B0(Eq_4 ebx, Eq_4 ebp, word32 * esi, word32 dwArg04, ptr32 & ebxOut, ptr32 & ebpOut)
{
	word32 edx_9;
	word32 ebx_10;
	word32 ebp_11;
	fn0040532E(ebx, ebp, esi, out edx_9, out ebx_10, out ebp_11);
	return edx_9;
}

// 004053EA: Register word32 fn004053EA(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack uint32 dwArg0C, Stack byte bArg0E, Register out ptr32 ebxOut, Register out (ptr Eq_7312) esiOut, Register out ptr32 ediOut)
word32 fn004053EA(Eq_4 dwArg04, Eq_4 dwArg08, uint32 dwArg0C, byte bArg0E, ptr32 & ebxOut, Eq_7312 * & esiOut, ptr32 & ediOut)
{
	word32 * esp_217;
	word32 eax_107;
	word32 ebx_10 = 0x00;
	ptr32 esp_115 = fp - 0x20;
	if (globals->t40BBE0 != null)
	{
l0040546A:
		Eq_6776 eax_76 = globals->t40BBEC;
		if (eax_76 == null)
		{
l004054AF:
			Eq_6776 eax_116 = globals->t40BBE4;
			if (eax_116 != null)
			{
				word32 ebp_122;
				byte SCZO_123;
				word32 ebx_124;
				byte SZO_125;
				byte C_126;
				word32 esi_127;
				word32 edi_128;
				byte Z_129;
				word32 eax_130;
				word32 ecx_131;
				eax_116();
				ebx_10 = eax_130;
				if (eax_130 != 0x00)
				{
					Eq_6776 eax_136 = globals->t40BBE8;
					if (eax_136 != null)
					{
						*(esp_115 - 0x04) = eax_130;
						word32 ebp_143;
						byte SCZO_144;
						word32 ebx_145;
						byte SZO_146;
						byte C_147;
						word32 esi_148;
						word32 edi_149;
						byte Z_150;
						word32 eax_151;
						word32 ecx_152;
						eax_136();
						ebx_10 = eax_151;
					}
				}
			}
			goto l004054CE;
		}
		else
		{
			word32 ebp_155;
			byte SCZO_156;
			byte SZO_158;
			byte C_159;
			word32 esi_160;
			word32 edi_161;
			byte Z_162;
			word32 eax_163;
			word32 ecx_164;
			eax_76();
			if (eax_163 != 0x00)
			{
				*(esp_115 - 0x04) = fp - 0x08;
				*(esp_115 - 0x08) = 0x0C;
				*(esp_115 - 0x0C) = fp - 0x14;
				*(esp_115 - 0x10) = 0x01;
				*(esp_115 - 0x14) = eax_163;
				word32 ebp_200;
				byte SCZO_201;
				byte SZO_203;
				byte C_204;
				word32 esi_205;
				word32 edi_206;
				byte Z_207;
				word32 eax_208;
				word32 ecx_209;
				globals->t40BBF0();
				if (eax_208 != 0x00 && (bLoc0C & 0x01) != 0x00)
					goto l004054AF;
			}
l004054CE:
			uint32 * esp_86 = esp_115 - 0x04;
			*esp_86 = dwArg0C;
			*(esp_86 - 0x04) = (union Eq_4 *) dwArg08;
			*(esp_86 - 0x08) = (union Eq_4 *) dwArg04;
			*(esp_86 - 0x0C) = ebx_10;
			word32 ebp_99;
			byte SCZO_100;
			word32 ebx_101;
			byte SZO_102;
			byte C_103;
			word32 esi_104;
			word32 edi_105;
			byte Z_106;
			word32 ecx_108;
			globals->t40BBE0();
l004054DE:
			struct Eq_11345 * esp_51 = esp_217 + 0x01;
			word32 edi_50;
			*ediOut = *esp_217;
			word32 esi_52;
			*esiOut = esp_51->dw0000;
			word32 ebx_54;
			*ebxOut = esp_51->dw0004;
			return eax_107;
		}
	}
	else
	{
		esp_217 = fp - 0x24;
		Eq_399 eax_219 = LoadLibraryA(4234112);
		if (eax_219 != null)
		{
			Eq_6776 eax_236 = GetProcAddress(eax_219, 0x00409B74);
			globals->t40BBE0 = eax_236;
			esp_217 = fp - 44;
			if (eax_236 != null)
			{
				globals->t40BBE4 = GetProcAddress(eax_219, 4234084);
				globals->t40BBE8 = GetProcAddress(eax_219, 0x00409B50);
				esp_115 = fp - 0x3C;
				if (globals->dw40BA5C == 0x02)
				{
					Eq_6776 eax_259 = GetProcAddress(eax_219, 0x00409B34);
					globals->t40BBF0 = eax_259;
					esp_115 = fp - 0x44;
					if (eax_259 != null)
					{
						globals->t40BBEC = GetProcAddress(eax_219, 4234012);
						esp_115 = fp - 0x4C;
					}
				}
				goto l0040546A;
			}
		}
		eax_107 = 0x00;
		goto l004054DE;
	}
}

// 004054F0: void fn004054F0(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack uint32 dwArg0C)
void fn004054F0(Eq_4 dwArg04, Eq_4 dwArg08, uint32 dwArg0C)
{
}

// 00405614: Register Eq_4 fn00405614(Register Eq_4 eax)
Eq_4 fn00405614(Eq_4 eax)
{
	if (eax == 0x03A4)
		return 0x0411;
	if (eax == 0x03A8)
		return 0x0804;
	if (eax == 949)
		return 0x0412;
	if (eax == 0x03B6)
		return 0x0404;
	return 0x00;
}

// 00405643: Register word16 fn00405643()
word16 fn00405643()
{
	word32 ecx_11 = 0x40;
	word16 cx_12 = 0x40;
	struct Eq_11557 * edi_14 = globals->a40BCA0;
	while (ecx_11 != 0x00)
	{
		edi_14->b0000 = (byte) 0x00;
		ecx_11 = ecx_11 - 0x01;
		edi_14 = edi_14 + 0x01;
		cx_12 = (word16) ecx_11;
	}
	edi_14->b0000 = 0x00;
	globals->t40BDA4.u0 = 0x00;
	globals->dw40BC98 = 0x00;
	globals->dw40BC94 = 0x00;
	globals->dw40BDB0 = 0x00;
	globals->dw40BDB4 = 0x00;
	globals->dw40BDB8 = 0x00;
	return cx_12;
}

// 0040566C: Register Eq_3 fn0040566C(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 edi)
Eq_3 fn0040566C(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 edi)
{
}

// 004057F8: Register byte fn004057F8(Register Eq_3 edx, Register Eq_4 edi, Stack Eq_4 dwArg04)
byte fn004057F8(Eq_3 edx, Eq_4 edi, Eq_4 dwArg04)
{
}

// 004059DE: Register word32 fn004059DE(Register Eq_3 edx, Register Eq_4 edi, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn004059DE(Eq_3 edx, Eq_4 edi, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	*ebxOut = ebx;
	*ebpOut = ebp;
	*ediOut = edi;
	if (globals->dw40BFEC == 0x00)
	{
		word32 ebx_26;
		*ebxOut = DPB(ebx, fn004057F8(edx, edi, ~0x02), 0);
		globals->dw40BFEC = 0x01;
	}
	return 0x00;
}

// 00405A00: Register ui32 fn00405A00(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack Eq_4 dwArg0C, Register out ptr32 ebpOut, Register out Eq_8476 esiOut, Register out Eq_8477 ediOut)
ui32 fn00405A00(Eq_4 dwArg04, Eq_4 dwArg08, Eq_4 dwArg0C, ptr32 & ebpOut, Eq_8476 & esiOut, LPVOID & ediOut)
{
	Eq_4 esi_13 = dwArg08;
	Eq_4 edi_17 = dwArg04;
	word32 eax_20 = dwArg0C + dwArg08;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C >= 0x04)
			{
				word32 esp_72;
				word32 ebp_73;
				word32 edi_74;
				word32 esi_75;
				word32 ecx_76;
				word32 eax_77;
				ui32 edx_78;
				byte SCZO_79;
				byte CZ_80;
				byte C_81;
				byte SZO_82;
				byte Z_83;
				byte D_84;
				(*((char *) globals->a405A60 + (dwArg04 & 0x03) * 0x04))();
				return edx_78;
			}
		}
		else
		{
			uint32 ecx_43 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 >= 0x08)
			{
				while (ecx_43 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = (word32) esi_13 + 0x04;
					edi_17 = (word32) edi_17 + 0x04;
					ecx_43 = ecx_43 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_57;
					*esiOut = esi;
					word32 edi_59;
					*ediOut = edi;
					word32 ebp_61;
					*ebpOut = ebp;
					return dwArg0C & 0x03;
				}
			}
		}
	}
	else
	{
		word32 * esi_102 = (word32) dwArg08 + (dwArg0C - 0x04);
		word32 * edi_103 = (word32) dwArg04 + (dwArg0C - 0x04);
		if ((edi_103 & 0x03) != 0x00)
		{
			if (dwArg0C >= 0x04)
			{
				word32 esp_136;
				word32 ebp_137;
				word32 edi_138;
				word32 esi_139;
				word32 ecx_140;
				word32 eax_141;
				ui32 edx_142;
				byte SCZO_143;
				byte CZ_144;
				byte C_145;
				byte SZO_146;
				byte Z_147;
				byte D_148;
				(*((char *) globals->a405BEC + (edi_103 & 0x03) * 0x04))();
				return edx_142;
			}
		}
		else
		{
			uint32 ecx_104 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_113 = -(dwArg0C >> 0x02);
				word32 esp_116;
				word32 ebp_117;
				word32 edi_118;
				word32 esi_119;
				word32 ecx_120;
				word32 eax_121;
				ui32 edx_122;
				byte SCZO_123;
				byte CZ_124;
				byte C_125;
				byte SZO_126;
				byte Z_127;
				byte D_128;
				(*((char *) globals->a405C98 + ecx_113 * 0x04))();
				return edx_122;
			}
			else
			{
				while (ecx_104 != 0x00)
				{
					*edi_103 = *esi_102;
					esi_102 = esi_102 - 0x04;
					edi_103 = edi_103 - 0x04;
					ecx_104 = ecx_104 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_107;
					*esiOut = esi;
					word32 edi_109;
					*ediOut = edi;
					word32 ebp_111;
					*ebpOut = ebp;
					return dwArg0C & 0x03;
				}
			}
		}
	}
}

// 00405D3D: Register Eq_4 fn00405D3D()
Eq_4 fn00405D3D()
{
	Eq_4 eax_10 = HeapAlloc(globals->t40BEC0, 0x00, 0x0140);
	globals->t40BC80 = eax_10;
	if (eax_10 == 0x00)
		return eax_10;
	globals->t40BC78 = globals->t40BC78 & 0x00;
	globals->dw40BC7C = globals->dw40BC7C & 0x00;
	globals->t40BC88 = eax_10;
	globals->t40BC84.u0 = 0x00;
	globals->dw40BC8C = 0x10;
	return 0x01;
}

// 00405D85: Register (ptr Eq_12459) fn00405D85(Stack Eq_4 dwArg04, Register out ptr32 edxOut)
Eq_12459 * fn00405D85(Eq_4 dwArg04, ptr32 & edxOut)
{
}

// 00405DB0: Register Eq_4 fn00405DB0(Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack byte bArg0B, Register out ptr32 edxOut)
Eq_4 fn00405DB0(Eq_4 ebp, Eq_4 dwArg04, Eq_4 dwArg08, byte bArg0B, ptr32 & edxOut)
{
	*edxOut = edx;
	uint32 edi_20 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_4 eax_10 = *((word32) dwArg04 + 0x0010);
	word32 ecx_27 = *((word32) dwArg08 - 0x04);
	struct Eq_12503 * ebp_194 = fp - 0x04;
	struct Eq_10689 * esi_130 = (word32) dwArg08 - 0x04;
	Eq_12509 edi_192 = edi_20 >> 0x0F;
	Eq_4 ecx_25 = (word32) eax_10 + ((edi_20 >> 0x0F) *s 0x0204 + 0x0144);
	int32 ecx_100 = ecx_27 - 0x01;
	int32 dwLoc08_120 = ecx_27 - 0x01;
	if (((byte) (ecx_27 - 0x01) & 0x01) == 0x00)
	{
		struct Eq_10689 * ebx_83 = ecx_27 - 0x01 + ((word32) dwArg08 - 0x04);
		int32 edx_84 = ebx_83->dw0000;
		int32 edx_86 = *(dwArg08 - 0x08);
		struct Eq_10689 * dwArg08_119 = ebx_83;
		if (((byte) edx_84 & 0x01) == 0x00)
		{
			Eq_12559 edx_465 = (edx_84 >> 0x04) - 0x01;
			if (edx_465 > 0x3F)
				edx_465.u0 = 0x3F;
			if (ebx_83->ptr0004 == ebx_83->ptr0008)
			{
				if (edx_465 < 0x20)
				{
					uint32 ebx_505 = ~(0x80000000 >> (byte) edx_465);
					*((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x0044)) & ebx_505;
					word32 ecx_504 = edx_465 + 0x04 + eax_10;
					Eq_12620 v18_510 = *ecx_504 - 0x01;
					*ecx_504 = v18_510;
					if (v18_510 == 0x00)
						*dwArg04 = *dwArg04 & ebx_505;
				}
				else
				{
					uint32 ebx_523 = ~(0x80000000 >> (byte) (edx_465 - 0x20));
					*((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x00C4)) & ebx_523;
					word32 ecx_522 = edx_465 + 0x04 + eax_10;
					Eq_12620 v21_528 = *ecx_522 - 0x01;
					*ecx_522 = v21_528;
					if (v21_528 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & ebx_523;
				}
			}
			ebx_83->ptr0008->ptr0004 = ebx_83->ptr0004;
			ebx_83->ptr0004->ptr0008 = ebx_83->ptr0008;
			ecx_100 = ecx_27 - 0x01 + edx_84;
			dwLoc08_120 = ecx_100;
		}
		Eq_12550 edx_104 = ecx_100 >> 0x04;
		Eq_4 edx_105;
		*edxOut = edx_104 - 0x01;
		if (edx_104 > 0x40)
			*edxOut = 0x3F;
		Eq_4 ebx_129;
		if ((edx_86 & 0x01) == 0x00)
		{
			struct Eq_10689 * esi_370 = (word32) dwArg08 - 0x04 - edx_86;
			dwArg08_119 = esi_370;
			ebx_129 = (edx_86 >> 0x04) - 0x01;
			if (ebx_129 > 0x3F)
				ebx_129.u0 = 0x3F;
			int32 ecx_382 = ecx_100 + edx_86;
			edx_105 = (ecx_382 >> 0x04) - 0x01;
			*edxOut = edx_105;
			dwLoc08_120 = ecx_382;
			if (edx_105 > 0x3F)
				*edxOut = 0x3F;
			if (ebx_129 != edx_105)
			{
				if (esi_370->ptr0004 == esi_370->ptr0008)
				{
					if (ebx_129 < 0x20)
					{
						uint32 esi_424 = ~(0x80000000 >> (byte) ebx_129);
						*((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x0044)) & esi_424;
						byte v25_429 = *((word32) eax_10 + ((byte) ebx_129.u0 + 0x04)) - 0x01;
						((word32) eax_10 + ((byte) ebx_129.u0 + 0x04))->u0 = v25_429;
						if (v25_429 == 0x00)
							*dwArg04 = *dwArg04 & esi_424;
					}
					else
					{
						uint32 esi_441 = ~(0x80000000 >> (byte) (ebx_129 - 0x20));
						*((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_10 + ((edi_20 >> 0x0F) * 0x04 + 0x00C4)) & esi_441;
						byte v29_446 = *((word32) eax_10 + ((byte) ebx_129.u0 + 0x04)) - 0x01;
						((word32) eax_10 + ((byte) ebx_129.u0 + 0x04))->u0 = v29_446;
						if (v29_446 == 0x00)
							*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & esi_441;
					}
				}
				esi_370->ptr0008->ptr0004 = esi_370->ptr0004;
				esi_370->ptr0004->ptr0008 = esi_370->ptr0008;
			}
			esi_130 = esi_370;
		}
		else
			ebx_129 = dwArg04;
		if ((edx_86 & 0x01) != 0x00 || ebx_129 != edx_105)
		{
			struct Eq_10689 * ecx_310 = (word32) ecx_25 + edx_105 * 0x08;
			struct Eq_10689 * ebx_311 = ecx_310->ptr0004;
			esi_130->ptr0008 = ecx_310;
			esi_130->ptr0004 = ebx_311;
			ecx_310->ptr0004 = esi_130;
			esi_130->ptr0004->ptr0008 = esi_130;
			if (esi_130->ptr0004 == esi_130->ptr0008)
			{
				byte cl_320 = Mem316[edx_105 + 0x04 + eax_10:byte];
				Mem325[edx_105 + 0x04 + eax_10:byte] = cl_320 + 0x01;
				if (edx_105 < 0x20)
				{
					if (cl_320 == 0x00)
						*dwArg04 = *dwArg04 | 0x80000000 >> (byte) edx_105;
					word32 eax_332 = eax_10 + 0x44 + (edi_20 >>u 0x0F) * 0x04;
					*eax_332 = *eax_332 | 0x80000000 >> (byte) edx_105;
				}
				else
				{
					if (cl_320 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (edx_105 - (union Eq_12620 *) 0x20);
					uint32 edx_352 = 0x80000000 >> (byte) (edx_105 - (union Eq_12620 *) 0x20);
					*edxOut = edx_352;
					word32 eax_354 = eax_10 + 0xC4 + (edi_20 >>u 0x0F) * 0x04;
					*eax_354 = *eax_354 | edx_352;
				}
			}
		}
		esi_130->dw0000 = dwLoc08_120;
		esi_130[(dwLoc08_120 - 0x04) / 0x0C] = (struct Eq_10689) dwLoc08_120;
		Eq_12620 v33_146 = *ecx_25 - 0x01;
		*ecx_25 = v33_146;
		eax_10 = ecx_25;
		if (v33_146 == 0x00)
		{
			Eq_4 eax_172 = globals->t40BC78;
			if (eax_172 != 0x00)
			{
				VirtualFree((word32) *((word32) eax_172 + 0x0C) + (globals->t40BC90 << 0x0F), 0x8000, 0x4000);
				Eq_4 eax_213 = globals->t40BC78;
				uint32 edx_215 = 0x80000000 >> (byte) globals->t40BC90;
				*edxOut = edx_215;
				*((word32) eax_213 + 0x08) = *((word32) eax_213 + 0x08) | edx_215;
				Eq_4 eax_221 = *((word32) globals->t40BC78 + 0x0010);
				Eq_12509 ecx_222 = globals->t40BC90;
				*((word32) eax_221 + (ecx_222 * 0x04 + 0x00C4)) = *((word32) eax_221 + (ecx_222 * 0x04 + 0x00C4)) & 0x00;
				Eq_4 eax_227 = *((word32) globals->t40BC78 + 0x0010);
				((word32) eax_227 + 0x0043)->u0 = *((word32) eax_227 + 0x0043) - 0x01;
				Eq_4 eax_230 = globals->t40BC78;
				if (*((word32) *((word32) eax_230 + 0x0010) + 0x0043) == 0x00)
				{
					*((word32) eax_230 + 0x04) = *((word32) eax_230 + 0x04) & ~0x01;
					eax_230 = globals->t40BC78;
				}
				if (*((word32) eax_230 + 0x08) == ~0x00)
				{
					VirtualFree(esp_244->t0000, esp_244->t0004, esp_244->t0008);
					*(esp_246 - 0x04) = (union Eq_4 *) *((word32) globals->t40BC78 + 0x0010);
					*(esp_246 - 0x08) = 0x00;
					*(esp_246 - 0x0C) = (union Eq_4 *) globals->t40BEC0;
					HeapFree(*(esp_246 - 0x0C), *(esp_246 - 0x08), *(esp_246 - 0x04));
					Eq_4 eax_276 = globals->t40BC78;
					*(esp_246 - 0x10) = (word32) globals->t40BC80 + ((globals->dw40BC7C * 0x14 - eax_276) - 0x14);
					*(esp_246 - 0x14) = (word32) eax_276 + 0x0014;
					*(esp_246 - 0x18) = (union Eq_4 *) eax_276;
					word32 edx_290;
					*edxOut = fn00404BE0(dwArg00, dwArg04, dwArg08_119, out ebp_194, out edi_192);
					Eq_4 eax_292 = ebp_194->t0008;
					globals->dw40BC7C = globals->dw40BC7C - 0x01;
					if (eax_292 > globals->t40BC78)
						ebp_194->t0008 = ebp_194->t0008 - 0x14;
					globals->t40BC88 = globals->t40BC80;
				}
			}
			eax_10 = ebp_194->t0008;
			globals->t40BC78 = eax_10;
			globals->t40BC90 = edi_192;
		}
	}
	return eax_10;
}

// 004060C8: Register (ptr Eq_13161) fn004060C8(Register uint32 esi)
Eq_13161 * fn004060C8(uint32 esi)
{
	ui32 eax_125 = globals->dw40BC7C;
	ui32 ecx_4 = globals->dw40BC8C;
	ptr32 esp_111 = fp - 0x04;
	if (eax_125 == ecx_4)
	{
		esp_111 = fp - 0x14;
		Eq_4 eax_113 = HeapReAlloc(globals->t40BEC0, 0x00, globals->t40BC80, ecx_4 + 0x50 + ecx_4 * 0x04 << 0x02);
		if (eax_113 == 0x00)
			return null;
		globals->dw40BC8C = globals->dw40BC8C + 0x10;
		globals->t40BC80 = eax_113;
		eax_125 = globals->dw40BC7C;
	}
	struct Eq_13161 * eax_100;
	Eq_4 ecx_34 = globals->t40BC80;
	uint32 * esp_35 = esp_111 - 0x04;
	*esp_35 = esi;
	*(esp_35 - 0x04) = 0x41C4;
	*(esp_35 - 0x08) = 0x08;
	*(esp_35 - 0x0C) = (union Eq_4 *) globals->t40BEC0;
	struct Eq_13161 * esi_46 = (word32) ecx_34 + (eax_125 * 0x05) * 0x04;
	Eq_4 eax_47 = HeapAlloc(*(esp_35 - 0x0C), *(esp_35 - 0x08), *(esp_35 - 0x04));
	esi_46->t0010 = eax_47;
	if (eax_47 != 0x00)
	{
		*(esp_35 - 0x10) = 0x04;
		*(esp_35 - 0x14) = 0x2000;
		*(esp_35 - 0x18) = 0x00100000;
		*(esp_35 - 0x1C) = 0x00;
		Eq_4 eax_75 = VirtualAlloc(*(esp_35 - 0x1C), *(esp_35 - 0x18), *(esp_35 - 0x14), *(esp_35 - 0x10));
		esi_46->t000C = eax_75;
		if (eax_75 != 0x00)
		{
			esi_46->dw0008 = esi_46->dw0008 | ~0x00;
			esi_46->dw0000 = 0x00;
			esi_46->dw0004 = 0x00;
			globals->dw40BC7C = globals->dw40BC7C + 0x01;
			Eq_4 eax_95 = esi_46->t0010;
			*eax_95 = *eax_95 | ~0x00;
			eax_100 = esi_46;
			return eax_100;
		}
		*(esp_35 - 0x20) = (union Eq_4 *) esi_46->t0010;
		*(esp_35 - 0x24) = 0x00;
		*(esp_35 - 0x28) = (union Eq_4 *) globals->t40BEC0;
		HeapFree(*(esp_35 - 0x28), *(esp_35 - 0x24), *(esp_35 - 0x20));
	}
	eax_100 = null;
	return eax_100;
}

// 0040617F: Register int32 fn0040617F(Stack (ptr Eq_13393) dwArg04, Register out ptr32 edxOut, Register out (ptr Eq_13395) ebxOut, Register out Eq_13396 esiOut)
int32 fn0040617F(Eq_13393 * dwArg04, ptr32 & edxOut, Eq_13395 * & ebxOut, Eq_13396 & esiOut)
{
	int32 eax_15 = dwArg04->dw0008;
	struct Eq_13401 * esi_23 = dwArg04->ptr0010;
	int32 ebx_179 = 0x00;
	while (eax_15 >= 0x00)
	{
		eax_15 = eax_15 << 0x01;
		ebx_179 = ebx_179 + 0x01;
	}
	struct Eq_13413 * eax_41 = esi_23 + (ebx_179 *s 0x0204 + 0x0144) / 0x00C4;
	word32 edx_46 = 0x3F;
	eax_49 = eax_41;
	do
	{
		struct Eq_13413 * eax_49;
		eax_49[0x01] = (struct Eq_13413) eax_49;
		eax_49->dw0004 = eax_49;
		eax_49 = eax_49 + 0x01;
		edx_46 = edx_46 - 0x01;
		*edxOut = edx_46;
	} while (edx_46 != 0x00);
	int32 eax_139;
	ui32 edi_63 = ebx_179 << 0x0F;
	Eq_4 edi_64 = edi_63 + dwArg04->dw000C;
	Eq_4 eax_69 = VirtualAlloc(edi_64, 0x8000, 0x1000, 0x04);
	if (eax_69 == 0x00)
		eax_139 = eax_69 | ~0x00;
	else
	{
		if (edi_64 <=u edi_64 + 0x7000)
		{
			word32 eax_149 = edi_64 + 0x10;
			word32 ecx_151 = (edi_64 + 0x7000 - edi_64 >>u 0x0C) + 0x01;
			do
			{
				*(eax_149 - 0x08) = *(eax_149 - 0x08) | ~0x00;
				*((word32) eax_149 + 0x0FEC) = *((word32) eax_149 + 0x0FEC) | ~0x00;
				Mem163[eax_149 + 0x00:word32] = eax_149 + 0x0FFC;
				*(eax_149 - 0x04) = 0x0FF0;
				Mem166[eax_149 + 0x04:word32] = eax_149 + ~0x1003;
				*((word32) eax_149 + 0x0FE8) = 0x0FF0;
				eax_149 = eax_149 + 0x1000;
				ecx_151 = ecx_151 - 0x01;
			} while (ecx_151 != 0x00);
		}
		struct Eq_13461 * edx_106 = (struct Eq_20261 *) 0x7000 + (edi_63 + dwArg04->dw000C) / 0x00001000;
		Mem110[eax_41 + 0x01FC:word32] = edi_64 + 0x0C;
		*((word32) edi_64 + 0x0014) = eax_41 + 0x003F;
		eax_41[0x0040] = (struct Eq_13413) ((char *) edx_106 + 0x0C);
		edx_106->ptr0010 = eax_41 + 0x003F;
		esi_23->a0044[ebx_179] = esi_23->a0044[ebx_179] & 0x00;
		esi_23->a00C4[ebx_179] = 0x01;
		byte al_121 = esi_23->b0043;
		esi_23->b0043 = al_121 + 0x01;
		if (al_121 == 0x00)
			dwArg04->dw0004 = dwArg04->dw0004 | 0x01;
		uint32 edx_134 = ~(0x80000000 >> (byte) ebx_179);
		*edxOut = edx_134;
		dwArg04->dw0008 = dwArg04->dw0008 & edx_134;
		eax_139 = ebx_179;
	}
	word32 esi_87;
	esiOut->u0 = 0x8000;
	word32 ebx_89;
	ebxOut->u0 = 0x1000;
	return eax_139;
}

// 00406285: Register word32 fn00406285(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack byte bArg0B, Stack Eq_4 dwArg0C, Stack byte bArg0F, Register out ptr32 edxOut)
word32 fn00406285(Eq_4 dwArg04, Eq_4 dwArg08, byte bArg0B, Eq_4 dwArg0C, byte bArg0F, ptr32 & edxOut)
{
	word32 eax_100;
	int32 ecx_32 = *(dwArg08 - 0x04);
	struct Eq_13605 * edi_42 = (word32) dwArg08 + (ecx_32 - 0x05);
	Eq_13609 edx_25 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_13614 eax_10 = *((word32) dwArg04 + 0x0010);
	int32 ebx_43 = edi_42->dw0000;
	uint32 edx_27 = edx_25 >> 0x0F;
	*edxOut = edx_27;
	int32 ecx_30 = (word32) eax_10 + ((edx_25 >> 0x0F) *s 0x0204 + 0x0144);
	int32 esi_33 = (word32) dwArg0C + 0x0017 & ~0x0F;
	byte bl_44 = (byte) ebx_43;
	if (esi_33 > ecx_32 - 0x01)
	{
		if ((bl_44 & 0x01) != 0x00 || esi_33 > ebx_43 + (ecx_32 - 0x01))
		{
			eax_100 = 0x00;
			return eax_100;
		}
		Eq_13653 ecx_112 = (ebx_43 >> 0x04) - 0x01;
		byte cl_113 = (byte) ecx_112;
		Eq_13653 dwLoc0C_116 = ecx_112;
		if (ecx_112 > 0x3F)
		{
			ecx_112.u0 = 0x3F;
			cl_113 = 0x3F;
			dwLoc0C_116.u0 = 0x3F;
		}
		if (edi_42->ptr0004 == edi_42->ptr0008)
		{
			if (ecx_112 < 0x20)
			{
				uint32 ebx_257 = ~(0x80000000 >> cl_113);
				*((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x0044)) & ebx_257;
				byte * ecx_256 = (word32) eax_10 + ((word32) dwLoc0C_116.u0 + 0x04);
				byte v20_263 = *ecx_256 - 0x01;
				*ecx_256 = v20_263;
				if (v20_263 == 0x00)
					*dwArg04 = *dwArg04 & ebx_257;
			}
			else
			{
				uint32 ebx_277 = ~(0x80000000 >> (byte) ((word32) ecx_112.u0 - 0x0020));
				*((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x00C4)) & ebx_277;
				byte * ecx_276 = (word32) eax_10 + ((word32) dwLoc0C_116.u0 + 0x04);
				byte v26_283 = *ecx_276 - 0x01;
				*ecx_276 = v26_283;
				if (v26_283 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & ebx_277;
			}
		}
		edi_42->ptr0008->ptr0004 = edi_42->ptr0004;
		edi_42->ptr0004->ptr0008 = edi_42->ptr0008;
		int32 v31_137 = ebx_43 + ((ecx_32 - 0x01) - esi_33);
		if (v31_137 > 0x00)
		{
			union Eq_13905 * edi_161 = (v31_137 >> 0x04) - 0x01;
			struct Eq_13976 * ecx_164 = dwArg08 - 0x04 + esi_33;
			if (edi_161 > (union Eq_13905 *) 0x3F)
				edi_161 = (union Eq_13905 *) 0x3F;
			struct Eq_13976 * ebx_170 = ecx_30 + edi_161 * 0x08;
			ecx_164->ptr0004 = ebx_170->ptr0004;
			ecx_164->ptr0008 = ebx_170;
			ebx_170->ptr0004 = ecx_164;
			ecx_164->ptr0004->ptr0008 = ecx_164;
			if (ecx_164->ptr0004 == ecx_164->ptr0008)
			{
				Eq_14066 eax_204;
				byte cl_202;
				byte cl_194 = Mem178[edi_161 + 0x04 + eax_10:byte];
				Mem199[edi_161 + 0x04 + eax_10:byte] = cl_194 + 0x01;
				if (edi_161 < (union Eq_13905 *) 0x20)
				{
					if (cl_194 == 0x00)
						*dwArg04 = *dwArg04 | 0x80000000 >> (byte) edi_161;
					eax_204 = eax_10 + 0x44 + (edx_25 >>u 0x0F) * 0x04;
					cl_202 = (byte) edi_161;
				}
				else
				{
					if (cl_194 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (edi_161 - (union Eq_13905 *) 0x20);
					eax_204 = eax_10 + 0xC4 + (edx_25 >>u 0x0F) * 0x04;
					cl_202 = (byte) (edi_161 - (union Eq_13905 *) 0x20);
				}
				*eax_204 = *eax_204 | 0x80000000 >> cl_202;
			}
			int32 * eax_191 = dwArg08 - 0x04 + esi_33;
			*eax_191 = v31_137;
			eax_191[v31_137 - 0x04] = v31_137;
		}
		*(dwArg08 - 0x04) = esi_33 + 0x01;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(dwArg08 - 0x08)[esi_33].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = esi_33 + 0x01;
		word32 edx_148;
		*edxOut = dwArg08;
	}
	else if (esi_33 < ecx_32 - 0x01)
	{
		int32 v17_299 = ecx_32 - 0x01 - esi_33;
		*(dwArg08 - 0x04) = esi_33 + 0x01;
		struct Eq_13684 * ebx_303 = dwArg08 - 0x04 + esi_33;
		*(ebx_303 - 0x04) = esi_33 + 0x01;
		int32 dwArg0C_300 = v17_299;
		union Eq_13905 * esi_307 = (v17_299 >> 0x04) - 0x01;
		if (esi_307 > (union Eq_13905 *) 0x3F)
			esi_307 = (union Eq_13905 *) 0x3F;
		if ((bLoc08 & 0x01) == 0x00)
		{
			Eq_13738 esi_406 = (ebx_43 >> 0x04) - 0x01;
			if (esi_406 > 0x3F)
				esi_406.u0 = 0x3F;
			if (edi_42->ptr0004 == edi_42->ptr0008)
			{
				if (esi_406 < 0x20)
				{
					uint32 ebx_453 = ~(0x80000000 >> (byte) esi_406);
					*((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x0044)) & ebx_453;
					word32 esi_452 = esi_406 + 0x04 + eax_10;
					Eq_13905 v23_459 = *esi_452 - 0x01;
					*esi_452 = v23_459;
					if (v23_459 == 0x00)
						*dwArg04 = *dwArg04 & ebx_453;
				}
				else
				{
					uint32 ebx_472 = ~(0x80000000 >> (byte) (esi_406 - 0x20));
					*((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_10 + ((edx_25 >> 0x0F) * 0x04 + 0x00C4)) & ebx_472;
					word32 ecx_471 = esi_406 + 0x04 + eax_10;
					Eq_13905 v29_478 = *ecx_471 - 0x01;
					*ecx_471 = v29_478;
					if (v29_478 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & ebx_472;
				}
			}
			edi_42->ptr0008->ptr0004 = edi_42->ptr0004;
			edi_42->ptr0004->ptr0008 = edi_42->ptr0008;
			int32 esi_428 = v17_299 + ebx_43;
			dwArg0C_300 = esi_428;
			esi_307 = (esi_428 >> 0x04) - 0x01;
			if (esi_307 > (union Eq_13905 *) 0x3F)
				esi_307 = (union Eq_13905 *) 0x3F;
		}
		struct Eq_13684 * ecx_330 = ecx_30 + esi_307 * 0x08;
		struct Eq_13684 * edi_331 = ecx_330->ptr0004;
		ebx_303->ptr0008 = ecx_330;
		ebx_303->ptr0004 = edi_331;
		ecx_330->ptr0004 = ebx_303;
		ebx_303->ptr0004->ptr0008 = ebx_303;
		if (ebx_303->ptr0004 == ebx_303->ptr0008)
		{
			Eq_14019 eax_362;
			byte cl_360;
			byte cl_352 = Mem336[esi_307 + 0x04 + eax_10:byte];
			Mem357[esi_307 + 0x04 + eax_10:byte] = cl_352 + 0x01;
			if (esi_307 < (union Eq_13905 *) 0x20)
			{
				if (cl_352 == 0x00)
					*dwArg04 = *dwArg04 | 0x80000000 >> (byte) esi_307;
				eax_362 = eax_10 + 0x44 + (edx_25 >>u 0x0F) * 0x04;
				cl_360 = (byte) esi_307;
			}
			else
			{
				if (cl_352 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (esi_307 - (union Eq_13905 *) 0x20);
				eax_362 = eax_10 + 0xC4 + (edx_25 >>u 0x0F) * 0x04;
				cl_360 = (byte) (esi_307 - (union Eq_13905 *) 0x20);
			}
			uint32 edx_365 = 0x80000000 >> cl_360;
			*edxOut = edx_365;
			*eax_362 = *eax_362 | edx_365;
		}
		ebx_303->dw0000 = dwArg0C_300;
		ebx_303[(dwArg0C_300 - 0x04) / 0x0C] = (struct Eq_13684) dwArg0C_300;
	}
	eax_100 = 0x01;
	return eax_100;
}

// 00406564: Register ptr32 fn00406564(Register Eq_4 ebp, Register Eq_4 esi, Stack Eq_4 dwArg04, Stack byte bArg07, Register out ptr32 edxOut, Register out Eq_9159 blOut)
ptr32 fn00406564(Eq_4 ebp, Eq_4 esi, Eq_4 dwArg04, byte bArg07, ptr32 & edxOut, Eq_9159 & blOut)
{
	uint32 esi_35;
	uint32 dwLoc0C_32;
	int32 ecx_13 = (word32) dwArg04 + 0x0017 & ~0x0F;
	int32 ecx_26 = (ecx_13 >> 0x04) - 0x01;
	ui32 eax_10 = globals->dw40BC7C;
	Eq_4 edx_11 = globals->t40BC80;
	*edxOut = edx_11;
	byte cl_27 = (byte) ecx_26;
	Eq_4 edi_30 = (word32) edx_11 + (eax_10 * 0x05) * 0x04;
	if (ecx_26 < 0x20)
	{
		esi_35 = (esi | ~0x00) >> cl_27;
		dwLoc0C_32 = dwLoc0C | ~0x00;
	}
	else
	{
		esi_35 = 0x00;
		dwLoc0C_32 = (eax_10 * 0x05 | ~0x00) >> (byte) (ecx_26 + ~0x1F);
	}
	Eq_4 eax_36 = globals->t40BC88;
	Eq_4 ebx_148 = eax_36;
	bool C_44 = cond(eax_36 - edi_30);
	while (true)
	{
		Eq_4 dwArg04_408 = ebx_148;
		if (!C_44 || (*((word32) ebx_148 + 0x04) & dwLoc0C_32 | *ebx_148 & esi_35) != 0x00)
			break;
		ebx_148 = (word32) ebx_148 + 0x0014;
		C_44 = cond(ebx_148 - edi_30);
	}
	uint32 esi_105;
	ptr32 eax_168;
	esi_105 = esi_35;
	if (ebx_148 != edi_30)
	{
l004065FE:
		globals->t40BC88 = ebx_148;
		struct Eq_14246 * eax_98 = *((word32) ebx_148 + 0x0010);
		Eq_12509 edx_104 = eax_98->t0000;
		Eq_12509 dwLoc08_102 = edx_104;
		if (edx_104 == ~0x00 || ((eax_98->a00C4)[edx_104] & dwLoc0C_32 | (eax_98->a0044)[edx_104] & esi_105) == 0x00)
		{
			dwLoc08_102 = edx_104 & 0x00;
			ui32 * ecx_359 = eax_98->a0044 + 33;
			esi_105 = esi_35;
			if ((eax_98->a00C4[0x00] & dwLoc0C_32 | (eax_98->a0044)[0x00] & esi_35) == 0x00)
			{
				do
				{
					ecx_359 = ecx_522 + 0x01;
					dwLoc08_102 = (word32) dwLoc08_102 + 0x01;
					ui32 * ecx_522 = ecx_359;
				} while ((*ecx_522 & dwLoc0C_32 | *ecx_359 & esi_35) == 0x00);
			}
			edx_104 = dwLoc08_102;
		}
		struct Eq_14307 * ecx_108 = eax_98 + (edx_104 *s 0x0204 + 0x0144) / 0x00C4;
		int32 edi_111 = 0x00;
		int32 ecx_112 = eax_98->a0044[edx_104] & esi_105;
		if (ecx_112 == 0x00)
		{
			ecx_112 = eax_98->a00C4[edx_104] & dwLoc0C_32;
			*(fp - 0x28) = 0x20;
			edi_111 = *(fp - 0x28);
		}
		while (ecx_112 >= 0x00)
		{
			ecx_112 = ecx_112 << 0x01;
			edi_111 = edi_111 + 0x01;
		}
		struct Eq_14363 * edx_126 = ecx_108->a0004[edi_111].ptr0000.dw0000;
		int32 ecx_128 = edx_126->dw0000 - ecx_13;
		int32 esi_132 = (ecx_128 >> 0x04) - 0x01;
		if (esi_132 > 0x3F)
		{
			*(fp - 0x28) = 0x3F;
			esi_132 = *(fp - 0x28);
		}
		if (esi_132 == edi_111)
		{
l0040680E:
			if (ecx_128 != 0x00)
			{
				edx_126->dw0000 = ecx_128;
				edx_126[(ecx_128 - 0x04) / 0x0C] = (struct Eq_14363) ecx_128;
			}
			goto l0040681D;
		}
		if (edx_126->ptr0004 == edx_126->ptr0008)
		{
			if (edi_111 < 0x20)
			{
				uint32 ebx_296 = ~(0x80000000 >> (byte) edi_111);
				eax_98->a0044[dwLoc08_102] = ebx_296 & (eax_98->a0044)[dwLoc08_102];
				byte * edi_295 = (char *) &eax_98->t0000 + 0x04 + edi_111;
				byte v19_301 = *edi_295 - 0x01;
				*edi_295 = v19_301;
				if (v19_301 == 0x00)
				{
					*dwArg04_408 = *dwArg04_408 & ebx_296;
					ebx_148 = dwArg04_408;
					goto l00406771;
				}
l0040676E:
				ebx_148 = dwArg04_408;
				goto l00406771;
			}
			ui32 * ecx_316 = eax_98->a00C4 + dwLoc08_102;
			uint32 ebx_318 = ~(0x80000000 >> (byte) (edi_111 - 0x20));
			*ecx_316 = *ecx_316 & ebx_318;
			byte * edi_317 = (char *) &eax_98->t0000 + 0x04 + edi_111;
			byte v23_323 = *edi_317 - 0x01;
			*edi_317 = v23_323;
			if (v23_323 != 0x00)
				goto l0040676E;
			*((word32) dwArg04_408 + 0x04) = *((word32) dwArg04_408 + 0x04) & ebx_318;
			ebx_148 = dwArg04_408;
		}
l00406771:
		edx_126->ptr0008->ptr0004 = edx_126->ptr0004;
		edx_126->ptr0004->ptr0008 = edx_126->ptr0008;
		if (ecx_128 == 0x00)
		{
l0040681D:
			int32 * edx_151 = edx_126 + ecx_128 / 0x0C;
			*edxOut = edx_151;
			*edx_151 = ecx_13 + 0x01;
			(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(edx_151 - 0x04)[ecx_13].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = ecx_13 + 0x01;
			word32 ecx_156 = ecx_108->dw0000;
			ecx_108->dw0000 = ecx_156 + 0x01;
			if (ecx_156 == 0x00 && (ebx_148 == globals->t40BC78 && dwLoc08_102 == globals->t40BC90))
				globals->t40BC78 = globals->t40BC78 & 0x00;
			eax_98->t0000 = dwLoc08_102;
			eax_168 = edx_151 + 0x01;
l0040685B:
			byte bl_82;
			*blOut = (byte) *(fp - 0x1C);
			return eax_168;
		}
		struct Eq_14363 * ecx_212 = ecx_108 + esi_132 * 0x02;
		struct Eq_14363 * edi_213 = ecx_212->ptr0004;
		edx_126->ptr0008 = ecx_212;
		edx_126->ptr0004 = edi_213;
		ecx_212->ptr0004 = edx_126;
		edx_126->ptr0004->ptr0008 = edx_126;
		if (edx_126->ptr0004 == edx_126->ptr0008)
		{
			byte cl_232 = eax_98[(esi_132 + 0x04) / 0x00C4];
			eax_98[(esi_132 + 0x04) / 0x00C4] = (struct Eq_14246) (cl_232 + 0x01);
			if (esi_132 < 0x20)
			{
				if (cl_232 == 0x00)
					*ebx_148 = *ebx_148 | 0x80000000 >> (byte) esi_132;
				eax_98->a0044[dwLoc08_102] = eax_98->a0044[dwLoc08_102] | 0x80000000 >> (byte) esi_132;
			}
			else
			{
				if (cl_232 == 0x00)
					*((word32) ebx_148 + 0x04) = *((word32) ebx_148 + 0x04) | 0x80000000 >> (byte) (esi_132 - 0x20);
				ui32 * edi_260 = eax_98->a00C4 + dwLoc08_102;
				*edi_260 = *edi_260 | 0x80000000 >> (byte) (esi_132 - 0x20);
			}
		}
		goto l0040680E;
	}
	ebx_148 = edx_11;
	while (true)
	{
		dwArg04_408 = ebx_148;
		if (ebx_148 >= eax_36 || (*((word32) ebx_148 + 0x04) & dwLoc0C_32 | *ebx_148 & esi_35) != 0x00)
			break;
		ebx_148 = (word32) ebx_148 + 0x0014;
	}
	esi_105 = esi_35;
	if (ebx_148 != eax_36)
		goto l004065FE;
	while (ebx_148 < edi_30 && *((word32) ebx_148 + 0x08) == 0x00)
	{
		ebx_148 = (word32) ebx_148 + 0x0014;
		dwArg04_408 = ebx_148;
	}
	if (ebx_148 == edi_30)
	{
		ebx_148 = (word32) edx_11 + 0x08;
		while (true)
		{
			dwArg04_408 = ebx_148;
			if (ebx_148 >= eax_36 || *ebx_148 != 0x00)
				break;
			ebx_148 = (word32) ebx_148 + 0x0014;
		}
		if (ebx_148 == eax_36)
		{
			Eq_4 eax_464 = fn004060C8(esi_35);
			ebx_148 = eax_464;
			dwArg04_408 = eax_464;
			if (eax_464 == 0x00)
			{
l004066DA:
				eax_168 = 0x00;
				goto l0040685B;
			}
		}
	}
	*(fp - 0x28) = (union Eq_4 *) ebx_148;
	word32 edx_443;
	*(word32 **) 0x1010 = fn0040617F(dwArg00, out edx_443, out ebx_148, out esi_105);
	if (*(word32 **) 0x1010 != ~0x00)
		goto l004065FE;
	goto l004066DA;
}

// 00406B77: Register word32 fn00406B77(Stack Eq_4 dwArg04)
word32 fn00406B77(Eq_4 dwArg04)
{
	<anonymous> * eax_3 = globals->ptr40BC44;
	if (eax_3 == null)
		return 0x00;
	word32 esp_27;
	word32 eax_28;
	byte SZO_29;
	byte C_30;
	byte Z_31;
	word32 ecx_32;
	eax_3();
	if (eax_28 == 0x00)
		return 0x00;
	return 0x01;
}

// 00406B92: Register ui32 fn00406B92(Register Eq_3 edx, Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack Eq_4 dwArg0C, Register out ptr32 edxOut)
ui32 fn00406B92(Eq_3 edx, Eq_4 ebp, Eq_4 dwArg04, Eq_4 dwArg08, Eq_4 dwArg0C, ptr32 & edxOut)
{
}

// 00406DD9: void fn00406DD9(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack Eq_4 dwArg0C)
void fn00406DD9(Eq_4 dwArg04, Eq_4 dwArg08, Eq_4 dwArg0C)
{
	if (dwArg04 < globals->t40BEC8)
	{
		struct Eq_15034 ** edi_80 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_82 = (dwArg04 & 0x1F) << 0x03;
		if ((((char *) *edi_80 + 0x04)[esi_82] & 0x01) != 0x00)
		{
			Eq_4 eax_88 = fn004083F0(dwArg04);
			if (eax_88 != ~0x00)
			{
				Eq_4 eax_109;
				if (SetFilePointer(eax_88, dwArg08, null, dwArg0C) == ~0x00)
					eax_109 = GetLastError();
				else
					eax_109.u0 = 0x00;
				if (eax_109 == 0x00)
				{
					byte * eax_119 = (char *) *edi_80 + 0x04 + esi_82;
					*eax_119 = *eax_119 & ~0x02;
					return;
				}
				else
				{
					fn00408278(eax_109);
					return;
				}
			}
l00406E54:
			globals->t40BA50.u0 = 0x09;
			return;
		}
	}
	globals->t40BA54 = globals->t40BA54 & 0x00;
	goto l00406E54;
}

// 00406E65: Register Eq_4 fn00406E65(Register Eq_4 ebp, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out (ptr Eq_9462) esiOut, Register out ptr32 ediOut)
Eq_4 fn00406E65(Eq_4 ebp, ptr32 & edxOut, ptr32 & ebxOut, Eq_9462 * & esiOut, ptr32 & ediOut)
{
	globals->dw40BA3C = globals->dw40BA3C + 0x01;
	word32 edx_9;
	word32 ebx_10;
	word32 esi_11;
	word32 edi_12;
	Eq_4 eax_13 = fn00403DDF(ebp, 0x1000, out edx_9, out ebx_10, out esi_11, out edi_12);
	struct Eq_15104 * ecx_19 = fp->ptr0004;
	ecx_19->t0008 = eax_13;
	if (eax_13 != 0x00)
	{
		ecx_19->dw000C = ecx_19->dw000C | 0x08;
		ecx_19->dw0018 = 0x1000;
	}
	else
	{
		ecx_19->dw000C = ecx_19->dw000C | 0x04;
		ecx_19->t0008 = &ecx_19->dw000C + 0x02;
		ecx_19->dw0018 = 0x02;
	}
	Eq_4 eax_21 = ecx_19->t0008;
	ecx_19->dw0004 = ecx_19->dw0004 & 0x00;
	ecx_19->t0000 = eax_21;
	return eax_21;
}

// 00406F0F: Register Eq_4 fn00406F0F(Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi)
Eq_4 fn00406F0F(Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi)
{
	ptr32 esp_147;
	Eq_3 edx_143;
	Eq_4 ebp_10 = fn00403BD0(ebx, esi, edi, dwLoc0C, 4234544, 0x0118);
	*(ebp_10 - 0x1C) = (union Eq_4 *) globals->t40B498;
	<anonymous> * eax_14 = globals->ptr40BC6C;
	if (eax_14 != null)
	{
		*(ebp_10 - 0x04) = 0x00;
		*(fp - 0x0C) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
		*(fp - 0x10) = (union Eq_4 *) *((word32) ebp_10 + 0x08);
		word32 esp_128;
		word32 eax_129;
		ptr32 ebp_130;
		word32 ecx_131;
		byte SZO_132;
		byte C_133;
		byte SCZO_134;
		byte Z_135;
		word32 edi_136;
		word32 esi_137;
		byte al_138;
		byte cl_139;
		byte SO_140;
		word32 ebx_141;
		byte CZ_142;
		eax_14();
		*(ebp_130 - 0x04) = *(ebp_130 - 0x04) | ~0x00;
		esp_147 = esp_128 + 0x08;
	}
	else
	{
		word32 edi_156;
		word32 esi_157;
		if (*((word32) ebp_10 + 0x08) != 0x01)
		{
			*(ebp_10 - 0x0128) = 4234328;
			edi_156 = 0x00409D0C;
			esi_157 = 212;
		}
		else
		{
			*(ebp_10 - 0x0128) = 0x00409B98;
			edi_156 = 4234296;
			esi_157 = 0xB9;
		}
		*(ebp_10 - 0x20) = 0x00;
		*(fp - 0x0C) = 0x0104;
		*(fp - 0x10) = ebp_10 - 292;
		*(fp - 0x14) = 0x00;
		if (GetModuleFileNameA(*(fp - 0x14), *(fp - 0x10), *(fp - 0x0C)) == 0x00)
		{
			*(fp - 0x18) = 4232652;
			*(fp - 0x1C) = ebp_10 - 292;
			edi_156 = fn00404F20(dwArg00);
		}
		*(fp - 0x18) = ebp_10 - 292;
		ptr32 ebx_172 = ebp_10 - 292;
		word32 edx_176;
		if (fn00404080(dwArg00, out edx_176) > (DWORD *) ~0x30)
		{
			*(fp - 0x18) = ebp_10 - 292;
			word32 edx_253;
			ebx_172 = fn00404080(dwArg00, out edx_253) + (ebp_10 - 0x0155);
			*(fp - 0x1C) = 0x03;
			*(fp - 0x20) = 4232648;
			*(fp - 0x24) = ebx_172;
			fn004054F0(dwArg00, dwArg04, dwArg08);
		}
		*(fp - 0x18) = ebx_172;
		word32 edx_187;
		fn00403D30((char *) (fn00404080(dwArg00, out edx_187) + 0x03 + esi_157) + 0x03 & ~0x03, 0x0118);
		*(ebp_10 - 0x18) = fp - 0x14;
		*(fp - 0x18) = edi_156;
		*(fp - 0x1C) = fp - 0x14;
		fn00404F20(dwArg00);
		*(fp - 0x20) = 4232616;
		*(fp - 0x24) = fp - 0x14;
		word32 edi_208;
		fn00404F30(dwArg00, out edi_208);
		*(fp - 0x28) = 4234124;
		*(fp - 44) = fp - 0x14;
		word32 edi_214;
		fn00404F30(dwArg00, out edi_214);
		*(fp - 0x30) = ebx_172;
		*(fp - 0x34) = fp - 0x14;
		word32 edi_220;
		fn00404F30(dwArg00, out edi_220);
		*(fp - 0x38) = edi_220;
		*(fp - 0x3C) = fp - 0x14;
		word32 edi_226;
		fn00404F30(dwArg00, out edi_226);
		*(fp - 0x40) = *(ebp_10 - 0x0128);
		*(fp - 0x44) = fp - 0x14;
		word32 edi_233;
		edx_143 = fn00404F30(dwArg00, out edi_233);
		*(fp - 0x48) = 0x00012010;
		*(fp - 0x4C) = 0x00409580;
		*(fp - 0x50) = fp - 0x14;
		word32 ebx_244;
		word32 esi_245;
		word32 edi_246;
		fn004053EA(dwArg00, dwArg04, dwArg08, bArg0A, out ebx_244, out esi_245, out edi_246);
		esp_147 = fp - 0x14;
	}
	struct Eq_15238 * esp_27 = esp_147 - 0x04;
	esp_27->dw0000 = 0x03;
	word32 esi_30;
	word32 edi_31;
	Eq_4 ebp_106 = fn004031EB(dwArg00, out esi_30, out edi_31);
	int3();
	*(esp_27 - 0x04) = esi_30;
	struct Eq_15262 * esi_35 = esp_27->ptr0004;
	byte al_37 = (byte) esi_35->dw000C;
	*(esp_27 - 0x08) = edi_31;
	if ((al_37 & 0x40) == 0x00)
	{
		if ((al_37 & 131) != 0x00)
		{
			*(esp_27 - 0x0C) = (struct Eq_15262 **) esi_35;
			fn00403E18(edx_143, ebp_106, dwArg00);
			*(esp_27 - 0x10) = (struct Eq_15262 **) esi_35;
			word32 ebx_84;
			Eq_4 eax_85 = fn004084DF(ebp_106, dwArg00, out ebx_84);
			*(esp_27 - 0x14) = esi_35->dw0010;
			if (fn0040842C(eax_85, ebx_84, dwArg00) >= 0x00)
			{
				ui32 eax_97 = esi_35->dw001C;
				if (eax_97 != 0x00)
				{
					*(esp_27 - 0x0C) = eax_97;
					word32 edx_104;
					word32 ebx_105;
					word32 edi_107;
					fn0040403C(ebp_106, dwArg00, out edx_104, out ebx_105, out ebp_106, out edi_107);
					esi_35->dw001C = esi_35->dw001C & 0x00;
				}
			}
		}
	}
	esi_35->dw000C = esi_35->dw000C & 0x00;
	return ebp_106;
}

// 004070AD: Register Eq_4 fn004070AD(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out Eq_10124 cxOut, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out (ptr Eq_10127) ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_4 fn004070AD(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_10124 & cxOut, ptr32 & edxOut, ptr32 & ebxOut, Eq_10127 * & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	*edxOut = edx;
	ptr32 esp_19 = fp - 0x08;
	Eq_4 ebp_10 = fn00403BD0(ebx, esi, edi, dwLoc0C, 0x00409D40, 0x1C);
	if (globals->dw40BC70 == 0x00)
	{
		*(fp - 0x0C) = ebp_10 - 0x1C;
		*(fp - 0x10) = 0x01;
		*(fp - 0x14) = 4234556;
		*(fp - 0x18) = 0x01;
		esp_19 = fp - 0x18;
		if (GetStringTypeW(*(fp - 0x18), *(fp - 0x14), *(fp - 0x10), *(fp - 0x0C)) != 0x00)
			globals->dw40BC70 = 0x01;
		else if (GetLastError() == 0x78)
			globals->dw40BC70 = 0x02;
	}
	Eq_4 eax_119;
	word32 eax_21 = globals->dw40BC70;
	if (eax_21 != 0x02 && eax_21 != 0x00)
	{
		if (eax_21 == 0x01)
		{
			*(ebp_10 - 0x24) = 0x00;
			*(ebp_10 - 0x20) = 0x00;
			if (*((word32) ebp_10 + 0x0018) == 0x00)
				*((word32) ebp_10 + 0x0018) = globals->t40BC64;
			union Eq_4 * esp_166 = esp_19 - 0x04;
			*esp_166 = (union Eq_4 *) 0x00;
			*(esp_166 - 0x04) = 0x00;
			*(esp_166 - 0x08) = (byte **) *((word32) ebp_10 + 0x0010);
			*(esp_166 - 0x0C) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
			*(esp_166 - 0x10) = (word32) (*((word32) ebp_10 + 0x0020) != 0x00) * 0x08 + 0x01;
			*(esp_166 - 0x14) = (union Eq_4 *) *((word32) ebp_10 + 0x0018);
			Eq_4 eax_187 = MultiByteToWideChar(*(esp_166 - 0x14), *(esp_166 - 0x10), *(esp_166 - 0x0C), *(esp_166 - 0x08), *(esp_166 - 0x04), *esp_166);
			*(ebp_10 - 0x28) = (union Eq_4 *) eax_187;
			Eq_4 edi_188 = eax_187;
			if (eax_187 != 0x00)
			{
				*(ebp_10 - 0x04) = *(ebp_10 - 0x04) & 0x00;
				fn00403D30(eax_187 * 0x02 + 0x03 & ~0x03, 0x1C);
				*(ebp_10 - 0x18) = esp_166 - 0x14;
				*(ebp_10 - 44) = esp_166 - 0x14;
				*(esp_166 - 0x18) = eax_187 * 0x02;
				*(esp_166 - 0x1C) = 0x00;
				*(esp_166 - 0x20) = esp_166 - 0x14;
				word32 edx_212;
				*edxOut = fn004045E0(dwArg00, bArg04, dwArg08);
				*(ebp_10 - 0x04) = *(ebp_10 - 0x04) | ~0x00;
				Eq_4 esi_203 = esp_166 - 0x14;
				if (esp_166 != (union Eq_4 *) 0x14)
				{
l004071B6:
					ptr32 esp_222 = esp_19 - 0x18;
					*(esp_222 - 0x04) = (union Eq_4 *) edi_188;
					*(esp_222 - 0x08) = (union Eq_4 *) esi_203;
					*(esp_222 - 0x0C) = (byte **) *((word32) ebp_10 + 0x0010);
					*(esp_222 - 0x10) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
					*(esp_222 - 0x14) = 0x01;
					*(esp_222 - 0x18) = (union Eq_4 *) *((word32) ebp_10 + 0x0018);
					ptr32 esp_240 = esp_222 - 0x18;
					Eq_4 eax_242 = MultiByteToWideChar(*(esp_222 - 0x18), *(esp_222 - 0x14), *(esp_222 - 0x10), *(esp_222 - 0x0C), *(esp_222 - 0x08), *(esp_222 - 0x04));
					if (eax_242 != 0x00)
					{
						*(esp_222 - 0x1C) = (union Eq_15688 *) *((word32) ebp_10 + 0x0014);
						*(esp_222 - 0x20) = (union Eq_4 *) eax_242;
						*(esp_222 - 0x24) = (union Eq_4 *) esi_203;
						*(esp_222 - 0x28) = (union Eq_4 *) *((word32) ebp_10 + 0x08);
						*(ebp_10 - 0x24) = (union Eq_4 *) GetStringTypeW(*(esp_222 - 0x28), *(esp_222 - 0x24), *(esp_222 - 0x20), *(esp_222 - 0x1C));
						esp_240 = esp_222 - 0x28;
					}
					if (*(ebp_10 - 0x20) != 0x00)
					{
						*(esp_240 - 0x04) = (union Eq_4 *) esi_203;
						word32 edx_261;
						word32 ebx_262;
						word32 edi_264;
						fn0040403C(ebp_10, dwArg00, out edx_261, out ebx_262, out ebp_10, out edi_264);
					}
					eax_119 = *(ebp_10 - 0x24);
					goto l0040725E;
				}
				*(esp_166 - 0x18) = (union Eq_4 *) eax_187;
				*(esp_166 - 0x1C) = 0x02;
				word32 edx_284;
				word32 ebx_285;
				word32 esi_286;
				Eq_4 eax_288 = fn00404245(eax_187 * 0x02, ebp_10, dwArg00, dwArg04, out edx_284, out ebx_285, out esi_286, out edi_188);
				esi_203 = eax_288;
				if (eax_288 != 0x00)
				{
					*(ebp_10 - 0x20) = 0x01;
					goto l004071B6;
				}
			}
		}
		goto l00407216;
	}
	Eq_4 ebx_156 = *((word32) ebp_10 + 0x001C);
	if (ebx_156 == 0x00)
		ebx_156 = globals->t40BC54;
	Eq_4 edi_155 = *((word32) ebp_10 + 0x0018);
	if (edi_155 == 0x00)
		edi_155 = globals->t40BC64;
	union Eq_4 * esp_72 = esp_19 - 0x04;
	*esp_72 = (union Eq_4 *) ebx_156;
	Eq_3 edx_76;
	Eq_4 edi_79;
	Eq_4 ebx_145;
	Eq_4 esi_150;
	Eq_4 eax_80 = fn0040850A(cx, edx, ebx_156, 0x00, edi_155, dwArg00, out edx_76, out ebx_145, out esi_150, out edi_79);
	if (eax_80 != ~0x00)
	{
		if (eax_80 != edi_79)
		{
			*esp_72 = (union Eq_4 *) 0x00;
			*(esp_72 - 0x04) = 0x00;
			*(esp_72 - 0x08) = (word32) ebp_10 + 0x0010;
			*(esp_72 - 0x0C) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
			*(esp_72 - 0x10) = (union Eq_4 *) eax_80;
			*(esp_72 - 0x14) = (union Eq_4 *) edi_79;
			word32 edx_144;
			word32 edi_147;
			Eq_4 eax_148 = fn0040854D(edx_76, ebx_145, esi_150, edi_79, out edx_144, out ebx_145, out ebp_10, out edi_147);
			esi_150 = eax_148;
			if (eax_148 == 0x00)
				goto l00407216;
			*((word32) ebp_10 + 0x0C) = eax_148;
		}
		union Eq_15688 * esp_95 = esp_19 - 0x04;
		*esp_95 = (union Eq_15688 *) *((word32) ebp_10 + 0x0014);
		*(esp_95 - 0x04) = (byte **) *((word32) ebp_10 + 0x0010);
		*(esp_95 - 0x08) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
		*(esp_95 - 0x0C) = (union Eq_4 *) *((word32) ebp_10 + 0x08);
		*(esp_95 - 0x10) = (union Eq_4 *) ebx_145;
		Eq_4 edi_109 = GetStringTypeA(*(esp_95 - 0x10), *(esp_95 - 0x0C), *(esp_95 - 0x08), *(esp_95 - 0x04), *esp_95);
		if (esi_150 != 0x00)
		{
			*(esp_95 - 0x14) = (union Eq_4 *) esi_150;
			word32 edx_123;
			word32 ebx_124;
			fn0040403C(ebp_10, dwArg00, out edx_123, out ebx_124, out ebp_10, out edi_109);
		}
		eax_119 = edi_109;
l0040725E:
		word32 ebx_38;
		word32 ebp_39;
		word32 esi_40;
		word32 edi_41;
		word16 cx_42;
		*cxOut = fn00403C0B(ebp_10, 0x1C, dwArg00, dwArg04, dwArg08, out ebx_38, out ebp_39, out esi_40, out edi_41);
		return eax_119;
	}
	else
	{
l00407216:
		eax_119.u0 = 0x00;
		goto l0040725E;
	}
}

// 00407267: Register Eq_4 fn00407267(Register Eq_4 eax, Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack Eq_4 dwArg0C, Register out ptr32 edxOut)
Eq_4 fn00407267(Eq_4 eax, Eq_4 ebp, Eq_4 dwArg04, Eq_4 dwArg08, Eq_4 dwArg0C, ptr32 & edxOut)
{
}

// 00407455: Register word16 fn00407455(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word16 fn00407455(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
}

// 004080DE: Register Eq_4 fn004080DE(Register Eq_4 ebx, Register Eq_4 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Register out ptr32 edxOut)
Eq_4 fn004080DE(Eq_4 ebx, Eq_4 ebp, Eq_4 dwArg04, Eq_4 dwArg08, ptr32 & edxOut)
{
}

// 00408240: Register Eq_4 fn00408240(Stack Eq_4 dwArg04)
Eq_4 fn00408240(Eq_4 dwArg04)
{
	if (globals->dw40BEC4 != 0x03)
		return HeapSize(globals->t40BEC0, 0x00, dwArg04);
	word32 edx_38;
	if (fn00405D85(dwArg04, out edx_38) == 0x00)
		return HeapSize(globals->t40BEC0, 0x00, dwArg04);
	return *(dwArg04 - 0x04) - 0x09;
}

// 00408278: Register Eq_4 fn00408278(Stack Eq_4 dwArg04)
Eq_4 fn00408278(Eq_4 dwArg04)
{
}

// 004082D7: Register Eq_3 fn004082D7(Register Eq_3 edx, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack Eq_3 dwArg0C, Stack Eq_4 dwArg10, Register out Eq_14821 esiOut, Register out ptr32 ediOut)
Eq_3 fn004082D7(Eq_3 edx, Eq_4 dwArg04, Eq_4 dwArg08, Eq_3 dwArg0C, Eq_4 dwArg10, Eq_14821 & esiOut, ptr32 & ediOut)
{
	struct Eq_18651 * esp_124;
	Eq_3 edx_138;
	if (dwArg04 < globals->t40BEC8)
	{
		struct Eq_18675 ** edi_95 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		int32 esi_97 = (dwArg04 & 0x1F) << 0x03;
		if ((((char *) *edi_95 + 0x04)[esi_97] & 0x01) != 0x00)
		{
			Eq_4 eax_109 = fn004083F0(dwArg04);
			if (eax_109 != ~0x00)
			{
				esp_124 = fp - 0x24;
				if (SetFilePointer(eax_109, dwArg08, fp - 0x08, dwArg10) == ~0x00)
				{
					Eq_4 eax_139 = GetLastError();
					if (eax_139 != 0x00)
					{
						fn00408278(eax_139);
						esp_124 = fp - 0x24;
l0040836C:
						edx_138 = edx | ~0x00;
l00408372:
						word32 edi_38;
						*ediOut = esp_124->dw0000;
						word32 esi_40;
						*esiOut = esp_124->dw0004;
						return edx_138;
					}
				}
				byte * eax_132 = (char *) *edi_95 + 0x04 + esi_97;
				*eax_132 = *eax_132 & ~0x02;
				edx_138 = dwArg0C;
				goto l00408372;
			}
l00408362:
			globals->t40BA50.u0 = 0x09;
			esp_124 = fp - 0x14;
			goto l0040836C;
		}
	}
	globals->t40BA54 = globals->t40BA54 & 0x00;
	goto l00408362;
}

// 00408376: void fn00408376(Register Eq_4 eax, Stack Eq_4 dwArg04)
void fn00408376(Eq_4 eax, Eq_4 dwArg04)
{
	if (dwArg04 < globals->t40BEC8)
	{
		Eq_18792 (** edi_45)[] = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		Eq_18792 (* esi_48)[] = (dwArg04 & 0x1F) << 0x03;
		word32 eax_49 = Mem0[edi_45 + 0x00:word32] + esi_48;
		if ((eax_49->b0004 & 0x01) != 0x00 && eax_49->dw0000 != ~0x00)
		{
			if (globals->dw40B0BC == 0x01)
			{
				Eq_4 dwLoc10_77;
				if (dwArg04 != 0x00)
				{
					if (dwArg04 != 0x01)
					{
						if (dwArg04 != 0x02)
							goto l004083CF;
						dwLoc10_77.u0 = ~0x0B;
					}
					else
						dwLoc10_77.u0 = ~0x0A;
				}
				else
					dwLoc10_77.u0 = ~0x09;
				SetStdHandle(dwLoc10_77, 0x00);
			}
l004083CF:
			Eq_18792 (* eax_63)[] = *edi_45;
			Mem65[esi_48 + eax_63:word32] = Mem0[esi_48 + eax_63:word32] | ~0x00;
			return;
		}
	}
	globals->t40BA54 = globals->t40BA54 & 0x00;
	globals->t40BA50.u0 = 0x09;
}

// 004083F0: Register ui32 fn004083F0(Stack Eq_4 dwArg04)
ui32 fn004083F0(Eq_4 dwArg04)
{
	Eq_4 eax_16 = dwArg04;
	if (dwArg04 < globals->t40BEC8)
	{
		eax_16 = (&globals->t40BEE0)[dwArg04 >> 0x05] + (dwArg04 & 0x1F) * 0x08;
		if ((*((word32) eax_16 + 0x04) & 0x01) != 0x00)
			return *eax_16;
	}
	globals->t40BA54 = globals->t40BA54 & 0x00;
	globals->t40BA50.u0 = 0x09;
	return eax_16 | ~0x00;
}

// 0040842C: Register Eq_4 fn0040842C(Register Eq_4 eax, Register word32 ebx, Stack Eq_4 dwArg04)
Eq_4 fn0040842C(Eq_4 eax, word32 ebx, Eq_4 dwArg04)
{
	Eq_4 eax_101;
	if (dwArg04 < globals->t40BEC8)
	{
		union Eq_4 * ebx_67 = (dwArg04 >> 0x05) * 0x04 + 0x0040BEE0;
		eax = *ebx_67;
		int32 esi_69 = (dwArg04 & 0x1F) << 0x03;
		if (((word32) eax + 0x04 + esi_69 & 0x01) != 0x00)
		{
			Eq_4 ebp_111;
			Eq_4 eax_109 = fn004083F0(dwArg04);
			ptr32 esp_110 = fp - 0x10;
			if (eax_109 != ~0x00)
			{
				if (dwArg04 == 0x01 || dwArg04 == 0x02)
				{
					Eq_4 eax_134 = fn004083F0(0x02);
					eax_109 = fn004083F0(0x01);
					esp_110 = fp - 0x10;
					if (eax_109 == eax_134)
						goto l004084A5;
				}
				esp_110 = fp - 0x14;
				eax_109 = CloseHandle(fn004083F0(dwArg04));
				if (eax_109 == 0x00)
				{
					eax_109 = GetLastError();
					ebp_111 = eax_109;
l004084A7:
					union Eq_4 * esp_86 = esp_110 - 0x04;
					*esp_86 = (union Eq_4 *) dwArg04;
					fn00408376(eax_109, dwArg00);
					((char *) *ebx_67 + 0x04)[esi_69] = 0x00;
					if (ebp_111 == 0x00)
					{
						eax_101.u0 = 0x00;
						return eax_101;
					}
					*esp_86 = (union Eq_4 *) ebp_111;
					eax = fn00408278(dwArg00);
l004084D7:
					eax_101 = eax | ~0x00;
					return eax_101;
				}
			}
l004084A5:
			ebp_111.u0 = 0x00;
			goto l004084A7;
		}
	}
	globals->t40BA54 = globals->t40BA54 & 0x00;
	globals->t40BA50.u0 = 0x09;
	goto l004084D7;
}

// 004084DF: Register Eq_4 fn004084DF(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 ebxOut)
Eq_4 fn004084DF(Eq_4 ebp, Eq_4 dwArg04, ptr32 & ebxOut)
{
	*ebxOut = ebx;
	Eq_4 eax_25 = *((word32) dwArg04 + 0x0C);
	byte al_9 = (byte) eax_25;
	if ((al_9 & 131) != 0x00 && (al_9 & 0x08) != 0x00)
	{
		word32 edx_40;
		word32 ebx_41;
		word32 ebp_42;
		word32 edi_43;
		fn0040403C(ebp, *((word32) dwArg04 + 0x08), out edx_40, out ebx_41, out ebp_42, out edi_43);
		*((word32) dwArg04 + 0x0C) = *((word32) dwArg04 + 0x0C) & ~0x0408;
		*dwArg04 = 0x00;
		((word32) dwArg04 + 0x08)->u0 = 0x00;
		*((word32) dwArg04 + 0x04) = 0x00;
		eax_25.u0 = 0x00;
	}
	return eax_25;
}

// 0040850A: Register ui32 fn0040850A(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
ui32 fn0040850A(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	*esiOut = esi;
	*edxOut = edx;
	*ebxOut = ebx;
	*ediOut = edi;
	ui32 eax_30;
	ptr32 ebp_33 = fp - 0x04;
	int32 eax_22 = GetLocaleInfoA(dwArg04, 0x1004, fp - 0x10, 0x06);
	if (eax_22 == 0x00)
		eax_30 = eax_22 | ~0x00;
	else
		eax_30 = fn004089CE(cx, edx, ebx, esi, edi, fp - 0x10, out edx, out ebx, out ebp_33, out edi);
	fn004041A2(*(ebp_33 - 0x04), edx, ebx, esi, edi);
	return eax_30;
}

// 0040854D: Register word32 fn0040854D(Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out (ptr Eq_16261) ebpOut, Register out ptr32 ediOut)
word32 fn0040854D(Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, ptr32 & edxOut, ptr32 & ebxOut, Eq_16261 * & ebpOut, ptr32 & ediOut)
{
	*edxOut = edx;
	word32 eax_108;
	Eq_4 ebp_10 = fn00403BD0(ebx, esi, edi, dwLoc0C, 4234648, 0x38);
	*(ebp_10 - 0x1C) = (union Eq_4 *) globals->t40B498;
	*(ebp_10 - 0x34) = 0x00;
	*(ebp_10 - 0x44) = 0x00;
	Eq_4 ebx_105 = **((word32) ebp_10 + 0x0014);
	*(ebp_10 - 0x40) = (union Eq_4 *) ebx_105;
	*(ebp_10 - 0x3C) = 0x00;
	ptr32 esp_160 = fp - 0x08;
	Eq_4 edi_107 = 0x00;
	Eq_4 eax_21 = *((word32) ebp_10 + 0x08);
	if (eax_21 == *((word32) ebp_10 + 0x0C))
	{
		ebx_105 = *(ebp_10 - 0x48);
		goto l004086F6;
	}
	*(fp - 0x0C) = ebp_10 - 0x30;
	*(fp - 0x10) = (union Eq_4 *) eax_21;
	Eq_4 esp_333 = fp - 0x10;
	if (GetCPInfo(*(fp - 0x10), *(fp - 0x0C)) != 0x00 && *(ebp_10 - 0x30) == 0x01)
	{
		*(fp - 0x14) = ebp_10 - 0x30;
		*(fp - 0x18) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
		esp_333 = fp - 0x18;
		if (GetCPInfo(*(fp - 0x18), *(fp - 0x14)) != 0x00 && *(ebp_10 - 0x30) == 0x01)
			*(ebp_10 - 0x3C) = 0x01;
	}
	if (*(ebp_10 - 0x3C) != 0x00)
	{
		if (ebx_105 != ~0x00)
			esi = ebx_105;
		else
		{
			*(esp_333 - 0x04) = (byte **) *((word32) ebp_10 + 0x0010);
			esi = (char *) fn00404080(dwArg00, out edx) + 0x01;
		}
		*(ebp_10 - 0x38) = (union Eq_4 *) esi;
	}
	else
		esi = *(ebp_10 - 0x38);
	Eq_4 esp_113 = esp_333;
	if (*(ebp_10 - 0x3C) == 0x00)
	{
		union Eq_4 * esp_286 = esp_333 - 0x04;
		*esp_286 = (union Eq_4 *) 0x00;
		*(esp_286 - 0x04) = 0x00;
		*(esp_286 - 0x08) = (union Eq_4 *) ebx_105;
		*(esp_286 - 0x0C) = (byte **) *((word32) ebp_10 + 0x0010);
		*(esp_286 - 0x10) = 0x01;
		*(esp_286 - 0x14) = (union Eq_4 *) *((word32) ebp_10 + 0x08);
		Eq_4 eax_300 = MultiByteToWideChar(*(esp_286 - 0x14), *(esp_286 - 0x10), *(esp_286 - 0x0C), *(esp_286 - 0x08), *(esp_286 - 0x04), *esp_286);
		*(ebp_10 - 0x38) = (union Eq_4 *) eax_300;
		esp_113 = esp_286 - 0x14;
		esi = eax_300;
		if (eax_300 == 0x00)
			goto l0040864A;
	}
	*(ebp_10 - 0x04) = 0x00;
	fn00403D30(esi * 0x02 + 0x03 & ~0x03, 0x38);
	*(ebp_10 - 0x18) = (union Eq_4 *) esp_113;
	*(ebp_10 - 0x48) = (union Eq_4 *) esp_113;
	union Eq_4 * esp_125 = esp_113 - 0x04;
	*esp_125 = (union Eq_4 *) (esi * 0x02);
	*(esp_125 - 0x04) = 0x00;
	*(esp_125 - 0x08) = (union Eq_4 *) esp_113;
	*edxOut = fn004045E0(dwArg00, bArg04, dwArg08);
	*(ebp_10 - 0x04) = *(ebp_10 - 0x04) | ~0x00;
	ebx_105 = esp_113;
	if (esp_113 == 0x00)
	{
		*esp_125 = (union Eq_4 *) esi;
		*(esp_125 - 0x04) = 0x02;
		word32 ebx_274;
		Eq_4 eax_277 = fn00404245(esp_113, ebp_10, dwArg00, dwArg04, out edx, out ebx_274, out esi, out edi_107);
		ebx_105 = eax_277;
		if (eax_277 == edi_107)
		{
l0040864A:
			eax_108 = 0x00;
			goto l00408705;
		}
		*(ebp_10 - 0x44) = 0x01;
	}
	union Eq_4 * esp_147 = esp_113 - 0x04;
	*esp_147 = (union Eq_4 *) esi;
	*(esp_147 - 0x04) = (union Eq_4 *) ebx_105;
	*(esp_147 - 0x08) = *(ebp_10 - 0x40);
	*(esp_147 - 0x0C) = (byte **) *((word32) ebp_10 + 0x0010);
	*(esp_147 - 0x10) = 0x01;
	*(esp_147 - 0x14) = (union Eq_4 *) *((word32) ebp_10 + 0x08);
	esp_160 = esp_147 - 0x14;
	if (MultiByteToWideChar(*(esp_147 - 0x14), *(esp_147 - 0x10), *(esp_147 - 0x0C), *(esp_147 - 0x08), *(esp_147 - 0x04), *esp_147) != 0x00)
	{
		if (*((word32) ebp_10 + 0x0018) != edi_107)
		{
			*(esp_147 - 0x18) = (union Eq_4 *) edi_107;
			*(esp_147 - 0x1C) = (union Eq_4 *) edi_107;
			*(esp_147 - 0x20) = (union Eq_4 *) *((word32) ebp_10 + 0x001C);
			*(esp_147 - 0x24) = (union Eq_4 *) *((word32) ebp_10 + 0x0018);
			*(esp_147 - 0x28) = (union Eq_4 *) esi;
			*(esp_147 - 44) = (union Eq_4 *) ebx_105;
			*(esp_147 - 0x30) = (union Eq_4 *) edi_107;
			*(esp_147 - 0x34) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
			esp_160 = esp_147 - 0x34;
			if (WideCharToMultiByte(*(esp_147 - 0x34), *(esp_147 - 0x30), *(esp_147 - 44), *(esp_147 - 0x28), *(esp_147 - 0x24), *(esp_147 - 0x20), *(esp_147 - 0x1C), *(esp_147 - 0x18)) != 0x00)
				*(ebp_10 - 0x34) = (union Eq_4 *) *((word32) ebp_10 + 0x0018);
			goto l004086F6;
		}
		if (*(ebp_10 - 0x3C) != edi_107)
		{
l004086B3:
			union Eq_4 * esp_197 = esp_160 - 0x04;
			*esp_197 = (union Eq_4 *) esi;
			*(esp_197 - 0x04) = 0x01;
			Eq_4 eax_205 = fn00404245(ebx_105, ebp_10, dwArg00, dwArg04, out edx, out ebx_105, out esi, out edi_107);
			*(ebp_10 - 0x34) = (union Eq_4 *) eax_205;
			esp_160 = (char *) esp_197 + 0x04;
			if (eax_205 != edi_107)
			{
				*esp_197 = (union Eq_4 *) edi_107;
				*(esp_197 - 0x04) = (union Eq_4 *) edi_107;
				*(esp_197 - 0x08) = (union Eq_4 *) esi;
				*(esp_197 - 0x0C) = (union Eq_4 *) eax_205;
				*(esp_197 - 0x10) = (union Eq_4 *) esi;
				*(esp_197 - 0x14) = (union Eq_4 *) ebx_105;
				*(esp_197 - 0x18) = (union Eq_4 *) edi_107;
				*(esp_197 - 0x1C) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
				esp_160 = esp_197 - 0x1C;
				Eq_4 eax_230 = WideCharToMultiByte(*(esp_197 - 0x1C), *(esp_197 - 0x18), *(esp_197 - 0x14), *(esp_197 - 0x10), *(esp_197 - 0x0C), *(esp_197 - 0x08), *(esp_197 - 0x04), *esp_197);
				if (eax_230 == edi_107)
				{
					*(esp_197 - 0x20) = *(ebp_10 - 0x34);
					fn0040403C(ebp_10, dwArg00, out edx, out ebx_105, out ebp_10, out edi_107);
					*(ebp_10 - 0x34) = (union Eq_4 *) edi_107;
					esp_160 = esp_197 - 0x1C;
				}
				else if (*(ebp_10 - 0x40) != ~0x00)
					**((word32) ebp_10 + 0x0014) = eax_230;
			}
			goto l004086F6;
		}
		*(esp_147 - 0x18) = (union Eq_4 *) edi_107;
		*(esp_147 - 0x1C) = (union Eq_4 *) edi_107;
		*(esp_147 - 0x20) = (union Eq_4 *) edi_107;
		*(esp_147 - 0x24) = (union Eq_4 *) edi_107;
		*(esp_147 - 0x28) = (union Eq_4 *) esi;
		*(esp_147 - 44) = (union Eq_4 *) ebx_105;
		*(esp_147 - 0x30) = (union Eq_4 *) edi_107;
		*(esp_147 - 0x34) = (union Eq_4 *) *((word32) ebp_10 + 0x0C);
		Eq_4 eax_265 = WideCharToMultiByte(*(esp_147 - 0x34), *(esp_147 - 0x30), *(esp_147 - 44), *(esp_147 - 0x28), *(esp_147 - 0x24), *(esp_147 - 0x20), *(esp_147 - 0x1C), *(esp_147 - 0x18));
		esp_160 = esp_147 - 0x34;
		esi = eax_265;
		if (eax_265 != edi_107)
			goto l004086B3;
	}
l004086F6:
	if (*(ebp_10 - 0x44) != edi_107)
	{
		*(esp_160 - 0x04) = (union Eq_4 *) ebx_105;
		fn0040403C(ebp_10, dwArg00, out edx, out ebx_105, out ebp_10, out edi_107);
	}
	eax_108 = *(ebp_10 - 0x34);
l00408705:
	fn004041A2(*(ebp_10 - 0x1C), edx, ebx_105, esi, edi_107);
	word32 ebx_39;
	word32 ebp_40;
	word32 esi_41;
	word32 edi_42;
	fn00403C0B(ebp_10, 0x38, dwArg00, dwArg04, dwArg08, out ebx_39, out ebp_40, out esi_41, out edi_42);
	return eax_108;
}

// 004089CE: Register int32 fn004089CE(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
int32 fn004089CE(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	*ediOut = edi;
	*ebpOut = ebp;
	Eq_4 esi_101 = dwArg04;
	while (true)
	{
		*(fp - 0x08) = (word32) *esi_101;
		struct Eq_19873 * esi_25;
		word32 eax_26 = fn00408A26(cx, edx, ebx, esi_101, edi, dwArg00, bArg02, bArg03, out edx, out ebx, out esi_25);
		cx = (word16) *(fp - 0x08);
		if (eax_26 == 0x00)
			break;
		esi_101 = &esi_25->b0001;
	}
	int32 ecx_41;
	int32 ecx_33 = (word32) esi_25->b0000;
	byte * esi_35 = &esi_25->b0001;
	word32 edx_38;
	*edxOut = ecx_33;
	if (ecx_33 != 0x2D)
	{
		ecx_41 = ecx_33;
		if (ecx_33 != 0x2B)
		{
l004089F8:
			int32 eax_44 = 0x00;
			while (true)
			{
				int32 ecx_57;
				if (ecx_41 >= 0x30 && ecx_41 <= 0x39)
					ecx_57 = ecx_41 - 0x30;
				else
					ecx_57 = ecx_41 | ~0x00;
				if (ecx_57 == ~0x00)
					break;
				eax_44 = ecx_57 + (eax_44 * 0x05) * 0x02;
				ecx_41 = (word32) *esi_35;
				esi_35 = esi_35 + 0x01;
			}
			if (ecx_33 == 0x2D)
				eax_44 = -eax_44;
			return eax_44;
		}
	}
	ecx_41 = (word32) esi_25->b0001;
	esi_35 = (byte *) (&esi_25->b0001 + 0x01);
	goto l004089F8;
}

// 00408A26: Register Eq_4 fn00408A26(Register word16 cx, Register Eq_3 edx, Register Eq_4 ebx, Register Eq_4 esi, Register Eq_4 edi, Stack Eq_4 dwArg04, Stack byte bArg06, Stack byte bArg07, Register out ptr32 edxOut, Register out ptr32 ebxOut, Register out ptr32 esiOut)
Eq_4 fn00408A26(word16 cx, Eq_3 edx, Eq_4 ebx, Eq_4 esi, Eq_4 edi, Eq_4 dwArg04, byte bArg06, byte bArg07, ptr32 & edxOut, ptr32 & ebxOut, ptr32 & esiOut)
{
	*edxOut = edx;
	*ebxOut = ebx;
	*esiOut = esi;
	word16 cx_12 = (word16) dwArg04;
	if (dwArg04 <= 0xFF)
	{
		if (globals->t40B4A0 <= 0x01)
			return (word32) globals->ptr40B490[dwArg04].t0000 & 0x08;
		word32 edx_146;
		word32 ebx_147;
		word32 edi_148;
		return fn00404318(ebx, esi, edi, dwArg04, out edx_146, out ebx_147, out edi_148);
	}
	else
	{
		if (globals->dw40BC98 == 0x00)
			return 0x00;
		word16 cx_115;
		word32 edx_116;
		word32 ebx_117;
		ptr32 ebp_118;
		word32 esi_119;
		word32 edi_120;
		if (fn004070AD(cx_12, edx, ebx, esi, edi, out cx_115, out edx_116, out ebx_117, out ebp_118, out esi_119, out edi_120) == 0x00 || (*(ebp_118 - 0x02) != 0x00 || (*(ebp_118 - 0x04) & 0x08) == 0x00))
			return 0x00;
		return 0x01;
	}
}

