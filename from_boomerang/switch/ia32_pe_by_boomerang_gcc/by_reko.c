// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_text.h"

// 00401000: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	if (g_dw403000 != 0x00)
		int3();
	__fldcw((word16) ((word32) (word16) ((word32) __fstcw() & ~0x0F3F) | 0x033F));
	fn00401470(&g_dw401080);
}

// 00401470: void fn00401470(Stack (ptr32 word32) dwArg04)
// Called from:
//      Win32CrtStartup
void fn00401470(word32 * dwArg04)
{
	ptr32 esp_25 = fp - 0x1C;
	if (fn00401530(fp - 4, dwArg04, null) != 0x00)
	{
l0040149D:
		cygwin1.dll!dll_crt0__FP11per_process();
	}
	struct Eq_45 * esp_42 = esp_25 - 0xB0;
	esp_42->dw0008 = 0x00;
	esp_42->ptr0004 = (struct Eq_38 *) &esp_42->dw0008;
	esp_42->ptr0000 = dwArg04;
	fn00401530(fp - 4, esp_42->ptr0000, esp_42->ptr0004);
	esp_42->ptr0000 = &esp_42->dw0008;
	goto l0040149D;
}

// 00401530: Register word32 fn00401530(Register ptr32 ebp, Stack (ptr32 word32) dwArg04, Stack (ptr32 Eq_38) dwArg08)
// Called from:
//      fn00401470
word32 fn00401530(ptr32 ebp, word32 * dwArg04, struct Eq_38 * dwArg08)
{
	word32 eax_106;
	word32 eax_29 = 0x00;
	LPCSTR * esp_12 = fp - 0x0C;
	struct Eq_38 * ebx_13 = dwArg08;
	if (dwArg08 == null)
	{
		struct Eq_38 * eax_19;
		cygwin1.dll!cygwin_internal();
		eax_106 = 0x00;
		if (eax_19 == (struct Eq_38 *) ~0x00)
			return eax_106;
		ebx_13 = eax_19;
		eax_29 = 0x01;
	}
	ebx_13->dw0004 = 0xA8;
	ebx_13->dw0008 = 1005;
	ebx_13->dw000C = 0x09;
	ebx_13->dw0080 = 0x00;
	ebx_13->dw0084 = 0x70;
	ebx_13->dw002C = 0x004017A0;
	ebx_13->dw0030 = 4200364;
	ebx_13->dw0014 = 0x00403020;
	if (eax_29 != 0x00)
		g_dw403024 = ebx_13->dw00A4;
	else
		ebx_13->dw0010 = 0x00403024;
	ebx_13->dw0078 = 0x00;
	ebx_13->dw0048 = 4200240;
	ebx_13->dw004C = 4200224;
	ebx_13->ptr0028 = dwArg04;
	ebx_13->dw0050 = 0x00401710;
	ebx_13->dw0054 = 0x00401700;
	ebx_13->dw0024 = 0x00403028;
	ebx_13->dw0000 = ebp;
	ebx_13->dw0018 = 0x00401510;
	ebx_13->dw001C = 0x004014F0;
	ebx_13->dw0020 = 0x004016F0;
	ebx_13->dw0044 = 0x004016E0;
	*esp_12 = (LPCSTR *) null;
	ebx_13->t007C = GetModuleHandleA(*esp_12);
	ebx_13->dw0034 = 0x00402000;
	ebx_13->dw0038 = 0x00402010;
	ebx_13->dw003C = 0x00403000;
	ebx_13->dw0040 = 0x00403080;
	fn004016B0();
	eax_106 = 0x01;
	return eax_106;
}

// 00401670: void fn00401670(Stack (ptr32 Eq_216) dwArg04, Stack (ptr32 Eq_216) dwArg08, Stack word32 dwArg0C)
// Called from:
//      fn004016B0
void fn00401670(struct Eq_216 * dwArg04, struct Eq_216 * dwArg08, word32 dwArg0C)
{
	struct Eq_216 * ecx_22 = dwArg04;
	if (dwArg04 < dwArg08)
	{
		do
		{
			word32 * edx_27 = dwArg0C + ecx_22->dw0004;
			*edx_27 += ecx_22->dw0000;
			++ecx_22;
		} while (ecx_22 < dwArg08);
	}
}

// 004016B0: void fn004016B0()
// Called from:
//      fn00401530
void fn004016B0()
{
	fn00401670(&g_dw403000, &g_dw403000, 0x00400000);
}

