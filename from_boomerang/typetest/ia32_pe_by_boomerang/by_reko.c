// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_text.h"

// 004019E0: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	fs->ptr0000 = fp - 20;
	__set_app_type(0x02);
	g_dw40312C = ~0x00;
	g_dw403130 = ~0x00;
	*__p__fmode() = g_dw403120;
	*__p__commode() = g_dw40311C;
	g_dw403128 = *adjust_fdiv;
	fn00401BE0();
	if (g_dw403040 == 0x00)
		__setusermatherr(&g_t401BD0);
	fn00401BB0();
	_initterm(&g_t403010, &g_t403014);
	__getmainargs(fp - 100, fp - 116, fp - 0x68, g_dw403114);
	_initterm(&g_t403000, &g_t40300C);
	struct Eq_79 * esp_96;
	cu8 ** eax_97;
	_p__acmdln();
	cu8 * esi_102 = *eax_97;
	if (*esi_102 == 0x22)
	{
		do
		{
			++esi_102;
			cu8 al_118 = *esi_102;
		} while (al_118 != 0x00 && al_118 != 0x22);
		if (*esi_102 == 0x22)
			++esi_102;
	}
	else
	{
		while (*esi_102 > 0x20)
			++esi_102;
	}
	while (true)
	{
		cu8 al_134 = *esi_102;
		if (al_134 == 0x00 || al_134 > 0x20)
			break;
		++esi_102;
	}
	Eq_127 eax_152;
	esp_96->tFFFFFFFC = fp - 0x60;
	GetStartupInfoA(esp_96->tFFFFFFFC);
	if (0x00 != 0x00)
		eax_152 = dwLoc30 & 0xFFFF;
	else
		&eax_152.u0->unused = 0x0A;
	esp_96->tFFFFFFFC = eax_152;
	esp_96->ptrFFFFFFF8 = esi_102;
	esp_96->dwFFFFFFF4 = 0x00;
	&esp_96->tFFFFFFF0.u0->unused = 0x00;
	Eq_127 eax_169 = GetModuleHandleA(esp_96->tFFFFFFF0);
	esp_96->tFFFFFFF0 = eax_169;
	fn00401BFC(esp_96->tFFFFFFF0, esp_96->dwFFFFFFF4, esp_96->ptrFFFFFFF8, esp_96->tFFFFFFFC);
	esp_96->tFFFFFFFC = eax_169;
	exit(esp_96->tFFFFFFFC);
}

// 00401BB0: void fn00401BB0()
// Called from:
//      Win32CrtStartup
void fn00401BB0()
{
	_controlfp(0x00010000, 0x00030000);
}

// 00401BE0: void fn00401BE0()
// Called from:
//      Win32CrtStartup
void fn00401BE0()
{
}

// 00401BFC: void fn00401BFC(Stack Eq_127 dwArg04, Stack word32 dwArg08, Stack (ptr32 cu8) dwArg0C, Stack Eq_127 dwArg10)
// Called from:
//      Win32CrtStartup
void fn00401BFC(Eq_127 dwArg04, word32 dwArg08, cu8 * dwArg0C, Eq_127 dwArg10)
{
	MFC42.DLL!Ordinal_1576();
}

