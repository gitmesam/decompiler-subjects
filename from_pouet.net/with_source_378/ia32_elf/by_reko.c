// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048450: void SDL_Quit()
void SDL_Quit()
{
}

// 08048460: void dlsym()
void dlsym()
{
}

// 08048470: void SDL_PauseAudio()
void SDL_PauseAudio()
{
}

// 08048480: void SDL_GetTicks()
void SDL_GetTicks()
{
}

// 08048490: void SDL_OpenAudio()
void SDL_OpenAudio()
{
}

// 080484A0: void SDL_GL_SwapBuffers()
void SDL_GL_SwapBuffers()
{
}

// 080484B0: void SDL_Init()
void SDL_Init()
{
}

// 080484C0: void SDL_PollEvent()
void SDL_PollEvent()
{
}

// 080484D0: void SDL_ShowCursor()
void SDL_ShowCursor()
{
}

// 080484E0: void SDL_SetVideoMode()
void SDL_SetVideoMode()
{
}

// 080484F0: void dlopen()
void dlopen()
{
}

// 08048714: void fn08048714()
void fn08048714()
{
	ptr32 esp_112 = fp - 0x20;
	cu16 * esi_27 = &globals->w804A6B8;
	word16 * edi_28 = &globals->w804A6A0;
	word32 ecx_29 = 0x3C;
	do
	{
		*edi_28 = *esi_27 >> 0x01;
		esi_27 = esi_27 - 0x02;
		edi_28 = edi_28 - 0x02;
		ecx_29 = ecx_29 - 0x01;
	} while (ecx_29 != 0x00);
	struct Eq_28 * edi_42 = globals->a804AB70;
	ui32 ebx_105 = 0x00;
	word32 ecx_107 = 0x00010000;
	do
	{
		word32 eax_136 = 0x7FFF;
		if (((byte) (uint32) ((int64) (ebx_105 * 0x02) /u 0xA8) & 0x01) != 0x00)
			eax_136 = -0x7FFF;
		edi_42->dw0000 = eax_136;
		edi_42 = edi_42 + 0x01;
		edi_42[0x0001FFFF] = (struct Eq_28) ((uint32) ((int64) ((uint32) ((int64) ebx_105 % 0xA8) << 0x10) /u 0xA8) - 0x8000);
		edi_42[0x0002FFFF] = (struct Eq_28) ((fn0804890C() & 0xFFFF) - 0x8000);
		real64 rLoc1_96 = globals->r804A71E;
		rLoc2 = sin(rLoc2) * globals->r804A726;
		globals->dw804A712 = (int32) rLoc2;
		globals->r804A71E = rLoc1_96 + globals->r804A716;
		edi_42[0x0000FFFF] = (struct Eq_28) globals->dw804A712;
		ebx_105 = ebx_105 + 0x01;
		ecx_107 = ecx_107 - 0x01;
	} while (ecx_107 != 0x00);
	struct Eq_109 * ebp_108 = &globals->t804A200;
	word32 ecx_109 = 0x09;
	do
	{
		*(esp_112 - 0x04) = ecx_109;
		word32 * esp_115 = fn080487CB(ebp_108);
		word32 ecx_118 = *esp_115;
		ebp_108 = &ebp_108->dw001C + 0x01;
		esp_112 = esp_115 + 0x01;
		ecx_109 = ecx_118 - 0x01;
	} while (ecx_118 != 0x01);
}

// 080487CB: Register ptr32 fn080487CB(Register (ptr32 Eq_109) ebp)
ptr32 fn080487CB(Eq_109 * ebp)
{
	globals->dw804AB40 = 0x00;
	globals->dw804AB44 = 0x00;
	globals->dw804AB48 = 0x00;
	globals->dw804AB4C = 0x00;
	globals->dw804AB50 = 0x00;
	globals->dw804AB60 = 0x00;
	globals->dw804AB64 = 0x00010000;
	globals->dw804AB68 = (int32) ((int64) (ebp->dw001C << 0x10) / 0x00029040);
	word32 eax_24 = ebp->dw0018;
	if (eax_24 != 0x00)
	{
		Eq_177 edx_eax_67 = (int64) eax_24;
		globals->dw804AB40 = (uint32) (edx_eax_67 /u 0x67);
		globals->dw804AB44 = (word32) ((uint32) (edx_eax_67 % 0x67) * 41698711);
	}
	else
		globals->dw804AB48 = 0x2A;
	Eq_192 ecx_37 = ebp->t0008;
	int32 (* esi_35)[] = (ebp->dw0004 << 0x12) + 0x0804AB70;
	word32 * edi_43 = fn0804888C((uint32) (0x00200000 /u ecx_37), ecx_37, esi_35, (ebp->dw0000 << 0x12) + 0x082CAB70);
	globals->t804AB54 = -globals->t804AB54;
	word32 * edi_55 = fn0804888C(0x00, ebp->t0010, esi_35, fn08048891(ebp->t000C, esi_35, edi_43));
	Eq_192 ecx_56 = ebp->t0014;
	fn0804888C(-(int32) ((int64) globals->dw804AB50 / ecx_56), ecx_56, esi_35, edi_55);
	return fp + 0x04;
}

// 0804888C: Register (ptr32 word32) fn0804888C(Register Eq_207 eax, Register Eq_192 ecx, Register (ptr32 (arr int32)) esi, Register (ptr32 word32) edi)
word32 * fn0804888C(Eq_207 eax, Eq_192 ecx, int32 * esi[], word32 * edi)
{
	globals->t804AB54 = eax;
	return fn08048891(ecx, esi, edi);
}

// 08048891: Register (ptr32 word32) fn08048891(Register Eq_192 ecx, Register (arr int32) esi, Register (ptr32 word32) edi)
word32 * fn08048891(Eq_192 ecx, int32 esi[], word32 * edi)
{
	do
	{
		if (ecx == 0x00)
			return edi;
		globals->dw804AB60 = globals->dw804AB60 + globals->dw804AB64;
		globals->dw804AB64 = globals->dw804AB64 + globals->dw804AB68;
		*edi = (word32) (((word32) ((globals->dw804AB50 >> 0x0A) *s esi[globals->dw804AB60 >> 0x10]) >> 11) *s ((globals->a808AB70)[(globals->dw804AB48 & 0xFFFF) * 0x04] >> 0x04)) >> 0x0C;
		globals->dw804AB50 = (word32) globals->t804AB54 + globals->dw804AB50;
		up32 v17_60 = globals->dw804AB4C + globals->dw804AB44;
		globals->dw804AB4C = v17_60;
		Mem66[0x0804AB48:word32] = Mem61[0x0804AB48:word32] + Mem61[0x0804AB40:word32] + (v17_60 <u 0x00);
		edi = edi + 0x01;
		ecx = ecx - 0x01;
	} while (ecx != 0x00);
	return edi;
}

// 0804890C: Register word32 fn0804890C()
word32 fn0804890C()
{
	word32 eax_8 = __ror(globals->dw804A626 + 4078404302 ^ 4078404302, 0x01);
	globals->dw804A626 = eax_8;
	return eax_8;
}

// 08048930: void fn08048930(Register word32 edi)
void fn08048930(word32 edi)
{
	fn08048714();
	word32 esp_9;
	word32 eax_10;
	byte SZO_11;
	bool C_12;
	byte al_13;
	word16 ax_14;
	byte SCZO_15;
	bool Z_16;
	word32 ebx_17;
	word32 esi_18;
	word16 cx_19;
	word32 edi_20;
	word32 ecx_21;
	real64 rLoc1_22;
	word32 edx_23;
	bool S_24;
	byte SO_25;
	real64 rLoc2_26;
	!SDL_Init();
	word32 esp_35;
	word32 eax_36;
	byte SZO_37;
	bool C_38;
	byte al_39;
	word16 ax_40;
	byte SCZO_41;
	bool Z_42;
	word32 ebx_43;
	word32 esi_44;
	word16 cx_45;
	word32 edi_46;
	word32 ecx_47;
	real64 rLoc1_48;
	word32 edx_49;
	bool S_50;
	byte SO_51;
	real64 rLoc2_52;
	!SDL_OpenAudio();
	word32 esp_71;
	word32 eax_72;
	byte SZO_73;
	bool C_74;
	byte al_75;
	word16 ax_76;
	byte SCZO_77;
	bool Z_78;
	word32 ebx_79;
	word32 esi_80;
	word16 cx_81;
	word32 edi_82;
	word32 ecx_83;
	real64 rLoc1_84;
	word32 edx_85;
	bool S_86;
	byte SO_87;
	real64 rLoc2_88;
	!SDL_SetVideoMode();
	fn080491C0();
	word32 esp_96;
	word32 eax_97;
	byte SZO_98;
	bool C_99;
	byte al_100;
	word16 ax_101;
	byte SCZO_102;
	bool Z_103;
	word32 ebx_104;
	word32 esi_105;
	word16 cx_106;
	word32 edi_107;
	word32 ecx_108;
	real64 rLoc1_109;
	word32 edx_110;
	bool S_111;
	byte SO_112;
	real64 rLoc2_113;
	!SDL_ShowCursor();
	word32 esp_114;
	word32 eax_115;
	byte SZO_116;
	bool C_117;
	byte al_118;
	word16 ax_119;
	byte SCZO_120;
	bool Z_121;
	word32 ebx_122;
	word32 esi_123;
	word16 cx_124;
	word32 edi_125;
	word32 ecx_126;
	real64 rLoc1_127;
	word32 edx_128;
	bool S_129;
	byte SO_130;
	real64 rLoc2_131;
	!SDL_PauseAudio();
	word32 esp_132;
	word32 eax_133;
	byte SZO_134;
	bool C_135;
	byte al_136;
	word16 ax_137;
	byte SCZO_138;
	bool Z_139;
	word32 ebx_140;
	word32 esi_141;
	word16 cx_142;
	word32 edi_143;
	word32 ecx_144;
	real64 rLoc1_145;
	word32 edx_146;
	bool S_147;
	byte SO_148;
	real64 rLoc2_149;
	!SDL_GetTicks();
	globals->dw87CABE8 = 0x00;
	do
	{
		word32 esp_151;
		word32 eax_152;
		byte SZO_153;
		bool C_154;
		byte al_155;
		word16 ax_156;
		byte SCZO_157;
		bool Z_158;
		word32 ebx_159;
		word32 esi_160;
		word16 cx_161;
		word32 edi_162;
		word32 ecx_163;
		real64 rLoc1_164;
		word32 edx_165;
		bool S_166;
		byte SO_167;
		real64 rLoc2_168;
		!SDL_GetTicks();
		fn08048E99(eax_152 - globals->dw87CABE8);
		word32 esp_175;
		word32 eax_176;
		byte SZO_177;
		bool C_178;
		byte al_179;
		word16 ax_180;
		byte SCZO_181;
		bool Z_182;
		word32 ebx_183;
		word32 esi_184;
		word16 cx_185;
		word32 edi_186;
		word32 ecx_187;
		real64 rLoc1_188;
		word32 edx_189;
		bool S_190;
		byte SO_191;
		real64 rLoc2_192;
		!SDL_GL_SwapBuffers();
		if (globals->b804A74C != 0x00)
			break;
		word32 esp_270;
		word32 eax_271;
		byte SZO_272;
		bool C_273;
		byte al_274;
		word16 ax_275;
		byte SCZO_276;
		bool Z_277;
		word32 ebx_278;
		word32 esi_279;
		word16 cx_280;
		word32 edi_281;
		word32 ecx_282;
		real64 rLoc1_283;
		word32 edx_284;
		bool S_285;
		byte SO_286;
		real64 rLoc2_287;
		!SDL_PollEvent();
	} while (globals->b87CABEC != 0x02);
	word32 esp_196;
	word32 eax_197;
	byte SZO_198;
	bool C_199;
	byte al_200;
	word16 ax_201;
	byte SCZO_202;
	bool Z_203;
	word32 ebx_204;
	word32 esi_205;
	word16 cx_206;
	word16 edi_207[];
	word32 ecx_208;
	real64 rLoc1_209;
	word32 edx_210;
	bool S_211;
	byte SO_212;
	real64 rLoc2_213;
	!SDL_Quit();
	__syscall(0x80);
	int32 esi_217 = 0x00;
	int32 ebx_218 = 0x00;
	do
	{
		word16 cx_226 = edi_207[ebx_218];
		globals->a87D55E0[ebx_218 * 0x04] = (real32) ((real64) cx_226 * globals->t804A8C8);
		int32 edx_235 = (int32) cx_226;
		if (edx_235 < 0x00)
			edx_235 = -edx_235;
		if (edx_235 >= esi_217)
			esi_217 = edx_235;
		ebx_218 = ebx_218 + 0x01;
	} while (ebx_218 <= 0x03FF);
	globals->t87D55C0 = (real32) ((real64) (int16) esi_217 * globals->t804A8CC + (real64) globals->r804A8D0 * globals->t87D55C0);
	if (globals->dw87D55C4 > 0x2F)
		globals->t87D55C0.u0 = 0x00;
}

// 08048E99: void fn08048E99(Stack word32 dwArg04)
void fn08048E99(word32 dwArg04)
{
	globals->r87D55C8 = (real32) (real64) dwArg04;
	real64 rLoc1_26 = ((real64) globals->r804A914 * (real64) globals->dw804A72E - globals->t804A918) * globals->t804A91C;
	uint16 wLoc12_27 = __fstcw();
	uint16 ax_30 = DPB(wLoc12_27, 0x0C, 8);
	__fldcw(ax_30);
	globals->dw87D55C4 = (int32) rLoc1_26;
	__fldcw(wLoc12_27);
	if (globals->dw87D55C4 > 0x3A)
		globals->b804A74C = 0x01;
	real64 rLoc1_38 = (real64) globals->r804A920 * (real64) dwArg04;
	__fldcw(ax_30);
	__fldcw(wLoc12_27);
	int32 dwLoc18_40 = (int32) rLoc1_38;
	if (dwLoc18_40 == globals->dw804A8B4)
		return;
	globals->dw804A8B4 = dwLoc18_40;
	struct Eq_688 * ebx_47 = null;
	do
	{
		if (globals->dw87D55C4 < (int32) ((ebx_47->a804A769))[ebx_47].b0000)
		{
			struct Eq_694 * ecx_74 = (struct Eq_694 *) 0x01;
			do
			{
				globals->a87D4840[ecx_74 * 0x04] = (real32) ((real64) globals->r804A924 * (real64) (globals->a87D4840)[ecx_74 * 0x04] + (real64) ((int16) ((ecx_74->a804A760))[ebx_47].b0000) * globals->t804A928);
				ecx_74 = (struct Eq_694 *) ((char *) ecx_74 + 0x01);
			} while (ecx_74 <= (struct Eq_694 *) 0x09);
			break;
		}
		ebx_47 = (struct Eq_688 *) ((char *) ebx_47 + 0x01);
	} while (ebx_47 <= (struct Eq_688 *) 0x0F);
}

// 080491C0: void fn080491C0()
void fn080491C0()
{
	void * eax_34 = dlopen(&globals->b804A93C, 0x00);
	word32 * edi_40 = globals->a87D5564;
	word32 * esi_41 = globals->a804A945;
	while (true)
	{
		char * eax_48 = *esi_41;
		esi_41 = esi_41 + 0x01;
		if (eax_48 == null)
			break;
		*edi_40 = dlsym(eax_34, eax_48);
		edi_40 = edi_40 + 0x01;
	}
}

