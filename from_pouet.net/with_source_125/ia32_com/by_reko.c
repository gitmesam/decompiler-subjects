// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register ui8 cl, Register cu16 bx, Register Eq_4 di)
void fn0C00_0100(ui8 cl, cu16 bx, Eq_4 di)
{
	__cli();
	do
	{
		byte al_10 = __inb(0x03DA);
		__outb(0x03C8, 0x00);
		if ((al_10 & 0x08) != 0x00)
		{
			0xB800->*di = al_10;
			bx = 969;
			di = (word16) di + 2 & 0x1FFF;
		}
		if ((al_10 & 0x01) != 0x00)
			cl = 0xC9;
		__outb(969, al_10 << 0x02);
		cl += 0x05;
		__outb(969, cl);
		++bx;
		__outb(969, (byte) (bx >> 0x06));
	} while (SEQ(SLICE(bx >> 0x06, byte, 8), __inb(0x60)) != 0x01);
	__syscall(0x18);
}

