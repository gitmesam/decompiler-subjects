// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_13) ds_bx, Register word16 eax_16_16, Register byte cl, Stack cu16 wArg00)
void fn0C00_0100(union Eq_13 * ds_bx, word16 eax_16_16, byte cl, cu16 wArg00)
{
	struct Eq_6 Eq_17::* bx = (word16) ds_bx;
	__syscall(0x10);
	Eq_13 ds_ax_8 = *ds_bx;
	struct Eq_17 * ds_79 = SLICE(ds_ax_8, selector, 16);
	word32 eax_11 = SEQ(eax_16_16, (word16) ds_ax_8);
	word16 cx_116 = SEQ(0x03, cl);
	do
	{
		word32 eax_119 = __ror(eax_11, 0x08);
		byte cl_22 = (byte) cx_121;
		byte ah_18 = SLICE(eax_119, byte, 8);
		word16 eax_16_16_65 = SLICE(eax_119, word16, 16);
		if ((byte) eax_119 >= 0x3F)
			eax_119 = SEQ(SEQ(eax_16_16_65, ah_18 + 0x01), 0x3F);
		byte al_28 = (byte) eax_119;
		if ((cl_22 & 0x03) != 0x00)
			__outb(969, al_28);
		eax_11 = eax_119;
		byte ch_73 = SLICE(cx_121 - 0x01, byte, 8);
		cx_116 = cx_121 - 0x01;
		cx_121 = cx_116;
	} while (cx_121 != 0x01);
	do
	{
		byte al_34 = __inb(0x40);
		do
		{
			(ds_79->*bx).b0000 = al_34;
			++bx;
			cu16 dx_48 = (word16) (ds_79->*bx).b0000 + SEQ(ch_73, bx[640]);
			char bh_54 = SLICE(bx, byte, 8);
			wArg00 = dx_48;
			al_34 = (byte) (wArg00 - 0x01 + dx_48 >> 0x02);
		} while (bh_54 < ~0x02);
		byte al_57 = __inb(0x60);
		__das(al_57, &al_57);
	} while (bh_54 >= ~0x02);
}

