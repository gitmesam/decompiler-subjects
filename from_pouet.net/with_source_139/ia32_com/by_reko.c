// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register Eq_3 bx, Register (ptr16 Eq_4) bp)
void fn0C00_0100(word16 cx, Eq_3 bx, struct Eq_4 * bp)
{
	bios_video_set_mode(0x13);
	int8 al_13 = 0x13;
	word16 cx_151 = cx;
	do
	{
		__outb(969, al_13);
		__outb(969, al_13);
		__outb(969, al_13 + 0x15);
		al_13 = -((byte) cx_155 >> 0x02);
		cx_151 = cx_155 - 0x01;
		cx_155 = cx_151;
	} while (cx_155 != 0x01);
	struct Eq_4 * ax_20 = SEQ(0xA0, al_13);
	ax_118 = ax_20;
	do
	{
		do
		{
			struct Eq_4 * ax_118;
			Eq_3 bx_26 = (word16) bx.u0 + 320;
			word16 cx_23;
			Eq_3 si_25 = bx;
			byte bh_59 = SLICE(bx_26, byte, 8);
			Eq_3 di_28 = bx_26;
			for (cx_23 = 0x0140; cx_23 != 0x00; --cx_23)
			{
				ax_118 = SEQ(ah_117, al_50);
				uint16 ax_37 = (word16) (bp * 33797);
				si_25 = (word16) si_25 + 1;
				uint8 al_47 = (ax_20->*si_25 + ax_20->*si_25 >> 0x01) + SLICE(ax_37 * 0x12, byte, 16);
				uint8 al_50 = al_47 - 0x08 - (al_47 < 0x00);
				ax_20->*di_28 = al_50;
				bp = ax_118;
				byte ah_117 = SLICE(ax_37 * 0x12, byte, 8);
				di_28 = (word16) di_28 + 1;
			}
			bx = bx_26;
		} while (bh_59 != ~0x05);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) != 0x00);
		Eq_106 di_102 = di_28 - bx_26;
		bx = bx_26 - di_102;
		word32 Eq_4::* si_101 = Eq_4::a0280;
		word16 cx_103;
		for (cx_103 = 0x3E30; cx_103 != 0x00; --cx_103)
		{
			ax_20->*di_102 = ax_20->*si_101;
			++si_101;
			di_102 = (word16) di_102 + 4;
		}
		ax_118 = SEQ(ah_90, al_89);
		byte al_89;
		byte ah_90;
	} while (bios_kbd_check_keystroke(out al_89, out ah_90));
	bios_video_set_mode(0x03);
}

