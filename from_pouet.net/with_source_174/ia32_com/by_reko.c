// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence Eq_2 ss_si, Register byte ah, Register byte dh, Register byte dl, Register Eq_6 bp, Register Eq_7 di)
void fn0C00_0100(Eq_2 ss_si, byte ah, byte dh, byte dl, Eq_6 bp, Eq_7 di)
{
	struct Eq_8 * ss = SLICE(ss_si, selector, 16);
	Eq_10 si = (word16) ss_si;
	Eq_12 Top_169 = 0;
	__syscall(0x10);
	*((word32) ss_si + ((word16) bp + 3)) = 0x3838;
	struct Eq_24 * dx_9 = SEQ(dh + 0x13, dl);
	word16 dx_19 = 0x03C8;
	word16 cx_111;
	word16 ax_136 = SEQ(ah, 0x13);
	for (cx_111 = 0x2000; cx_111 != 0x00; --cx_111)
	{
		dx_140 = SEQ(dh_139, 0xC9);
		ax_138 = SEQ(ah_137, al_25);
		word16 ax_23 = __shrd(ax_136, cx_111, 0x13);
		byte al_25 = -(byte) ax_23;
		__outb(dx_19, al_25);
		byte dh_139 = SLICE(dx_19, byte, 8);
		byte ah_137 = SLICE(ax_23, byte, 8);
		ax_136 = ax_138;
		dx_19 = dx_140;
	}
	do
	{
		Eq_64 bx_151 = 0x0141;
		do
		{
			do
			{
				do
				{
					--si;
					byte v18_39 = Mem35[dx_9:bx_151 + si:byte] + Mem35[dx_9:si + 0x00:byte];
					Mem40[dx_9:bx_151 + si:byte] = v18_39;
					Mem44[dx_9:bx_151 + si:byte] = __rcr(Mem40[dx_9:bx_151 + si:byte], 0x01, SLICE(cond(v18_39), bool, 1));
					--cx_111;
					byte cl_154 = (byte) cx_111;
				} while (cx_111 != 0x00);
				bx_151 = -bx_151;
			} while (bx_151 < 0x00);
			bx_151 >>= 0x07;
		} while (bx_151 >> 0x07 != 0x00);
		word16 cx_134 = SEQ(0x80, cl_154);
		while (true)
		{
			byte cl_173 = (byte) cx_134;
			if (cx_134 == 0x00)
				break;
			0xA000->*di = dx_9->*si;
			si = (word16) si + 2;
			di = (word16) di + 2;
			--cx_134;
		}
		Eq_107 ax_116 = ~0x17;
		do
		{
			Mem63[ss:bp + di:word16] = ax_116;
			__fninit();
			struct Eq_126 * Top_65 = Top_169 - 1;
			ST67[Top_65 + 0x00:real64] = CONVERT(Mem63[ss:bp + si:real32], real32, real64);
			ST68[Top_65 + 0x00:real64] = ST67[Top_65 + 0x00:real64] + CONVERT(Mem63[ss:(bp + 0x01) + si:real32], real32, real64);
			Mem69[ss:bp + si:real32] = CONVERT(ST68[Top_65 + 0x00:real64], real64, real32);
			ST70[Top_65 + 0x00:real64] = ST68[Top_65 + 0x00:real64] * CONVERT(Mem69[ss:bp + di:int16], int16, real64);
			real64 v26_71 = Top_65->r0000;
			Top_65->r0000 = cos(v26_71);
			Top_65->rFFFFFFFF = sin(v26_71);
			ST75[Top_65 + -1:real64] = ST74[Top_65 + -1:real64] / CONVERT(Mem69[ss:bp + di:int16], int16, real64);
			real64 v27_76 = Top_65->rFFFFFFFF;
			Top_65->rFFFFFFFF = Top_65->r0000;
			Top_65->r0000 = v27_76;
			ST79[Top_65 + -1:real64] = ST78[Top_65 + -1:real64] / CONVERT(Mem69[ss:bp + di:int16], int16, real64);
			Top_65->rFFFFFFFE = 0.0;
			Top_65->rFFFFFFFD = 0.0;
			uint8 ah_172 = SLICE(ax_116, byte, 8);
			Top_169 = Top_65 - 3;
			cx_111 = SEQ(0x09, cl_173);
			do
			{
				Mem90[ss:bp + di:int16] = CONVERT(ST86[Top_65 + -3:real64], real64, int16);
				Top_65->rFFFFFFFD += Top_65->rFFFFFFFF;
				real64 v28_92 = Top_65->rFFFFFFFD;
				Top_65->rFFFFFFFD = Top_65->rFFFFFFFE;
				Top_65->rFFFFFFFE = v28_92;
				word16 bx_95 = Mem90[ss:bp + di:word16] *s 0x0140;
				Mem96[ss:bp + di:int16] = CONVERT(ST94[Top_65 + -3:real64], real64, int16);
				Top_65->rFFFFFFFD += Top_65->r0000;
				real64 v29_98 = Top_65->rFFFFFFFD;
				Top_65->rFFFFFFFD = Top_65->rFFFFFFFE;
				Top_65->rFFFFFFFE = v29_98;
				ui16 v32_v31_189 = SEQ(dx_9->*((word16) bx_101 + 0x00007EA2), dx_9->*((word16) bx_101 + 0x00007EA2)) - SEQ(ah_172, ah_172);
				word16 bx_101 = bx_95 + Mem96[ss:bp + di:word16];
				dx_9->*((word16) bx_101 + 0x00007EA2) = (byte) v32_v31_189;
				dx_9->*((word16) bx_101 + 0x00007EA2) = SLICE(v32_v31_189, byte, 8);
				--cx_111;
				cl_173 = (byte) cx_111;
			} while (cx_111 != 0x00);
			ax_116 = (word32) ax_116 + 1;
			byte ah_120 = SLICE(ax_116, byte, 8);
		} while (ax_116 != 0x00);
	} while (SEQ(ah_120, __inb(0x60)) != 0x01);
	__syscall(0x10);
}

