// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register byte dh, Register byte dl, Register Eq_6 bx, Register (memptr (ptr16 Eq_9) Eq_33) si, Register (memptr (ptr16 Eq_164) byte) di, Register (ptr16 Eq_9) ds)
void fn0C00_0100(byte ah, word16 cx, byte dh, byte dl, Eq_6 bx, union Eq_33 Eq_9::* si, byte Eq_164::* di, struct Eq_9 * ds)
{
	__syscall(0x10);
	struct Eq_15 * dx_7 = SEQ(dh + 0x10, dl);
	struct Eq_19 * dx_11 = SEQ(dh + 0x20, dl);
	word16 wLoc02_244 = SEQ(ah, 0x13) + 0x01;
l0C00_010F:
	byte Eq_164::* di_135 = di;
	Eq_6 bx_116 = bx;
	int16 ax_57 = wLoc02_244 + 0x00;
	++wLoc02_244;
	do
	{
		int16 ax_77 = ax_57 *s 0x41;
		ds->*si = ax_77 + 0x01;
		dx_7->*bx_116 = (real32) ((real64) (ds->*si) * (real64) ds->w01F0);
		ax_57 = ax_77 + 0x01;
		bx_116 = (word16) bx_116 + 4;
	} while (bx_116 != 0x00);
	word16 cx_318 = cx + 0x01;
	do
	{
		do
		{
			dx_7->*bx_116 = (real32) (((real64) (dx_7->*((word16) bx_116 - 0x0200)) + (real64) (dx_7->*((word16) bx_116 + 0x0200)) + (real64) (dx_7->*((word16) bx_116 - 4)) + (real64) (dx_7->*((word16) bx_116 + 4))) / (real64) ds->w01EE);
			dx_11->*bx_116 = bx_116 *s 0x40;
			dx_11->*((word16) bx_116 + 2) = (word16) SLICE(bx_116, byte, 8) << 0x07;
			bcu8 cl_120 = (byte) cx_322;
			bx_116 = (word16) bx_116 + 4;
			cx_318 = cx_322;
			cx_322 = cx_318;
		} while (bx_116 != 0x00);
		__outb(969, cl_120 >> 0x02);
		__outb(969, cl_120 >> 0x02);
		__outb(969, cl_120 >> 0x02);
		cx_318 = cx_322 - 0x01;
		cx_323 = cx_318;
	} while (cx_322 != 0x01);
	do
	{
		do
		{
			uint32 dx_ax_139 = (uint32) di_135;
			Eq_173 dx_141 = (uint16) (dx_ax_139 % 0x0140);
			Eq_234 ax_142 = (uint16) (dx_ax_139 /u 0x0140);
			ui16 bx_148 = SEQ((byte) ax_142, (byte) dx_141 * 0x02);
			Eq_33 cx_159 = SEQ((&dx_11->t0003)[bx_148], (&dx_11->t0001)[bx_148] * 0x02);
			if (ax_142 < 0x80 && dx_141 < 0x80)
			{
				real64 rLoc1_275 = (real64) (&dx_7->a0000->r0000)[cx_159 * 0x02];
				(ds->*si).u0 = (int16) (rLoc1_275 - (real64) (dx_7->*((word16) (cx_159 *s 0x02) - 4)));
				(&dx_11->a0002->w0000)[bx_148 * 0x02] = (word16) (ds->*si) + (&(dx_11->a0002)->w0000)[bx_148 * 0x02];
				(ds->*si).u0 = (int16) (rLoc1_275 - (real64) (dx_7->*((word16) (cx_159 *s 0x02) - 0x0200)));
				(&dx_11->a0000->w0000)[bx_148 * 0x02] -= ds->*si;
			}
			ds->*si = cx_159;
			real64 rLoc1_281 = (real64) (ds->*si) * 3.14159265358979 / (real64) ds->w01F4;
			(ds->*si).u0 = (int16) (sin(rLoc1_281) * sin(rLoc1_281 / (real64) ds->w01F4) * (real64) ds->w01F2);
			0xA000->*di_135 = (byte) (ds->*si).u1 + 0x0080;
			++di_135;
		} while (di_135 != &Eq_164::b0000);
		byte v35_216 = ds->b01F6 + 0x02;
		ds->b01F6 = v35_216;
		if (v35_216 == 0x00)
			goto l0C00_010F;
	} while ((int16) __inb(0x60) != 0x01);
	msdos_terminate_program20();
}

