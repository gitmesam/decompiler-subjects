// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (ptr16 Eq_3) ds, FpuStack real64 rLoc8, FpuStack real64 rLoc3)
void fn0C00_0100(byte cl, struct Eq_3 * ds, real64 rLoc8, real64 rLoc3)
{
	__syscall(0x10);
	__outb(0x03C8, 0x00);
	bcu8 ah_16;
	do
	{
		uint8 al_18 = ah_16 >> 0x02;
		__outb(969, al_18);
		__outb(969, al_18);
		__outb(969, al_18 >> 0x01);
		++ah_16;
	} while (ah_16 != 0x00);
	real64 rLoc1_204 = 0.0;
	real64 rLoc3_210 = rLoc3 / (real64) ds->w01FE;
	real64 rLoc3_213 = (1.0 + 1.0) / (real64) ds->w01FC;
	ci16 si_161 = 0x00;
	do
	{
		struct Eq_124 Eq_3::* di_117 = &Eq_3::t0000;
		word16 bp_139;
		real64 rLoc4_214 = 1.0;
		for (bp_139 = 200; bp_139 != 0x00; --bp_139)
		{
			real64 rLoc5_215 = 1.0;
			word16 dx_131;
			for (dx_131 = 0x0140; dx_131 != 0x00; --dx_131)
			{
				real64 rLoc6_216 = (real64) ds->w01FC;
				ds->w0204 = (int16) ((rLoc8 + rLoc1_204 - rLoc4_214) * rLoc6_216);
				real64 rLoc8_230 = rLoc6_216 * rLoc6_216;
				ds->w0206 = (int16) (sin(rLoc6_216 * rLoc4_214 + rLoc1_204) * rLoc6_216 + rLoc8_230);
				int16 bx_80 = ds->w0204;
				int16 ax_81 = ds->w0206;
				ds->w0204 = (int16) ((rLoc8_230 + rLoc1_204 - rLoc4_214) * rLoc6_216);
				rLoc8 = rLoc5_215 * rLoc6_216;
				ds->w0206 = (int16) (cos(rLoc6_216 - rLoc4_214 + rLoc1_204) * rLoc6_216 + rLoc8);
				ui16 bx_105 = bx_80 & ds->w0204;
				ds->w0204 = (ax_81 ^ ds->w0206) - bx_105;
				ds->w0206 = (int16) ((real64) ds->w0204 * ds->r0200);
				int16 ax_118 = (word16) di_117[752];
				di_117[752] = (byte) ((bx_105 + ds->w0206 - ax_118 >> cl) + ax_118);
				(0xA000->*di_117).b0000 = (byte) ax_118;
				rLoc5_215 -= rLoc3_213;
				byte ah_179 = SLICE(ax_118, byte, 8);
				++di_117;
			}
			rLoc4_214 -= rLoc3_210;
		}
		real64 rLoc3_257 = rLoc1_204 + ds->r01F8;
		ds->r0200 = (real32) fabs(cos(rLoc4_214 + rLoc4_214));
		ci8 cl_163 = (byte) si_161;
		byte ch_166 = SLICE(si_161, byte, 8);
		ci16 cx_167 = SEQ(ch_166, cl_163 + 0x01);
		rLoc1_204 = rLoc3_257;
		si_161 = cx_167;
		if (cl_163 < 0x01)
			cx_167 = SEQ(ch_166, -(cl_163 + 0x01));
		cl = (byte) (cx_167 >> 0x05);
	} while (SEQ(ah_179, __inb(0x60)) != 0x01);
}

