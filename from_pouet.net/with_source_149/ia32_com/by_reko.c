// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	__syscall(0x10);
	__outb(0x03C8, 0x00);
	byte Eq_47::* di_10 = &Eq_47::b0000;
	word16 cx_130 = SEQ(ch, 0x40);
	cui16 ax_190 = 0x00;
	do
	{
		byte al_19 = (byte) ax_190;
		__outb(969, al_19);
		__outb(969, al_19);
		__outb(969, al_19);
		--cx_130;
		byte cl_152 = (byte) cx_130;
		++ax_190;
	} while (cx_130 != 0x00);
	while (true)
	{
		word16 cx_155 = SEQ(~0x05, cl_152);
		di_40 = di_10;
		do
		{
			byte Eq_47::* di_40;
			byte al_44 = 0xA000->*di_40;
			byte al_46 = al_44;
			if (al_44 != 0x00)
				al_46 = al_44 - 0x01;
			0xA000->*di_40 = al_46;
			--cx_155;
			++di_40;
			byte cl_156 = (byte) cx_155;
		} while (cx_155 != 0x00);
		word16 cx_124 = SEQ(0x02, cl_156);
		do
		{
			0xA000->*di_10 = 0x3F;
			byte Eq_47::* di_74 = di_10 + 1;
			uint32 dx_ax_78 = (uint32) (di_74 - 0x01);
			uint16 dx_81 = (uint16) (dx_ax_78 % ds->w0179);
			uint16 ax_82 = (uint16) (dx_ax_78 /u ds->w0179);
			if (dx_81 == 0x00)
				ds->w017B = 0x01;
			if (dx_81 == 0x013F)
				ds->w017B = ~0x00;
			if (ax_82 == 0x00)
				ds->w017D = 0x0140;
			if (ax_82 == 199)
				ds->w017D = ~0x013F;
			di_10 = di_74 - 0x01 + ds->w017B + ds->w017D;
			if (__inb(0x60) == 0x01)
				return;
			--cx_124;
			cl_152 = (byte) cx_124;
		} while (cx_124 != 0x00);
	}
}

