// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register word16 bp, Register (ptr16 Eq_4) es, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte cl, word16 bp, struct Eq_4 * es, struct Eq_4 * ds)
{
	__syscall(0x10);
	byte Eq_4::* di_197 = Eq_4::a0200;
	word16 cx_200 = SEQ(~0x02, cl);
	byte al_18 = 0x00;
	while (true)
	{
		byte ch_208 = SLICE(cx_200, byte, 8);
		if (cx_200 == 0x00)
			break;
		es->*di_197 = 0x00;
		++di_197;
		--cx_200;
	}
	__outb(0x03C8, 0x00);
	struct Eq_25 Eq_4::* di_13 = Eq_4::a0340;
	word16 cx_209 = SEQ(ch_208, 0x20);
	do
	{
		struct Eq_42 Eq_4::* di_17 = &di_13->b0000 + 1;
		(es->*di_17).b0000 = al_18;
		(ds->*di_17).w005F = SEQ(0x3F, al_18);
		(ds->*di_17).b0061 = al_18;
		--cx_209;
		di_13 = (struct Eq_25 Eq_4::*) (&di_17->b0000 + 2);
		al_18 += 0x02;
		byte ch_210 = SLICE(cx_209, byte, 8);
	} while (cx_209 != 0x00);
	word16 cx_195 = SEQ(ch_210, 0xC0);
	while (true)
	{
		byte ch_214 = SLICE(cx_195, byte, 8);
		byte cl_223 = (byte) cx_195;
		if (cx_195 == 0x00)
			break;
		__outb(969, al_18);
		--cx_195;
	}
	real64 rLoc1_283 = (real64) ds->w01FB;
	do
	{
		real64 rLoc3_285 = 0.0;
		word16 cx_226 = SEQ(ch_214 + 0x01, cl_223);
		do
		{
			real64 rLoc4_292 = sin(rLoc3_285 / rLoc1_283) * rLoc1_283 + rLoc3_285;
			real64 rLoc4_293 = cos(rLoc4_292);
			real64 rLoc5_294 = sin(rLoc4_292);
			real64 rLoc6_297 = sin(rLoc3_285) * (real64) ds->w01FD;
			ds->w01A8 = (int16) rLoc6_297;
			real64 rLoc4_304 = rLoc4_293 * ((rLoc6_297 * sin(rLoc4_293 * rLoc1_283) + (real64) ds->w01FD) * rLoc5_294);
			ds->w016D = (int16) rLoc5_294;
			ds->w016A = (int16) rLoc4_304;
			rLoc3_285 += ds->r01F7;
			ds->w5414 = 0x3737;
			--cx_226;
			byte bl_168 = 0x34;
			byte bh_171 = 0x12;
			byte ch_254 = SLICE(cx_226, byte, 8);
		} while (cx_226 != 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		struct Eq_154 Eq_4::* di_100;
		do
		{
			di_100[832] = di_100[833] + di_100[0x033F] + di_100[1152] + di_100[0x0200] >> 0x02;
			--di_100;
		} while (di_100 != Eq_4::a0000);
		struct Eq_180 Eq_4::* di_126 = &Eq_4::tFFFFBE20;
		struct Eq_182 Eq_4::* si_128 = Eq_4::a0340;
		word16 cx_150 = SEQ(ch_254, 0x32);
		do
		{
			byte al_130;
			for (al_130 = 0x50; al_130 != 0x00; --al_130)
			{
				(ds->*di_126).b0000 = (ds->*si_128).b0000;
				struct Eq_193 Eq_4::* si_138 = &si_128->b0000 + 1;
				di_126 = &di_126->b0000 + 1;
				si_128 = (struct Eq_182 Eq_4::*) (&si_138->b0000 + 3);
			}
			--cx_150;
			si_128 = (struct Eq_182 Eq_4::*) (si_138 + 1);
			++di_126;
			byte cl_278 = (byte) cx_150;
		} while (cx_150 != 0x00);
		struct Eq_216 Eq_4::* di_160 = Eq_4::a0000;
		word16 cx_182 = SEQ(~0x05, cl_278);
		do
		{
			byte bl_169 = bl_168 & 0x07;
			word16 bx_174 = SEQ(bh_171, bl_169) + bp;
			byte al_170 = di_160[832] + bl_169;
			bp = __ror(bp, 0x03) + bx_174;
			(0xA000->*di_160).b0000 = al_170;
			--cx_182;
			bl_168 = (byte) bx_174;
			bh_171 = SLICE(bx_174, byte, 8);
			++di_160;
			ch_214 = SLICE(cx_182, byte, 8);
			cl_223 = (byte) cx_182;
		} while (cx_182 != 0x00);
	} while (__inb(0x60) != 0x01);
	bios_video_set_mode(0x03);
}

