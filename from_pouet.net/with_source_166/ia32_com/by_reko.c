// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	__syscall(0x10);
	do
	{
		word16 cx_40 = SEQ(ch, 0x46);
		do
		{
			Eq_9 bx_15 = ds->w0182 *s 0x013F + ds->w0180;
			ds->*((word16) bx_15 + 33316) += 0x18;
			ds->*((word16) bx_15 + 33317) += 0x10;
			ds->*((word16) bx_15 + 32996) += 0x10;
			ds->w0180 = (int16) (sin((real64) ds->t0178) * (real64) ds->w015A);
			ds->w0182 = (int16) (cos((real64) ds->t017C) * (real64) ds->w0176);
			ds->t0178.u1 = (word16) ds->t0178.u1 + 98;
			ds->t017C.u1 = (word16) ds->t017C.u1 + 0x009E;
			--cx_40;
			ch = SLICE(cx_40, byte, 8);
		} while (cx_40 != 0x00);
		ds->t0178 -= 6861;
		ds->t017C -= 11063;
		struct Eq_95 Eq_3::* bx_47;
		do
		{
			byte al_51 = bx_47[388];
			word16 ax_55 = SEQ(ah, al_51);
			if (al_51 != 0x10)
			{
				al_51 = (byte) (ax_55 - 0x01);
				bx_47[388] = al_51;
				ah = SLICE(ax_55 - 0x01, byte, 8);
			}
			(0xA000->*bx_47).b0000 = al_51;
			--bx_47;
		} while (bx_47 != Eq_3::a0000);
		word16 ax_68 = __inw(0x60);
		ah = SLICE(ax_68 - 0x01, byte, 8);
	} while (ax_68 != 0x01);
}

