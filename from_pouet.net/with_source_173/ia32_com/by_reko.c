// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register cu16 cx, Register ci16 bp, Register (ptr16 Eq_4) ds)
void fn0C00_0100(cu16 cx, ci16 bp, struct Eq_4 * ds)
{
	__syscall(0x10);
	do
	{
		__outb(969, (byte) cx);
		uint16 ax_15 = cx >> 0x01;
		__outb(969, (byte) ax_15);
		__outb(969, (byte) (ax_15 >> 0x01));
		--cx;
	} while (cx != 0x00);
	byte Eq_55::* di_21 = &Eq_55::b0000;
	do
	{
		uint32 dx_ax_31 = (uint32) (uint16) di_21;
		Eq_39 dx_34 = (uint16) (dx_ax_31 % ds->w0157);
		Eq_36 ax_35 = (uint16) (dx_ax_31 /u ds->w0157);
		Eq_41 dx_36 = dx_34 - 0xA0;
		if (dx_34 <= 0xA0)
			dx_36 = 0xA0 - dx_34;
		if (ax_35 > 100)
			return;
		if (ax_35 - 0x39 < dx_36 *s 0x07 >> 0x02)
			return;
		0xA000->*di_21 = (byte) (ax_35 - 0x39 + bp ^ (word16) dx_36 + bp);
		++di_21;
		--cx;
		if (cx != 0x00)
			continue;
		++bp;
	} while (__inw(0x60) != 0x01);
	__syscall(0x10);
}

