// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	bios_video_set_mode(0x13);
	msdos_display_string(&ds->r01CF);
	__outb(0x03C8, 0x00);
	byte Eq_40::* di_19 = Eq_40::a0000;
	do
	{
		bcu8 al_24 = (byte) di_19;
		__outb(969, al_24 >> 0x02);
		__outb(969, al_24 >> 0x03);
		__outb(969, al_24 >> 0x02);
		ui8 al_34 = (0xA000->*di_19 << 0x03) + 0x40;
		0xA000->*di_19 = al_34;
		++di_19;
	} while (al_34 != 0x00);
	__wait();
	__fninit();
	do
	{
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		byte Eq_40::* di_163 = &Eq_40::b3200;
		int16 bp_169 = ~0x3B;
		do
		{
			ds->w01DF = bp_266;
			int16 cx_166 = ~0x9F;
			do
			{
				real64 rLoc1_212 = (real64) ds->w01CB;
				real64 rLoc2_213 = (real64) ds->w01DF;
				ds->w01DB = cx_267;
				real64 rLoc3_214 = (real64) ds->w01DB;
				word16 cx_110 = 0x03;
				do
				{
					real64 rLoc4_218 = sin((real64) ds->r01CF);
					real64 rLoc4_219 = cos(rLoc4_218);
					real64 rLoc5_220 = sin(rLoc4_218);
					real64 rLoc3_234 = rLoc5_220 * rLoc2_213 + rLoc4_219 * rLoc3_214;
					real64 rLoc6_226 = rLoc4_219 * rLoc5_220 - rLoc3_214 * rLoc4_219;
					--cx_110;
					rLoc1_212 = rLoc3_234;
					rLoc3_214 = rLoc6_226;
					rLoc2_213 = rLoc1_268;
					byte cl_205 = (byte) cx_110;
					rLoc1_268 = rLoc1_212;
				} while (cx_110 != 0x00);
				ds->w01E7 = (int16) rLoc6_226;
				ds->w01EB = (int16) rLoc1_268;
				ds->w01EF = (int16) rLoc3_234;
				cui16 bx_119 = ds->w01D3;
				cui16 bp_120 = 0x0200;
				cui16 dx_121 = bx_119;
				word16 cx_139 = SEQ(0x01, cl_205);
				do
				{
					bp_120 += ds->w01EB;
					dx_121 += ds->w01EF;
					bx_119 += ds->w01E7;
					byte cl_141 = (byte) cx_139;
					if ((SLICE(dx_121 & bp_120 & bx_119, byte, 8) & ~0x07) != 0x00)
						break;
					--cx_139;
					cl_141 = (byte) cx_139;
				} while (cx_139 != 0x00);
				0xA000->*di_163 = cl_141;
				++di_163;
				cx_166 = cx_267 + 0x01;
				cx_267 = cx_166;
			} while (cx_267 != 0x9F);
			bp_169 = bp_266 + 0x01;
			bp_266 = bp_169;
		} while (bp_266 != 0x3B);
		ds->w01D3 += bp_266 + 0x01;
		ds->r01CF = (real32) ((real64) ds->r01CF + (real64) ds->w01CD);
		byte al_185;
		byte ah_186;
	} while (bios_kbd_check_keystroke(out al_185, out ah_186));
}

