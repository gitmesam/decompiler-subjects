// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register cui16 bp, Register (ptr16 Eq_3) ds, FpuStack real64 rLoc2)
void fn0C00_0100(cui16 bp, struct Eq_3 * ds, real64 rLoc2)
{
	__syscall(0x10);
	struct Eq_10 Eq_3::* di_17 = Eq_3::a01FC;
	cui16 cx_244 = 0x0800;
	do
	{
		rLoc2 = sin(rLoc2) * ds->r01ED;
		(ds->*di_17).dw0000 = (int32) rLoc2;
		uint8 cl_22 = (byte) cx_249;
		__outb(0x03C8, cl_22);
		__outb(969, cl_22 >> 0x02 ^ 0x3F);
		__outb(969, cl_22 >> 0x02 ^ 0x3F);
		__outb(969, (cl_22 >> 0x02 ^ 0x3F) - 0x0E);
		++di_17;
		cx_244 = cx_249 - 0x01;
		cx_249 = cx_244;
	} while (cx_249 != 0x01);
	do
	{
		word16 di_160 = 0x00;
		cui16 cx_161 = 0x0140;
		do
		{
			byte al_53 = 0x0C00->*((word16) (cx_247 + bp & 0x07FF) + 508);
			byte ah_62 = 0x0C00->*((word16) ((cx_247 + bp) + 0x0200 & 0x07FF) + 508);
			ds->t01F8 = ds->t01F4;
			word16 cx_156 = 0xFE;
			Eq_79 si_105 = 199;
			do
			{
				Eq_79 bx_104 = ~0x1C - -((int16) ((uint32) ((uint16) ((uint16) ((uint8) ((ds->b01F9 ^ ds->b01FB) & 0x1F ^ 0x3F)) << 0x08)) / SEQ(SLICE(cx_248, byte, 8), ((byte) cx_248 ^ ~0x00) + 0x01)));
				byte bl_117 = (byte) bx_104;
				if (bx_104 <= si_105)
				{
					struct Eq_77 Eq_85::* di_115 = di_160 + (word16) (si_105 * 0x0140);
					do
					{
						(0xA000->*di_115).b0000 = bl_117;
						--si_105;
						di_115 -= 0x0140;
					} while (bx_104 <= si_105);
				}
				ds->t01F8.u0 = (word16) ds->t01F8.u0 + (int16) al_53;
				ds->w01FA += (int16) ah_62;
				cx_156 = cx_248 - 0x01;
				cx_248 = cx_156;
			} while (cx_248 != 0x01);
			++di_160;
			cx_161 = cx_247 - 0x01;
			cx_247 = cx_161;
		} while (cx_247 != 0x01);
		ds->t01F4.u0 = (word16) ds->t01F4.u0 + 64;
		++bp;
	} while (__inb(0x60) != 0x01);
	bios_video_set_mode(0x03);
}

