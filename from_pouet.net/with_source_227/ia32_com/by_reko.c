// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_3) byte) di, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte Eq_3::* di, struct Eq_3 * ds)
{
	Eq_4 Top_120 = 0;
	__syscall(0x10);
	struct Eq_11 Eq_3::* cx_12;
	do
	{
		uint8 al_18 = (byte) cx_12;
		__outb(0x03C8, al_18);
		uint16 ax_20 = al_18 * al_18;
		cu8 cl_29 = (byte) cx_12;
		bci8 dh_271 = 0x03;
		uint8 al_22 = (byte) (ax_20 >> 0x05);
		byte ah_34 = SLICE(ax_20 >> 0x05, byte, 8);
		if (al_22 >= 0x40)
			al_22 = 0x3F;
		__outb(969, al_22);
		word16 ax_35 = SEQ(ah_34, cl_29);
		cu16 ax_348 = SEQ(ah_34, cl_29);
		if (cl_29 >= 0x40)
			ax_348 = ax_35 - 0x01;
		__outb(969, (byte) ax_348);
		uint8 al_46 = (byte) (ax_348 >> 0x01);
		__outb(969, al_46);
		cs->*di = al_46;
		bool C_272 = SLICE(cond(ax_348 >> 0x01), bool, 1);
		++di;
		--cx_12;
	} while (cx_12 != Eq_3::a0000);
	do
	{
		dh_271 = __rcl(dh_271, (byte) cx_12, C_272);
		cu8 al_73 = (bool) (dh_271 >> 0x03 < 0x00) + (al_46 + (dh_271 >> 0x03));
		bcu8 al_78 = (bool) (al_73 < 0x00) + (al_73 + cx_12[0x007E]);
		(cs->*cx_12).b0000 = al_78 >> 0x01;
		(cs->*cx_12).b0000 = al_78 >> 0x01;
		int8 ah_209 = dh_271 >> 0x03;
		al_46 = al_78 >> 0x01;
		C_272 = SLICE(cond(al_78 >> 0x01), bool, 1);
		--cx_12;
	} while (cx_12 != Eq_3::a0000);
	bool C_104 = false;
	struct Eq_117 Eq_3::* cx_132;
	Eq_120 bx_351 = 0x00;
	do
	{
		Eq_125 bl_90 = (byte) bx_351;
		ds->t03C9 = bl_90;
		Eq_125 bh_287 = SLICE(bx_351, byte, 8);
		do
		{
			--Top_120;
			*Top_120 = (real64) ds->t03C9;
			*Top_120 *= ds->r01FB;
			*Top_120 = sin(*Top_120);
			ds->t03C9 = bh_287;
			C_104 = !C_104;
		} while (C_104);
		*((word32) Top_120 + 1) *= *Top_120;
		ds->t03C9.u0 = 0x12;
		*((word32) Top_120 + 1) *= (real64) ds->t03C9;
		*((word32) Top_120 + 1) += (real64) ds->t03C9;
		*Top_120 = 3.14159265358979;
		*((word32) Top_120 + 1) -= *Top_120;
		(cs->*bx_351).u0 = (int16) *((word32) Top_120 + 1);
		Eq_200 v24_126 = (byte) (cs->*bx_351).u1 + ((bl_90 & bh_287) & 0x08);
		cs->*bx_351 = v24_126;
		Top_120 = (word32) Top_120 + 2;
		C_104 = SLICE(cond(v24_126), bool, 1);
		--cx_132;
		bx_351 = (word16) bx_351 + 1;
	} while (cx_132 != Eq_3::a0000);
	do
	{
		bcu8 Eq_3::* di_134 = Eq_3::a0400;
		Eq_232 dx_139 = ~0x63;
		do
		{
			Eq_232 bp_140 = ~0x9F;
			do
			{
				__fninit();
				ds->t017B = dx_139;
				Eq_334 Top_147 = Top_120 - 1;
				*Top_147 = (real64) ds->t017B;
				*Top_147 /= (real64) ds->w01B4;
				ds->t017B = bp_140;
				*((word32) Top_147 - 1) = (real64) ds->t017B;
				*((word32) Top_147 - 1) /= (real64) ds->w01B4;
				*((word32) Top_147 - 2) = (real64) ds->w0179;
				*((word32) Top_147 - 3) = *((word32) Top_147 - 3);
				*((word32) Top_147 - 3) /= (real64) ds->w01B4;
				*((word32) Top_147 - 3) = sin(*((word32) Top_147 - 3));
				*((word32) Top_147 - 4) = (real64) ds->w0166;
				*((word32) Top_147 - 4) *= *((word32) Top_147 - 3);
				*((word32) Top_147 - 4) += (real64) ds->w01B4;
				ds->t017B.u0 = (int16) *((word32) Top_147 - 4);
				*((word32) Top_147 - 3) *= (real64) ds->w01B4;
				cui16 cx_169;
				int16 ax_354 = SEQ(ah_209, ds->t017B);
				for (cx_169 = 0x32; cx_169 != 0x00; --cx_169)
				{
					Eq_4 Top_170 = Top_120 - 4;
					*Top_170 += *((word32) Top_170 + 2);
					ds->t017B.u0 = (int16) *Top_170;
					*((word32) Top_170 - 1) = *((word32) Top_170 + 2);
					*((word32) Top_170 + 1) += *((word32) Top_170 - 1);
					*((word32) Top_170 - 1) = *Top_170;
					ds->w017C = (int16) *((word32) Top_170 - 1);
					Top_120 = Top_170;
					Eq_232 si_184 = ds->t017B;
					if ((byte) ax_354 < cs->*si_184)
						break;
					--ax_354;
				}
				uint8 al_200 = ds->*si_184;
				ds->*di_134 >>= 0x01;
				bu8 cl_207 = (byte) (cx_169 << 0x01);
				ah_209 = SLICE(cl_207 * al_200, byte, 8);
				ds->*di_134 += ah_209;
				++di_134;
				bp_140 = (word16) bp_140 + 1;
			} while (bp_140 != 0xA0);
			dx_139 = (word16) dx_139 + 1;
		} while (dx_139 != 100);
		ds->w0179 -= 0x03;
		word16 Eq_3::* si_234 = Eq_3::a0400;
		word16 Eq_475::* di_247 = Eq_475::a0000;
		word16 cx_251;
		for (cx_251 = SEQ(0x7D, cl_207); cx_251 != 0x00; --cx_251)
		{
			0xA000->*di_247 = ds->*si_234;
			++si_234;
			++di_247;
		}
	} while (__inb(0x60) != 0x01);
}

