// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	msdos_display_string(&ds->b0178);
	word16 di_19 = 0x0168;
	byte Eq_2::* si_10 = ds->ptr0168;
	do
	{
		byte al_15 = ds->*si_10;
		++si_10;
		uint16 ax_27 = (uint16) (uint8) al_15;
		if (al_15 == 0x00)
		{
			struct Eq_33 Eq_2::* di_20 = di_19 + 0x01;
			di_19 = &di_20->ptr0001;
			si_10 = (ds->*di_20).ptr0001;
			if (si_10 == &Eq_2::b0000)
				break;
		}
		fn0C00_0184(ax_27 << 0x04);
		__syscall(0x15);
	} while (__inb(0x60) != 0x01);
	__outb(0x61, __inb(0x61) & 252);
	msdos_terminate(0x00);
}

// 0C00:0184: void fn0C00_0184(Register uint16 ax)
// Called from:
//      fn0C00_0100
void fn0C00_0184(uint16 ax)
{
	if (ax > 0x12)
	{
		uint16 ax_13 = (uint16) (1193181 /u ax);
		byte bl_24 = (byte) ax_13;
		byte bh_27 = SLICE(ax_13, byte, 8);
		byte al_15 = __inb(0x61);
		if ((al_15 & 0x03) == 0x00)
		{
			__outb(0x61, al_15 | 0x03);
			__outb(0x43, ~0x49);
		}
		__outb(66, bl_24);
		__outb(66, bh_27);
	}
}

