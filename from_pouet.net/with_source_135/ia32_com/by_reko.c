// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ah, word16 cx, struct Eq_4 * ds)
{
	__syscall(0x10);
	byte Eq_28::* di_10 = &Eq_28::b0000;
	word16 ax_134 = SEQ(ah, 0x13);
	do
	{
		__outb(969, (byte) ax_134);
		--cx;
		++ax_134;
	} while (cx != 0x00);
	do
	{
		++0xA000->*di_10;
		byte Eq_28::* di_38 = di_10 + 1;
		uint32 dx_ax_44 = (uint32) (di_38 - 0x01);
		uint16 dx_46 = (uint16) (dx_ax_44 % ds->w015E);
		uint16 ax_47 = (uint16) (dx_ax_44 /u ds->w015E);
		if (dx_46 == 0x00)
			ds->w0160 = 0x01;
		if (dx_46 == 0x013F)
			ds->w0160 = ~0x00;
		if (ax_47 == 0x00)
			ds->w0162 = 0x0140;
		if (ax_47 == 199)
			ds->w0162 = ~0x013F;
		di_10 = di_38 - 0x01 + ds->w0160 + ds->w0162;
	} while (__inb(0x60) != 0x01);
}

