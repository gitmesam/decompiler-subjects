// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register int16 ax, Register word16 si, Register (memptr (ptr16 Eq_18) byte) di)
void fn0C00_0100(int16 ax, word16 si, byte Eq_18::* di)
{
	__syscall(0x10);
	int16 cx_26 = ax;
	do
	{
		0x8000->*di = (((byte) di ^ SLICE(di, byte, 8)) & 0x3F) << 0x02;
		--cx_26;
		++di;
		uint8 cl_230 = (byte) cx_26;
	} while (cx_26 != 0x00);
	__outb(0x03C8, 0x40);
	bcu8 bl_228;
	byte bh_270 = 0x00;
	for (bl_228 = 0x40; bl_228 != 0x00; ++bl_228)
	{
		__outb(969, 0x00);
		uint8 al_38 = bl_228 >> 0x01;
		__outb(969, al_38);
		__outb(969, al_38 >> 0x01);
	}
	uint8 bl_44 = 0x40;
	do
	{
		__outb(969, cl_230);
		__outb(969, cl_230);
		--bl_44;
		__outb(969, bl_44);
	} while (bl_44 != 0x00);
	Eq_75 di_182 = 0x00;
	struct Eq_77 * es_167 = 0xA000;
	do
	{
		0x9000->*di_182 = SLICE(cx_26, byte, 8);
		cx_26 += si;
		si -= SLICE(cx_26 *s 0x28, word16, 16);
		di_182 = (word16) di_182 + 1;
	} while (di_182 != 0x00);
	do
	{
		Eq_75 di_87 = (word16) di_182 + 4;
		Eq_96 si_193 = 0x00;
		word16 bx_319 = SEQ(bh_270, 200);
		do
		{
			byte bl_253 = (byte) bx_322;
			cui16 cx_316 = 0x0140;
			do
			{
				byte cl_261 = (byte) cx_323;
				Eq_75 di_109 = di_87;
				word16 si_101;
				<type-error> Eq_18::* bp_102 = &Eq_18::t0000;
				for (si_101 = 0x03; si_101 != 0x00; --si_101)
				{
					di_109 >>= 0x01;
					bi8 al_111 = bl_253 - 100 - 0x9000->*di_109;
					bi8 al_118 = cl_261 - 0xA0 - 0x9000->*((word16) di_109 + 64);
					int16 ax_120 = al_118 *s al_118 + al_111 *s al_111;
					bp_102 = (<type-error> Eq_18::*) ((char *) bp_102 + (int16) (0xFFFF / SEQ(SLICE(ax_120, byte, 8), (byte) ax_120 | 0x03)));
				}
				uint8 al_146 = (byte) bp_102;
				byte ah_170 = SLICE(bp_102, byte, 8);
				if ((al_146 & 0x80) == 0x00)
				{
					al_146 = Mem151[0x8000:bp_102 + si_193:byte] >>u 0x02;
					es_167 = 0xA000;
				}
				if (ah_170 != 0x00)
					al_146 = ~0x00;
				es_167->*si_193 = al_146;
				di_182 = di_87;
				si_193 = (word16) si_193 + 1;
				cx_316 = cx_323 - 0x01;
				cx_323 = cx_316;
			} while (cx_323 != 0x01);
			bh_270 = SLICE(bx_322 - 0x01, byte, 8);
			bx_319 = bx_322 - 0x01;
			bx_322 = bx_319;
		} while (bx_322 != 0x01);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
	} while (SEQ(ah_170, __inb(0x60)) != 0x01);
	__syscall(0x10);
}

