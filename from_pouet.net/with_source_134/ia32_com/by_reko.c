// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (memptr (ptr16 Eq_69) Eq_3) di)
void fn0C00_0100(byte ch, struct Eq_3 Eq_69::* di)
{
	__syscall(0x10);
	__outb(0x03C8, 0x00);
	word16 dx_10 = 969;
	word16 cx_85 = SEQ(ch, ~0x00);
	do
	{
		byte al_15 = ~(byte) cx_88;
		__outb(969, al_15);
		__outb(969, al_15 & 0x0F);
		__outb(969, al_15 & 0x0F);
		byte cl_66 = (byte) (cx_88 - 0x01);
		cx_85 = cx_88 - 0x01;
		cx_88 = cx_85;
	} while (cx_88 != 0x01);
	do
	{
		word16 cx_41 = SEQ(0x06, cl_66);
		do
		{
			word16 di_25 = di + 0x0000388E;
			dx_10 = __ror(dx_10 ^ di_25, 11);
			byte dh_33 = SLICE(dx_10, byte, 8);
			byte Eq_69::* di_32 = __rol(di_25, 0x07) + dx_10;
			0xA000->*di_32 = dh_33 & 0x5F;
			--cx_41;
			uint8 al_35 = dh_33 & 0x5F;
			di = (struct Eq_3 Eq_69::*) (di_32 + 1);
			byte cl_83 = (byte) cx_41;
		} while (cx_41 != 0x00);
		di = &Eq_69::t0000;
		word16 cx_59 = SEQ(~0x05, cl_83);
		do
		{
			bcu8 al_53 = al_35 + (0xA000->*di).b0000 + di[320] + (0xA000->*di).bFFFFFEC0;
			(0xA000->*di).b0000 = al_53 >> 0x02;
			--cx_59;
			al_35 = al_53 >> 0x02;
			++di;
			cl_66 = (byte) cx_59;
		} while (cx_59 != 0x00);
	} while (__inb(0x60) != 0x81);
	bios_video_set_mode(0x03);
	msdos_terminate_program20();
}

