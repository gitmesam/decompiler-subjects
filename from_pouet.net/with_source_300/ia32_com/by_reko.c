// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	bios_video_load_ROM_8x8_dbl_dot_patterns(bl);
	__syscall(0x10);
	uint8 ah_183 = 0x10;
	do
	{
		Eq_15 di_15 = 0x00;
		do
		{
			ui8 al_23 = 0x9000->*di_15 + 0x9000->*((word16) di_15 + 2);
			ui16 al_ah_216 = SEQ(al_23, ah_183) + SEQ(0x9000->*((word16) di_15 + 0x00A0), C_26);
			ui16 al_ah_218 = al_ah_216 + SEQ(0x9000->*((word16) di_15 - 2), C_32);
			cu8 al_36 = SLICE(al_ah_218, byte, 8);
			cu16 ax_40 = SEQ((bool) (al_36 < 0x00) + (byte) al_ah_218, al_36);
			C_26.u1 = SLICE(cond(al_23), bool, 1);
			C_32.u1 = SLICE(cond(SLICE(al_ah_216, byte, 8)), bool, 1);
			byte al_44 = (byte) (ax_40 >> 0x02);
			ah_183 = SLICE(ax_40 >> 0x02, byte, 8);
			if (ax_40 >> 0x02 >= 0x07)
				al_44 -= 0x07;
			if (di_15 >= 0x1FE0)
				al_44 = __inb(0x40);
			0x9000->*((word16) di_15 - 0x00A0) = al_44;
			Eq_25 di_57 = (word16) di_15 + 1;
			di_15 = (word16) di_57 + 1;
		} while (di_57 < 0x207F);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		struct Eq_90 Eq_21::* di_67 = Eq_21::a0FA0;
		do
		{
			uint8 al_71 = di_67[2000];
			word16 cx_84 = ds->a01E7[(uint16) (uint8) (SEQ(ah_183, al_71) /u 0x0F)];
			di_67[1999] = cx_84;
			struct Eq_111 Eq_21::* di_88 = -di_67;
			di_88[2000] = SEQ(SLICE(cx_84, byte, 8), al_71);
			Eq_118 di_92 = -di_88;
			ah_183 = 0x00;
			di_67 = di_92 - 0x02;
		} while (di_92 != 0x02);
		struct Eq_124 Eq_21::* di_104 = Eq_21::a0000;
		struct Eq_126 Eq_21::* si_108 = Eq_21::a0000;
		cu8 bl_125 = 0x00;
		byte bh_139;
		for (bh_139 = 0x00; bh_139 != 0x19; ++bh_139)
		{
			do
			{
				if ((0x8000->*di_104).b0001 == 0x00)
				{
					word16 cx_109 = (0x8000->*si_108).w0000;
					(0x8000->*di_104).w0000 = SEQ(SLICE(cx_109, byte, 8), 0x01);
					struct Eq_153 Eq_21::* di_114 = -di_104;
					(0x8000->*di_114).w1F3E = SEQ(SLICE(cx_109, byte, 8), 0x02);
					di_104 = -di_114;
				}
				word16 si_128 = (char *) &si_108->w0000 + 1;
				di_104 = &di_104->b0001 + 0x009F;
				++bl_125;
				si_108 = si_128 + 0x01;
			} while (bl_125 < 0x33);
			di_104 -= 8158;
			si_108 = si_128 + 0x3B;
			bl_125 = 0x00;
		}
		byte Eq_21::* di_163;
		do
		{
			0xB800->*di_163 = 0x8000->*di_163;
			++di_163;
		} while (di_163 != Eq_21::a0000);
		byte al_182;
	} while (bios_kbd_check_keystroke(out al_182, out ah_183));
	bios_video_set_mode(0x03);
}

