// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte dl, Register (memptr Eq_13 Eq_4) bx, Register Eq_5 si, Register (ptr16 Eq_6) ds, Stack Eq_7 wArg00)
void fn0C00_0100(byte ah, byte dl, struct Eq_4 Eq_13::* bx, Eq_5 si, struct Eq_6 * ds, Eq_7 wArg00)
{
	__syscall(0x10);
	Eq_13 dx_7 = SEQ(0x70, dl);
	Eq_13 dx_10 = SEQ(0x80, dl);
	real64 rLoc1_303 = 0.0;
	do
	{
		(dx_10->*bx).w0000 = (int16) (sin(rLoc1_303) * (real64) ds->w0143);
		rLoc1_303 += (real64) ds->r017C;
		(dx_7->*bx).w0000 = si;
		struct Eq_40 Eq_13::* bx_36 = bx + 1;
		bx = (struct Eq_4 Eq_13::*) (bx_36 + 1);
	} while (bx_36 != 0x01);
	word16 cx_316 = SEQ(ah, 0x13);
	struct Eq_50 Eq_13::* bx_319 = bx_36 + 1;
	do
	{
		byte ch_277 = SLICE(cx_322, byte, 8);
		int16 ax_51 = ds->*si;
		si = (word16) si + 2;
		struct Eq_50 Eq_13::* bx_313 = bx_319;
		do
		{
			bi8 bl_57 = (byte) bx_323;
			Eq_55 ax_59 = bl_57 *s bl_57;
			bi8 bh_64 = SLICE(bx_323, byte, 8);
			Mem77[dx_7:bx_323 + ax_51:byte] = Mem73[dx_7:bx_323 + ax_51:byte] - ch_277 - (bh_64 *s bh_64 + ax_59 <u 0x0383);
			Eq_55 bp_112 = ax_59;
			Eq_13 bx_107 = bx_323 + 1;
			bx_313 = bx_323 + 1;
			bx_323 = bx_313;
		} while (bx_323 != 0x01);
		word16 cx_101 = cx_322 - 0x01;
		cx_316 = cx_322 - 0x01;
		bx_319 = bx_323 + 1;
		cx_322 = cx_316;
	} while (cx_322 != 0x01);
	Eq_7 di_118 = wArg00;
	Eq_13 sp_258 = fp + 2;
	dx_104 = dx_10;
	while (true)
	{
		Eq_13 dx_104;
		Eq_263 sp_97 = sp_258 - 2;
		(ss->*sp_97).u0 = 0x0140;
		ss->*((word16) sp_97 - 2) = cx_101;
		ss->*((word16) sp_97 - 4) = dx_104;
		ss->*((word16) sp_97 - 6) = bx_107;
		ss->*((word16) sp_97 - 8) = sp_258;
		ss->*((word16) sp_97 - 0x0A) = bp_112;
		ss->*((word16) sp_97 - 0x0C) = si;
		ss->*((word16) sp_97 - 0x0E) = di_118;
		word16 ax_127 = 0x0140;
		Eq_7 si_121 = dx_10->*bx_107;
		Eq_5 bp_122 = dx_10->*((word16) bx_107 + 96);
		Eq_13 cx_131 = SEQ(SLICE(cx_101, byte, 8), 200);
		do
		{
			Eq_55 sp_124 = sp_258 - 16;
			ss->*((word16) sp_124 - 2) = ax_127;
			ss->*((word16) sp_124 - 4) = cx_131;
			ss->*((word16) sp_124 - 6) = dx_104;
			ss->*((word16) sp_124 - 8) = bx_107;
			ss->*((word16) sp_124 - 0x0A) = sp_124;
			ss->*((word16) sp_124 - 0x0C) = bp_122;
			ss->*((word16) sp_124 - 0x0E) = si_121;
			ss->*((word16) sp_124 - 16) = di_118;
			word16 cx_151 = ax_127;
			Eq_13 ax_152 = cx_131;
			do
			{
				ss->*((word16) sp_124 - 18) = ax_152;
				ss->*((word16) sp_124 - 20) = cx_151;
				word16 dx_158 = dx_104 + si_121;
				ss->*((word16) sp_124 - 22) = dx_158;
				word16 bx_155 = bx_107 + bp_122;
				ss->*((word16) sp_124 - 24) = bx_155;
				ss->*((word16) sp_124 - 26) = sp_124 - 16;
				ss->*((word16) sp_124 - 28) = bp_122;
				ss->*((word16) sp_124 - 30) = si_121;
				ss->*((word16) sp_124 - 32) = di_118;
				Eq_7 al_185 = 0x12;
				Eq_99 bx_186 = SEQ(SLICE(bx_155, byte, 8), SLICE(dx_158, byte, 8));
				do
				{
					bx_186 *= 0x02;
					al_185 -= 0x03;
				} while (Mem181[dx_7:bx_186 + (sp_124 - 32):byte] <u al_185);
				0xA000->*di_118 = (byte) al_185.u1 + 16;
				word16 cx_214 = ss->*((word16) sp_124 - 20);
				si_121 = ss->*((word16) sp_124 - 30);
				bp_122 = ss->*((word16) sp_124 - 28);
				bx_107 = ss->*((word16) sp_124 - 24);
				dx_104 = ss->*((word16) sp_124 - 22);
				ax_152 = ss->*((word16) sp_124 - 18);
				di_118 = (word16) (ss->*((word16) sp_124 - 32)) + 1;
				cx_151 = cx_214 - 0x01;
			} while (cx_214 != 0x01);
			ax_127 = ss->*((word16) sp_124 - 2);
			si_121 = ss->*((word16) sp_124 - 0x0E);
			bp_122 = ss->*((word16) sp_124 - 0x0C);
			Eq_13 cx_232 = ss->*((word16) sp_124 - 4);
			di_118 = (word16) (ss->*((word16) sp_124 - 16)) + ax_127;
			bx_107 = ss->*((word16) sp_124 - 8) - si_121;
			dx_104 = Mem200[ss:sp_124 + -6:word16] + bp_122;
			cx_131 = cx_232 - 0x01;
		} while (cx_232 != 0x01);
		di_118 = ss->*sp_124;
		si = ss->*((word16) sp_124 + 2);
		bp_112 = ss->*((word16) sp_124 + 4);
		dx_104 = ss->*((word16) sp_124 + 0x0A);
		cx_101 = ss->*((word16) sp_124 + 0x0C);
		bx_107 = ss->*((word16) sp_124 + 8) + 0x02;
		sp_258 = (word16) sp_124 + 1040;
	}
}

