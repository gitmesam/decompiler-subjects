// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	bios_video_set_mode(0x13);
	__outb(0x03C8, 0x00);
	cu16 dx_104 = 969;
	cui16 ax_158 = 0x00;
	do
	{
		__outb(969, (byte) ax_158);
		word16 ax_22 = __ror(ax_158, 0x08);
		byte al_23 = (byte) ax_22;
		__outb(969, al_23);
		byte al_25 = al_23 | SLICE(ax_22, byte, 8);
		__outb(969, al_25);
		word16 ax_29 = __ror(SEQ(SLICE(ax_22, byte, 8), al_25), 0x08);
		word16 ax_33 = SEQ(SLICE(ax_29, byte, 8), (byte) ax_29 + 0x01);
		ax_158 = ax_33 + 0x02;
	} while (ax_33 != 0x02);
	while (true)
	{
		ds->w01A5 = dx_104;
		ds->t01A7.u0 = 0x00;
		struct Eq_62 Eq_78::* si_133 = &Eq_78::t7D00;
		byte cl_45;
		for (cl_45 = 0x00; cl_45 != 100; ++cl_45)
		{
			ds->t01A7.u0 = (byte) ds->t01A7.u0 + 1;
			ds->w01A5 -= ds->t01A7;
			ds->w01A9 = (word16) ((ds->w01A5 >> 0x02) * 0x78);
			cui16 dx_161 = 0x00;
			do
			{
				(~0x5C03->*si_133).b0000 = (byte) dx_164 - ds->b01AC ^ (byte) __ror(ds->w01A9, 0x08);
				ds->w01A9 -= dx_164;
				si_133 = &si_133->b0000 + 1;
				dx_161 = dx_164 + 0x01;
				dx_164 = dx_161;
			} while (dx_164 != 0x013F);
			si_133 -= 0x0280;
		}
		byte al_93;
		byte ah_94;
		if (bios_kbd_check_keystroke(out al_93, out ah_94))
			break;
		ds->w01AB += 0x0200;
		dx_104 = 0x03DA;
		do
			;
		while ((__inb(0x03DA) & 0x08) != 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
	}
	bios_video_set_mode(0x03);
	msdos_display_string(&ds->b01AD);
}

