// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) es, Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_2 * es, struct Eq_3 * ds)
{
	word16 si_13;
	word16 ax_11 = fn0C00_014D(ds->a0156 + 420, out si_13);
	word16 si_21;
	word16 ax_19 = fn0C00_014D(si_13, out si_21);
	word16 Eq_3::* si_31;
	fn0C00_014D(si_21, out si_31);
	cup16 ax_24 = ax_19 + si_21;
	Eq_27 si_41 = ax_24 + 0x06;
	Eq_27 ax_42 = ds->*si_31 + (ax_11 + 0x0100);
	if (ax_42 > ax_24 + 0x06)
	{
		Eq_44 si_49 = ax_24 + 0x05;
		Eq_47 di_50 = ax_42 - 0x01;
		word16 cx_52;
		for (cx_52 = ax_19; cx_52 != 0x00; --cx_52)
		{
			es->*di_50 = ds->*si_49;
			--si_49;
			--di_50;
		}
		si_41 = ax_42;
	}
	Eq_27 di_65 = si_41;
	byte Eq_3::* si_70 = Eq_3::a0156;
	word16 cx_71;
	for (cx_71 = 0x01A0; cx_71 != 0x00; --cx_71)
	{
		es->*di_65 = ds->*si_70;
		++si_70;
		di_65 = (word16) di_65 + 1;
	}
}

// 0C00:014D: Register word16 fn0C00_014D(Sequence (ptr32 word16) ds_si, Register out ptr16 siOut)
// Called from:
//      fn0C00_0100
word16 fn0C00_014D(word16 * ds_si, ptr16 & siOut)
{
	struct Eq_80 * ds = SLICE(ds_si, selector, 16);
	word16 si_8;
	fn0C00_0152(ds_si, out si_8);
	ptr16 si_12;
	word16 ax_11 = fn0C00_0152(si_8, out si_12);
	siOut = si_12;
	return ax_11;
}

// 0C00:0152: Register word16 fn0C00_0152(Sequence (ptr32 word16) ds_si, Register out ptr16 siOut)
// Called from:
//      fn0C00_014D
word16 fn0C00_0152(word16 * ds_si, ptr16 & siOut)
{
	word16 si = (word16) ds_si;
	word16 ax_7 = *ds_si;
	siOut = si + 2;
	return SEQ((byte) ax_7, SLICE(ax_7, byte, 8));
}

