// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register cui16 bp, Register (ptr16 Eq_3) es, Register (ptr16 Eq_4) ds)
void fn0C00_0100(cui16 bp, struct Eq_3 * es, struct Eq_4 * ds)
{
	__wait();
	__fninit();
	__syscall(0x10);
	word16 cx_10 = 0x7D00;
	word16 Eq_3::* di_222 = Eq_3::a0500;
	while (true)
	{
		byte ch_231 = SLICE(cx_10, byte, 8);
		if (cx_10 == 0x00)
			break;
		es->*di_222 = 0x00;
		++di_222;
		--cx_10;
	}
	struct Eq_20 Eq_4::* di_229 = Eq_4::a0000;
	real64 rLoc2_282 = (real64) ds->w01F5;
	int16 cx_232 = SEQ(ch_231, 200);
	do
	{
		real64 rLoc3_283 = (real64) ds->w01F3;
		word16 dx_40;
		for (dx_40 = 0x0140; dx_40 != 0x00; --dx_40)
		{
			(0x7000->*di_229).w0000 = (int16) ((real64) ds->w01FB / sqrt(rLoc2_282 * rLoc2_282 + rLoc3_283 * rLoc3_283));
			(0x8000->*di_229).w0000 = (int16) (atan(rLoc3_283, rLoc2_282) / (real64) ds->r01F7);
			rLoc3_283 += 1.0;
			++di_229;
		}
		rLoc2_282 += 1.0;
		--cx_232;
	} while (cx_232 != 0x00);
	__outb(0x03C8, 0x00);
	bcu8 ah_106 = 0x00;
	do
	{
		uint8 al_93 = ah_348 >> 0x02;
		__outb(969, al_93 >> 0x01);
		__outb(969, al_93 >> 0x01);
		__outb(969, al_93);
		ah_106 = ah_348 + 0x01;
		ah_348 = ah_106;
	} while (ah_348 != 0x01);
	real64 rLoc3_302 = 0.0;
	int16 Eq_4::* bx_112 = &Eq_4::w0300;
	do
	{
		bx_240 = SEQ(bh_239, bl_127 + 0x01);
		ds->*bx_112 = (int16) (sin(rLoc3_302) * (real64) ds->w01FD + (real64) ds->w01FD);
		byte bl_127 = (byte) bx_112;
		byte bh_239 = SLICE(bx_112, byte, 8);
		rLoc3_302 += (real64) ds->r01F7;
		bx_112 = bx_240;
	} while (bl_127 != 0x01);
	do
	{
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		struct Eq_163 Eq_4::* di_138 = Eq_4::a0000;
		do
		{
			byte bl_144 = (0x7000->*di_138).b0000;
			byte bh_146 = (0x8000->*di_138).b0000;
			word16 ax_156 = SEQ(bh_146, bl_144) + bp;
			word16 bx_161 = SEQ((&ds->w0300)[(uint16) bl_144] + bh_146, bl_144) - bp;
			byte ch_267 = SLICE(cx_232, byte, 8);
			int8 al_159 = (byte) ax_156 ^ SLICE(ax_156, byte, 8);
			int8 bl_164 = (byte) bx_161 ^ SLICE(bx_161, byte, 8);
			if ((bl_164 & 0x20) != 0x00)
				bl_164 &= 0x1F;
			uint16 ax_189 = (uint16) di_138[0x0500];
			byte bl_193 = (byte) (((uint16) (bl_164 + SLICE((al_159 - bl_164) *s cx_232, byte, 8)) - ax_189 >> 0x03) + ax_189);
			di_138[0x0500] = bl_193;
			(0xA000->*di_138).b0000 = bl_193;
			++di_138;
		} while (di_138 != &Eq_4::tFFFFFA00);
		cui16 bp_202 = bp + 0x0101;
		bp = bp_202;
		cx_232 = SEQ(ch_267, ss->*((word16) (bp_202 & 0xFF) + 0x0300));
	} while (__inb(0x60) != 0x01);
}

