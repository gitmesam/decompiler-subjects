// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_2) ds_bx)
void fn0C00_0100(struct Eq_2 * ds_bx)
{
	struct Eq_3 * es_23 = ds_bx->ptr0002;
	__cli();
	__sti();
	bios_video_set_mode(0x13);
	es_23->b7DA0 = ~0x00;
	cui16 cx_232 = 0xFF;
	do
	{
		uint8 cl_27 = (byte) cx_235;
		__outb(0x03C8, cl_27);
		__outb(969, 0x00);
		__outb(969, cl_27 >> 0x03);
		__outb(969, 0x00);
		cx_232 = cx_235 - 0x01;
		cx_235 = cx_232;
	} while (cx_235 != 0x01);
	while (true)
	{
		word16 cx_200 = 0x0100;
		do
		{
			((char *) cs + 8080)[0x00C6] = cx_200;
			((char *) cs + 8080)[0x00C4] = cs;
			ptr16 ax_48 = ((char *) cs + 8080)[0x00C4];
			((char *) cs + 8080)[0x00C4] = 0xA000;
			uint8 ah_225 = SLICE(ax_48 + 0x0FF0, byte, 8);
			struct Eq_51 * ds_54 = ((char *) cs + 8080)[0x00C4];
			word32 Eq_51::* si_56 = Eq_51::a0000;
			word32 Eq_58::* di_59 = Eq_58::a01F6;
			word16 cx_60;
			for (cx_60 = 16000; cx_60 != 0x00; --cx_60)
			{
				(ax_48 + 0x0FF0)->*di_59 = ds_54->*si_56;
				++si_56;
				++di_59;
			}
			((char *) cs + 8080)[0x00C4] = cs;
			struct Eq_77 * ds_77 = ((char *) cs + 8080)[0x00C4];
			word16 cx_134;
			byte Eq_77::* si_129 = Eq_77::a01F6;
			struct Eq_85 Eq_102::* di_132 = &Eq_102::t01F6;
			for (cx_134 = 0xFA00; cx_134 != 0x00; --cx_134)
			{
				ui32 bx_bx_228 = SEQ(bx_92, SEQ(ah_225, ((ax_48 + 0x0FF0)->*di_132).bFFFFFEC0)) + SEQ(ax_95, SEQ(ah_225, ((ax_48 + 0x0FF0)->*di_132).bFFFFFFFF));
				cup16 bx_97 = SLICE(bx_bx_228, word16, 16);
				cup16 bx_102 = (bool) (bx_97 < 0x00) + (bx_97 + SEQ(ah_225, di_132[320]));
				cup16 bx_107 = (bool) (bx_102 < 0x00) + (bx_102 + SEQ(ah_225, ((ax_48 + 0x0FF0)->*di_132).bFFFFFEBF));
				cup16 bx_112 = (bool) (bx_107 < 0x00) + (bx_107 + SEQ(ah_225, ((ax_48 + 0x0FF0)->*di_132).bFFFFFEC1));
				cu16 bx_117 = (bool) (bx_112 < 0x00) + (bx_112 + SEQ(ah_225, di_132[319]));
				ui16 bx_92 = (word16) bx_bx_228;
				uint16 ax_95 = SEQ(ah_225, di_132[1]);
				byte bl_127 = (byte) (((bool) (bx_117 < 0x00) + (bx_117 + SEQ(ah_225, di_132[0x0141])) + 0x04 >> 0x03) + 0x02);
				ds_77->*si_129 = bl_127;
				++si_129;
				++di_132;
			}
			((char *) cs + 8080)[0x00C4] = 0xA000;
			struct Eq_184 * es_140 = ((char *) cs + 8080)[0x00C4];
			word32 Eq_184::* di_142 = Eq_184::a0000;
			word16 cx_145;
			word32 Eq_77::* si_146 = Eq_77::a01F6;
			for (cx_145 = 16000; cx_145 != 0x00; --cx_145)
			{
				es_140->*di_142 = ds_77->*si_146;
				++si_146;
				++di_142;
			}
			word16 cx_159;
			struct Eq_210 Eq_184::* di_160 = Eq_184::a0000;
			for (cx_159 = 0x0140; cx_159 != 0x00; --cx_159)
			{
				(es_140->*di_160).bFFFFF8C0 = 0x00;
				di_160[63360] = 0x00;
				(es_140->*di_160).b0000 = 0x00;
				++di_160;
			}
			word16 cx_172;
			struct Eq_232 Eq_184::* di_173 = Eq_184::a0000;
			for (cx_172 = 200; cx_172 != 0x00; --cx_172)
			{
				(es_140->*di_173).b013F = 0x00;
				(es_140->*di_173).b0000 = 0x00;
				++di_173;
			}
			es_140->b7DA0 = 200;
			byte al_189;
			byte ah_190;
			if (!bios_kbd_check_keystroke(out al_189, out ah_190))
			{
				byte al_204;
				bios_kbd_get_keystroke(out al_204);
				bios_video_set_mode(0x03);
				msdos_terminate(0x00);
			}
			word16 cx_198 = ((char *) cs + 8080)[0x00C6];
			cx_200 = cx_198 - 0x01;
		} while (cx_198 != 0x01);
	}
}

