// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds, FpuStack real64 rLoc3)
void fn0C00_0100(struct Eq_2 * ds, real64 rLoc3)
{
	__fninit();
	__syscall(0x10);
	int16 Eq_2::* si_14 = &Eq_2::w0202;
	word16 cx_15 = 0x0140;
	real64 rLoc1_302 = (real64) ds->w01F8;
	do
	{
		ds->*si_14 = (int16) rLoc1_302;
		--cx_15;
		rLoc1_302 += ds->r01F4;
		++si_14;
		byte ch_269 = SLICE(cx_15, byte, 8);
	} while (cx_15 != 0x00);
	__outb(0x03C8, 0x00);
	bcu8 ah_212;
	byte dl_229 = 0xC9;
	do
	{
		uint8 al_37 = ah_212 >> 0x02;
		__outb(969, al_37);
		__outb(969, al_37);
		uint8 al_39 = al_37 * 0x02;
		if (al_37 * 0x02 > 0x3F)
			al_39 = 0x3F;
		__outb(969, al_39);
		++ah_212;
	} while (ah_212 != 0x00);
	do
	{
		struct Eq_69 Eq_2::* si_102 = Eq_2::a0201;
		word16 dx_232 = SEQ(0x02, dl_229);
		do
		{
			real64 rLoc3_308 = cos(rLoc3);
			real64 rLoc4_309 = sin(rLoc3);
			real64 rLoc5_313 = rLoc3_308 + rLoc3_308 + rLoc1_302;
			real64 rLoc5_314 = cos(rLoc5_313);
			real64 rLoc4_316 = rLoc4_309 * sin(rLoc5_313);
			rLoc3 = rLoc3_308 * (((rLoc5_314 * rLoc5_314) * (real64) ds->w01FE) * rLoc4_316);
			ds->t0200.u0 = (int16) rLoc4_316;
			Eq_101 bx_82 = ds->t0200;
			ds->t0200.u0 = (int16) rLoc3;
			Mem88[ds:bx_82 *s 0x0140 + Mem84[ds:0x0200:word16] + 0x8222:word16] = ~0x0505;
			--dx_232;
			byte dh_267 = SLICE(dx_232, byte, 8);
		} while (dx_232 != 0x00);
		rLoc1_302 += ds->r01FA;
		struct Eq_128 Eq_2::* di_120 = &Eq_2::t0000;
		word16 cx_161 = SEQ(ch_269, 200);
		do
		{
			struct Eq_69 Eq_2::* si_105 = si_102 + 1;
			byte ah_126 = (ds->*si_102).b0000;
			ui16 si_110 = si_105[60];
			struct Eq_148 Eq_147::* bp_113 = Eq_147::a0202;
			do
			{
				<type-error> Eq_2::* bx_117 = (ss->*bp_113).w0000;
				struct Eq_140 Eq_147::* bp_118 = bp_113 + 1;
				Eq_154 ax_138 = (SEQ(ah_126, (0x8000->*di_120).bFFFFFFFF) + SEQ(dh_267, (&(ds->*((char *) bx_117 + 47491)))[si_110 * 0x0140]) + SEQ(dh_267, (0x8000->*di_120).bFFFFFEC0) + SEQ(dh_267, (&(ds->*((char *) bx_117 + 0x0000BAC2)))[si_110 * 0x0140]) >> 0x02) - 0x03;
				bp_113 = (struct Eq_148 Eq_147::*) (bp_118 + 1);
				byte al_144 = (byte) ax_138;
				ah_126 = SLICE(ax_138, byte, 8);
				if (ax_138 < 0x00)
				{
					al_144 = 0x00;
					ah_126 = 0x00;
				}
				(0x8000->*di_120).b0000 = al_144;
				++di_120;
			} while (bp_118 != &Eq_147::t0481);
			--cx_161;
			si_102 = si_105;
			byte ch_299 = SLICE(cx_161, byte, 8);
		} while (cx_161 != 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		struct Eq_215 Eq_2::* di_170 = &Eq_2::t0640;
		word16 cx_401 = SEQ(ch_299, ~0x41);
		do
		{
			byte cl_284 = (byte) cx_405;
			cui16 dx_398 = 0x0140;
			do
			{
				bcu8 al_176 = (0x8000->*di_170).b0000;
				di_170[1154] = al_176;
				cu8 al_187 = al_176 + ((al_176 >> 0x03) + (byte) dx_404 & (al_176 >> 0x03) + cl_284);
				if (al_187 < 0x00)
					al_187 = ~0x00;
				(0xA000->*di_170).b0000 = al_187;
				++di_170;
				dl_229 = (byte) (dx_404 - 0x01);
				dx_398 = dx_404 - 0x01;
				dx_404 = dx_398;
			} while (dx_404 != 0x01);
			ch_269 = SLICE(cx_405 - 0x01, byte, 8);
			cx_401 = cx_405 - 0x01;
			cx_405 = cx_401;
		} while (cx_405 != 0x01);
	} while (__inb(0x60) != 0x01);
}

