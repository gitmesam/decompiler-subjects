// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	__fninit();
	__syscall(0x10);
	int16 Eq_2::* si_14 = &Eq_2::w0202;
	word16 cx_15 = 0x0140;
	real64 rLoc1_304 = (real64) ds->w01F8;
	do
	{
		ds->*si_14 = (int16) rLoc1_304;
		--cx_15;
		rLoc1_304 += (real64) ds->r01F4;
		++si_14;
		byte ch_271 = SLICE(cx_15, byte, 8);
	} while (cx_15 != 0x00);
	__outb(0x03C8, 0x00);
	bcu8 ah_214 = 0x00;
	byte dl_231 = 0xC9;
	do
	{
		uint8 al_37 = ah_214 >> 0x02;
		__outb(969, al_37);
		__outb(969, al_37);
		uint8 al_39 = al_37 * 0x02;
		if (al_37 * 0x02 > 0x3F)
			al_39 = 0x3F;
		__outb(969, al_39);
		++ah_214;
	} while (ah_214 != 0x00);
	do
	{
		struct Eq_69 Eq_2::* si_104 = Eq_2::a0201;
		real64 rLoc2_307 = 0.0;
		word16 dx_234 = SEQ(0x02, dl_231);
		do
		{
			real64 rLoc3_310 = cos(rLoc2_307);
			real64 rLoc4_311 = sin(rLoc2_307);
			real64 rLoc5_315 = rLoc2_307 + rLoc2_307 + rLoc1_304;
			real64 rLoc5_316 = cos(rLoc5_315);
			real64 rLoc4_318 = rLoc4_311 * sin(rLoc5_315);
			real64 rLoc3_322 = rLoc3_310 * (((rLoc5_316 * rLoc5_316) * (real64) ds->w01FE) * rLoc4_318);
			ds->t0200.u0 = (int16) rLoc4_318;
			Eq_104 bx_84 = ds->t0200;
			ds->t0200.u0 = (int16) rLoc3_322;
			Mem90[ds:bx_84 *s 0x0140 + Mem86[ds:0x0200:word16] + 0x8222:word16] = ~0x0505;
			--dx_234;
			rLoc2_307 += (real64) ds->r01FA;
			byte dh_269 = SLICE(dx_234, byte, 8);
		} while (dx_234 != 0x00);
		rLoc1_304 += (real64) ds->r01FA;
		struct Eq_136 Eq_2::* di_122 = &Eq_2::t0000;
		word16 cx_163 = SEQ(ch_271, 200);
		do
		{
			struct Eq_69 Eq_2::* si_107 = si_104 + 1;
			byte ah_128 = (ds->*si_104).b0000;
			ui16 si_112 = si_107[60];
			struct Eq_156 Eq_155::* bp_115 = Eq_155::a0202;
			do
			{
				<type-error> Eq_2::* bx_119 = (ss->*bp_115).w0000;
				struct Eq_148 Eq_155::* bp_120 = bp_115 + 1;
				Eq_162 ax_140 = (SEQ(ah_128, (0x8000->*di_122).bFFFFFFFF) + SEQ(dh_269, (&(ds->*((char *) bx_119 + 47491)))[si_112 * 0x0140]) + SEQ(dh_269, (0x8000->*di_122).bFFFFFEC0) + SEQ(dh_269, (&(ds->*((char *) bx_119 + 0x0000BAC2)))[si_112 * 0x0140]) >> 0x02) - 0x03;
				bp_115 = (struct Eq_156 Eq_155::*) (bp_120 + 1);
				byte al_146 = (byte) ax_140;
				ah_128 = SLICE(ax_140, byte, 8);
				if (ax_140 < 0x00)
				{
					al_146 = 0x00;
					ah_128 = 0x00;
				}
				(0x8000->*di_122).b0000 = al_146;
				++di_122;
			} while (bp_120 != &Eq_155::t0481);
			--cx_163;
			si_104 = si_107;
			byte ch_301 = SLICE(cx_163, byte, 8);
		} while (cx_163 != 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		struct Eq_223 Eq_2::* di_172 = &Eq_2::t0640;
		word16 cx_395 = SEQ(ch_301, ~0x41);
		do
		{
			byte cl_286 = (byte) cx_399;
			cui16 dx_392 = 0x0140;
			do
			{
				bcu8 al_178 = (0x8000->*di_172).b0000;
				di_172[1154] = al_178;
				cu8 al_189 = al_178 + ((al_178 >> 0x03) + (byte) dx_398 & (al_178 >> 0x03) + cl_286);
				if (al_189 < 0x00)
					al_189 = ~0x00;
				(0xA000->*di_172).b0000 = al_189;
				++di_172;
				dl_231 = (byte) (dx_398 - 0x01);
				dx_392 = dx_398 - 0x01;
				dx_398 = dx_392;
			} while (dx_398 != 0x01);
			ch_271 = SLICE(cx_399 - 0x01, byte, 8);
			cx_395 = cx_399 - 0x01;
			cx_399 = cx_395;
		} while (cx_399 != 0x01);
	} while (__inb(0x60) != 0x01);
}

