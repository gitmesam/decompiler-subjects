// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	Eq_9 cx_25 = 0x0100;
	int16 Eq_3::* bx_19 = SEQ(0xF0, bl);
	do
	{
		ss->a0200[0] = cx_25;
		ds->*bx_19 = (int16) (sin((real64) ss->a0200[0] * (real64) ds->r01F2) * (real64) ds->r01F4);
		--cx_25;
		++bx_19;
		byte cl_241 = (byte) cx_25;
	} while (cx_25 != 0x00);
	do
	{
		__outb(0x03C8, 0x00);
		ss->a0200[0].u1 = 0x00;
		ss->w0204 = 0x00;
		word16 cx_244 = SEQ(0x01, cl_241);
		do
		{
			struct Eq_64 Eq_14::* bp_236 = Eq_14::a0200;
			struct Eq_68 Eq_3::* bx_38 = &Eq_3::w01FC;
			do
			{
				cu8 al_42 = (ss->*bp_236).b0001;
				if (al_42 > 0x3F)
					al_42 = 0x3F;
				__outb(969, al_42);
				(ss->*bp_236).w0000 += (ds->*bx_38).w0000;
				struct Eq_76 Eq_3::* bx_62 = bx_38 - 0x01;
				++bp_236;
				bx_38 = bx_62 - 0x01;
			} while (bx_62 != &Eq_3::tFFFFFE0B);
			--cx_244;
		} while (cx_244 != 0x00);
		word16 ax_71 = ds->w01FE;
		ds->w01F8 += ax_71;
		word16 ax_74 = -ax_71;
		ds->w01FC += ax_74;
		if (ds->w01F8 == 0x01E0 || ds->w01FC == 0x01E0)
			ds->w01FE = ax_74;
		struct Eq_120 * ax_94 = SEQ(SLICE(cs, byte, 8) + 0x10, (byte) cs);
		struct Eq_127 Eq_120::* di_143 = Eq_120::a0000;
		cui16 dx_100;
		for (dx_100 = 200; dx_100 != 0x00; --dx_100)
		{
			cui16 cx_101 = 0x0140;
			do
			{
				ss->a0200[0] = (cx_101 << 0x03) + (&ds->wFFFFF000)[(uint16) ((byte) (dx_100 + ss->w0210)) * 0x02];
				ui16 ax_128 = (dx_100 << 0x03) + (&ds->wFFFFF000)[(uint16) ((byte) (cx_101 + ss->w0210)) * 0x02] ^ (ss->a0200)[0];
				byte al_129 = (byte) ax_128;
				bcu8 al_130 = al_129 & 0x40;
				word16 ax_135 = SEQ(SLICE(ax_128, byte, 8), al_129 & 0x40);
				if ((al_129 & 0x40) != 0x00)
					al_130 = (byte) (ax_135 - 0x01);
				(ax_94->*di_143).b0000 = al_130 + (ax_94->*di_143).b0000 + di_143[1] + di_143[2] >> 0x02;
				--cx_101;
				++di_143;
				byte cl_272 = (byte) cx_101;
			} while (cx_101 != 0x00);
		}
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) == 0x00);
		word32 Eq_120::* si_202 = Eq_120::a0000;
		word32 Eq_250::* di_203 = Eq_250::a0000;
		word16 cx_207 = SEQ(0x3F, cl_272);
		while (true)
		{
			cl_241 = (byte) cx_207;
			if (cx_207 == 0x00)
				break;
			0xA000->*di_203 = ax_94->*si_202;
			++si_202;
			++di_203;
			--cx_207;
		}
		++ss->w0210;
	} while (__inb(0x60) != 0x01);
	msdos_terminate(0x00);
}

