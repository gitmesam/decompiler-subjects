// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_2) ds_bx, Register byte ah, Register byte ch, Register (memptr (ptr16 Eq_11) byte) di)
void fn0C00_0100(struct Eq_2 * ds_bx, byte ah, byte ch, byte Eq_11::* di)
{
	__syscall(0x10);
	struct Eq_11 * ds_143 = ds_bx->ptr0002;
	word16 ax_167 = SEQ(ah, 0x13);
	do
	{
		__outb(969, (byte) ax_171);
		ax_167 = ax_171 + 0x01;
		ax_171 = ax_167;
	} while (ax_171 != 0x01);
	ui16 si_100 = 0x0141;
	while (true)
	{
		word16 cx_127 = SEQ(ch, 0x20);
		di_49 = di;
		do
		{
			byte Eq_11::* di_49;
			word16 cx_147;
			di_53 = di_49;
			do
			{
				byte Eq_11::* di_53;
				++ds_143->*di_53;
				++di_53;
				--cx_147;
			} while (cx_147 != 0x00);
			di_49 += 320;
			cx_127 = cx_170 - 0x01;
			ch = SLICE(cx_170 - 0x01, byte, 8);
			cx_170 = cx_127;
		} while (cx_170 != 0x01);
		di += si_100;
		uint32 dx_ax_86 = (uint32) (uint16) di;
		uint16 dx_88 = (uint16) (dx_ax_86 % 0x0140);
		if (((uint16) (dx_ax_86 /u 0x0140) & 0x7F) == 0x00)
			si_100 = si_100 ^ 0x7E;
		if ((dx_88 & 0xFF) == 0x00)
			si_100 = si_100 ^ ~0x7F;
	}
}

