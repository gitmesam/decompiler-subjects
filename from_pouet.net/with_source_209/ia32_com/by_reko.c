// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (ptr16 Eq_3) es, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte cl, struct Eq_3 * es, struct Eq_3 * ds)
{
	__syscall(0x10);
	cui16 dx_18 = 0x3F;
	do
	{
		cu8 dl_300 = (byte) dx_18;
		byte Eq_3::* di_10 = Eq_3::a01F8;
		word16 cx_11 = SEQ(~0x05, cl);
		while (true)
		{
			byte ch_326 = SLICE(cx_11, byte, 8);
			if (cx_11 == 0x00)
				break;
			es->*di_10 = 0x00;
			++di_10;
			--cx_11;
		}
		struct Eq_12 Eq_3::* si_105 = &Eq_3::t01BE;
		cui16 cx_197 = SEQ(ch_326, 0x06);
		if (dl_300 > 0x06)
			--dx_18;
		do
		{
			byte ch_342 = SLICE(cx_442, byte, 8);
			word16 ax_24 = (ds->*si_105).t0000;
			struct Eq_41 Eq_3::* si_25 = si_105 + 1;
			if (cx_442 == dx_18)
			{
				ci8 al_39 = (byte) ax_24;
				if (ax_24 == 0x00)
					--dx_18;
				else
				{
					++(ds->*si_25).w0000;
					--(ds->*si_25).bFFFFFFFF;
					byte bl_38 = 0x01;
					if (al_39 != 0x00)
					{
						if (al_39 < 0x00)
							bl_38 = ~0x00;
						(ds->*si_25).b0001 += bl_38;
						(ds->*si_25).bFFFFFFFE -= bl_38;
					}
				}
			}
			byte Eq_3::* di_122 = (word16) ((uint16) (uint8) (ds->*si_25).w0000 * 0x0140) + (uint16) ((uint8) (ds->*si_25).b0001) + 0x01F8;
			uint16 bx_102 = (uint16) (uint8) si_25[1];
			byte al_104 = (ds->*si_25).b0003;
			si_105 = (struct Eq_12 Eq_3::*) (si_25 + 2);
			do
			{
				struct Eq_176 Eq_3::* si_110 = &si_105->b0001;
				byte ah_111 = (ds->*si_110).w0000;
				si_105 = (struct Eq_12 Eq_3::*) &si_110->b0001;
				word16 cx_116 = SEQ(ch_342, (ds->*si_105).t0000);
				do
				{
					uint16 cx_120;
					for (cx_120 = bx_102; cx_120 != 0x00; --cx_120)
					{
						es->*di_122 = al_104;
						++di_122;
					}
					word16 di_124 = di_122 - bx_102;
					di_122 = di_124 + 0x0140;
					byte cl_150 = (byte) cx_443;
					if ((ah_111 & 0x10) != 0x00)
					{
						di_122 = di_124 + 322;
						bx_102 -= 0x02;
					}
					if ((ah_111 & 0x01) != 0x00)
						bx_102 += 0x02;
					if ((cl_150 & 0x01) != 0x00)
					{
						if ((ah_111 & 0x02) != 0x00)
							--bx_102;
						if ((ah_111 & 0x20) != 0x00)
						{
							--di_122;
							++bx_102;
						}
					}
					cx_116 = cx_443 - 0x01;
					ch_342 = SLICE(cx_443 - 0x01, byte, 8);
					cx_443 = cx_116;
				} while (cx_443 != 0x01);
			} while ((ah_111 & 0x80) != 0x00);
			cx_197 = cx_442 - 0x01;
			cx_442 = cx_197;
		} while (cx_442 != 0x01);
		word16 Eq_3::* si_202 = Eq_3::a01F8;
		word16 Eq_203::* di_203 = Eq_203::a0000;
		word16 cx_206;
		for (cx_206 = 0x7D00; cx_206 != 0x00; --cx_206)
		{
			0xA000->*di_203 = ds->*si_202;
			++si_202;
			++di_203;
		}
		es = ds;
		word16 cx_238;
		for (cx_238 = 0x08; cx_238 != 0x00; --cx_238)
		{
			do
				;
			while ((__inb(0x03DA) & 0x08) != 0x00);
			do
				;
			while ((__inb(0x03DA) & 0x08) == 0x00);
		}
		cl = (byte) cx_206;
	} while (__inb(0x60) != 0x01);
}

