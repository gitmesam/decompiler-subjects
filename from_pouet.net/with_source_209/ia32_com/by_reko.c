// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (ptr16 Eq_3) es, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte cl, struct Eq_3 * es, struct Eq_3 * ds)
{
	__syscall(0x10);
	cui16 dx_18 = 0x3F;
	do
	{
		cu8 dl_299 = (byte) dx_18;
		byte Eq_3::* di_10 = Eq_3::a01F8;
		word16 cx_11 = SEQ(~0x05, cl);
		while (true)
		{
			byte ch_325 = SLICE(cx_11, byte, 8);
			if (cx_11 == 0x00)
				break;
			es->*di_10 = 0x00;
			++di_10;
			--cx_11;
		}
		struct Eq_12 Eq_3::* si_104 = &Eq_3::t01BE;
		cui16 cx_196 = SEQ(ch_325, 0x06);
		if (dl_299 > 0x06)
			--dx_18;
		do
		{
			byte ch_341 = SLICE(cx_441, byte, 8);
			word16 ax_24 = (ds->*si_104).t0000;
			struct Eq_41 Eq_3::* si_25 = si_104 + 1;
			if (cx_441 == dx_18)
			{
				ci8 al_39 = (byte) ax_24;
				if (ax_24 == 0x00)
					--dx_18;
				else
				{
					++(ds->*si_25).w0000;
					--(ds->*si_25).bFFFFFFFF;
					byte bl_38 = 0x01;
					if (al_39 != 0x00)
					{
						if (al_39 < 0x00)
							bl_38 = ~0x00;
						(ds->*si_25).b0001 += bl_38;
						(ds->*si_25).bFFFFFFFE -= bl_38;
					}
				}
			}
			byte Eq_3::* di_121 = (word16) ((uint16) (ds->*si_25).w0000 * 0x0140) + (uint16) (ds->*si_25).b0001 + 0x01F8;
			uint16 bx_101 = (uint16) si_25[1];
			byte al_103 = (ds->*si_25).b0003;
			si_104 = (struct Eq_12 Eq_3::*) (si_25 + 2);
			do
			{
				struct Eq_173 Eq_3::* si_109 = &si_104->b0001;
				byte ah_110 = (ds->*si_109).w0000;
				si_104 = (struct Eq_12 Eq_3::*) &si_109->b0001;
				word16 cx_115 = SEQ(ch_341, (ds->*si_104).t0000);
				do
				{
					uint16 cx_119;
					for (cx_119 = bx_101; cx_119 != 0x00; --cx_119)
					{
						es->*di_121 = al_103;
						++di_121;
					}
					word16 di_123 = di_121 - bx_101;
					di_121 = di_123 + 0x0140;
					byte cl_149 = (byte) cx_442;
					if ((ah_110 & 0x10) != 0x00)
					{
						di_121 = di_123 + 322;
						bx_101 -= 0x02;
					}
					if ((ah_110 & 0x01) != 0x00)
						bx_101 += 0x02;
					if ((cl_149 & 0x01) != 0x00)
					{
						if ((ah_110 & 0x02) != 0x00)
							--bx_101;
						if ((ah_110 & 0x20) != 0x00)
						{
							--di_121;
							++bx_101;
						}
					}
					cx_115 = cx_442 - 0x01;
					ch_341 = SLICE(cx_442 - 0x01, byte, 8);
					cx_442 = cx_115;
				} while (cx_442 != 0x01);
			} while ((ah_110 & 0x80) != 0x00);
			cx_196 = cx_441 - 0x01;
			cx_441 = cx_196;
		} while (cx_441 != 0x01);
		word16 Eq_3::* si_201 = Eq_3::a01F8;
		word16 Eq_200::* di_202 = Eq_200::a0000;
		word16 cx_205;
		for (cx_205 = 0x7D00; cx_205 != 0x00; --cx_205)
		{
			0xA000->*di_202 = ds->*si_201;
			++si_201;
			++di_202;
		}
		es = ds;
		word16 cx_237;
		for (cx_237 = 0x08; cx_237 != 0x00; --cx_237)
		{
			do
				;
			while ((__inb(0x03DA) & 0x08) != 0x00);
			do
				;
			while ((__inb(0x03DA) & 0x08) == 0x00);
		}
		cl = (byte) cx_205;
	} while (__inb(0x60) != 0x01);
}

