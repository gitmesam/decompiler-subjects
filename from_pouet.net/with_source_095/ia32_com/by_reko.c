// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_11) ds_bx, Register word16 cx)
void fn0C00_0100(union Eq_11 * ds_bx, word16 cx)
{
	struct Eq_4 * bx = (word16) ds_bx;
	__syscall(0x10);
	Eq_11 es_di_7 = *ds_bx;
	__outb(0x03C8, 0x20);
	struct Eq_22 * es_109 = SLICE(es_di_7, selector, 16);
	byte Eq_22::* di_110 = (word16) es_di_7;
	word16 ax_123 = SEQ(ah, 0x20);
	do
	{
		__outb(969, (byte) ax_123);
		byte al_21 = (byte) bx;
		__outb(969, al_21);
		__outb(969, al_21);
		byte bl_78 = (byte) bx;
		byte bh_121 = SLICE(bx, byte, 8);
		byte al_26 = (byte) (ax_123 + 0x01);
		byte ah_91 = SLICE(ax_123 + 0x01, byte, 8);
		if ((al_26 & 0x7F) == 0x00)
			__outb(969, al_26 & 0x7F);
		--cx;
		ax_123 = SEQ(ah_91, al_26 & 0x7F);
	} while (cx != 0x00);
	while (true)
	{
		ci16 dx_131 = 0xCC;
		do
		{
			cui16 cx_128 = 0x013F;
			do
			{
				ui8 al_43;
				byte dl_42 = (byte) dx_134;
				byte cl_36 = (byte) cx_133;
				if ((bl_78 & 0x40) == 0x00)
					al_43 = cl_36 | dl_42;
				else
					al_43 = cl_36 ^ dl_42;
				es_109->*di_110 = al_43 ^ bl_78;
				++di_110;
				cx_128 = cx_133 - 0x01;
				cx_133 = cx_128;
			} while (cx_133 != 0x01);
			dx_131 = dx_134 - 0x01;
			dx_134 = dx_131;
		} while (dx_134 >= 0x01);
		bl_78 = bx->b046C;
		di_110 = ~SEQ(bh_121, bl_78);
	}
}

