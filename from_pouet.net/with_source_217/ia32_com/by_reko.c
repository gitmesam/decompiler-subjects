// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 esp_16_16, Register (ptr16 Eq_3) ds)
void fn0C00_0100(word16 esp_16_16, struct Eq_3 * ds)
{
	struct Eq_4 Eq_44::* sp_101 = fp;
	__syscall(0x10);
	struct Eq_11 * es_100 = (char *) ds + 100;
	do
	{
		ds->w0207 = 0x00;
		ds->w0203 = 0x00;
		word16 Eq_11::* di_116 = Eq_11::a0000;
		word16 cx_11;
		for (cx_11 = 0x7B0C; cx_11 != 0x00; --cx_11)
		{
			es_100->*di_116 = 0x00;
			++di_116;
		}
		ds->w01F5 = 0x09;
		do
		{
			ds->w0205 += 0xB3;
			ds->w0207 += 0x7D;
			word16 bp_28;
			for (bp_28 = 0x04E8; bp_28 != 0x00; --bp_28)
			{
				++ds->w0203;
				++ds->w0203;
				struct Eq_39 Eq_44::* sp_38 = sp_101 - 2;
				(ss->*sp_38).w0000 = ds->w0205;
				(ss->*sp_38).wFFFFFFFE = ds->w0203;
				fn0C00_0179(esp_16_16, es_100, ds);
				word32 esp_49 = <invalid>;
				struct Eq_61 Eq_44::* sp_54 = (word16) esp_49;
				(ss->*sp_54).w0002 = ds->w0203;
				(ss->*sp_54).w0000 = ds->w0207;
				fn0C00_0179(SLICE(esp_49, word16, 16), es_100, ds);
				word32 esp_66 = <invalid>;
				struct Eq_77 Eq_44::* sp_71 = (word16) esp_66;
				esp_16_16 = SLICE(esp_66, word16, 16);
				sp_101 = (struct Eq_4 Eq_44::*) ((char *) &sp_71->ptr0002 + 2);
			}
			word16 v24_77 = ds->w01F5 - 0x01;
			ds->w01F5 = v24_77;
		} while (v24_77 != 0x00);
		(ss->*sp_71).ptr0002 = es_100;
		(ss->*sp_71).ptr0000 = ds;
		word16 Eq_11::* si_106 = Eq_11::a0000;
		word16 Eq_136::* di_109 = Eq_136::a0000;
		word16 cx_113;
		for (cx_113 = 0x7B0C; cx_113 != 0x00; --cx_113)
		{
			0xA000->*di_109 = es_100->*si_106;
			++si_106;
			++di_109;
		}
		ds = (ss->*sp_71).ptr0000;
		es_100 = (ss->*sp_71).ptr0002;
		sp_101 = (struct Eq_4 Eq_44::*) ((char *) &sp_71->ptr0002 + 2);
	} while (__inb(0x60) != 0x81);
	msdos_terminate_program20();
}

// 0C00:0179: void fn0C00_0179(Register word16 esp_16_16, Register (ptr16 Eq_11) es, Register (ptr16 Eq_3) ds)
// Called from:
//      fn0C00_0100
void fn0C00_0179(word16 esp_16_16, struct Eq_11 * es, struct Eq_3 * ds)
{
	struct Eq_159 Eq_163::* esp_7 = SEQ(esp_16_16, fp);
	real64 rLoc1_68 = (real64) (ss->*esp_7).w0002 / (real64) ds->w01FB;
	real64 rLoc1_69 = cos(rLoc1_68);
	ds->w01FF = (int16) (sin(rLoc1_68) * (real64) ds->w01F3);
	ds->w0201 = (int16) (rLoc1_69 * (real64) ds->w01F3);
	real64 rLoc1_74 = (real64) (ss->*esp_7).w0004 / (real64) ds->w01FB;
	real64 rLoc1_75 = cos(rLoc1_74);
	ds->w01FD = (int16) (sin(rLoc1_74) * (real64) ds->w0201);
	ds->w0201 = (int16) (rLoc1_75 * (real64) ds->w0201);
	real64 rLoc3_82 = (real64) ds->w0201 / (real64) ds->w01FB;
	real64 rLoc2_80 = (real64) ds->w01FF;
	real64 rLoc1_87 = (real64) ds->w01FD / (rLoc2_80 / (rLoc3_82 + (rLoc3_82 + 1.0)));
	ds->w01FF = (int16) -rLoc2_80;
	ds->w01FD = (int16) (rLoc1_87 * (real64) ds->r01F7);
	((char *) (word16) ((ds->w01FF + 0x62) * 0x0140) + 0x00A0)[ds->w01FD] = 0x0E;
}

