// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	__syscall(0x10);
	msdos_display_string(&ds->b01F1);
	byte ah_10 = 0x09;
	byte dh_159 = 0x01;
	struct Eq_19 Eq_3::* bx_14;
	do
	{
		bx_14[61961] = (0xA000->*bx_14).b0000;
		--bx_14;
	} while (bx_14 != Eq_3::a0000);
	do
	{
		word16 cx_147 = SEQ(ch, 0x46);
		do
		{
			Eq_35 bx_29 = ds->w0201 *s 0x013F + ds->w01FF;
			ds->*((word16) bx_29 + 0x00007C69) += 0x18;
			ds->*((word16) bx_29 + 0x00007C6A) += 0x10;
			ds->*((word16) bx_29 + 0x00007B29) += 0x10;
			ds->w01FF = (int16) (sin((real64) ds->t01E3) * (real64) ds->w01DF);
			ds->w0201 = (int16) (cos((real64) ds->t01E7) * (real64) ds->w01E1);
			ds->t01E3.u1 = (word16) ds->t01E3.u1 + 91;
			ds->t01E7.u1 = (word16) ds->t01E7.u1 + 0x009E;
			--cx_147;
			byte ch_172 = SLICE(cx_147, byte, 8);
		} while (cx_147 != 0x00);
		ds->t01E3 -= 0x18E3;
		ds->t01E7 -= 11063;
		struct Eq_121 Eq_3::* bx_61 = &Eq_3::tFFFFC800;
		do
		{
			byte al_65 = bx_61[521];
			word16 ax_69 = SEQ(ah_10, al_65);
			if (al_65 != 0x10)
			{
				al_65 = (byte) (ax_69 - 0x01);
				bx_61[521] = al_65;
				ah_10 = SLICE(ax_69 - 0x01, byte, 8);
			}
			--bx_61;
			(0xA000->*bx_61).b0000 = al_65;
		} while (bx_61 != Eq_3::a0000);
		ds->t0205 = ds->t01ED;
		word16 cx_119 = SEQ(ch_172, ~0x00);
		do
		{
			ds->w0203 = (int16) (sin((real64) ds->t0205) * (real64) ds->w01EB);
			int16 di_95 = ds->w0203;
			int16 dx_116 = SEQ(dh_159, 11);
			do
			{
				Eq_153 bx_103 = dx_116 *s 0x0141 + cx_119;
				0xA000->*((word16) ds->t010F + ((word16) (di_95 *s 322) + ((word16) bx_103 + 0x0000E100))) = ds->*((word16) bx_103 + 61313);
				ds->t0205.u2 = (word16) ds->t0205.u2 + 1;
				--dx_116;
				dh_159 = SLICE(dx_116, byte, 8);
			} while (dx_116 != 0x00);
			--cx_119;
			ch = SLICE(cx_119, byte, 8);
		} while (cx_119 != 0x00);
		ds->t01ED.u2 = (word16) ds->t01ED.u2 + 3;
		if ((ds->t01ED & 0x07) == 0x00)
			--ds->t010F;
		word16 ax_130 = __inw(0x60);
		ah_10 = SLICE(ax_130 - 0x01, byte, 8);
	} while (ax_130 != 0x01);
}

