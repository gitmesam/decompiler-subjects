// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 bx, Register word16 esp_16_16, Register (memptr (ptr16 Eq_151) byte) di, Register (ptr16 Eq_5) ds, FpuStack real64 rLoc4, FpuStack real64 rLoc2)
void fn0C00_0100(word16 bx, word16 esp_16_16, byte Eq_151::* di, struct Eq_5 * ds, real64 rLoc4, real64 rLoc2)
{
	__syscall(0x10);
	word16 Eq_5::* si_10 = &Eq_5::w0195;
	word16 Eq_5::* bp_11 = &Eq_5::w0199;
	word16 cx_12 = 0x00;
	do
	{
		do
		{
			int16 Eq_32::* esp_61 = SEQ(esp_16_16, fp - 6);
			uint16 dx_22 = (uint16) ((uint32) (uint16) di % ds->t0197);
			real64 rLoc1_156 = (real64) (ss->*SEQ(esp_16_16, fp - 2));
			real64 rLoc3_174 = ((real64) ds->t0197 / (rLoc4 * rLoc4 + rLoc2 * rLoc2) + (real64) (ss->*esp_61)) / (real64) ds->t0197;
			real64 rLoc3_175 = cos(rLoc3_174);
			real64 rLoc4_177 = sin(rLoc3_174) * (real64) (ds->*si_10);
			real64 rLoc4_180 = rLoc3_175 * (real64) (ds->*si_10);
			real64 rLoc3_181 = rLoc4_177 + rLoc4_180;
			real64 rLoc3_182 = rLoc3_181 * rLoc3_181;
			real64 rLoc2_188 = atan(rLoc3_182, rLoc1_156) * (real64) (ds->*si_10);
			real64 rLoc3_190 = (real64) (ss->*esp_61) / (real64) ds->w011D;
			rLoc4 = sin(rLoc4_180);
			real64 rLoc2_196 = pow(2.0, sin(rLoc2_188 + (rLoc3_190 + rLoc4))) - 1.0;
			rLoc2 = rLoc2_196 * rLoc2_196;
			ss->*SEQ(esp_16_16, fp - 2) = (int16) (sqrt(rLoc3_182 + rLoc2) * (real64) ds->w011D);
			byte al_112 = (byte) (dx_22 - 0x80);
			byte ah_113 = SLICE(dx_22 - 0x80, byte, 8);
			__aas(al_112, ah_113, &al_112, &ah_113);
			0xA000->*di = al_112 + 0x0C;
			++di;
			--cx_12;
		} while (cx_12 != 0x00);
		word16 bx_122 = bx + 0x01;
		bx = bx_122;
		if ((byte) bx_122 == 0x00)
		{
			si_10 = bp_11;
			bp_11 = si_10;
		}
	} while (__inb(0x60) != 0x01);
}

