// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register (memptr (ptr16 Eq_6) Eq_57) si, Register word16 di, Register (ptr16 Eq_6) ds)
void fn0C00_0100(byte ah, word16 cx, union Eq_57 Eq_6::* si, word16 di, struct Eq_6 * ds)
{
	__syscall(0x10);
	word16 ax_13 = SEQ(ah, 0x13);
	word16 cx_249 = cx;
	do
	{
		uint8 cl_17 = (byte) cx_253;
		__outb(0x03C8, cl_17);
		__outb(969, cl_17 >> 0x02);
		__outb(969, cl_17 >> 0x03);
		__outb(969, cl_17 >> 0x03);
		cx_249 = cx_253 - 0x01;
		cx_253 = cx_249;
	} while (cx_253 != 0x01);
	uint32 dx_ax_32 = (uint32) (uint16) di;
	uint16 dx_37 = (uint16) (dx_ax_32 % ds->w01E7);
	uint16 ax_38 = (uint16) (dx_ax_32 /u ds->w01E7);
	ds->*si = ax_13 + 0x01;
	real64 rLoc1_179 = (real64) (ds->*si);
	ds->*si = dx_37 - 0xA0;
	real64 rLoc2_181 = (real64) (ds->*si) / (real64) ds->w01E5;
	ds->*si = ax_38 - 100;
	real64 rLoc3_183 = (real64) (ds->*si) / (real64) ds->w01E5;
	real64 rLoc5_186 = rLoc2_181 / (real64) ds->w01EB;
	real64 rLoc5_187 = cos(rLoc5_186);
	(ds->*si).u2 = (real32) sin(rLoc5_186);
	real64 rLoc6_196 = rLoc5_187 * rLoc2_181 + (real64) (ds->*si) * 0.693147180559945;
	real64 rLoc5_203 = 0.0;
	byte al_91 = 0x0C;
	do
	{
		--al_91;
		if (al_91 == 0x00)
			break;
		rLoc5_203 += fabs(cos(rLoc3_183 * rLoc5_203) + cos(rLoc6_196 * rLoc5_203) + cos(rLoc5_203 * rLoc5_203 + rLoc1_179) + 0.693147180559945);
	} while (0.0 <= 0.693147180559945);
	(ds->*si).u0 = (int16) ((fabs(sin(rLoc3_183 * rLoc5_203)) + fabs(sin(rLoc6_196 * rLoc5_203)) + fabs(sin(rLoc5_203 * rLoc5_203 + rLoc1_179))) * (real64) ds->w01E9);
	(ds->*si).u0 = (int16) (pow(2.0, rLoc5_203 * (real64) ds->w01EB) - 1.0);
}

