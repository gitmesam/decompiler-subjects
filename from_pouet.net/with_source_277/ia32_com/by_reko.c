// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bh, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bh, struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	union Eq_9 Eq_3::* si_11 = &Eq_3::t01BC;
	do
	{
		word16 ax_10 = ds->*si_11;
		byte dh_18 = SLICE(ax_10, byte, 8);
		bios_video_set_cursor_position(bh, dh_18, (byte) ax_10);
		si_11 = (union Eq_9 Eq_3::*) ((char *) si_11 + 2);
		byte ah_16 = 0x02;
		do
		{
			byte al_176 = ds->*si_11;
			__syscall(33);
			si_11 = (union Eq_9 Eq_3::*) ((char *) si_11 + 1);
		} while (al_176 != 0x00);
	} while (dh_18 != 0x00);
	do
	{
		__outb(969, al_176);
		word16 ax_42 = __rol(SEQ(ah_16, ~al_176), 0x01);
		__outb(969, (byte) ax_42);
		word16 ax_45 = __ror(ax_42, 0x01);
		byte al_47 = (byte) ax_45;
		__outb(969, al_47);
		word16 ax_50 = SEQ(SLICE(ax_45, byte, 8), ~al_47);
		al_176 = (byte) (ax_50 + 0x01);
		ah_16 = SLICE(ax_50 + 0x01, byte, 8);
	} while (ax_50 != 0x01);
	byte Eq_116::* di_103 = Eq_116::a0000;
	uint8 bl_186 = 0xCC;
	do
	{
		byte ch_105 = 0x01;
		ui16 cl_bl_225 = SEQ(0x40, bl_186);
		do
		{
			word16 bx_109;
			byte al_88;
			uint8 cl_81 = SLICE(cl_bl_225, byte, 8);
			byte bl_84 = (byte) cl_bl_225;
			word16 cx_104 = SEQ(ch_105, cl_81);
			if (0xA000->*di_103 == 0x00)
			{
				word16 ax_91 = __aam(cl_81 | bl_84);
				al_88 = ((byte) ax_91 | SLICE(ax_91, byte, 8)) & 0x3F;
				bx_109 = SEQ(bh, bl_84);
			}
			else
			{
				ui16 al_al_197 = SEQ(al_85, cl_81) - cl_bl_225;
				ui8 al_85 = (byte) al_al_197;
				al_88 = SLICE(al_al_197, byte, 8);
				cx_104 = SEQ(ch_105, cl_81);
				bx_109 = SEQ(bh, bl_84);
			}
			0xA000->*di_103 = al_88;
			word16 cx_108 = cx_104 - 0x01;
			bh = SLICE(bx_109, byte, 8);
			++di_103;
			ch_105 = SLICE(cx_108, byte, 8);
			cl_bl_225 = SEQ((byte) cx_108, (byte) bx_109);
		} while (cx_108 != 0x00);
		word16 bx_115 = bx_109 - 0x01;
		bl_186 = (byte) bx_115;
		bh = SLICE(bx_115, byte, 8);
	} while (bx_115 != 0x00);
	__outb(0x0331, 0x3F);
	byte Eq_116::* si_125 = Eq_116::a0000;
	byte Eq_116::* di_128 = Eq_116::aFFFFFA00;
	word16 cx_129;
	for (cx_129 = 0x0140; cx_129 != 0x00; --cx_129)
	{
		0xA000->*di_128 = 0xA000->*si_125;
		++si_125;
		++di_128;
	}
	do
		;
	while (((byte) __inw(0x03DA) & 0x08) == 0x00);
}

