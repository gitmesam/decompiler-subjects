// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register Eq_4 bx, Register word16 bp, Register (ptr16 Eq_6) es, Register (ptr16 Eq_7) ds, FpuStack real64 rLoc2)
void fn0C00_0100(byte ah, word16 cx, Eq_4 bx, word16 bp, struct Eq_6 * es, struct Eq_7 * ds, real64 rLoc2)
{
	do
	{
		rLoc2 = cos(rLoc2) * (real64) ds->w0125;
		ds->*((word16) bx + 0x0202) = (int16) rLoc2;
		bx = (word16) bx + 1;
	} while (bx >= 0x00);
	__syscall(0x10);
	__syscall(33);
	Eq_33 bp_128 = SEQ(ah, 0x13);
	Eq_36 di_327 = cs;
	word16 Eq_52::* si_323 = Eq_52::aFFFFFEC0;
	word16 cx_331;
	for (cx_331 = bp; cx_331 != 0x00; --cx_331)
	{
		es->*di_327 = 0xA000->*si_323;
		++si_323;
		di_327 += 2;
	}
	byte al_350 = (byte) cx_331;
	__outb(0x03C8, al_350);
	word16 cx_64 = cx;
	byte ah_119 = SLICE(cx_331, byte, 8);
	do
	{
		__outb(969, al_350);
		--cx_64;
		byte ch_342 = SLICE(cx_64, byte, 8);
	} while (cx_64 != 0x00);
	do
	{
		word16 cx_103 = SEQ(ch_342, 0x02);
		do
		{
			Eq_97 bx_76 = (word16) bx + 1;
			byte bl_354 = (byte) bx_76;
			word16 cx_356 = SEQ(SLICE(cx_525, byte, 8), 0x3F);
			do
			{
				__outb(969, al_350);
				__outb(969, al_350);
				__outb(969, al_350);
				al_350 += bl_354;
				--cx_356;
				word16 ax_120 = SEQ(ah_119, al_350);
			} while (cx_356 != 0x00);
			bx = ~bx_76;
			byte bh_107 = SLICE(bx, byte, 8);
			cx_103 = cx_525 - 0x01;
			ch_342 = SLICE(cx_525 - 0x01, byte, 8);
			cx_525 = cx_103;
		} while (cx_525 != 0x01);
		*((word16) cs + 320) = *((word16) cs + 320) ^ bh_107;
	} while (P);
	int32 dx_ax_121 = (int32) ax_120;
	byte ah_153 = SLICE(dx_ax_121, byte, 8);
	int16 dx_194 = SLICE(dx_ax_121, word16, 16);
	do
	{
		*((word16) cs + 510) = bp_128;
		byte Eq_52::* di_123 = &Eq_52::b0000;
		word16 cx_133 = SEQ(ch_342, 200);
		do
		{
			*((word16) cs + 0x0200) = bp_128;
			word16 cx_140;
			for (cx_140 = 0x0140; cx_140 != 0x00; --cx_140)
			{
				word16 si_143 = 0x01FE;
				do
				{
					byte al_152 = Mem145[cs:(uint16) Mem145[cs:si_143 + 0x00:byte] + 0x0202:byte];
					ah_153 += al_152;
					++si_143;
					cu16 ax_157 = SEQ(ah_153, al_152);
				} while (si_143 != 0x0202);
				0xA000->*di_123 = (byte) (ax_157 >> 0x08);
				((word16) cs + 0x0200)->u0 = (byte) ((word16) cs + 0x0200)->u0 + 1;
				*((word16) cs + 513) -= 0x02;
				ah_153 = SLICE(ax_157 >> 0x08, byte, 8);
				ah_153 = SLICE(ax_157 >> 0x08, byte, 8);
				++di_123;
			}
			((word16) cs + 510)->u0 = (byte) ((word16) cs + 510)->u0 + 1;
			*((word16) cs + 511) -= 0x02;
			cx_133 = cx_526 - 0x01;
			byte ch_393 = SLICE(cx_526 - 0x01, byte, 8);
			cx_526 = cx_133;
		} while (cx_526 != 0x01);
		Eq_33 bp_189 = (word16) bp_128.u1 + 0x00FE;
		int16 dx_195 = dx_194 - 0x01;
		if (dx_195 <= 0x00)
			dx_195 = 0x013F;
		word16 wLoc04_439 = cx_526 - 0x01;
		int16 bp_226 = dx_195;
		int16 bx_228 = 0x0140 - dx_195;
		int16 dx_288 = SLICE((int32) (ax_157 >> 0x08), word16, 16);
		word16 cx_234 = SEQ(ch_393, 0x02);
		do
		{
			Eq_36 si_238 = cs;
			byte Eq_52::* di_239 = &Eq_52::bFFFFEC40;
			word16 cx_250 = SEQ(SLICE(cx_527, byte, 8), 0x09);
			do
			{
				byte Eq_52::* di_243 = di_239 + dx_288;
				byte Eq_36::* si_246 = (word16) si_238 + bx_228;
				int16 cx_254;
				do
				{
					bu8 al_258 = cs->*si_246;
					0xA000->*di_243 += (byte) (al_258 * al_258) + 0x80;
					++si_246;
					++di_243;
					--cx_254;
				} while (cx_254 != 0x00);
				di_239 = di_243 + bx_228;
				si_238 = si_246 + dx_288;
				cx_250 = cx_528 - 0x01;
				cx_528 = cx_250;
			} while (cx_528 != 0x01);
			bp_226 = bx_228;
			bx_228 = dx_288;
			dx_288 = bp_226;
			cx_234 = cx_527 - 0x01;
			cx_527 = cx_234;
		} while (cx_527 != 0x01);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		word16 ax_318 = SEQ(SLICE(ax_157 >> 0x08, byte, 8), __inb(0x60));
		bp_128 = bp_189;
		dx_194 = dx_195;
		ch_342 = SLICE(wLoc04_439, byte, 8);
		ah_153 = SLICE(ax_318 - 0x01, byte, 8);
	} while (ax_318 != 0x01);
	__syscall(0x10);
}

