// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (memptr (ptr16 Eq_5) Eq_3) bx, Register word16 bp, Register (ptr16 Eq_5) ds)
void fn0C00_0100(word16 cx, struct Eq_3 Eq_5::* bx, word16 bp, struct Eq_5 * ds)
{
	int8 Top_154 = 0;
	__syscall(0x10);
	word16 cx_279 = cx + 0x01;
	do
	{
		uint8 cl_8 = (byte) cx_284;
		__outb(0x03C8, cl_8);
		__outb(969, cl_8 >> 0x02);
		__outb(969, cl_8 >> 0x02);
		__outb(969, (cl_8 >> 0x02) + 0x0E);
		cx_279 = cx_284 - 0x01;
		cx_284 = cx_279;
	} while (cx_284 != 0x01);
	struct Eq_44 * es_224 = (ds->*bx).ptr0002;
	do
	{
		word16 cx_166 = 0xFA00;
		byte Eq_44::* di_33 = Eq_44::a0000;
		struct Eq_48 Eq_5::* si_36 = Eq_5::a0206;
		do
		{
			es_224->*di_33 = (ds->*si_36).b0000;
			word16 ax_49 = cx_166 + bp;
			++si_36;
			(ds->*si_36).bFFFFFFFF = ((byte) ax_49 ^ SLICE(ax_49, byte, 8)) & 0x1F;
			++di_33;
			cx_166 = cx_166 - 0x01 + 0x01;
		} while (cx_166 != 0x00);
		__fninit();
		struct Eq_6 * Top_62 = Top_154 - 1;
		Top_62->r0000 = 0.0;
		bp += 0x40;
		do
		{
			Top_62->rFFFFFFFF = Top_62->r0000;
			Top_62->rFFFFFFFF *= (real64) ds->r01F3;
			real64 v24_72 = Top_62->rFFFFFFFF;
			Top_62->rFFFFFFFF = cos(v24_72);
			Top_62->rFFFFFFFE = sin(v24_72);
			Top_62->rFFFFFFFE /= (real64) ds->r01F3;
			Top_62->rFFFFFFFD = 1.0;
			Top_62->rFFFFFFFE += Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = Top_62->r0000;
			real64 v26_84 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = cos(v26_84);
			Top_62->rFFFFFFFC = sin(v26_84);
			real64 v27_88 = Top_62->rFFFFFFFC;
			Top_62->rFFFFFFFC = Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFE = v27_88;
			Top_62->rFFFFFFFC *= Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFD *= Top_62->rFFFFFFFC;
			real64 v28_94 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = Top_62->rFFFFFFFF;
			Top_62->rFFFFFFFF = v28_94;
			Top_62->rFFFFFFFD /= (real64) ds->r01F3;
			Top_62->rFFFFFFFC = (real64) 0040:006C;
			Top_62->rFFFFFFFC *= (real64) ds->r01EF;
			real64 v29_102 = Top_62->rFFFFFFFC;
			Top_62->rFFFFFFFC = cos(v29_102);
			Top_62->rFFFFFFFB = sin(v29_102);
			Top_62->rFFFFFFFA = Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFA *= Top_62->rFFFFFFFB;
			Top_62->rFFFFFFF9 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFF9 *= Top_62->rFFFFFFFC;
			Top_62->rFFFFFFFA += Top_62->rFFFFFFF9;
			real64 v32_116 = Top_62->rFFFFFFFA;
			Top_62->rFFFFFFFA = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = v32_116;
			Top_62->rFFFFFFFB *= Top_62->rFFFFFFFA;
			real64 v33_121 = Top_62->rFFFFFFFB;
			Top_62->rFFFFFFFB = Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFE = v33_121;
			Top_62->rFFFFFFFC *= Top_62->rFFFFFFFB;
			Top_62->rFFFFFFFE -= Top_62->rFFFFFFFC;
			real64 v34_128 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFE = v34_128;
			real64 v35_131 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = Top_62->rFFFFFFFF;
			Top_62->rFFFFFFFF = v35_131;
			real64 v36_134 = Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFD = Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFE = v36_134;
			Top_62->rFFFFFFFC = Top_62->rFFFFFFFF;
			Top_62->rFFFFFFFC += (real64) ds->w01F7;
			Top_62->rFFFFFFFC = (real64) ds->w01F9 / Top_62->rFFFFFFFC;
			Top_62->rFFFFFFFC *= Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFD *= Top_62->rFFFFFFFC;
			Top_62->rFFFFFFFD += (real64) ds->w01F7;
			ds->t0202.u0 = (int16) Top_62->rFFFFFFFD;
			Top_62->rFFFFFFFE += (real64) ds->w01FD;
			ds->w0200 = (int16) Top_62->rFFFFFFFE;
			Top_62->rFFFFFFFF *= (real64) ds->w01FB;
			Top_62->rFFFFFFFF += (real64) ds->w01F7;
			ds->t0204.u0 = (int16) Top_62->rFFFFFFFF;
			Top_154 = Top_62;
			struct Eq_89 Eq_5::* si_161 = (word16) (ds->t0202 * 0x0140) + 0x0206 + ds->w0200;
			Eq_97 al_163 = ds->t0204;
			word16 cx_169 = 0x0A;
			do
			{
				word16 cx_187 = SEQ(SLICE(cx_283, byte, 8), 0x0A);
				do
				{
					if ((ds->*si_161).b0000 <= al_163)
						(ds->*si_161).b0000 = al_163;
					si_161 = &si_161->b0000 + 1;
					--cx_187;
				} while (cx_187 != 0x00);
				++si_161;
				cx_169 = cx_283 - 0x01;
				cx_283 = cx_169;
			} while (cx_283 != 0x01);
			Top_62->r0000 += (real64) ds->r01EF;
			cx_166 = cx_282 + 0x01;
			cx_282 = cx_166;
		} while ((SLICE(cx_282 + 0x00, byte, 8) & 0x02) == 0x00);
	} while (__inb(0x60) != 0x01);
}

