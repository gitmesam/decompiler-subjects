// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_3) Eq_2) bp, Register (ptr16 Eq_3) es, Register (ptr16 Eq_4) ds)
void fn0C00_0100(<type-error> Eq_3::* bp, struct Eq_3 * es, struct Eq_4 * ds)
{
	byte Eq_3::* di_165 = Eq_3::a0204;
	word16 cx_168;
	for (cx_168 = 0xFA00; cx_168 != 0x00; --cx_168)
	{
		es->*di_165 = 0x10;
		++di_165;
	}
	__syscall(0x10);
	bios_video_set_mode(0x13);
	do
	{
		struct Eq_29 Eq_4::* di_19 = (word16) (ds->w01FE * 0x0140) + ds->w01FC + 0x0204;
		Eq_63 bx_21 = 0x01DE;
		do
		{
			byte dh_24;
			int16 si_187 = (word16) (ds->*bx_21) << 0x03;
			for (dh_24 = 0x08; dh_24 != 0x00; --dh_24)
			{
				uint8 dl_31;
				for (dl_31 = 0x80; dl_31 != 0x00; dl_31 >>= 0x01)
				{
					if ((es->*((char *) bp + si_187) & dl_31) != 0x00)
					{
						(ds->*di_19).w0000 = 0x1F1F;
						(ds->*di_19).w0140 = 0x1F1F;
					}
					di_19 = &di_19->w0000 + 1;
				}
				++si_187;
				di_19 = &di_19->w0140 + 0x0098;
			}
			di_19 -= 0x1180;
			bx_21 = (word16) bx_21 + 1;
		} while (bx_21 < 65067);
		if (ds->w01FC == 0xA0)
			ds->w0200 = ~0x00;
		else if (ds->w01FC == 0x00)
			ds->w0200 = 0x01;
		ds->w01FC += ds->w0200;
		if (ds->w01FE == 0xB8)
			ds->w0202 = ~0x00;
		else if (ds->w01FE == 0x00)
			ds->w0202 = 0x01;
		ds->w01FE += ds->w0202;
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		byte Eq_143::* di_123 = Eq_143::a0000;
		struct Eq_123 Eq_4::* si_126 = Eq_4::a0204;
		word16 cx_127;
		for (cx_127 = 0xFA00; cx_127 != 0x00; --cx_127)
		{
			byte al_131 = (ds->*si_126).b0000;
			0xA000->*di_123 = al_131;
			++si_126;
			++di_123;
			if (al_131 != 0x10)
				--al_131;
			(ds->*si_126).bFFFFFFFF = al_131;
		}
	} while (__inb(0x60) != 0x01);
	bios_video_set_mode(0x03);
	msdos_display_string(&ds->b01E7);
}

