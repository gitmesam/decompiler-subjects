// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) es, Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_2 * es, struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	__outb(0x03C8, 0x00);
	uint8 al_13 = 0x00;
	bcu8 cl_16 = 0x00;
	do
	{
		uint8 al_14 = al_13 >> 0x01;
		__outb(969, al_14);
		__outb(969, al_14);
		al_13 = cl_16 >> 0x02;
		__outb(969, al_13);
		++cl_16;
	} while (cl_16 != 0x00);
	word16 cx_23;
	word16 di_24 = 0x0200;
	uint16 ax_234 = (uint16) __inb(0x40);
	for (cx_23 = 0x1520; cx_23 != 0x00; --cx_23)
		di_24 = fn0C00_01D5(di_24, ax_234, cx_23);
	Mem245 = Mem45;
	byte Eq_61::* di_48 = Eq_61::a0000;
	do
	{
		cu8 al_54 = 0xA000->*di_48;
		cu8 al_55 = al_54 - 0x19;
		if (al_54 < 0x19)
			al_55 = 0x00;
		0xA000->*di_48 = al_55;
		++di_48;
	} while (di_48 != Eq_61::a0000);
	while (true)
		--ds->w0141;
}

// 0C00:01D5: Register word16 fn0C00_01D5(Sequence (ptr32 Eq_51) es_di, Register uint16 ax, Register word16 cx)
// Called from:
//      fn0C00_0100
word16 fn0C00_01D5(struct Eq_51 * es_di, uint16 ax, word16 cx)
{
	word16 di = (word16) es_di;
	word16 ax_9 = (word16) (ax * 0x25) + cx;
	int16 ax_14 = (int16) (byte) ax_9;
	byte ah_17 = SLICE(ax_14, byte, 8);
	es_di->w0000 = SEQ(ah_17, (byte) ax_14 & 0x1F ^ ah_17);
	int16 ax_33 = (int16) ((SLICE(ax_9, byte, 8) | 0xF0) - 0x40);
	es_di->w0002 = ax_33;
	es_di->w0004 = SEQ(SLICE(ax_33, byte, 8), ~0x00);
	es_di->w0006 = 0x0A00;
	es_di->w0008 = 0x0C80;
	es_di->w000A = 0xFF;
	return di + 0x0C;
}

