// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	Eq_9 cx_26 = 0x0100;
	union Eq_11 Eq_3::* bx_19 = SEQ(0xF0, bl);
	do
	{
		ss->t0200 = cx_26;
		ds->*bx_19 = (int16) (sin((real64) ss->t0200 * (real64) ds->r01DC) * (real64) ds->r01E0);
		ds->*bx_19 = (int32) (ds->*bx_19);
		--cx_26;
		bx_19 = (union Eq_11 Eq_3::*) ((char *) bx_19 + 4);
		byte cl_206 = (byte) cx_26;
	} while (cx_26 != 0x00);
	__outb(0x03C8, 0x00);
	cui16 si_32 = 0x00;
	byte bl_208 = 0x00;
	byte bh_209 = 0x00;
	word16 cx_296 = SEQ(0x01, cl_206);
	do
	{
		cui16 si_37 = si_32 & 0x3F;
		cu8 cl_41 = (byte) cx_296;
		byte al_44 = (byte) si_37;
		byte ah_45 = SLICE(si_37, byte, 8);
		si_32 = si_37 + 0x02;
		if (cl_41 > 0xC1)
		{
			if (cl_41 >= 225)
				bh_209 = al_44;
			else
				bl_208 = al_44;
		}
		else
			ah_45 = al_44;
		__outb(969, ah_45);
		__outb(969, bl_208);
		__outb(969, bh_209);
		--cx_296;
	} while (cx_296 != 0x00);
	do
	{
		struct Eq_95 * ax_71 = SEQ(SLICE(cs, byte, 8) + 0x10, (byte) cs);
		struct Eq_102 Eq_95::* di_120 = Eq_95::a0000;
		cui16 dx_132;
		for (dx_132 = 200; dx_132 != 0x00; --dx_132)
		{
			cui16 cx_130;
			for (cx_130 = 0x0140; cx_130 != 0x00; --cx_130)
			{
				ss->w0204 = (cx_130 << 0x03) + (&(ds->tFFFFF000).w0000)[(uint16) ((byte) ((word32) ss->t0200 + dx_132)) * 0x04];
				ui16 ax_105 = (dx_132 << 0x03) + (&(ds->tFFFFF000).w0000)[(uint16) ((byte) ((word32) ss->t0200 + cx_130)) * 0x04] ^ ss->w0204;
				byte al_106 = (byte) ax_105;
				bcu8 al_107 = al_106 & 0x40;
				word16 ax_112 = SEQ(SLICE(ax_105, byte, 8), al_106 & 0x40);
				if ((al_106 & 0x40) != 0x00)
					al_107 = (byte) (ax_112 - 0x01);
				(ax_71->*di_120).b0000 = al_107 + (ax_71->*di_120).b0000 + di_120[1] + di_120[2] >> 0x02;
				++di_120;
			}
		}
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) == 0x00);
		word32 Eq_95::* si_174 = Eq_95::a0000;
		word32 Eq_222::* di_175 = Eq_222::a0000;
		word16 cx_178;
		for (cx_178 = 16000; cx_178 != 0x00; --cx_178)
		{
			0xA000->*di_175 = ax_71->*si_174;
			++si_174;
			++di_175;
		}
		ss->t0200.u1 = (word32) ss->t0200.u1 + 1;
	} while (__inb(0x60) != 0x01);
}

