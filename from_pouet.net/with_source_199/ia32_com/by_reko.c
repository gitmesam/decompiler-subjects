// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	Eq_9 cx_26 = 0x0100;
	union Eq_11 Eq_3::* bx_19 = SEQ(0xF0, bl);
	do
	{
		ss->t0200 = cx_26;
		ds->*bx_19 = (int16) (sin((real64) ss->t0200 * ds->r01DC) * ds->r01E0);
		ds->*bx_19 = (int32) (ds->*bx_19);
		--cx_26;
		bx_19 = (union Eq_11 Eq_3::*) ((char *) bx_19 + 4);
		byte cl_200 = (byte) cx_26;
	} while (cx_26 != 0x00);
	__outb(0x03C8, 0x00);
	cui16 si_32 = 0x00;
	byte bl_202 = 0x00;
	byte bh_203 = 0x00;
	word16 cx_290;
	do
	{
		cui16 si_37 = si_32 & 0x3F;
		cu8 cl_41 = (byte) cx_290;
		byte al_44 = (byte) si_37;
		byte ah_45 = SLICE(si_37, byte, 8);
		si_32 = si_37 + 0x02;
		if (cl_41 > 0xC1)
		{
			if (cl_41 >= 225)
				bh_203 = al_44;
			else
				bl_202 = al_44;
		}
		else
			ah_45 = al_44;
		__outb(969, ah_45);
		__outb(969, bl_202);
		__outb(969, bh_203);
		--cx_290;
	} while (cx_290 != 0x00);
	do
	{
		struct Eq_93 Eq_98::* di_114 = Eq_98::a0000;
		cui16 dx_126;
		for (dx_126 = 200; dx_126 != 0x00; --dx_126)
		{
			cui16 cx_124;
			for (cx_124 = 0x0140; cx_124 != 0x00; --cx_124)
			{
				ss->w0204 = (cx_124 << 0x03) + (&(ds->tFFFFF000).w0000)[((word32) ss->t0200 + dx_126) * 0x04];
				ui16 ax_99 = (dx_126 << 0x03) + (&(ds->tFFFFF000).w0000)[((word32) ss->t0200 + cx_124) * 0x04] ^ ss->w0204;
				byte al_100 = (byte) ax_99;
				bcu8 al_101 = al_100 & 0x40;
				word16 ax_106 = SEQ(SLICE(ax_99, byte, 8), al_100 & 0x40);
				if ((al_100 & 0x40) != 0x00)
					al_101 = (byte) (ax_106 - 0x01);
				(cs->*di_114).b0000 = al_101 + (cs->*di_114).b0000 + di_114[1] + di_114[2] >> 0x02;
				++di_114;
			}
		}
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) == 0x00);
		word32 Eq_98::* si_168 = Eq_98::a0000;
		word32 Eq_210::* di_169 = Eq_210::a0000;
		word16 cx_172;
		for (cx_172 = 16000; cx_172 != 0x00; --cx_172)
		{
			0xA000->*di_169 = cs->*si_168;
			++si_168;
			++di_169;
		}
		ss->t0200.u1 = (word32) ss->t0200.u1 + 1;
	} while (__inb(0x60) != 0x01);
}

