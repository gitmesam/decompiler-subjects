// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register int16 bp, Register (memptr (ptr16 Eq_73) byte) di)
void fn0C00_0100(word16 cx, int16 bp, byte Eq_73::* di)
{
	bios_video_set_mode(0x13);
	byte ah_106 = 0x00;
	word16 cx_154 = cx;
	do
	{
		ui8 cl_12 = (byte) cx_158;
		__outb(0x03C8, cl_12);
		__outb(969, 0x00);
		__outb(969, 0x00);
		__outb(969, cl_12 << 0x04);
		cx_154 = cx_158 - 0x01;
		cx_158 = cx_154;
	} while (cx_158 != 0x01);
l0C00_011C:
	bp += SEQ(ah_106, __inb(0x40));
	Eq_46 dx_28 = 0x05;
	do
	{
		int16 si_30 = bp;
		if (dx_28 == 0x14)
			goto l0C00_011C;
		Eq_46 dx_34 = (word16) dx_28.u1 + 1;
		bp -= 0x0140;
		Eq_46 cx_37 = -dx_34;
		do
		{
			ss->wFFFC = (int16) sqrt((real64) ss->wFFFC);
			Eq_66 dx_ax_51 = cx_37 *s cx_37;
			<type-error> Eq_73::* bx_55 = (word16) (dx_34 * dx_34 - dx_ax_51);
			0xA000->*((char *) bx_55 + si_30) = 0x0F;
			byte Eq_73::* bx_69 = -bx_55;
			bx_69[si_30] = 0x0F;
			ah_106 = SLICE(dx_ax_51, byte, 8);
			dx_28 = dx_34;
			si_30 += 0x0140;
			cx_37 = (word16) cx_37.u0 + 1;
		} while (cx_37 <= dx_34);
		do
		{
			byte al_78 = 0xA000->*di;
			if (al_78 != 0x00)
				0xA000->*di = al_78 - 0x01;
			di -= bx_69;
			--bx_69;
		} while (bx_69 != Eq_73::a0000);
	} while ((__inb(0x60) & 0x01) == 0x00);
	bios_video_set_mode(0x03);
}

