// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	__syscall(0x10);
	__outb(0x03C8, 0x00);
	word16 cx_229 = SEQ(ch, 0x40);
	do
	{
		__outb(969, -(byte) cx_243);
		__outb(969, 0x00);
		__outb(969, 0x00);
		byte ch_165 = SLICE(cx_243 - 0x01, byte, 8);
		cx_229 = cx_243 - 0x01;
		cx_243 = cx_229;
	} while (cx_243 != 0x01);
	word16 cx_232 = SEQ(ch_165, 0x40);
	do
	{
		__outb(969, 0x00);
		__outb(969, 0x00);
		__outb(969, (byte) cx_245 - 0x01);
		byte ch_167 = SLICE(cx_245 - 0x01, byte, 8);
		cx_232 = cx_245 - 0x01;
		cx_245 = cx_232;
	} while (cx_245 != 0x01);
	word16 cx_235 = SEQ(ch_167, 0x40);
	do
	{
		__outb(969, 0x00);
		__outb(969, -(byte) cx_241);
		__outb(969, 0x00);
		byte ch_169 = SLICE(cx_241 - 0x01, byte, 8);
		cx_235 = cx_241 - 0x01;
		cx_241 = cx_235;
	} while (cx_241 != 0x01);
	word16 cx_238 = SEQ(ch_169, 0x40);
	do
	{
		byte cl_45 = (byte) cx_244;
		__outb(969, cl_45 - 0x01);
		__outb(969, cl_45 - 0x01);
		__outb(969, 0x00);
		cx_238 = cx_244 - 0x01;
		cx_244 = cx_238;
	} while (cx_244 != 0x01);
	struct Eq_112 * es_57 = 0xA000;
	do
	{
		__wait();
		__fninit();
		real64 rLoc1_209 = (real64) ds->w01FB * (real64) ds->r01F5;
		real64 rLoc1_210 = cos(rLoc1_209);
		ds->t0203.u0 = (int16) (sin(rLoc1_209) * (real64) ds->w01F9);
		ds->t0201.u0 = (int16) (rLoc1_210 * (real64) ds->w01F9);
		ds->w01FD = (word16) (ds->t0201 * ~0x9F);
		ds->w01FD += (word16) (ds->t0203 * ~0x63);
		ds->w01FF = (word16) (ds->t0201 * 100);
		ds->w01FF += (word16) (ds->t0203 * ~0x9F);
		byte Eq_112::* di_144 = &Eq_112::b0000;
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		word16 cx_106 = 200;
		do
		{
			ds->t0201 = (word16) ds->t0201 + 1;
			ds->t0203 = (word16) ds->t0203 + 1;
			ds->w01FD = (word16) ds->t0203 + ds->w01FD;
			ds->w01FF -= ds->t0201;
			ds->w0205 = ds->w01FD;
			ds->w0207 = ds->w01FF;
			word16 cx_128;
			for (cx_128 = 0x0140; cx_128 != 0x00; --cx_128)
			{
				ds->w0205 = (word16) ds->t0201 + ds->w0205;
				ds->w0207 = (word16) ds->t0203 + ds->w0207;
				es_57->*di_144 = SLICE(ds->w0205 ^ ds->w0207, byte, 8);
				++di_144;
			}
			cx_106 = cx_242 - 0x01;
			cx_242 = cx_106;
		} while (cx_242 != 0x01);
		++ds->w01FB;
		byte al_158;
		byte ah_159;
	} while (!bios_kbd_check_keystroke(out al_158, out ah_159));
	bios_video_set_mode(0x03);
}

