// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (memptr (ptr16 Eq_4) Eq_11) bx, Register (ptr16 Eq_4) ds, FpuStack real64 rLoc2)
void fn0C00_0100(byte cl, union Eq_11 Eq_4::* bx, struct Eq_4 * ds, real64 rLoc2)
{
	__syscall(0x10);
	Eq_11 es_bx_8 = ds->*bx;
	word16 bx_158 = (word16) es_bx_8;
	struct Eq_17 * es_163 = SLICE(es_bx_8, selector, 16);
	struct Eq_19 Eq_4::* si_106 = Eq_4::a015A;
	do
	{
		cu16 ax_15 = (ds->*si_106).w0000 + 0x1000;
		struct Eq_31 Eq_4::* si_16 = &si_106->w0000 + 1;
		do
		{
			ax_15 = ax_197 + 0x1000;
			ax_197 = ax_15;
		} while (ax_15 >= 0xF000);
		word16 ax_40 = __aam((ds->*si_16).w0000);
		uint16 ax_122 = (SEQ(SLICE(ax_40, byte, 8), cl) >> 0x01) + 0x01;
		ui16 cx_124 = SEQ(SLICE(ax_15 << 0x02, byte, 8) << 0x02, (byte) ax_40) + 0x01 << 0x07;
		do
		{
			real64 rLoc1_172 = (real64) ds->wFFF8;
			real64 rLoc3_176 = (real64) ds->wFFFC / (real64) ds->tFFF2;
			real64 rLoc3_177 = cos(rLoc3_176);
			rLoc2 = __rndint(rLoc2 * sin(rLoc3_176)) * (real64) ds->tFFF2;
			ds->tFFF2.u0 = (int32) (rLoc1_172 * rLoc3_177 + rLoc2);
			Eq_90 di_78 = ax_197 + 0x00 << 0x02;
			es_163->*((word16) di_78 + 320) = SLICE(bx_158, byte, 8);
			struct Eq_19 Eq_4::* si_75 = si_106 + 1;
			si_106 = si_75;
			ax_122 = ax_198 + 0x01;
			cx_124 = cx_199 - 0x01;
			cl = (byte) (cx_199 - 0x01);
			ax_198 = ax_122;
			cx_199 = cx_124;
		} while (cx_199 != 0x01);
		ui16 ax_125 = ax_198 + 0x00 ^ 0x0C80;
		byte al_130 = (byte) ax_125;
	} while (ax_125 != 0x00);
	__syscall(22);
	ds->b5CC2 = al_130;
	es_163->*di_78 = (ds->*si_75).w0000;
	es_163->*((word16) di_78 + 2) = __in(ax_125);
}

