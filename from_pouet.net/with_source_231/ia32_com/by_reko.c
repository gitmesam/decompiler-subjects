// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (memptr (ptr16 Eq_4) Eq_10) bx, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte cl, union Eq_10 Eq_4::* bx, struct Eq_4 * ds)
{
	__syscall(0x10);
	Eq_10 es_bx_8 = ds->*bx;
	word16 bx_159 = (word16) es_bx_8;
	struct Eq_16 * es_164 = SLICE(es_bx_8, selector, 16);
	struct Eq_18 Eq_4::* si_109 = Eq_4::a015A;
	do
	{
		cu16 ax_15 = (ds->*si_109).w0000;
		struct Eq_33 Eq_4::* si_16 = &si_109->w0000 + 1;
		do
			ax_15 += 0x1000;
		while (ax_15 >= 0x00);
		bui8 ah_26 = SLICE(ax_15 << 0x02, byte, 8);
		word16 ax_42 = __aam((ds->*si_16).w0000);
		Eq_38 ax_34 = SEQ(ah_26 * 0x05, (byte) (ax_15 << 0x02));
		uint16 ax_125 = (SEQ(SLICE(ax_42, byte, 8), cl) >> 0x01) + 0x01;
		ui16 cx_127 = SEQ(ah_26 << 0x02, (byte) ax_42) + 0x01 << 0x07;
		do
		{
			real64 rLoc1_173 = (real64) ds->wFFF8;
			real64 rLoc3_176 = (real64) ds->wFFFC / (real64) ds->tFFF2;
			ds->tFFF2.u1 = (int32) (rLoc1_173 * cos(rLoc3_176) + __rndint(rLoc1_173 * sin(rLoc3_176)) * (real64) ds->tFFF2);
			es_164->*((word16) ax_34 + 320) = SLICE(bx_159, byte, 8);
			struct Eq_18 Eq_4::* si_77 = si_109 + 1;
			si_109 = si_77;
			ax_125 = ax_192 + 0x01;
			cx_127 = cx_193 - 0x01;
			cl = (byte) (cx_193 - 0x01);
			ax_192 = ax_125;
			cx_193 = cx_127;
		} while (cx_193 != 0x01);
		ui16 ax_128 = ax_192 + 0x00 ^ 0x0C80;
		byte al_133 = (byte) ax_128;
	} while (ax_128 != 0x00);
	__syscall(22);
	ds->b5CC2 = al_133;
	es_164->*ax_34 = (ds->*si_77).w0000;
	es_164->*((word16) ax_34 + 2) = __in(ax_128);
}

