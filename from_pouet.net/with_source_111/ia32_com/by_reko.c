// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_10) ds_bx, Register (memptr (ptr16 Eq_16) Eq_3) si, Register int16 di)
void fn0C00_0100(union Eq_10 * ds_bx, struct Eq_3 Eq_16::* si, int16 di)
{
	__syscall(0x10);
	Eq_10 ds_cx_8 = *ds_bx;
	uint16 cx_10;
	struct Eq_16 * ds_93 = SLICE(ds_cx_8, selector, 16);
	do
	{
		__outb(969, (byte) cx_10);
		uint16 ax_14 = cx_10 >> 0x01;
		__outb(969, (byte) ax_14);
		__outb(969, (byte) (ax_14 >> 0x01));
		Eq_38 ax_16 = ax_14 >> 0x01;
		--cx_10;
	} while (cx_10 != 0x00);
	do
	{
		do
		{
			ui24 al_si_98 = SEQ(al_32, si + ax_16 + (ax_14 >>u 0x01 <u 0x00)) + SEQ(Mem24[ds_93:si_29 + 1:byte], cx_10);
			struct Eq_52 Eq_16::* si_29 = (word16) al_si_98;
			word16 ax_39 = SEQ(SLICE(ax_16, byte, 8), (SLICE(al_si_98, byte, 16) >> 0x01) + (ds_93->*si_29).b0001);
			bcu8 cl_41 = (byte) cx_112;
			byte al_44 = (byte) (ax_39 - 0x01);
			uint8 cl_42 = cl_41 >> cl_41;
			ui8 al_32 = (ds_93->*si_29).b0000;
			si = (struct Eq_3 Eq_16::*) &si_29->b0001;
			uint8 cl_46 = cl_42 + al_44 + (cl_42 < 0x00);
			int16 bx_50 = di;
			if (cl_46 * 0x02 >= 0x00)
				bx_50 = ~0x013F;
			if (cl_46 * 0x02 >= 0x00)
				bx_50 = bx_50 ^ di;
			ds_93->*((char *) (&(&(ds_93->*(ds_93->*si_29).b0001))) + bx_50) = al_44;
			cx_10 = cx_112 - 0x01;
			ax_16 = ax_39 - 0x01;
			cx_112 = cx_10;
		} while (cx_112 != 0x01);
		int16 ax_76 = (int16) __inb(0x60);
		ax_16 = ax_76 - 0x01;
	} while (ax_76 != 0x01);
	__syscall(0x10);
}

