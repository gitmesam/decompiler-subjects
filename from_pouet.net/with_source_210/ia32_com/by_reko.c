// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	int16 cx_25;
	int16 Eq_3::* bx_19 = SEQ(0xF0, bl);
	for (cx_25 = 0x0100; cx_25 != 0x00; --cx_25)
	{
		ss->w0200 = cx_25;
		ds->*bx_19 = (int16) (sin((real64) ss->w0200 * ds->r01EE) * ds->r01F2);
		++bx_19;
	}
	__outb(0x03C8, 0x00);
	uint8 ah_212 = 0x00;
	word16 cx_33;
	cui16 bx_287 = 0x00;
	for (cx_33 = 0x0100; cx_33 != 0x00; --cx_33)
	{
		uint8 bl_34 = (byte) bx_287;
		__outb(969, bl_34 >> 0x02);
		__outb(969, ah_212);
		uint8 al_45 = bl_34;
		ah_212 = SLICE(bx_287, byte, 8);
		if (bl_34 > 0x3F)
			al_45 = 0x3F;
		__outb(969, al_45);
		++bx_287;
	}
	do
	{
		Eq_77 ax_64 = ds->t0304;
		ds->t0302 = ax_64;
		ds->w0300 = ax_64 << 0x08;
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) == 0x00);
		byte Eq_111::* di_147 = &Eq_111::b0000;
		word16 cx_183 = 200;
		do
		{
			word16 bx_99 = (word16) ds->t0302;
			ui16 bp_109 = (&ds->wFFFFF000)[(word16) ds->t0304 * 0x02] + (&ds->wFFFFF000)[SEQ(SLICE(bx_99, byte, 8), (byte) bx_99 + 0x40) * 0x02];
			int16 cx_124 = ((&ds->wFFFFF000)[(word16) ds->b0301 * 0x02] >> 0x05) + 0x80;
			byte cl_117 = (byte) cx_290;
			int16 bp_114 = bp_109 * 0x03 + (bp_109 << 0x02);
			word16 dx_126 = 0x0140 - cx_124;
			for (; cx_124 != 0x00; --cx_124)
			{
				0xA000->*di_147 = cl_117;
				++di_147;
			}
			word16 cx_129;
			for (cx_129 = 0x40; cx_129 != 0x00; --cx_129)
			{
				ci8 al_134 = (byte) (bp_114 >> 0x08 & 0x0F);
				byte al_135 = al_134 - 0x07;
				if (al_134 < 0x07)
					al_135 = 0x07 - al_134;
				0xA000->*di_147 = (al_135 ^ 0x07) << 0x03;
				++di_147;
				bp_114 += 0x55;
			}
			word16 cx_161;
			for (cx_161 = dx_126 - 0x40; cx_161 != 0x00; --cx_161)
			{
				0xA000->*di_147 = cl_117;
				++di_147;
			}
			ds->t0302.u1 = (byte) ds->t0302.u1 + 1;
			ds->w0300 += ds->w01F6;
			cx_183 = cx_290 - 0x01;
			cx_290 = cx_183;
		} while (cx_290 != 0x01);
		ds->t0304 = (word16) ds->t0304 + 1;
		ds->w01F6 = bp_114 >> 0x01;
	} while (__inb(0x60) != 0x01);
}

