// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds, FpuStack real64 rLoc2)
void fn0C00_0100(byte bl, struct Eq_3 * ds, real64 rLoc2)
{
	bios_video_set_mode(0x13);
	__outb(0x03C8, 0x00);
	byte al_13 = 0x00;
	do
	{
		__outb(969, al_13);
		++al_13;
		Eq_24 ax_219 = (uint16) (uint8) al_13;
	} while (al_13 != 0x00);
	struct Eq_29 * bx_20 = SEQ(0x60, bl);
	struct Eq_29 * bx_23 = SEQ(0x70, bl);
	struct Eq_35 Eq_29::* bx_32 = Eq_29::a0000;
	do
	{
		rLoc2 = sin(rLoc2) * (real64) ds->w01AA;
		(bx_23->*bx_32).w0000.u0 = (int16) rLoc2;
		(bx_20->*bx_32).w0000 = ax_219;
		struct Eq_52 Eq_29::* bx_54 = bx_32 + 1;
		bx_32 = (struct Eq_35 Eq_29::*) (bx_54 + 1);
	} while (bx_54 != &Eq_29::t0001);
	struct Eq_59 Eq_3::* di_60 = &Eq_3::t000A;
	struct Eq_61 Eq_29::* bx_351 = bx_54 + 1;
	do
	{
		int16 si_64 = (ds->*di_60).w0000;
		struct Eq_61 Eq_29::* bx_348 = bx_351;
		do
		{
			bi8 bl_65 = (byte) bx_355;
			bi8 bh_72 = SLICE(bx_355, byte, 8);
			if (bh_72 *s bh_72 + bl_65 *s bl_65 <=u 2499)
				bx_355[si_64] = 0xC9;
			bx_348 = bx_355 + 1;
			bx_355 = bx_348;
		} while (bx_355 != &Eq_29::t0001);
		word16 di_89 = di_60 - 0x01;
		di_60 = di_89 - 0x01;
		bx_351 = bx_355 + 1;
	} while (di_89 != 0x01);
	do
	{
		word16 bx_116 = 0x00;
		Eq_94 si_96 = bx_23->a0000[0];
		word16 bp_97 = bx_23->w4000;
		word16 dx_113 = 0x00;
		byte Eq_107::* di_127 = &Eq_107::b0000;
		word16 cx_102 = 200;
		do
		{
			word16 cx_130;
			bx_132 = bx_116;
			dx_135 = dx_113;
			di_168 = di_127;
			for (cx_130 = 0x0140; cx_130 != 0x00; --cx_130)
			{
				byte Eq_107::* di_168;
				word16 dx_135;
				word16 bx_132;
				word16 bx_134 = bx_132 + bp_97;
				dx_135 = (word16) si_96.u0 + dx_135;
				cu8 al_145 = 0x14;
				Eq_121 bx_148 = SEQ(SLICE(bx_134, byte, 8), SLICE(dx_135, byte, 8));
				while (bx_20->*bx_148 <= al_145)
				{
					bx_148 *= 0x02;
					al_145 -= 0x04;
					if (al_145 == 0x00)
						break;
				}
				0xA000->*di_168 = al_145;
				++di_168;
				bx_132 = bx_134;
			}
			di_127 += 320;
			bx_116 -= si_96;
			dx_113 += bp_97;
			cx_102 = cx_354 - 0x01;
			cx_354 = cx_102;
		} while (cx_354 != 0x01);
		++ds->b015A;
		ds->b017B += 0x04;
		byte al_210;
		byte ah_211;
	} while (bios_kbd_check_keystroke(out al_210, out ah_211));
	bios_video_set_mode(0x03);
}

