// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__outb(0x43, 0x36);
	__outb(0x40, 0x13);
	__outb(0x40, 0x13);
	bios_video_set_mode(0x13);
	real64 rLoc1_315 = 1.0;
	word32 edx_12 = 0036:010C;
	struct Eq_29 Eq_3::* bx_293 = SEQ(0x02, bl);
	do
	{
		up32 ecx_17 = 0036:010C - edx_12;
		word16 cx_274 = (word16) ecx_17;
		if (ecx_17 > 0x00)
		{
			edx_12 += ecx_17;
			do
			{
				rLoc1_315 *= (ds->*bx_293).rFFFFFFF4;
				--cx_274;
			} while (cx_274 != 0x00);
		}
		byte Eq_3::* di_193 = &bx_293->dw0004 + 2;
		int16 bp_215;
		for (bp_215 = 100; bp_215 != ~0x63; --bp_215)
		{
			int16 dx_100;
			for (dx_100 = 0xA0; dx_100 != ~0x9F; --dx_100)
			{
				real64 rLoc2_328 = (real64) 0036:010C * (ds->*bx_293).rFFFFFFF8;
				(ds->*bx_293).w0000 = bp_215;
				real64 rLoc3_329 = (real64) (ds->*bx_293).w0000;
				(ds->*bx_293).w0000 = dx_100;
				real64 rLoc4_330 = (real64) (ds->*bx_293).w0000;
				real64 rLoc5_332 = rLoc4_330 * rLoc4_330;
				real64 rLoc3_345 = rLoc3_329 * (rLoc2_328 + sqrt(rLoc5_332 + rLoc5_332 * rLoc5_332) * (sin(rLoc3_329) * (ds->*bx_293).rFFFFFFFC));
				real64 rLoc4_343 = rLoc4_330 * rLoc1_315;
				real64 rLoc7_353 = cos(rLoc3_345) * rLoc4_343;
				real64 rLoc3_355 = rLoc3_345 * (sin(rLoc3_345) * rLoc4_343) + rLoc4_343;
				real64 rLoc4_357 = rLoc4_343 - rLoc4_343 * rLoc7_353 + (ds->*bx_293).rFFFFFFE4;
				real64 rLoc3_359 = rLoc3_355 + (ds->*bx_293).rFFFFFFEC;
				real64 rLoc5_360 = 0.0;
				real64 rLoc6_361 = 0.0;
				word16 cx_155;
				for (cx_155 = 0x0100; cx_155 != 0x00; --cx_155)
				{
					rLoc7_353 = rLoc5_360 * rLoc5_360;
					(ds->*bx_293).dw0004 = (int32) rLoc7_353;
					real64 rLoc7_367 = rLoc7_353 * rLoc6_361 * rLoc5_360;
					rLoc5_360 = rLoc7_367 + rLoc7_367 + rLoc3_359;
					rLoc6_361 = rLoc6_361 - rLoc7_353 + rLoc4_357;
					if ((ds->*bx_293).dw0004 >= 0x04)
						break;
				}
				ds->*di_193 = ((byte) cx_155 & 0x3F) + 0x10;
				++di_193;
			}
		}
		word32 Eq_182::* di_218 = Eq_182::a0000;
		struct Eq_167 Eq_3::* si_222 = &bx_293->dw0004 + 2;
		word16 cx_223;
		for (cx_223 = 16000; cx_223 != 0x00; --cx_223)
		{
			0xA000->*di_218 = (ds->*si_222).dw0000;
			++si_222;
			++di_218;
		}
	} while (__inb(0x60) != 0x01);
}

