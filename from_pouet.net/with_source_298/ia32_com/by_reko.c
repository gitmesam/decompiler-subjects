// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__outb(0x43, 0x36);
	__outb(0x40, 0x13);
	__outb(0x40, 0x13);
	bios_video_set_mode(0x13);
	real64 rLoc1_323 = 1.0;
	word32 edx_12 = 0036:010C;
	struct Eq_29 Eq_3::* bx_301 = SEQ(0x02, bl);
	do
	{
		up32 ecx_17 = 0036:010C - edx_12;
		word16 cx_28 = (word16) ecx_17;
		if (ecx_17 > 0x00)
		{
			edx_12 += ecx_17;
			do
			{
				rLoc1_323 *= (real64) (ds->*bx_301).rFFFFFFF4;
				--cx_28;
			} while (cx_28 != 0x00);
		}
		byte Eq_3::* di_201 = &bx_301->dw0004 + 2;
		int16 bp_223;
		for (bp_223 = 100; bp_223 != ~0x63; --bp_223)
		{
			int16 dx_100;
			for (dx_100 = 0xA0; dx_100 != ~0x9F; --dx_100)
			{
				real64 rLoc2_336 = (real64) 0036:010C * (real64) (ds->*bx_301).rFFFFFFF8;
				(ds->*bx_301).w0000 = bp_223;
				real64 rLoc3_337 = (real64) (ds->*bx_301).w0000;
				(ds->*bx_301).w0000 = dx_100;
				real64 rLoc4_338 = (real64) (ds->*bx_301).w0000;
				real64 rLoc2_349 = rLoc2_336 + sqrt(rLoc3_337 * rLoc3_337 + rLoc4_338 * rLoc4_338) * (sin(rLoc2_336) * (real64) (ds->*bx_301).rFFFFFFFC);
				real64 rLoc7_357 = cos(rLoc2_349);
				real64 rLoc4_351 = rLoc4_338 * rLoc1_323;
				real64 rLoc3_353 = rLoc3_337 * rLoc1_323;
				real64 rLoc3_363 = rLoc3_353 * (sin(rLoc2_349) * rLoc4_351) + rLoc4_351;
				real64 rLoc4_365 = rLoc4_351 - rLoc3_353 * (rLoc7_357 * rLoc4_351) + (ds->*bx_301).rFFFFFFE4;
				real64 rLoc3_367 = rLoc3_363 + (ds->*bx_301).rFFFFFFEC;
				real64 rLoc5_368 = 0.0;
				real64 rLoc6_369 = 0.0;
				word16 cx_162;
				for (cx_162 = 0x0100; cx_162 != 0x00; --cx_162)
				{
					real64 rLoc7_380 = rLoc5_368 * rLoc5_368;
					(ds->*bx_301).dw0004 = (int32) rLoc7_380;
					real64 rLoc7_374 = rLoc6_369 * rLoc6_369 * rLoc5_368;
					rLoc5_368 = rLoc7_374 + rLoc7_374 + rLoc3_367;
					rLoc6_369 = rLoc6_369 - rLoc7_380 + rLoc4_365;
					if ((ds->*bx_301).dw0004 >= 0x04)
						break;
				}
				ds->*di_201 = ((byte) cx_162 & 0x3F) + 0x10;
				++di_201;
			}
		}
		word32 Eq_186::* di_226 = Eq_186::a0000;
		struct Eq_171 Eq_3::* si_230 = &bx_301->dw0004 + 2;
		word16 cx_231;
		for (cx_231 = 16000; cx_231 != 0x00; --cx_231)
		{
			0xA000->*di_226 = (ds->*si_230).dw0000;
			++si_230;
			++di_226;
		}
	} while (__inb(0x60) != 0x01);
}

