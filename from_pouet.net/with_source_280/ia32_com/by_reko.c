// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	struct Eq_9 Eq_3::* bx_9 = SEQ(0xF0, bl);
	Eq_12 cx_12 = 0x0100;
	bx_35 = bx_9;
	do
	{
		struct Eq_9 Eq_3::* bx_35;
		ss->t0200 = cx_12;
		real64 rLoc1_238 = (real64) ss->t0200 * (real64) ss->t01F8;
		(ds->*bx_35).t0000 = (int16) (sin(rLoc1_238) * (real64) ss->w01FC + sin(rLoc1_238 + rLoc1_238) * (real64) ss->w01FE);
		struct Eq_46 Eq_3::* bx_38 = bx_35 + 1;
		--cx_12;
		bx_35 = (struct Eq_9 Eq_3::*) (bx_38 + 1);
		bcu8 bl_194 = (byte) (bx_38 + 1);
		bcu8 ch_198 = SLICE(cx_12, byte, 8);
	} while (cx_12 != 0x00);
	__outb(0x03C8, 0x13);
	bcu8 ah_197 = 0x00;
	struct Eq_69 Eq_3::* si_201 = Eq_3::a01E9;
	byte bh_49 = 0x04;
	do
	{
		byte cl_50;
		for (cl_50 = 0x40; cl_50 != 0x00; --cl_50)
		{
			__outb(969, bl_194 >> 0x01);
			__outb(969, ah_197 >> 0x01);
			__outb(969, ch_198 >> 0x01);
			bl_194 += (ds->*si_201).b0000;
			ah_197 += (ds->*si_201).b0001;
			ch_198 += (ds->*si_201).b0002;
		}
		bl_194 -= (ds->*si_201).b0000;
		--bh_49;
		ch_198 -= (ds->*si_201).b0002;
		ah_197 -= (ds->*si_201).b0001;
		++si_201;
		ui16 bx_120 = SEQ(bh_49, bl_194);
	} while (bh_49 != 0x00);
	do
	{
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __inw(0x03DA) & 0x08) == 0x00);
		byte Eq_220::* di_110 = &Eq_220::b0000;
		word16 dx_113;
		for (dx_113 = 200; dx_113 != 0x00; --dx_113)
		{
			ui16 cx_114;
			for (cx_114 = 0x0140; cx_114 != 0x00; --cx_114)
			{
				word16 ax_141 = cx_114 + (word16) ss->t01F8;
				cu16 v26_135 = *((char *) &(ds->*bx_9).t0000 + (uint16) ((byte) (((dx_113 - ((word16) ss->t01F8 * 0x02 - bx_120)) + cx_114) - (word16) ss->t0200)) * 0x02);
				word16 ax_145 = __rcl(ax_141, 0x01, SLICE(cond(ax_141), bool, 1));
				uint16 bx_161 = (uint16) (byte) cx_114;
				uint16 bx_169 = (uint16) (byte) ((word16) ss->t0204.u0 + ((((char *) (*((char *) (&(ds->*bx_9).t0000) + bx_161 * 0x02)) + bx_161 * 0x02) + dx_113) - cx_114));
				Mem177[0xA000:di_110 + 0x00:byte] = SLICE(v26_135 + SEQ(ds, bx_9)[CONVERT(SLICE((CONVERT(Mem138[ss:0x0200:byte], byte, word16) + dx_113) - ax_145, byte, 0), byte, uint16) * 0x02] + SEQ(ds, bx_9)[bx_169 * 0x02] >>u 0x03, byte, 0);
				bx_120 = bx_169 * 0x02;
				++di_110;
			}
		}
		--ss->t0204;
		ss->t0200.u1 = (byte) ss->t0200.u1 + 1;
		--ss->t01F8;
	} while (__inb(0x60) != 0x01);
}

