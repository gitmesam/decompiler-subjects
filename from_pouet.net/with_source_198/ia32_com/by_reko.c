// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	int8 Top_103 = 0;
	__syscall(0x10);
	word16 cx_257 = SEQ(SLICE(cs, byte, 8) + 0x10, (byte) cs);
	do
	{
		uint8 cl_17 = (byte) cx_264;
		__outb(0x03C8, cl_17);
		__outb(969, cl_17 >> 0x01);
		__outb(969, cl_17 >> 0x01);
		__outb(969, cl_17 >> 0x02);
		cx_257 = cx_264 - 0x01;
		cx_264 = cx_257;
	} while (cx_264 != 0x01);
	do
	{
		ds->w0100 += 0x02;
		struct Eq_50 * Top_35 = Top_103 - 1;
		Top_35->r0000 = (real64) ds->w0100;
		Top_35->r0000 /= (real64) ds->w0135;
		real64 v20_38 = Top_35->r0000;
		Top_35->r0000 = cos(v20_38);
		Top_35->rFFFFFFFF = sin(v20_38);
		struct Eq_87 Eq_11::* di_106 = &Eq_11::t0000;
		word16 ax_173 = 0x0140;
		word16 dx_179 = 65336;
		do
		{
			int8 Top_213 = Top_103 - 2;
			ax_173 = -ax_173;
			do
			{
				Top_213->rFFFFFFFF = (real64) ax_263;
				Top_213->rFFFFFFFE = (real64) 0x0140;
				real64 rRet1_70;
				Top_213->rFFFFFFFE = fn0C00_01BE(Top_213->rFFFFFFFC, Top_213->rFFFFFFFD, Top_213->rFFFFFFFE, Top_213->rFFFFFFFF, Top_213->r0000, Top_213->r0001, out rRet1_70);
				Top_213->rFFFFFFFF = rRet1_70;
				real64 v23_73 = Top_213->rFFFFFFFE;
				Top_213->rFFFFFFFE = Top_213->r0001;
				Top_213->r0001 = v23_73;
				real64 v24_76 = Top_213->rFFFFFFFE;
				Top_213->rFFFFFFFE = Top_213->rFFFFFFFF;
				Top_213->rFFFFFFFF = v24_76;
				Top_213->rFFFFFFFD = (real64) dx_262;
				real64 rRet1_82;
				Top_213->rFFFFFFFD = fn0C00_01BE(Top_213->rFFFFFFFB, Top_213->rFFFFFFFC, Top_213->rFFFFFFFD, Top_213->rFFFFFFFE, Top_213->rFFFFFFFF, Top_213->r0000, out rRet1_82);
				Top_213->rFFFFFFFE = rRet1_82;
				real64 v25_85 = Top_213->rFFFFFFFD;
				Top_213->rFFFFFFFD = Top_213->r0001;
				Top_213->r0001 = v25_85;
				real64 rRet1_89;
				Top_213->rFFFFFFFD = fn0C00_01BE(Top_213->rFFFFFFFB, Top_213->rFFFFFFFC, Top_213->rFFFFFFFD, Top_213->rFFFFFFFE, Top_213->rFFFFFFFF, Top_213->r0000, out rRet1_89);
				Top_213->rFFFFFFFE = rRet1_89;
				Top_213->rFFFFFFFD = fabs(Top_213->rFFFFFFFD);
				Top_213->rFFFFFFFD = -Top_213->rFFFFFFFD;
				ds->w0106 = (int16) Top_213->rFFFFFFFD;
				ds->w0108 = (int16) Top_213->rFFFFFFFE;
				real64 v26_99 = Top_213->rFFFFFFFF;
				Top_213->rFFFFFFFF = Top_213->r0001;
				Top_213->r0001 = v26_99;
				ds->w010A = (int16) Top_213->rFFFFFFFF;
				word16 bx_108 = ds->w00FF;
				--ds->w0106;
				Top_103 = Top_213;
				byte al_104;
				word16 bp_109 = bx_108;
				word16 cx_110 = 0x00;
				word16 di_112 = bx_108;
				for (al_104 = 0x7F; al_104 != 0x00; --al_104)
				{
					cx_110 += ds->w0106;
					bp_109 += ds->w0108;
					di_112 += ds->w010A;
					byte dh_260;
					fn0C00_01D3(cx_110, bp_109, di_112, out dh_260);
					Eq_126 dx_143 = <invalid>;
					Eq_126 dx_128 = <invalid>;
					byte dh_261;
					if (SLICE(dx_143 + dx_128, byte, 8) + fn0C00_01D3(cx_110, bp_109, di_112, out dh_261) == 0x00)
						break;
				}
				(cs->*di_106).t0000 = al_104;
				++di_106;
				ax_173 = ax_263 + 0x02;
				ax_263 = ax_173;
			} while (ax_263 != 0x013E);
			dx_179 = dx_262 + 0x02;
			dx_262 = dx_179;
		} while (dx_262 != 0xC6);
		do
		{
			(0xA000->*di_106).t0000 = (cs->*di_106).t0000;
			Eq_360 di_188 = di_106 - 0x01;
			di_106 = di_188 - 0x01;
		} while (di_188 != 0x01);
	} while (__inb(0x60) != 0x81);
}

// 0C00:01BE: FpuStack real64 fn0C00_01BE(FpuStack real64 rLoc2, FpuStack real64 rLoc1, FpuStack real64 rArg0, FpuStack real64 rArg1, FpuStack real64 rArg2, FpuStack real64 rArg3, FpuStack out Eq_160 rArg1Out)
// Called from:
//      fn0C00_0100
real64 fn0C00_01BE(real64 rLoc2, real64 rLoc1, real64 rArg0, real64 rArg1, real64 rArg2, real64 rArg3, union Eq_160 & rArg1Out)
{
	rArg1Out = rLoc1 * rArg2 + rLoc2 * rArg3;
	return rArg1 * rArg2 - rArg0 * rArg3;
}

// 0C00:01D3: FlagGroup bool fn0C00_01D3(Register word16 cx, Register word16 bp, Register word16 di, Register out Eq_126 dhOut)
// Called from:
//      fn0C00_0100
bool fn0C00_01D3(word16 cx, word16 bp, word16 di, union Eq_126 & dhOut)
{
	dhOut.u0 = <invalid>;
	return false;
}

