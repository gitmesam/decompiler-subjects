// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	__outb(0x03D4, 0x11);
	__outb(0x03D5, __inb(0x03D5) & 0x7F);
	byte Eq_3::* si_15 = Eq_3::a01A0;
	while (true)
	{
		byte al_19 = ds->*si_15;
		byte Eq_3::* si_20 = si_15 + 1;
		if (al_19 == 0x00)
			break;
		__outb(SEQ(0x03, al_19), ds->*si_20);
		si_15 = si_20 + 1;
	}
	byte ah_157 = 0x00;
	word16 cx_187 = SEQ(ch, 0x7F);
	do
	{
		byte cl_30 = (byte) cx_190;
		byte bl_32 = cl_30 & 0x1F;
		byte bh_34 = 0x1F - (cl_30 & 0x1F);
		if ((cl_30 & 0x20) != 0x00)
			bl_32 = bh_34;
		if ((cl_30 & 0x40) != 0x00)
		{
			bl_32 = ah_157;
			ah_157 = bl_32;
		}
		__outb(0x03C8, cl_30);
		__outb(969, bl_32);
		__outb(969, bl_32);
		__outb(969, ah_157);
		byte al_113 = ah_157;
		cx_187 = cx_190 - 0x01;
		cx_190 = cx_187;
	} while (cx_190 != 0x01);
	do
	{
		struct Eq_90 Eq_89::* di_101 = &Eq_89::t0000;
		byte ch_103 = 0x00;
		do
		{
			byte cl_86 = 0x00;
			do
			{
				byte al_88 = al_113 & 0x3F;
				(0xA000->*di_101).b0000 = al_88;
				struct Eq_94 Eq_89::* di_92 = &di_101->b0000 + 1;
				di_101 = (struct Eq_90 Eq_89::*) (&di_92->b0000 + 1);
				al_113 = al_88 + ds->b01C0;
				++cl_86;
			} while (cl_86 != 0x00);
			di_101 = (struct Eq_90 Eq_89::*) (di_92 + 1);
			++ch_103;
		} while (ch_103 != 0x00);
		++ds->b01C0;
		byte Eq_89::* di_110 = &Eq_89::b0001;
		byte ch_111 = 0x00;
		do
		{
			byte cl_112 = 0x00;
			do
			{
				byte al_114 = al_113 & 0x3F;
				0xA000->*di_110 = al_114 | 0x40;
				byte Eq_89::* di_119 = di_110 + 1;
				di_110 = di_119 + 1;
				al_113 = (al_114 | 0x40) - ds->b01C1;
				++cl_112;
			} while (cl_112 != 0x00);
			di_110 = di_119;
			++ch_111;
		} while (ch_111 != 0x00);
		++ds->b01C1;
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		byte al_142 = __inb(0x60);
		al_113 = al_142 - 0x01;
	} while (al_142 != 0x01);
	bios_video_set_mode(0x03);
	msdos_terminate(0x03);
}

