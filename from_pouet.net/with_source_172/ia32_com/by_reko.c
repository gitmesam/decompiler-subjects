// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (memptr (ptr16 Eq_46) Eq_3) di, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte bl, struct Eq_3 Eq_46::* di, struct Eq_4 * ds)
{
	byte bl_39 = (byte) bx;
	__syscall(0x10);
	msdos_display_string(&ds->b017C);
	word16 cx_19;
	for (cx_19 = 0x0300; cx_19 != 0x00; --cx_19)
	{
		real64 rLoc1_117 = sin((real64) cx_19 * (real64) 21167);
		__outb(969, (byte) (int16) (rLoc1_117 * rLoc1_117 * (real64) 0x3F));
	}
	struct Eq_46 * bx_40 = SEQ(0xA0, bl_39);
	do
	{
		uint32 dx_ax_49 = (uint32) (uint16) (di - 0x0530);
		Eq_54 dx_51 = (uint16) (dx_ax_49 % 0x0140);
		(bx_40->*di).b0000 = *((word16) (int16) (uint8) ((uint16) (dx_ax_49 /u 0x0140) /u 0x0D) + (dx_51 >> 0x05) * 0x0140) << 0x05;
		ui8 dl_105 = (byte) (dx_51 >> 0x05);
		--di;
		--cx_19;
	} while (cx_19 != 0x00);
	do
	{
		ui16 ah_al_107 = SEQ(C_80, (bx_40->*di).bFFFFFEC0) + SEQ(dl_105, (bx_40->*di).bFFFFFFFF);
		byte al_78 = (byte) ah_al_107;
		(bx_40->*di).b0000 = (byte) (SEQ(SLICE(ah_al_107, byte, 8), al_78 + di[1]) + SEQ(dl_105, di[320]) >> 0x02);
		Eq_86 C_80 = SLICE(cond(al_78), bool, 1);
		--di;
		--cx_19;
	} while (cx_19 != 0x00 || __inb(0x60) != 0x01);
	msdos_terminate_program20();
}

