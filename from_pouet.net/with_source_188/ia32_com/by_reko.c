// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte ch, struct Eq_3 * ds)
{
	__syscall(0x10);
	byte Eq_125::* di_10 = &Eq_125::b0000;
	word16 cx_263 = SEQ(ch, 0x40);
	cui16 ax_366 = 0x00;
	do
	{
		__outb(969, (byte) ax_366);
		__outb(969, 0x00);
		__outb(969, 0x00);
		--cx_263;
		byte ch_264 = SLICE(cx_263, byte, 8);
		++ax_366;
	} while (cx_263 != 0x00);
	word16 ax_34 = 0x00;
	word16 cx_265 = SEQ(ch_264, 0x40);
	do
	{
		__outb(969, 0x3F);
		__outb(969, (byte) ax_34);
		__outb(969, 0x00);
		--cx_265;
		++ax_34;
		byte ch_266 = SLICE(cx_265, byte, 8);
	} while (cx_265 != 0x00);
	word16 ax_59 = 0x00;
	word16 cx_267 = SEQ(ch_266, 0x40);
	do
	{
		byte al_70 = 0x3F - (byte) ax_59;
		__outb(969, al_70);
		__outb(969, al_70);
		__outb(969, (byte) ax_59);
		--cx_267;
		++ax_59;
		byte ch_272 = SLICE(cx_267, byte, 8);
	} while (cx_267 != 0x00);
	word16 cx_273 = SEQ(ch_272, 0x40);
	cui16 ax_369 = 0x00;
	do
	{
		__outb(969, (byte) ax_369);
		__outb(969, 0x3F);
		__outb(969, 0x3F);
		--cx_273;
		byte ah_271 = SLICE(ax_369 + 0x01, byte, 8);
		byte cl_301 = (byte) cx_273;
		++ax_369;
	} while (cx_273 != 0x00);
	word16 bp_104 = 0x00;
	word16 ax_108 = SEQ(ah_271, ~0x00);
	while (true)
	{
		word16 cx_197;
		do
		{
			++bp_104;
			if (bp_104 == 0x00)
				ax_108 = ~ax_108;
			0xA190->*di_10 = (byte) ax_108;
			byte Eq_125::* di_118 = di_10 + 1;
			uint32 dx_ax_132 = (uint32) (uint16) (di_118 - 0x01);
			uint16 dx_136 = (uint16) (dx_ax_132 % ds->w0181);
			uint16 ax_137 = (uint16) (dx_ax_132 /u ds->w0181);
			if (dx_136 == 0x00)
				ds->w01C4 = 0x01;
			if (dx_136 == 0x013F)
				ds->w01C4 = ~0x00;
			byte ah_175 = SLICE(ax_137, byte, 8);
			if (ax_137 == 0x00)
				ds->w01C6 = 0x0140;
			if (ax_137 == 0x9F)
				ds->w01C6 = ~0x013F;
			di_10 = di_118 - 0x01 + ds->w01C4 + ds->w01C6;
			if (SEQ(ah_175, __inb(0x60)) == 0x01)
				return;
			--cx_197;
		} while (cx_197 != 0x00);
		byte ah_226 = 0x00;
		cx_219 = cx_197;
		do
		{
			word16 cx_219;
			struct Eq_196 Eq_125::* si_221 = cx_219 - 0x01;
			cu16 dx_233 = SEQ(ah_226, (0xA190->*si_221).b0000) + SEQ(ah_226, (0xA190->*si_221).b0002);
			(0xA190->*si_221).b0001 = (byte) (dx_233 >> 0x01);
			ah_226 = SLICE(dx_233 >> 0x01, byte, 8);
			--cx_219;
		} while (cx_219 != 0x00);
		cl_301 = (byte) cx_197;
	}
}

