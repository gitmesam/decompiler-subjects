// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	__syscall(0x10);
	cui16 cx_260 = 0x00;
	do
	{
		Eq_10 cl_9 = (byte) cx_267;
		__outb(0x03C8, cl_9);
		Eq_10 al_12 = cl_9;
		if (cl_9 < 0x00)
			al_12 = ~cl_9;
		Eq_10 al_18 = al_12 >> 0x01;
		__outb(969, al_18);
		__outb(969, al_18);
		__outb(969, SLICE(cl_9 * al_18, byte, 8) + 0x13);
		cx_260 = cx_267 - 0x01;
		cx_267 = cx_260;
	} while (cx_267 != 0x01);
	do
	{
		++ds->w0100;
		__fninit();
		word16 di_171 = 0x00;
		int16 ax_175 = ~0x63;
		do
		{
			int16 bx_172 = ~0x9F;
			do
			{
				ds->wA000 = ax_266;
				real64 rLoc1_234 = (real64) ds->wA000;
				ds->wA000 = bx_265;
				real64 rLoc2_235 = (real64) ds->wA000;
				real64 rLoc3_237 = (real64) ds->w0100 / (real64) ds->w0130;
				real64 rLoc3_238 = cos(rLoc3_237);
				real64 rLoc4_239 = sin(rLoc3_237);
				real64 rLoc1_244 = rLoc1_234 * (((real64) ds->w0126 * rLoc3_238 + rLoc2_235) * rLoc2_235);
				ds->wA000 = (int16) (rLoc2_235 * rLoc4_239 + rLoc1_244 * rLoc3_238);
				int16 bx_107 = ds->wA000;
				ds->wA000 = (int16) (rLoc1_244 * rLoc4_239 - rLoc2_235 * rLoc3_238);
				Eq_104 bx_125 = <invalid>;
				int16 ax_116 = ds->wA000;
				word16 dx_141 = SEQ((byte) bx_125, 0xC9);
				byte bl_263;
				byte bl_264;
				fn0C00_019F(0xA000 + (ax_116 - bx_107), fn0C00_019F(ax_116, cx_267 - 0x01, 969, bx_107 >> 0x02, 0xA000, ds, out bl_263), dx_141, bx_107, 0xA000, ds, out bl_264);
				Eq_104 bx_144 = <invalid>;
				0xA000->*di_171 = SLICE(dx_141 + (byte) bx_144 * 181, byte, 8);
				++di_171;
				bx_172 = bx_265 + 0x01;
				bx_265 = bx_172;
			} while (bx_265 != 0x9F);
			ax_175 = ax_266 + 0x01;
			byte ah_180 = SLICE(ax_266 + 0x01, byte, 8);
			ax_266 = ax_175;
		} while ((byte) (ax_266 + 0x01) != 100);
	} while (SEQ(ah_180, __inb(0x60)) != 0x01);
	__syscall(0x10);
}

// 0C00:019F: Register uint16 fn0C00_019F(Register int16 ax, Register uint16 cx, Register word16 dx, Register int16 bx, Register Eq_56 si, Register (ptr16 Eq_2) ds, Register out Eq_104 blOut)
// Called from:
//      fn0C00_0100
uint16 fn0C00_019F(int16 ax, uint16 cx, word16 dx, int16 bx, Eq_56 si, struct Eq_2 * ds, union Eq_104 & blOut)
{
	byte ah_31 = SLICE(ax, byte, 8);
	byte cl_34 = (byte) cx;
	word16 dx_37;
	word16 ax_38;
	word16 cx_39;
	0C00:01E1();
	word16 dx_49;
	word16 ax_50;
	word16 bx_52;
	0C00:01E1();
	word16 dx_61;
	word16 ax_62;
	word16 cx_63;
	0C00:01E1();
	0C00:01E1();
	blOut.u0 = <invalid>;
	return (uint16) (byte) ax;
}

