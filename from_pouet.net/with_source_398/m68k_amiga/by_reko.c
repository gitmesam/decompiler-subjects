// subject_code_0000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code_0000.h"

// 00001000: void fn00001000(Register ptr32 d2)
void fn00001000(ptr32 d2)
{
	struct Eq_3 * a0_16 = 4340 + g_dw10E8;
	Eq_8 d0_120 = a0_16->tFFFFFFFC;
	union Eq_12 * a2_128 = 0x000301C4 + g_dw10EC;
	Eq_17 a0_101 = a0_16 - 4;
	ui32 d5_100 = g_dw10F0 ^ d0_120;
	do
	{
		Eq_8 d0_25 = d0_120 >> 0x01;
		Eq_27 C_34 = d0_25 < 0x00;
		if (d0_25 == 0x00)
		{
			fn000010C2(d5_100, a0_101, out d0_25, out d5_100, out a0_101);
			C_34.u0 = <invalid>;
		}
		Eq_8 d0_103;
		int32 d1_140;
		int32 d1_112;
		if (!C_34)
		{
			d0_103 = d0_25 >> 0x01;
			d1_112 = 8;
			d3 = 1;
			Eq_27 C_105 = d0_103 < 0x00;
			if (d0_103 == 0x00)
			{
				fn000010C2(d5_100, a0_101, out d0_103, out d5_100, out a0_101);
				C_105.u0 = <invalid>;
			}
			if (C_105)
				goto l0000108C;
			d1_140 = 3;
			d4 = SEQ(SLICE(d4, word16, 16), 0x00);
			goto l00001036;
		}
		word32 d1_48;
		d0_103 = fn000010CE(d0_25, 2, d2, a0_101, out d1_48, out d2);
		if ((byte) d2 >= 0x02)
		{
			if ((byte) d2 != 0x03)
			{
				word32 d1_82;
				d0_103 = fn000010CE(d0_103, 8, d2, a0_101, out d1_82, out d2);
				d3 = SEQ(SLICE(d3, word16, 16), (word16) d2);
				d1_112 = SEQ(SLICE(d1_82, word16, 16), 0x0C);
				goto l0000108C;
			}
			d1_140 = 8;
			d4 = 8;
l00001036:
			word16 v31_165 = SLICE(d3, word16, 16);
			word32 d1_355;
			d0_120 = fn000010CE(d0_103, d1_140, d2, a0_101, out d1_355, out d2);
			d3 = SEQ(v31_165, (word16) (SEQ(v31_165, (word16) d2) + d4));
			do
			{
				int32 d1_172 = 7;
				do
				{
					d0_120 >>= 0x01;
					Eq_27 X_188 = SLICE(cond(d0_120), bool, 4);
					if (d0_120 == 0x00)
					{
						fn000010C2(d5_100, a0_101, out d0_120, out d5_100, out a0_101);
						X_188.u0 = <invalid>;
					}
					word16 v47_198 = (word16) d1_172;
					d2 = __rcl(d2, 0x01, X_188);
					d1_172 = SEQ(SLICE(d1_172, word16, 16), v47_198 - 1);
				} while (v47_198 != 0x00);
				a2_128 -= (union Eq_179 *) 1;
				*a2_128 = (union Eq_12 *) (byte) d2;
				word16 v50_212 = (word16) d3;
				d3 = SEQ(SLICE(d3, word16, 16), v50_212 - 1);
			} while (v50_212 != 0x00);
		}
		else
		{
			word16 v34_58 = SLICE(d1_48, word16, 16);
			word16 v37_63 = (word16) d2 + 0x02;
			d1_112 = SEQ(v34_58, (word16) (SEQ(v34_58, 0x09) + d2));
			d2 = SEQ(SLICE(d2, word16, 16), v37_63);
			d3 = SEQ(SLICE(d3, word16, 16), v37_63);
l0000108C:
			word32 d1_354;
			d0_120 = fn000010CE(d0_103, d1_112, d2, a0_101, out d1_354, out d2);
			do
			{
				--a2_128;
				*a2_128 = *((char *) a2_128 + (int32) ((int16) d2));
				word16 v42_136 = (word16) d3;
				d3 = SEQ(SLICE(d3, word16, 16), v42_136 - 1);
			} while (v42_136 != 0x00);
		}
		*(union Eq_17 *) 0x00DFF180 = a0_101;
	} while ((struct Eq_155 *) 0x000301C4 - a2_128 < 0x00);
	if (d5_100 != 0x00)
	{
		uipr32 d0_247 = SEQ(SLICE(d0_120, word16, 16), ~0x00);
		do
		{
			*(union Eq_17 *) 0x00DFF180 = (word16) d0_247;
			word16 v54_253 = (word16) d0_247;
			d0_247 = SEQ(SLICE(d0_247, word16, 16), v54_253 - 1);
		} while (v54_253 != 0x00);
	}
	else
		fn000301C4();
}

// 000010C2: FlagGroup Eq_27 fn000010C2(Register ui32 d5, Register Eq_17 a0, Register out Eq_8 d0Out, Register out Eq_33 d5Out, Register out ptr32 a0Out)
// Called from:
//      fn00001000
Eq_27 fn000010C2(ui32 d5, Eq_17 a0, union Eq_8 & d0Out, union Eq_33 & d5Out, ptr32 & a0Out)
{
	word32 d0_6 = *((word32) a0 - 4);
	d0Out = __rcr(d0_6, 0x01, X);
	d5Out = d5 ^ d0_6;
	a0Out = a0 - 4;
	return <invalid>;
}

// 000010CE: Register Eq_8 fn000010CE(Register Eq_8 d0, Register int32 d1, Register ptr32 d2, Register Eq_17 a0, Register out ptr32 d1Out, Register out ptr32 d2Out)
// Called from:
//      fn00001000
Eq_8 fn000010CE(Eq_8 d0, int32 d1, ptr32 d2, Eq_17 a0, ptr32 & d1Out, ptr32 & d2Out)
{
	ptr32 d1_38 = SEQ(SLICE(d1, word16, 16), (word16) d1 - 0x01);
	ptr32 d2_10 = SEQ(SLICE(d2, word16, 16), 0x00);
	do
	{
		d0 >>= 0x01;
		Eq_27 X_26 = SLICE(cond(d0), bool, 4);
		if (d0 == 0x00)
		{
			a0 -= 4;
			d0 = __rcr(*a0, 0x01, X_26);
			X_26.u0 = SLICE(cond(d0), bool, 4);
		}
		word16 v22_39 = (word16) d1_38;
		d2_10 = __rcl(d2_10, 0x01, X_26);
		d1_38 = SEQ(SLICE(d1_38, word16, 16), v22_39 - 1);
	} while (v22_39 != 0x00);
	d1Out = d1_38;
	d2Out = d2_10;
	return d0;
}

