// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_2) ds_bx, Register word16 cx, Register (memptr (ptr16 Eq_8) byte) di)
void fn0C00_0100(struct Eq_2 * ds_bx, word16 cx, byte Eq_8::* di)
{
	byte bh_34 = SLICE((word16) ds_bx, byte, 8);
	struct Eq_8 * es_36 = ds_bx->ptr0002;
	__syscall(0x10);
	uint16 bx_35 = SEQ(bh_34, 0x0F);
	do
	{
		word64 edx_eax_10 = __rdtsc();
		es_36->*di = (byte) (bx_35 * SEQ(SLICE(edx_eax_10, byte, 8), (byte) edx_eax_10 & 0x01));
		++di;
		--cx;
	} while (cx != 0x00 || __inb(0x60) != 0x01);
	bios_video_set_mode(0x03);
}

