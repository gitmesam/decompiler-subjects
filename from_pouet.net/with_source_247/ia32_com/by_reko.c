// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_3) ds, FpuStack real64 rLoc2)
void fn0C00_0100(byte ch, struct Eq_3 * ds, real64 rLoc2)
{
	__syscall(0x10);
	do
	{
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		++ds->b0206;
		ds->b0206 &= 0x0F;
		int16 bx_173 = 0x0206;
		if (ds->b0206 == 0x00)
		{
			++ds->ptr01FC;
			if (ds->ptr01FC == &Eq_3::ptr01FC)
				ds->ptr01FC -= 0x1C;
			struct Eq_59 Eq_94::* di_265 = &Eq_94::t0140;
			Eq_61 si_253 = ((word16) (ds->*ds->ptr01FC) << 0x03) + 64110;
			ds = 0xF000;
			word16 dx_52;
			for (dx_52 = 0x08; dx_52 != 0x00; --dx_52)
			{
				word16 cx_262 = SEQ(ch, 0x08);
				do
				{
					bool C_58 = __bt(0xF000->*si_253, cx_262);
					word16 ax_61 = SEQ(C_58, C_58);
					(0x5000->*di_265).w0150 = ax_61;
					(0x5000->*di_265).w0000 = ax_61;
					--cx_262;
					di_265 = &di_265->w0000 + 1;
					ch = SLICE(cx_262, byte, 8);
				} while (cx_262 != 0x00);
				si_253 = (word16) si_253 + 1;
				++di_265;
			}
		}
		--ds->dw0202;
		byte Eq_94::* si_241 = Eq_94::a0000;
		byte Eq_94::* di_245 = Eq_94::aFFFFFFFF;
		word16 cx_100;
		for (cx_100 = 0x1500; cx_100 != 0x00; --cx_100)
		{
			0x5000->*di_245 = 0x5000->*si_241;
			++si_241;
			++di_245;
		}
		byte Eq_143::* di_107 = Eq_143::a0000;
		word16 cx_111;
		for (cx_111 = 0xFA00; cx_111 != 0x00; --cx_111)
		{
			0x6000->*di_107 = 0x00;
			++di_107;
		}
		union Eq_136 Eq_94::* si_113 = Eq_94::a0000;
		byte Eq_143::* di_116 = &Eq_143::b7440;
		cui16 dx_117;
		for (dx_117 = 0x10; dx_117 != 0x00; --dx_117)
		{
			word16 cx_118 = 0x0140;
			do
			{
				0C00:0200 = (int16 *) (int16) (cos(rLoc2 / (real64) 0C00:01FE) * (real64) 0C00:01FE);
				int16 ax_135 = 0C00:0200 *s 0x0140;
				byte Eq_143::* di_137 = di_116 + ax_135;
				0x6000->*di_137 = 0x5000->*si_113;
				--cx_118;
				si_113 = (union Eq_136 Eq_94::*) ((char *) si_113 + 1);
				rLoc2 = 1.0;
				di_116 = di_137 + 1 - ax_135;
				byte ch_284 = SLICE(cx_118, byte, 8);
			} while (cx_118 != 0x00);
			si_113 = (union Eq_136 Eq_94::*) ((char *) si_113 + 16);
		}
		word16 cx_189;
		do
		{
			cui16 dx_164 = dx_117 & 0x03;
			0x5000->*si_113 += dx_164 + 0x01;
			0x6000->*((char *) (0x5000->*si_113) + bx_173) = ((byte) (dx_164 + 0x01) + 0x0A) * 0x02;
			dx_117 = dx_164 + 0x01;
			si_113 = (union Eq_136 Eq_94::*) ((char *) si_113 + 2);
			bx_173 = __rol(bx_173 + 0x02, 0x02);
			--cx_189;
		} while (cx_189 != 0x00);
		word16 Eq_143::* si_207 = Eq_143::a0000;
		word16 Eq_259::* di_208 = Eq_259::a0000;
		word16 cx_211 = 0x7D00;
		while (true)
		{
			ch = SLICE(cx_211, byte, 8);
			if (cx_211 == 0x00)
				break;
			0xA000->*di_208 = 0x6000->*si_207;
			++si_207;
			++di_208;
			--cx_211;
		}
		ds = cs;
	} while (__inb(0x60) != 0x01);
}

