// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte ch, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ah, byte ch, struct Eq_4 * ds)
{
	real64 rLoc1_153 = (real64) ds->w0108;
	__syscall(0x10);
	cu16 ax_180 = SEQ(ah, ~0x00);
	do
	{
		byte al_15 = (byte) ax_183;
		__outb(0x03C8, al_15);
		__outb(969, al_15);
		byte al_25 = (byte) (ax_183 >> 0x02);
		__outb(969, al_25);
		__outb(969, al_25);
		ax_180 = ax_183 - 0x01;
		ax_183 = ax_180;
	} while (ax_183 != 0x01);
	do
	{
		struct Eq_42 Eq_4::* si_31 = Eq_4::a0100;
		word16 cx_130 = SEQ(ch, 0x02);
		do
		{
			real64 rLoc2_157 = sqrt((real64) (ds->*si_31).w0000);
			real64 rLoc2_158 = cos(rLoc2_157);
			(ds->*si_31).w0004 = (int16) (sin(rLoc2_157) * rLoc1_153 + rLoc1_153);
			(ds->*si_31).w0002 = (int16) (rLoc2_158 * rLoc1_153 + rLoc1_153);
			(ds->*si_31).w0000 += cx_130;
			++si_31;
			--cx_130;
		} while (cx_130 != 0x00);
		byte Eq_123::* di_100 = &Eq_123::b0000;
		word16 bp_106;
		for (bp_106 = 200; bp_106 != 0x00; --bp_106)
		{
			word16 bx_103;
			for (bx_103 = 0x0140; bx_103 != 0x00; --bx_103)
			{
				ui8 ch_146 = 0x00;
				byte cl_147;
				struct Eq_95 Eq_4::* si_64 = &Eq_4::t0102;
				for (cl_147 = 0x02; cl_147 != 0x00; --cl_147)
				{
					struct Eq_94 Eq_4::* si_66 = &si_64->w0000;
					uint16 ax_72 = (ds->*si_66).w0000 - bx_103;
					uint16 ax_82 = (ds->*si_66).w0002 - bp_106;
					si_64 = (struct Eq_95 Eq_4::*) (&si_66->w0002 + 1);
					ch_146 = ch_146 ^ SLICE((word16) (ax_82 * ax_82 + ax_72 * ax_72), byte, 8);
				}
				0xA000->*di_100 = ch_146;
				++di_100;
			}
		}
		ch = 0x00;
	} while (__inb(0x60) != 0x01);
}

