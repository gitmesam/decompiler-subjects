// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_11) ds_bx, Register word16 cx, Register (memptr (ptr16 Eq_15) byte) si, Register (memptr (ptr16 Eq_15) byte) di)
void fn0C00_0100(union Eq_11 * ds_bx, word16 cx, byte Eq_15::* si, byte Eq_15::* di)
{
	__syscall(0x10);
	Eq_11 ds_bx_8 = *ds_bx;
	struct Eq_15 * ds_10 = SLICE(ds_bx_8, selector, 16);
	struct Eq_17 Eq_15::* bx_16 = (word16) ds_bx_8;
	while (true)
	{
		cui16 dx_18 = (ds_10->*bx_16).w0000;
		bx_16[320] |= dx_18;
		bx_16[1] |= dx_18;
		--bx_16;
		if (bx_16 == &Eq_15::t0000)
			bx_16 = &Eq_15::tFFFFFEB0;
		--cx;
		byte ch_55 = SLICE(cx, byte, 8);
		if (cx == 0x00)
		{
			word16 ax_41 = SEQ(ah, ds_10->*si);
			ds_10->*di = (byte) (ax_41 + 0x01);
			++si;
			ah = SLICE(ax_41 + 0x01, byte, 8);
			++di;
			cx = SEQ(ch_55, 0x1F);
		}
	}
}

