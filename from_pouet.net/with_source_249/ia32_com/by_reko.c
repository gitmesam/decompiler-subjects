// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (memptr (ptr16 Eq_16) byte) di, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte bl, byte Eq_16::* di, struct Eq_4 * ds)
{
	__syscall(0x10);
	msdos_display_string(&ds->b01EA);
	struct Eq_16 * ds_121 = cs;
	struct Eq_16 * es_123 = cs;
	bcu8 ah_289 = 0x00;
	word16 cx_22;
	do
	{
		cs->*di = 0x00;
		cs->*di = 0x00;
		++di;
		--cx_22;
	} while (cx_22 != 0x00);
	__outb(0x03C8, 0x00);
	do
	{
		__outb(969, 0x00);
		uint8 al_41 = ah_289 >> 0x02;
		__outb(969, al_41);
		uint8 al_42 = -al_41;
		__outb(969, al_42 + 0x01);
		++ah_289;
		byte Eq_16::* ax_52 = SEQ(ah_289, al_42 + 0x01);
	} while (ah_289 != 0x00);
	byte Eq_16::* wLoc02_336 = ax_52;
	word16 wLoc04_337 = cx_22;
	do
	{
		struct Eq_71 Eq_16::* di_100 = Eq_16::a0000;
		word16 cx_101 = 0x8000;
		do
		{
			int16 ax_94 = ((ds_121->*di_100).wFFFFFE00 + di_100[0x0100] + (ds_121->*di_100).wFFFFFFFE + di_100[1] >> 0x01) - (es_123->*di_100).w0000;
			(es_123->*di_100).w0000 = ax_94 - (ax_94 >> 0x05);
			--cx_101;
			++di_100;
			byte ch_129 = SLICE(cx_101, byte, 8);
			byte cl_323 = (byte) cx_101;
		} while (cx_101 != 0x00);
		do
			;
		while ((__inb(0x03DA) & 0x08) == 0x00);
		ds_121 = es_123;
		es_123 = ds_121;
		word16 Eq_16::* si_125 = Eq_16::a0000;
		struct Eq_121 Eq_131::* di_128 = &Eq_131::t2D20;
		do
		{
			word16 cx_162 = SEQ(ch_129 + 0x01, cl_323);
			do
			{
				++si_125;
				ci16 dx_139 = 0x80 - (es_123->*si_125 - es_123->*si_125);
				byte dh_144 = SLICE(dx_139, byte, 8);
				if (dx_139 < 0x00)
					dx_139 = SEQ(dh_144, 0x00);
				byte dl_148 = (byte) dx_139;
				if (dx_139 > 0xFF)
					dl_148 = ~0x00;
				(0xA000->*di_128).b0000 = dl_148;
				--cx_162;
				di_128 = &di_128->b0000 + 1;
				ch_129 = SLICE(cx_162, byte, 8);
				cl_323 = (byte) cx_162;
			} while (cx_162 != 0x00);
			++di_128;
		} while (si_125 != Eq_16::a0000);
		byte Eq_16::* ax_194 = __rol(wLoc02_336 + 26500, 0x01);
		byte bl_235 = (byte) bx;
		byte al_218 = (byte) ax_194;
		cu8 cl_213 = (byte) (wLoc04_337 + 0x01);
		byte ch_227 = SLICE(wLoc04_337 + 0x01, byte, 8);
		wLoc02_336 = ax_194;
		++wLoc04_337;
		if ((cl_213 & 0x03) == 0x00)
			es_123->*ax_194 += al_218 & 0x07;
		byte Eq_131::* bx_236 = SEQ((byte) ((ch_227 & 0x03) * 0x0A), bl_235);
		if (cl_213 <= 100)
		{
			Eq_218 di_242 = 0x6041;
			do
			{
				word16 cx_243;
				for (cx_243 = 0x40; cx_243 != 0x00; --cx_243)
				{
					if (0xA000->*bx_236 != 0x00)
						++ds_121->*di_242;
					++bx_236;
					byte bh_263 = SLICE(bx_236, byte, 8);
					byte bl_330 = (byte) bx_236;
					di_242 = (word16) di_242 + 8;
				}
				di_242 = (word16) di_242 + 0x0600;
				bx_236 = SEQ(bh_263 + 0x01, bl_330);
			} while (di_242 < 39489);
		}
	} while ((int16) __inb(0x60) != 0x01);
	__syscall(0x10);
	msdos_terminate_program20();
}

