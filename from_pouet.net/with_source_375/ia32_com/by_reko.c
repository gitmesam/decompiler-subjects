// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte al, Register byte cl, Register cui16 bx, Register (memptr (ptr16 Eq_6) byte) bp, Register (ptr16 Eq_6) es, Register (ptr16 Eq_7) ds)
void fn0C00_0100(byte al, byte cl, cui16 bx, byte Eq_6::* bp, struct Eq_6 * es, struct Eq_7 * ds)
{
	byte Eq_6::* di_22 = Eq_6::a1574;
	word16 cx_6;
	for (cx_6 = SEQ(~0x29, cl); cx_6 != 0x00; --cx_6)
	{
		es->*di_22 = al;
		++di_22;
	}
	msdos_multiplex(22, 0x87);
	if ((bx & 0x1688) != 0x00)
	{
		__syscall(0x10);
		byte Eq_7::* bx_34;
		do
		{
			ds->*bx_34 = es->*bp;
			++bp;
			++bx_34;
		} while (bx_34 != &Eq_7::bFFFFDC07);
		ds->w158B = SEQ(0x02, (byte) (uint16) (uint8) fn0C00_0181(&ds->b019C) << 0x04);
		fn0C00_0181(&ds->b01D4);
	}
	else
		msdos_display_string(&ds->b0119);
}

// 0C00:0181: Register byte fn0C00_0181(Sequence (ptr32 char) ds_dx)
// Called from:
//      fn0C00_0100
byte fn0C00_0181(char * ds_dx)
{
	struct Eq_78 * ds = SLICE(ds_dx, selector, 16);
	msdos_display_string(ds_dx);
	byte al_10;
	byte ah_11 = bios_kbd_get_keystroke(out al_10);
	__aaa(al_10, ah_11, &al_10, &ah_11);
	ds->b1589 = al_10;
	return al_10;
}

