// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_seg08048000.h"

// 08048398: void fn08048398()
// Called from:
//      fn080484CA
void fn08048398()
{
	g_ptr804A0BC();
}

// 080483A8: void fn080483A8()
// Called from:
//      fn080494A7
void fn080483A8()
{
	g_ptr804A0C0();
}

// 080483B8: void fn080483B8()
// Called from:
//      fn080494A7
void fn080483B8()
{
	g_ptr804A0C4();
}

// 080483C8: void fn080483C8()
// Called from:
//      fn080494A7
void fn080483C8()
{
	g_ptr804A0C8();
}

// 080483D8: void fn080483D8()
// Called from:
//      fn080494A7
void fn080483D8()
{
	g_ptr804A0CC();
}

// 080483E8: void fn080483E8()
// Called from:
//      fn08048613
//      fn080486BA
//      fn08048775
//      fn0804881D
//      fn080494A7
void fn080483E8()
{
	g_ptr804A0D0();
}

// 080483F8: void fn080483F8()
// Called from:
//      fn080494A7
void fn080483F8()
{
	g_ptr804A0D4();
}

// 08048408: void fn08048408()
// Called from:
//      fn080494A7
void fn08048408()
{
	g_ptr804A0D8();
}

// 08048418: void fn08048418()
// Called from:
//      fn080484CA
void fn08048418()
{
	g_ptr804A0DC();
}

// 08048428: void fn08048428()
// Called from:
//      fn08048EBE
void fn08048428()
{
	g_ptr804A0E0();
}

// 08048438: FpuStack real64 fn08048438(Register (ptr32 Eq_23) eax, Register (ptr32 Eq_23) edx)
// Called from:
//      fn08048498
//      fn080484A2
//      fn08048C66
//      fn08048EBE
//      fn0804938F
real64 fn08048438(struct Eq_23 * eax, struct Eq_23 * edx)
{
	return (real64) eax->r0000 * (real64) edx->r0000 + (real64) eax->r0004 * (real64) edx->r0004 + (real64) eax->r0008 * (real64) edx->r0008;
}

// 0804844D: void fn0804844D(Register (ptr32 Eq_23) eax, Register (ptr32 Eq_55) ecx, Register (ptr32 Eq_56) edx)
// Called from:
//      fn08048613
//      fn080486BA
//      fn08048C66
void fn0804844D(struct Eq_23 * eax, struct Eq_55 * ecx, struct Eq_56 * edx)
{
	real64 rLoc2_46 = (real64) eax->r0008;
	ecx->r0000 = (real32) ((real64) eax->r0004 * (real64) edx->r0008 - (real64) edx->r0004 * rLoc2_46);
	real64 rLoc2_53 = (real64) eax->r0000;
	ecx->r0004 = (real32) (rLoc2_46 * (real64) edx->r0000 - (real64) edx->r0008 * rLoc2_53);
	ecx->r0008 = (real32) (rLoc2_53 * (real64) edx->r0004 - (real64) eax->r0004 * (real64) edx->r0000);
}

// 0804847F: void fn0804847F(Register (ptr32 Eq_23) eax, Register (ptr32 Eq_23) ecx, Register (ptr32 Eq_23) edx)
// Called from:
//      fn08048C66
//      fn08048EBE
//      fn0804938F
void fn0804847F(struct Eq_23 * eax, struct Eq_23 * ecx, struct Eq_23 * edx)
{
	ecx->r0000 = (real32) ((real64) eax->r0000 - (real64) edx->r0000);
	ecx->r0004 = (real32) ((real64) eax->r0004 - (real64) edx->r0004);
	ecx->r0008 = (real32) ((real64) eax->r0008 - (real64) edx->r0008);
}

// 08048498: FpuStack Eq_162 fn08048498(Register (ptr32 Eq_23) eax)
// Called from:
//      fn08048EBE
Eq_162 fn08048498(struct Eq_23 * eax)
{
	return sqrt(fn08048438(eax, eax));
}

// 080484A2: void fn080484A2(Register (ptr32 Eq_23) eax)
// Called from:
//      fn08048C66
//      fn08048EBE
//      fn080494A7
void fn080484A2(struct Eq_23 * eax)
{
	real64 rLoc1_33 = (real64) g_r8049A00 / sqrt(fn08048438(eax, eax));
	eax->r0000 = (real32) ((real64) eax->r0000 * rLoc1_33);
	eax->r0004 = (real32) ((real64) eax->r0004 * rLoc1_33);
	eax->r0008 = (real32) (rLoc1_33 * (real64) eax->r0008);
}

// 080484CA: void fn080484CA(Register (ptr32 Eq_208) eax, Register int32 edx)
// Called from:
//      fn08048613
//      fn080486BA
//      fn08048775
void fn080484CA(struct Eq_208 * eax, int32 edx)
{
	fn08048398();
	ui32 edi_118;
	for (edi_118 = 0x00; edi_118 != 0x0100; ++edi_118)
	{
		word32 ebx_111;
		int32 edx_35 = (int32) ((int64) edi_118 % 0x14);
		for (ebx_111 = 0x00; ebx_111 != 0x0100; ++ebx_111)
		{
			int32 eax_100;
			int32 eax_73;
			int32 * esi_53 = eax + (((edi_118 << 0x08) + ebx_111) * 0x04) / 64;
			*esi_53 = 0x00FFFFFF;
			if ((byte) edx == 0x00)
			{
				eax_73 = ebx_111 + 100 ^ edi_118;
				goto l0804855E;
			}
			if ((byte) edx == 0x01)
			{
				if ((int32) ((int64) ebx_111 % 0x14) <= 0x09)
				{
					eax_100 = 0x00FF0000;
					if (edx_35 > 0x09)
						goto l0804852F;
				}
				else
				{
l0804852F:
					eax_100 = 0x00FF00FF;
				}
				goto l08048564;
			}
			if ((byte) (edx - 0x02) <= 0x01)
			{
				fn08048418();
				int32 edx_71 = (int32) ((int64) (edx - 0x02) % 0x40);
				eax_73 = edx_71 + 0xC0;
				if ((byte) edx == 0x02)
					eax_100 = edx_71 + 0xC0 << 0x08;
				else
				{
l0804855E:
					eax_100 = eax_73 *s 0x00010101;
				}
l08048564:
				*esi_53 = eax_100;
			}
		}
	}
	if ((byte) edx == 0x04)
	{
		ui32 ebp_129;
		for (ebp_129 = 0x00; ebp_129 != 0x0100; ebp_129 += 0x20)
		{
			word32 edi_132;
			for (edi_132 = 0x00; edi_132 != 0x0100; edi_132 += 0x20)
			{
				ui32 ebx_136 = ebp_129;
				word32 esi_137;
				for (esi_137 = 0x00; esi_137 != 0x10; ++esi_137)
				{
					word32 edx_141 = edi_132;
					word32 dwLoc20_210 = 0x00;
					do
					{
						eax[((ebx_136 << 0x08) + edx_141) * 0x04 / 64] = (struct Eq_208) 0x00FF0000;
						eax->a0040[(ebx_136 << 0x08) + 0x1000 + edx_141] = 0x00FF0000;
						word32 v22_152 = dwLoc20_210 + 0x01;
						dwLoc20_210 = v22_152;
						++edx_141;
					} while (v22_152 != 0x10);
					++ebx_136;
				}
			}
		}
	}
}

// 08048613: void fn08048613(Register Eq_341 dl)
// Called from:
//      fn080494A7
void fn08048613(Eq_341 dl)
{
	fn0804844D(fp - 0x00040044, fp - 0x00040050, fp - 0x0004008C);
	fn080484CA(fp - 0x0004000C, (int32) (byte) edx);
	fn080483E8();
}

// 080486BA: void fn080486BA(Register Eq_363 dl)
// Called from:
//      fn0804881D
//      fn080494A7
void fn080486BA(Eq_363 dl)
{
	fn0804844D(fp - 0x00040044, fp - 0x00040050, fp - 0x00040074);
	fn080484CA(fp - 0x0004000C, (int32) (byte) edx);
	fn080483E8();
}

// 08048775: void fn08048775(Register byte dl)
// Called from:
//      fn0804881D
//      fn080494A7
void fn08048775(byte dl)
{
	fn080484CA(fp - 0x00040008, (int32) dl);
	fn080483E8();
}

// 0804881D: void fn0804881D(Register int32 eax, Register word32 ecx, Register int32 edx, Stack real32 dwArg04, Stack real32 dwArg08, Stack real32 dwArg0C, Stack word32 dwArg10)
// Called from:
//      fn0804881D
//      fn080494A7
void fn0804881D(int32 eax, word32 ecx, int32 edx, real32 dwArg04, real32 dwArg08, real32 dwArg0C, word32 dwArg10)
{
	fn08048775(0x04);
	fn080483E8();
	if (edx <= 0x00)
	{
l08048A84:
		fn080486BA(0x02);
		fn080483E8();
		return;
	}
	word32 edi_189;
	word32 esi_305;
	if (ecx != 0x01)
	{
		real32 rLoc400A0_588 = (real32) (real64) (int32) ((int64) (eax * 0x03) / 0x02);
		int32 eax_141 = (int32) ((int64) eax / 0x02);
		fn0804881D(eax_141, 0x02, edx - 0x01, (real32) ((real64) dwArg04 + (real64) rLoc400A0_588), dwArg08, dwArg0C, dwArg10 + 0x01);
		if (ecx == 0x02)
		{
			fn0804881D(eax_141, 0x04, edx - 0x01, dwArg04, (real32) ((real64) dwArg08 + (real64) rLoc400A0_588), dwArg0C, dwArg10 + 0x02);
			fn0804881D(eax_141, 0x03, edx - 0x01, dwArg04, (real32) ((real64) dwArg08 - (real64) rLoc400A0_588), dwArg0C, dwArg10 + 0x03);
			edi_189 = dwArg10 + 0x03;
			goto l080489DC;
		}
		fn0804881D(eax_141, 0x01, edx - 0x01, (real32) ((real64) dwArg04 - (real64) rLoc400A0_588), dwArg08, dwArg0C, dwArg10 + 0x02);
		if (ecx == 0x03)
		{
			fn0804881D(eax_141, 0x03, edx - 0x01, dwArg04, (real32) ((real64) dwArg08 - (real64) rLoc400A0_588), dwArg0C, dwArg10 + 0x03);
			fn0804881D(eax_141, 0x06, edx - 0x01, dwArg04, dwArg08, (real32) ((real64) dwArg0C + (real64) rLoc400A0_588), dwArg10 + 0x04);
			edi_189 = dwArg10 + 0x04;
			goto l08048A30;
		}
		fn0804881D(eax_141, 0x04, edx - 0x01, dwArg04, (real32) ((real64) dwArg08 + (real64) rLoc400A0_588), dwArg0C, dwArg10 + 0x03);
		esi_305 = dwArg10 + 0x03;
		if (ecx == 0x04)
		{
			fn0804881D(eax_141, 0x06, edx - 0x01, dwArg04, dwArg08, (real32) ((real64) dwArg0C + (real64) rLoc400A0_588), dwArg10 + 0x04);
			edi_189 = dwArg10 + 0x04;
			goto l08048A30;
		}
	}
	else
	{
		real64 rLoc1_575 = (real64) (int32) ((int64) (eax * 0x03) / 0x02);
		int32 eax_75 = (int32) ((int64) eax / 0x02);
		fn0804881D(eax_75, 0x01, edx - 0x01, (real32) ((real64) dwArg04 - rLoc1_575), dwArg08, dwArg0C, dwArg10 + 0x01);
		fn0804881D(eax_75, 0x04, edx - 0x01, dwArg04, (real32) ((real64) (real32) rLoc1_575 + (real64) dwArg08), dwArg0C, dwArg10 + 0x02);
		esi_305 = dwArg10 + 0x02;
	}
	edi_189 = esi_305 + 0x01;
	fn0804881D((int32) ((int64) eax / 0x02), 0x03, edx - 0x01, dwArg04, (real32) ((real64) dwArg08 - (real64) ((int32) ((int64) (eax * 0x03) / 0x02))), dwArg0C, edi_189);
	if (ecx == 0x05)
		goto l08048A30;
l080489DC:
	++edi_189;
	fn0804881D((int32) ((int64) eax / 0x02), 0x06, edx - 0x01, dwArg04, dwArg08, (real32) ((real64) (int32) ((int64) (eax * 0x03) / 0x02) + (real64) dwArg0C), edi_189);
	if (ecx != 0x06)
	{
l08048A30:
		fn0804881D((int32) ((int64) eax / 0x02), 0x05, edx - 0x01, dwArg04, dwArg08, (real32) ((real64) dwArg0C - (real64) ((int32) ((int64) (eax * 0x03) / 0x02))), edi_189 + 0x01);
		goto l08048A84;
	}
	goto l08048A84;
}

// 08048C66: Register Eq_620 fn08048C66(Register (ptr32 Eq_23) eax, Register (ptr32 Eq_23) ecx, Register int32 edx, Register Eq_620 FPUF, Stack (ptr32 Eq_23) dwArg04, Stack word32 dwArg08, FpuStack out Eq_162 rLoc1Out)
// Called from:
//      fn08048EBE
Eq_620 fn08048C66(struct Eq_23 * eax, struct Eq_23 * ecx, int32 edx, Eq_620 FPUF, struct Eq_23 * dwArg04, word32 dwArg08, union Eq_162 & rLoc1Out)
{
	Eq_162 rLoc1_370;
	struct Eq_23 * edi_21 = eax + edx;
	byte al_23 = edi_21->b007C;
	if (al_23 == 0x00)
	{
		real32 rLoc5C_413;
		Eq_162 rLoc1_414;
		if (dwArg08 == 0x00)
		{
			rLoc5C_413 = edi_21->r0064;
			rLoc1_414 = fn08048438(&edi_21->r002C + 1, dwArg04);
			if (Test(ULT,SLICE(FPUF, bool, 1)))
				goto l08048EAE;
		}
		else
		{
			fn0804847F(edi_21, fp - 0x28, ecx);
			Eq_162 rRet0_225 = fn08048438(fp - 0x28, dwArg04);
			if (Test(ULT,SLICE(FPUF, bool, 1)))
				goto l08048EAE;
			real64 rLoc2_407 = (real64) edi_21->r0060;
			rLoc5C_413 = (real32) ((real64) (real32) (rLoc2_407 * rLoc2_407) - fn08048438(fp - 0x28, fp - 0x28));
			rLoc1_414.u1 = (real64) (real32) rRet0_225;
		}
		Eq_162 rLoc2_424 = rLoc1_414 * rLoc1_414 + (real64) rLoc5C_413;
		if (Test(UGT,SLICE(FPUF, bool, 2)))
		{
			rLoc1_370 = rLoc1_414 - sqrt(rLoc2_424);
l08048EB6:
			rLoc1Out = rLoc1_370;
			return FPUF;
		}
l08048EAE:
		goto l08048EB0;
	}
	if (al_23 != 0x01)
	{
		if (al_23 == 0x02)
		{
			fn0804847F(ecx, fp - 0x34, edi_21);
			fn0804844D(dwArg04, fp - 0x40, &edi_21->r0054);
			real64 rLoc3_329 = (real64) rLoc40;
			real64 rLoc1_326 = (real64) rLoc3C;
			real64 rLoc2_328 = (real64) rLoc38;
			Eq_162 rLoc1_337 = sqrt(rLoc3_329 * rLoc3_329 + rLoc1_326 * rLoc1_326 + rLoc2_328 * rLoc2_328);
			real32 rLoc50_338 = (real32) rLoc1_337;
			if (Test(UGT,SLICE(FPUF, bool, 2)) && rLoc1_337 < g_t8049A08)
			{
				Eq_162 rRet0_148 = fn08048438(fp - 0x34, &edi_21->r0054);
				real64 rLoc2_375 = (real64) rLoc34 - (real64) edi_21->r0054 * rRet0_148;
				real64 rLoc3_379 = (real64) rLoc30 - (real64) edi_21->r0058 * rRet0_148;
				real64 rLoc3_384 = (real64) rLoc2C - rRet0_148 * (real64) edi_21->r005C;
				rLoc1_370 = sqrt(rLoc2_375 * rLoc2_375 + rLoc3_379 * rLoc3_379 + rLoc3_384 * rLoc3_384);
				FPUF.u0 = cond(rLoc1_370 - edi_21->r0060);
				if (rLoc1_370 <= edi_21->r0060)
					goto l08048EB6;
				goto l08048EAE;
			}
			fn080484A2(fp - 0x40);
			real32 rLoc58_341 = (real32) fn08048438(fp - 0x34, fp - 0x40);
			real32 rLoc58_345 = SEQ(SLICE(rLoc58_341, byte, 24) & 0x7F, (word24) rLoc58_341);
			Eq_162 rLoc1_346 = (real64) rLoc58_345;
			FPUF.u0 = cond(rLoc1_346 - edi_21->r0060);
			if (rLoc1_346 <= edi_21->r0060)
			{
				fn0804844D(fp - 0x34, fp - 0x4C, &edi_21->r0054);
				real32 rLoc54_348 = (real32) fn08048438(fp - 0x4C, fp - 0x40);
				fn0804844D(fp - 0x40, fp - 0x4C, &edi_21->r0054);
				fn080484A2(fp - 0x4C);
				real64 rLoc1_358 = (real64) edi_21->r0060;
				real64 rLoc2_360 = (real64) rLoc58_345;
				rLoc1_370 = (real64) (real32) ((real64) SEQ(SLICE(rLoc54_348, byte, 24) ^ 0x80, (word24) rLoc54_348) / (real64) rLoc50_338) - fabs((real64) ((real32) sqrt(rLoc1_358 * rLoc1_358 - rLoc2_360 * rLoc2_360)) / fn08048438(dwArg04, fp - 0x4C));
				goto l08048E9F;
			}
		}
l08048EB0:
		rLoc1_370.u1 = (real64) g_r8049A04;
		goto l08048EB6;
	}
	else
	{
		if (dwArg08 == 0x00)
			rLoc1_370 = (real64) edi_21->r006C / fn08048438(&edi_21->r0018, dwArg04);
		else
			rLoc1_370 = (real64) (real32) ((real64) edi_21->r0068 - fn08048438(&edi_21->r0018, ecx)) / fn08048438(&edi_21->r0018, dwArg04);
l08048E9F:
		FPUF.u0 = cond(rLoc1_370 - g_t8049A08);
		if (rLoc1_370 > g_t8049A08)
			goto l08048EB6;
		goto l08048EAE;
	}
}

// 08048EBE: Register Eq_620 fn08048EBE(Register (ptr32 Eq_892) eax, Register int32 ecx, Register (ptr32 Eq_23) edx, Register Eq_620 FPUF, Stack (ptr32 Eq_23) dwArg04, Stack (ptr32 Eq_23) dwArg08, Stack int32 dwArg0C, Stack word32 dwArg10, Register out Eq_899 TopOut, FpuStack out Eq_900 rArg0Out)
// Called from:
//      fn08048EBE
//      fn0804938F
Eq_620 fn08048EBE(struct Eq_892 * eax, int32 ecx, struct Eq_23 * edx, Eq_620 FPUF, struct Eq_23 * dwArg04, struct Eq_23 * dwArg08, int32 dwArg0C, word32 dwArg10, union Eq_899 & TopOut, union Eq_900 & rArg0Out)
{
	int32 esi_13 = ~0x00;
	int32 ebx_17;
	Eq_905 rLoc1_1092 = (real64) g_r8049A0C;
	for (ebx_17 = 0x00; ebx_17 < ecx; ++ebx_17)
	{
		Eq_905 rRet0_63;
		FPUF = fn08048C66(edx, dwArg04, ebx_17, FPUF, dwArg08, dwArg10, out rRet0_63);
		rLoc1_1092.u0 = (real64) (real32) rLoc1_1092;
		if (Test(UGT,SLICE(FPUF, bool, 2)))
		{
			FPUF.u0 = cond(rRet0_63 - rRet0_63);
			FPUF = rRet0_63 <= rRet0_63;
			FPUF = rRet0_63 >= rRet0_63;
			if (rRet0_63 >= rRet0_63)
				goto l08048F27;
			rLoc1_1092 = rRet0_63;
			esi_13 = ebx_17;
		}
		else
		{
l08048F27:
		}
	}
	Eq_899 Top_1178;
	if (esi_13 == ~0x00)
	{
		eax->r0000 = 0.0F;
		eax->r0004 = 0.0F;
		eax->r0008 = 0.0F;
		Top_1178.u0 = 0;
	}
	else
	{
		struct Eq_23 * edi_100 = edx + esi_13;
		real64 rLoc2_749 = rLoc1_1092 * (real64) dwArg08->r0000 + (real64) dwArg04->r0000;
		edi_100->r000C = (real32) rLoc2_749;
		real64 rLoc3_752 = (real64) dwArg08->r0004 * rLoc1_1092 + (real64) dwArg04->r0004;
		edi_100->r0010 = (real32) rLoc3_752;
		real64 rLoc3_756 = rLoc1_1092 * (real64) dwArg08->r0008 + (real64) dwArg04->r0008;
		edi_100->r0014 = (real32) rLoc3_756;
		if (edi_100->b007C == 0x00)
		{
			edi_100->r0018 = (real32) ((rLoc2_749 - (real64) edi_100->r0000) / (real64) edi_100->r0060);
			edi_100->r001C = (real32) ((rLoc3_752 - (real64) edi_100->r0004) / (real64) edi_100->r0060);
			edi_100->r0020 = (real32) ((rLoc3_756 - (real64) edi_100->r0008) / (real64) edi_100->r0060);
		}
		if (edi_100->b007C == 0x02)
		{
			fn0804847F(&edi_100->r000C, &edi_100->r0018, edi_100);
			fn080484A2(&edi_100->r0018);
		}
		real64 * Top_281;
		fn0804847F(&g_r824A500, fp - 0x40, &edi_100->r000C);
		Eq_1053 rLoc70_772 = (real32) fn08048498(fp - 0x40);
		fn080484A2(fp - 0x40);
		fn08048438(&edi_100->r0018, fp - 0x40);
		int32 ebx_174 = 0x00;
		if (!FPUF)
		{
l0804904A:
			Top_281 = (real64 *) -1;
		}
		else
		{
			for (; ebx_174 < ecx; ++ebx_174)
			{
				Eq_1053 rRet0_217;
				fn08048C66(edx, &edi_100->r000C, ebx_174, FPUF, fp - 0x40, 0x01, out rRet0_217);
				FPUF.u0 = cond(rRet0_217 - g_t8049A10);
				FPUF = rRet0_217 <= g_t8049A10;
				if (rRet0_217 > g_t8049A10)
				{
					FPUF.u0 = cond(rRet0_217 - rLoc70_772);
					FPUF = rRet0_217 <= rLoc70_772;
					if (rRet0_217 < rLoc70_772)
						goto l0804904A;
				}
			}
			fn0804847F(dwArg08, fp - 0x4C, fp - 0x40);
			fn08048498(fp - 0x4C);
			fn08048438(&edi_100->r0018, fp - 0x40);
			fn08048428();
			Top_281 = 0;
		}
		Eq_1118 Top_365;
		int32 esi_335;
		int32 ebx_372;
		real32 rLoc68_843 = (real32) *Top_281;
		Eq_1118 Top_294 = (char *) Top_281 + 1;
		if (edi_100->b007C == 0x00)
		{
			*((byte) Top_294 - 1) = fn08048438(&edi_100->r0018, &edi_100->r002C + 4);
			*((byte) Top_294 - 1) = -*((byte) Top_294 - 1);
			*((byte) Top_294 - 2) = 1.0;
			*((byte) Top_294 - 3) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 3) *= *((byte) Top_294 - 1);
			uint16 wLoc4E_853 = __fstcw();
			*((byte) Top_294 - 3) = *((byte) Top_294 - 2) - *((byte) Top_294 - 3);
			*((byte) Top_294 - 3) = sqrt(*((byte) Top_294 - 3));
			Eq_162 v27_392 = *((byte) Top_294 - 3);
			*((byte) Top_294 - 3) = *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = v27_392;
			Eq_162 v28_395 = *((byte) Top_294 - 3);
			*((byte) Top_294 - 3) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 1) = v28_395;
			*((byte) Top_294 - 2) = atan(*((byte) Top_294 - 1), *((byte) Top_294 - 2));
			*((byte) Top_294 - 3) = (real64) g_r8049A14;
			*((byte) Top_294 - 3) *= *((byte) Top_294 - 2);
			__fldcw(SEQ(SLICE(wLoc4E_853, byte, 8) | 0x0C, (byte) wLoc4E_853));
			int32 dwLoc54_855 = (int32) *((byte) Top_294 - 3);
			__fldcw(wLoc4E_853);
			Eq_162 v29_413 = *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 1) = v29_413;
			real80 rLoc8C_856 = (real80) *((byte) Top_294 - 2);
			real32 rLoc9C_857 = (real32) *((byte) Top_294 - 1);
			*((byte) Top_294 - 1) = fn08048438(&edi_100->r002C + 7, &edi_100->r0018);
			*((byte) Top_294 - 2) = (real64) rLoc9C_857;
			*((byte) Top_294 - 2) = sin(*((byte) Top_294 - 2));
			uint16 wLoc4E_858 = __fstcw();
			*((byte) Top_294 - 1) /= *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 2) *= *((byte) Top_294 - 1);
			*((byte) Top_294 - 3) = (real64) rLoc8C_856;
			*((byte) Top_294 - 2) = *((byte) Top_294 - 3) - *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = sqrt(*((byte) Top_294 - 2));
			Eq_162 v31_449 = *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 1) = v31_449;
			*((byte) Top_294 - 1) = atan(*Top_294, *((byte) Top_294 - 1));
			*((byte) Top_294 - 1) *= (real64) g_r8049A18;
			__fldcw(SEQ(SLICE(wLoc4E_858, byte, 8) | 0x0C, (byte) wLoc4E_858));
			int32 dwLoc54_860 = (int32) *((byte) Top_294 - 1);
			__fldcw(wLoc4E_858);
			*((byte) Top_294 - 1) = fn08048438(edi_100, &edi_100->r0018);
			*((byte) Top_294 - 1) = *((byte) Top_294 - 1);
			ebx_372 = dwLoc54_855;
			esi_335 = dwLoc54_860;
			Top_365 = Top_294;
			if (!FPUF)
				esi_335 = 0x0100 - dwLoc54_860;
		}
		else
		{
			*((byte) Top_294 - 1) = fn08048438(&edi_100->r000C, &edi_100->r002C + 4);
			*((byte) Top_294 - 2) = (real64) g_r8049A1C;
			Eq_162 v37_306 = *((byte) Top_294 - 2);
			*((byte) Top_294 - 2) = *((byte) Top_294 - 1);
			*((byte) Top_294 - 1) = v37_306;
			Eq_1141 Top_304 = Top_294 - (struct Eq_1142 *) 2;
			do
			{
				Top_304 = (word32) Top_304 + 1;
				*Top_304 %= *((word32) Top_304 + 1);
			} while (P);
			*((word32) Top_304 + 1) = *Top_304;
			uint16 wLoc4E_846 = __fstcw();
			__fldcw(SEQ(SLICE(wLoc4E_846, byte, 8) | 0x0C, (byte) wLoc4E_846));
			int32 dwLoc54_848 = (int32) *((word32) Top_304 + 1);
			__fldcw(wLoc4E_846);
			int64 edx_eax_329 = (int64) dwLoc54_848;
			*((word32) Top_304 + 1) = fn08048438(&edi_100->r000C, &edi_100->r002C + 7);
			*Top_304 = (real64) g_r8049A1C;
			real64 v40_344 = *Top_304;
			*Top_304 = *((word32) Top_304 + 1);
			*((word32) Top_304 + 1) = v40_344;
			ui32 edx_330 = SLICE(edx_eax_329, word32, 32);
			esi_335 = (edx_330 ^ (word32) edx_eax_329) - edx_330;
			Eq_1141 Top_342 = Top_304;
			do
			{
				Top_342 = (word32) Top_342 + 1;
				*Top_342 %= *((word32) Top_342 + 1);
			} while (P);
			*((word32) Top_342 + 1) = *Top_342;
			uint16 wLoc4E_850 = __fstcw();
			__fldcw(SEQ(SLICE(wLoc4E_850, byte, 8) | 0x0C, (byte) wLoc4E_850));
			int32 dwLoc54_852 = (int32) *((word32) Top_342 + 1);
			__fldcw(wLoc4E_850);
			int64 edx_eax_367 = (int64) dwLoc54_852;
			ui32 edx_368 = SLICE(edx_eax_367, word32, 32);
			Top_365 = (word32) Top_342 + 2;
			ebx_372 = (edx_368 ^ (word32) edx_eax_367) - edx_368;
		}
		ui32 edx_478 = (ebx_372 << 0x08) + esi_335;
		word32 eax_486 = (word32) edi_100->a0080[edx_478].b0001;
		struct Eq_1442 * Top_488 = Top_365 - (struct Eq_1443 *) 1;
		Top_488->t0000.u1 = (real64) (word32) edi_100->a0080[edx_478].b0002;
		word32 eax_491 = (word32) edi_100->a0080[edx_478].b0000;
		Top_488->tFFFFFFFF.u1 = (real64) eax_486;
		Top_488->tFFFFFFFE.u1 = (real64) eax_491;
		edi_100->r002C = (real32) Top_488->tFFFFFFFE;
		Top_488->tFFFFFFFE.u1 = (real64) rLoc68_843;
		Top_488->tFFFFFFFE += (real64) g_r8049A20;
		Top_488->tFFFFFFFE *= Top_488->t0000;
		Eq_162 v32_505 = Top_488->tFFFFFFFE;
		Top_488->tFFFFFFFE = Top_488->t0000;
		Top_488->t0000 = v32_505;
		edi_100->r0024 = (real32) Top_488->tFFFFFFFE;
		Eq_162 v33_509 = Top_488->tFFFFFFFE;
		Top_488->tFFFFFFFE = Top_488->tFFFFFFFF;
		Top_488->tFFFFFFFF = v33_509;
		Top_488->tFFFFFFFE *= Top_488->t0000;
		edi_100->r0028 = (real32) Top_488->tFFFFFFFE;
		Eq_162 v34_514 = Top_488->tFFFFFFFE;
		Top_488->tFFFFFFFE = Top_488->t0000;
		Top_488->t0000 = v34_514;
		Top_488->tFFFFFFFE *= (real64) edi_100->r002C;
		real32 rLoc5C_1013 = (real32) Top_488->tFFFFFFFE;
		edi_100->r002C = (real32) Top_488->tFFFFFFFE;
		real32 rLoc60_881 = (real32) Top_488->tFFFFFFFF;
		real32 rLoc58_1009 = (real32) Top_488->t0000;
		if (dwArg0C > 0x00 && edi_100->b007D == 0x01)
		{
			Top_488->t0000 = fn08048438(&edi_100->r0018, dwArg08);
			Top_488->t0000 += Top_488->t0000;
			Top_488->tFFFFFFFF.u1 = (real64) edi_100->r001C;
			Top_488->tFFFFFFFF *= Top_488->t0000;
			Top_488->tFFFFFFFE.u1 = (real64) edi_100->r0020;
			Top_488->tFFFFFFFE *= Top_488->t0000;
			Eq_162 v35_546 = Top_488->tFFFFFFFE;
			Top_488->tFFFFFFFE = Top_488->t0000;
			Top_488->t0000 = v35_546;
			Top_488->tFFFFFFFE *= (real64) edi_100->r0018;
			Top_488->tFFFFFFFE = (real64) dwArg08->r0000 - Top_488->tFFFFFFFE;
			Top_488->tFFFFFFFF = (real64) dwArg08->r0004 - Top_488->tFFFFFFFF;
			Top_488->t0000 = (real64) dwArg08->r0008 - Top_488->t0000;
			fn080484A2(fp - 0x34);
			int8 Top_1181;
			real64 rArg0_1182;
			fn08048EBE(fp - 0x28, ecx, edx, FPUF, &edi_100->r000C, fp - 0x34, dwArg0C - 0x01, 0x01, out Top_1181, out rArg0_1182);
			Top_488->t0000.u1 = (real64) g_r8049A24;
			Top_488->tFFFFFFFF.u1 = (real64) rLoc28;
			Top_488->tFFFFFFFF *= Top_488->t0000;
			Top_488->tFFFFFFFF += (real64) rLoc60_881;
			rLoc60_881 = (real32) Top_488->tFFFFFFFF;
			Top_488->tFFFFFFFF.u1 = (real64) rLoc24;
			Top_488->tFFFFFFFF *= Top_488->t0000;
			Top_488->tFFFFFFFF += (real64) rLoc58_1009;
			rLoc58_1009 = (real32) Top_488->tFFFFFFFF;
			Top_488->t0000 *= (real64) rLoc20;
			Top_488->t0000 += (real64) rLoc5C_1013;
			rLoc5C_1013 = (real32) Top_488->t0000;
		}
		union Eq_1616 * Top_600 = Top_365 - (struct Eq_1614 *) 1;
		*Top_600 = (union Eq_1616 *) (real64) rLoc60_881;
		if (*Top_600 > g_t8049A28)
		{
			*Top_600 = *Top_600;
			*Top_600 = (union Eq_1616 *) (real64) g_t8049A28;
		}
		eax->r0000 = (real32) *Top_600;
		*Top_600 = (union Eq_1616 *) (real64) rLoc58_1009;
		if (*Top_600 > g_t8049A28)
		{
			*Top_600 = *Top_600;
			*Top_600 = (union Eq_1616 *) (real64) g_t8049A28;
		}
		eax->r0004 = (real32) *Top_600;
		*Top_600 = (union Eq_1616 *) (real64) rLoc5C_1013;
		FPUF.u0 = cond(*Top_600 - g_t8049A28);
		if (*Top_600 > g_t8049A28)
		{
			*Top_600 = *Top_600;
			*Top_600 = (union Eq_1616 *) (real64) g_t8049A28;
		}
		eax->r0008 = (real32) *Top_600;
		Top_1178 = (char *) Top_600 + 1;
	}
	TopOut = Top_1178;
	rArg0Out.u0 = <invalid>;
	return FPUF;
}

// 0804938F: Register Eq_620 fn0804938F(Register (ptr32 Eq_23) eax, Register (ptr32 Eq_2046) ecx, Register int32 edx, Register Eq_620 FPUF)
// Called from:
//      fn080494A7
Eq_620 fn0804938F(struct Eq_23 * eax, struct Eq_2046 * ecx, int32 edx, Eq_620 FPUF)
{
	int32 ebp_26;
	struct Eq_23 * esi_15 = eax;
	for (ebp_26 = 0x00; ebp_26 < edx; ++ebp_26)
	{
		struct Eq_23 * edi_32 = &esi_15->r002C + 1;
		fn0804847F(esi_15, edi_32, &g_t824A50C);
		if (esi_15->b007C == 0x00)
		{
			real64 rLoc1_173 = (real64) esi_15->r0060;
			esi_15->r0064 = (real32) ((real64) (real32) (rLoc1_173 * rLoc1_173) - fn08048438(edi_32, edi_32));
		}
		if (esi_15->b007C == 0x01)
		{
			struct Eq_23 * ebx_59 = &esi_15->r0018;
			esi_15->r006C = (real32) fn08048438(edi_32, ebx_59);
			esi_15->r0068 = (real32) fn08048438(ebx_59, esi_15);
		}
		++esi_15;
	}
	ui32 ebx_141;
	struct Eq_23 * esi_85 = &g_t964CD20;
	for (ebx_141 = 0x00; ebx_141 != 0x00030000; ebx_141 += 0x02)
	{
		struct Eq_2067 * Top_105;
		word64 rRet0_111;
		FPUF = fn08048EBE(fp - 0x28, edx, eax, FPUF, &g_t824A50C, esi_85, 0x02, 0x00, out Top_105, out rRet0_111);
		Top_105->qw0000 = rRet0_111;
		uint16 wLoc2E_187 = __fstcw();
		Top_105->rFFFFFFFF = (real64) rLoc24;
		uint16 ax_120 = SEQ(SLICE(wLoc2E_187, byte, 8) | 0x0C, (byte) wLoc2E_187);
		__fldcw(ax_120);
		int32 dwLoc34_190 = (int32) Top_105->rFFFFFFFF;
		__fldcw(wLoc2E_187);
		Top_105->rFFFFFFFF = (real64) rLoc28;
		__fldcw(ax_120);
		int32 dwLoc34_192 = (int32) Top_105->rFFFFFFFF;
		__fldcw(wLoc2E_187);
		Top_105->rFFFFFFFF = (real64) rLoc20;
		__fldcw(ax_120);
		int32 dwLoc34_194 = (int32) Top_105->rFFFFFFFF;
		__fldcw(wLoc2E_187);
		ui32 ecx_138 = (dwLoc34_190 << 0x08) + ((dwLoc34_192 << 0x10) + dwLoc34_194);
		ecx->a0004[ebx_141] = ecx_138;
		ecx[ebx_141] = (struct Eq_2046) ecx_138;
		esi_85 = (struct Eq_23 *) &esi_85->r0018;
	}
	return FPUF;
}

// 080494A7: void fn080494A7(Register (ptr32 Eq_2193) eax, Register Eq_620 FPUF)
void fn080494A7(struct Eq_2193 * eax, Eq_620 FPUF)
{
	fn080483D8();
	struct Eq_2046 * eax_29 = eax->ptr0014;
	fn080483A8();
	g_dw824A514 = 0xC2F00000;
	int32 ebp_37;
	struct Eq_23 * dwLoc400C4_773 = &g_t964CD20;
	word32 dwLoc400C0_1008 = ~0xBF;
	for (ebp_37 = 0x00; ebp_37 != 0x00030000; ebp_37 += 0x0200)
	{
		struct Eq_23 * edi_42 = dwLoc400C4_773;
		word32 esi_43;
		struct Eq_2217 * ebx_44 = ebp_37 *s 0x0C + 157601056;
		for (esi_43 = ~0xFF; esi_43 != 0x0100; ++esi_43)
		{
			ebx_44->r0000 = (real32) (real64) esi_43;
			ebx_44->r0004 = (real32) (real64) dwLoc400C0_1008;
			ebx_44->dw0008 = 0x44000000;
			fn080484A2(edi_42);
			edi_42 = (struct Eq_23 *) &edi_42->r000C;
			++ebx_44;
		}
		dwLoc400C4_773 = (struct Eq_23 *) &(dwLoc400C4_773->a0080 + 0x05E0)->b0000;
		++dwLoc400C0_1008;
	}
	ui32 dwLoc400D4_1009 = 0x00;
	word32 ebp_152;
	word32 dwLoc400C8_784 = 0x08049A40;
	for (ebp_152 = ~0x09; ebp_152 != 0x0E; ebp_152 += 0x04)
	{
		word32 edi_114;
		byte * dwLoc400CC_789 = dwLoc400C8_784 + 0x00;
		for (edi_114 = ~0x2C; edi_114 != 0x2F; edi_114 += 0x04)
		{
			if (*dwLoc400CC_789 == 0x01)
			{
				fn08048775(0x01);
				fn080483E8();
				g_a824A59D[dwLoc400D4_1009] = (struct Eq_2565) 0x00;
				++dwLoc400D4_1009;
			}
			++dwLoc400CC_789;
		}
		dwLoc400C8_784 += 0x17;
	}
	fn080486BA(0x00);
	fn080483E8();
	fn08048775(0x00);
	fn080483E8();
	fn0804881D(0x0F, 0x00, 0x01, 0.0F, -100.0F, -30.0F, 0x00);
	fn080486BA(0x00);
	fn080483E8();
	fn080486BA(0x00);
	fn080483E8();
	fn080486BA(0x00);
	fn080483E8();
	fn080486BA(0x00);
	fn080483E8();
	fn080486BA(0x00);
	fn080483E8();
	fn08048775(0x04);
	fn080483E8();
	fn08048613(0x03);
	fn080483E8();
	fn08048613(0x03);
	fn080483E8();
	g_r824A508 = -120.0F;
	fn080483B8();
	Eq_2360 eax_471 = fp - 262332;
	word32 ebx_476 = 0x00;
	int32 esi_498 = 0x00;
	while (true)
	{
		fn080483B8();
		Eq_2370 eax_509 = eax_471 - (fp - 262332);
		if (eax_509 > 13999 || bLoc30 == 0x02)
			break;
		Eq_162 rLoc1_905 = (real64) ebx_476 * (real64) g_r8049A34;
		real64 rLoc1_906 = cos(rLoc1_905);
		Eq_162 rLoc2_907 = sin(rLoc1_905);
		real64 rLoc3_909 = (real64) g_r8049A30 * rLoc2_907;
		g_r824A500 = (real32) rLoc2_907;
		g_r824A504 = (real32) (rLoc1_906 * rLoc3_909);
		if (esi_498 <= 0x31)
		{
			struct Eq_2436 * eax_543 = null;
			real64 rLoc1_913 = (real64) g_r8049A2C;
			do
			{
				eax_543->r940C8A4 = (real32) ((real64) eax_543->r940C8A4 + rLoc1_913);
				++eax_543;
			} while (eax_543 != (struct Eq_2436 *) 0x001C0380);
		}
		FPUF = fn0804938F(&g_t940C8A0, eax_29, 0x09, FPUF);
		fn080483F8();
		fn080483C8();
		++esi_498;
		ebx_476 += 0x04;
		eax_471 = fp - 0x30;
	}
	fn080483B8();
	ui32 ebx_599 = esi_498 * 0x02;
	eax_602 = eax_509;
	while (true)
	{
		Eq_2370 eax_602;
		fn080483B8();
		Eq_2415 eax_604 = eax_602 - eax_509;
		if (eax_604 > 13999 || bLoc30 == 0x02)
			break;
		Eq_162 rLoc1_929 = (real64) ebx_599 * (real64) g_r8049A34;
		g_r824A504 = -10.0F;
		real64 rLoc1_931 = cos(rLoc1_929);
		Eq_162 rLoc2_932 = sin(rLoc1_929);
		real64 rLoc3_934 = (real64) g_r8049A38 * rLoc2_932;
		g_r824A500 = (real32) rLoc2_932;
		g_r824A508 = (real32) (rLoc1_931 * rLoc3_934);
		FPUF = fn0804938F(&g_t804A100, eax_29, 0x08, FPUF);
		fn080483F8();
		fn080483C8();
		++esi_498;
		ebx_599 += 0x02;
		eax_602 = fp - 0x30;
	}
	fn080483B8();
	g_r824A508 = -120.0F;
	ui32 ebx_666 = esi_498 * 0x04;
	eax_670 = eax_604;
	while (true)
	{
		Eq_2415 eax_670;
		fn080483B8();
		if (eax_670 - eax_604 > 13999 || bLoc30 == 0x02)
			break;
		Eq_162 rLoc1_944 = (real64) ebx_666 * (real64) g_r8049A34;
		real64 rLoc1_946 = cos(rLoc1_944);
		Eq_162 rLoc2_947 = sin(rLoc1_944);
		real64 rLoc3_949 = (real64) g_r8049A30 * rLoc2_947;
		g_r824A500 = (real32) rLoc2_947;
		g_r824A504 = (real32) (rLoc1_946 * rLoc3_949);
		FPUF = fn0804938F(&g_t824A520, eax_29, 0x47, FPUF);
		fn080483F8();
		fn080483C8();
		ebx_666 += 0x04;
		eax_670 = fp - 0x30;
	}
	fn08048408();
	__syscall(0x80);
}

