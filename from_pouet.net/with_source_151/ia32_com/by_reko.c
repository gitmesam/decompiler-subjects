// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	bios_video_set_mode(0x13);
	int16 cx_13 = 31119;
	word16 di_15 = 0x00;
	Eq_12 si_10;
	for (si_10 = 0x0386; si_10 >= 0x00; --si_10)
	{
		di_15 += SLICE(cx_13 *s ~0x26, word16, 16);
		cx_13 += di_15;
		ds->*((word16) si_10 + 902) = SLICE(cx_13, byte, 8);
		ds->*((word16) si_10 + 902) += 0x86;
	}
	__outb(0x03C8, 0x01);
	byte dh_137 = 0x03;
	cui16 cx_169 = 0xFF;
	do
	{
		uint8 cl_36 = (byte) cx_172;
		uint8 al_37 = cl_36;
		if (cl_36 >= 0x20)
		{
			if (cl_36 >= 0x40)
				al_37 = 0x00;
			al_37 = -al_37;
		}
		__outb(969, al_37);
		__outb(969, ds->a0386[(uint16) cl_36] >> 0x02);
		__outb(969, ds->a0386[(uint16) (cl_36 << 0x01)] >> 0x02);
		cx_169 = cx_172 - 0x01;
		cx_172 = cx_169;
	} while (cx_172 != 0x01);
	do
	{
		byte Eq_89::* di_112 = &Eq_89::b0000;
		word16 dx_123 = SEQ(dh_137, 200);
		do
		{
			byte dh_83 = SLICE(dx_123, byte, 8);
			byte dl_118 = (byte) dx_123;
			byte Eq_2::* si_104 = SEQ(0x04, ds->a0386[(uint16) ((byte) dx_123 - dh_83)] - dh_83);
			byte ah_100 = SLICE(dx_123, byte, 8) + (ds->a0386)[(uint16) ((byte) dx_123 + dh_83)];
			word16 cx_102;
			for (cx_102 = 0x0140; cx_102 != 0x00; --cx_102)
			{
				0xA000->*di_112 = ds->*si_104 + ah_100;
				++si_104;
				++di_112;
			}
			dx_123 = SEQ(dh_83, dl_118 - 0x01);
		} while (dl_118 != 0x01);
		dh_137 = SLICE(dx_123 - 0x01, byte, 8);
		byte al_127;
		byte ah_128;
	} while (bios_kbd_check_keystroke(out al_127, out ah_128));
	bios_video_set_mode(0x03);
}

