// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register word16 bx, Register (ptr16 Eq_3) ds)
void fn0C00_0100(word16 bx, struct Eq_3 * ds)
{
	__syscall(0x10);
	__outb(0x03C8, 0x00);
	byte al_13;
	do
	{
		__outb(969, al_13);
		__outb(969, al_13);
		__outb(969, al_13);
		++al_13;
	} while (al_13 != 0x00);
	real64 rLoc1_188 = (real64) ds->r01F4;
	do
	{
		ci16 bx_30 = bx + 0x01;
		struct Eq_138 Eq_137::* di_141 = &Eq_137::t0000;
		byte bl_176 = (byte) (bx_30 + 0x01);
		int16 dx_151;
		for (dx_151 = 0x32; dx_151 != ~0x31; --dx_151)
		{
			ds->w020A = dx_151;
			int16 cx_146;
			for (cx_146 = 0x50; cx_146 != ~0x4F; --cx_146)
			{
				real64 rLoc2_189 = (real64) ds->w020A;
				ds->w0208 = cx_146;
				real64 rLoc3_190 = (real64) ds->w0208;
				real64 rLoc4_191 = (real64) ds->r01F8;
				real64 rLoc5_193 = sin(rLoc2_189);
				real64 rLoc6_195 = cos(rLoc2_189);
				real64 rLoc3_206 = rLoc3_190 * rLoc5_193;
				real64 rLoc7_200 = rLoc4_191 * rLoc6_195 - rLoc5_193 * rLoc5_193;
				real64 rLoc4_209 = rLoc4_191 * rLoc6_195 + rLoc3_206;
				real64 rLoc4_221 = rLoc4_209 / (rLoc7_200 / (rLoc2_189 / sqrt((rLoc3_206 * rLoc3_206 + rLoc7_200 * rLoc7_200) + rLoc4_209 * rLoc4_209)));
				real64 rLoc6_227 = (real64) ds->r01EC;
				real64 rLoc5_231 = sqrt(rLoc6_227 * rLoc6_227) / (rLoc7_200 * rLoc7_200 + rLoc4_221 * rLoc4_221);
				ds->w0200 = (int16) ((real64) ds->r01FC / rLoc5_231);
				ds->t0204.u0 = (int16) (rLoc4_221 + (real64) ds->w0202);
				ds->t0206.u0 = (int16) (atan(rLoc1_188, rLoc2_189 * ((rLoc5_231 * rLoc4_221) * rLoc7_200)) * ds->r01F0);
				Eq_122 ax_136 = (uint16) (uint8) (ds->t0206 - bl_176 ^ ds->t0204) *s ds->w0200;
				di_141[1] = ax_136 >> 0x0A;
				(0xA000->*di_141).w0000 = ax_136 >> 0x0A;
				di_141 = &di_141->w0000 + 1;
				bx = bx_30 + 0x01;
			}
			++di_141;
		}
		ds->w0202 += 0x05;
		if (bx_30 >= 99)
			rLoc1_188 += ds->r01F4;
	} while (__inb(0x60) != 0x01);
}

