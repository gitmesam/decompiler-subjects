// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	int16 cx_24;
	int16 Eq_3::* bx_19 = SEQ(0xF0, bl);
	for (cx_24 = 0x0100; cx_24 != 0x00; --cx_24)
	{
		ss->w0200 = cx_24;
		ds->*bx_19 = (int16) (sin((real64) ss->w0200 * ds->r01F6) * ds->r01FA);
		++bx_19;
	}
	__outb(0x03C8, 0x00);
	word16 bx_27 = 0x00;
	word16 cx_32;
	for (cx_32 = 0x0100; cx_32 != 0x00; --cx_32)
	{
		uint8 al_35 = (byte) bx_27;
		uint8 ah_43 = SLICE(bx_27, byte, 8);
		if (al_35 > 0x3F)
			al_35 = 0x3F;
		__outb(969, al_35);
		__outb(969, ah_43);
		__outb(969, (byte) bx_27 >> 0x02);
		++bx_27;
	}
	do
	{
		Eq_76 ax_64 = ds->t0304;
		ds->t0302 = ax_64;
		ds->w0300 = ax_64 << 0x08;
		byte Eq_92::* di_131 = &Eq_92::b0000;
		word16 cx_167 = 200;
		do
		{
			ui16 bp_93 = (&ds->wFFFFF000)[ds->t0304 * 0x02] + (&ds->wFFFFF000)[((word16) ds->t0302 + 64) * 0x02];
			int16 cx_108 = ((&ds->wFFFFF000)[(ds->w0300 >> 0x08) * 0x02] >> 0x05) + 0x80;
			byte cl_101 = (byte) cx_254;
			Eq_113 bp_114 = bp_93 * 0x03 + (bp_93 << 0x02);
			word16 dx_110 = 0x0140 - cx_108;
			for (; cx_108 != 0x00; --cx_108)
			{
				0xA000->*di_131 = cl_101;
				++di_131;
			}
			word16 cx_113;
			for (cx_113 = 0x40; cx_113 != 0x00; --cx_113)
			{
				ci8 al_118 = (byte) (bp_114 >> 0x08 & 0x0F);
				byte al_119 = al_118 - 0x07;
				if (al_118 < 0x07)
					al_119 = 0x07 - al_118;
				0xA000->*di_131 = (al_119 ^ 0x07) << 0x03;
				++di_131;
				bp_114 = (word16) bp_114 + 0x0055;
			}
			word16 cx_145;
			for (cx_145 = dx_110 - 0x40; cx_145 != 0x00; --cx_145)
			{
				0xA000->*di_131 = cl_101;
				++di_131;
			}
			ds->t0302.u1 = (byte) ds->t0302.u1 + 1;
			ds->w0300 += ds->w01FE;
			cx_167 = cx_254 - 0x01;
			cx_254 = cx_167;
		} while (cx_254 != 0x01);
		ds->t0304 = (word16) ds->t0304 + 1;
		ds->w01FE = (word16) bp_114 + ((&ds->wFFFFF000)[ds->t0304 * 0x02] + 0x0160) >> 0x01;
	} while (__inb(0x60) != 0x01);
}

