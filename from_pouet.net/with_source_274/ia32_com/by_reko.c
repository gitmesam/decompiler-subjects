// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_3) ds)
void fn0C00_0100(byte bl, struct Eq_3 * ds)
{
	__syscall(0x10);
	int16 cx_24;
	int16 Eq_3::* bx_19 = SEQ(0xF0, bl);
	for (cx_24 = 0x0100; cx_24 != 0x00; --cx_24)
	{
		ss->w0200 = cx_24;
		ds->*bx_19 = (int16) (sin((real64) ss->w0200 * (real64) ds->r01F6) * (real64) ds->r01FA);
		++bx_19;
	}
	__outb(0x03C8, 0x00);
	word16 bx_27 = 0x00;
	word16 cx_32;
	for (cx_32 = 0x0100; cx_32 != 0x00; --cx_32)
	{
		uint8 al_35 = (byte) bx_27;
		uint8 ah_43 = SLICE(bx_27, byte, 8);
		if (al_35 > 0x3F)
			al_35 = 0x3F;
		__outb(969, al_35);
		__outb(969, ah_43);
		__outb(969, (byte) bx_27 >> 0x02);
		++bx_27;
	}
	do
	{
		Eq_78 ax_64 = ds->t0304;
		ds->t0302 = ax_64;
		ds->w0300 = ax_64 << 0x08;
		byte Eq_94::* di_135 = &Eq_94::b0000;
		word16 cx_171 = 200;
		do
		{
			ui16 bp_97 = (&ds->wFFFFF000)[(uint16) ds->t0304 * 0x02] + (&ds->wFFFFF000)[(uint16) ((byte) ((word16) ds->t0302 + 64)) * 0x02];
			int16 cx_112 = ((&ds->wFFFFF000)[(ds->w0300 >> 0x08) * 0x02] >> 0x05) + 0x80;
			byte cl_105 = (byte) cx_260;
			Eq_115 bp_102 = bp_97 * 0x03 + (bp_97 << 0x02);
			word16 dx_114 = 0x0140 - cx_112;
			for (; cx_112 != 0x00; --cx_112)
			{
				0xA000->*di_135 = cl_105;
				++di_135;
			}
			word16 cx_117;
			for (cx_117 = 0x40; cx_117 != 0x00; --cx_117)
			{
				ci8 al_122 = (byte) (bp_102 >> 0x08 & 0x0F);
				byte al_123 = al_122 - 0x07;
				if (al_122 < 0x07)
					al_123 = 0x07 - al_122;
				0xA000->*di_135 = (al_123 ^ 0x07) << 0x03;
				++di_135;
				bp_102 = (word16) bp_102 + 0x0055;
			}
			word16 cx_149;
			for (cx_149 = dx_114 - 0x40; cx_149 != 0x00; --cx_149)
			{
				0xA000->*di_135 = cl_105;
				++di_135;
			}
			ds->t0302.u1 = (byte) ds->t0302.u1 + 1;
			ds->w0300 += ds->w01FE;
			cx_171 = cx_260 - 0x01;
			cx_260 = cx_171;
		} while (cx_260 != 0x01);
		ds->t0304 = (word16) ds->t0304 + 1;
		ds->w01FE = (word16) bp_102 + ((&ds->wFFFFF000)[(uint16) ds->t0304 * 0x02] + 0x0160) >> 0x01;
	} while (__inb(0x60) != 0x01);
}

