// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_2) ds_di, Register byte ah, Register byte dh, Register (memptr (ptr16 Eq_22) Eq_5) bx, Register cui16 bp, Register int16 si)
void fn0C00_0100(struct Eq_2 * ds_di, byte ah, byte dh, union Eq_5 Eq_22::* bx, cui16 bp, int16 si)
{
	int16 di = (word16) ds_di;
	__syscall(0x10);
	Eq_15 cx_83 = ds_di->t0002;
	word16 ax_59 = SEQ(ah, 0x13);
	struct Eq_22 * ds_62 = SLICE(cx_83, selector, 16);
	do
	{
		cu8 al_53;
		word16 ax_10 = ax_59 + 0x01;
		byte cl_28 = (byte) cx_83;
		byte ah_40 = SLICE(ax_10 + 0x01, byte, 8);
		if (ax_10 != 0x01)
		{
			ds_62->*bx = ds_62->*bx - dh - (al_53 < 0x00);
			ds_62->*bx |= 0x10;
		}
		bp = __rol(bp, cl_28);
		int32 dx_ax_46 = si *s cx_83;
		word16 bx_33 = bx + bp + ((bp & 0x01 << 0x10 - cl_28) != 0x00);
		word16 ax_41 = SEQ(ah_40, __inb(0x60));
		al_53 = bx_33[(uint16) (byte) dx_ax_46] + bx_33[di];
		dh = SLICE(dx_ax_46, byte, 24);
		bx = bx_33 - 0x01;
		ax_59 = SEQ(SLICE(dx_ax_46, byte, 8), al_53);
		cx_83 = ax_41 - 0x01;
	} while (ax_41 != 0x01);
}

