// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_2) ds)
void fn0C00_0100(struct Eq_2 * ds)
{
	struct Eq_2 * ds;
	bios_video_set_mode(0x13);
	__wait();
	__fninit();
	rLoc1_135 = 0.0;
	cl_114 = 0x40;
	ch_116 = 0x00;
	cx_149 = 0x40;
	do
	{
		cx_151 = ϕ(cx_149, cx_150);
		cl_14 = (byte) cx_151;
		__outb(0x03C8, cl_14);
		__outb(969, cl_14);
		__outb(969, cl_14);
		al_19 = cl_14 >> 0x01;
		al_22 = (byte) ((cl_14 >> 0x01) * 0x03);
		cx_30 = cx_151;
		if (al_22 >= 0x3F)
			al_25 = 0x3F;
		al_27 = ϕ(al_25, al_22);
		__outb(969, al_27);
		cl_115 = (byte) (cx_151 - 0x01);
		cx_150 = cx_151 - 0x01;
	} while (cx_151 != 0x01);
	rLoc1_136 = rLoc1_135;
	cl_128 = ϕ(cl_115, cl_129);
	Mem36 = ϕ(Mem8, Mem104);
	rLoc1_137 = rLoc1_136 + (real64) ds->r01D7;
	ds_bx_39 = (struct Eq_78 *) ((char *) &ds->r01D7 + 6);
	fn0C00_01C3(ds_bx_39, rLoc1_137);
	ds_bx_41 = (struct Eq_78 *) (&ds->r01D7 + 4);
	fn0C00_01C3(ds_bx_41, rLoc1_137);
	ds_bx_43 = (struct Eq_78 *) ((char *) &ds->r01D7 + 26);
	fn0C00_01C3(ds_bx_43, rLoc1_137);
	cx_130 = SEQ(~0x05, cl_128);
	cx_44 = cx_130;
	ax_46 = cx_44 - 0x01;
	dx_ax_49 = (uint32) ax_46;
	dx_51.u1 = (uint16) (dx_ax_49 % 0x0140);
	ax_52.u1 = (uint16) (dx_ax_49 /u 0x0140);
	ds->t01D3 = dx_51;
	ds->t01D5 = ax_52;
	rLoc2_138 = (real64) ds->t01D3;
	rLoc3_139 = (real64) ds->t01D5;
	ds_bx_63 = (real32 *) ((char *) &ds->r01D7 + 6);
	bx_65 = fn0C00_0192(ds_bx_63, rLoc3_139, rLoc2_138, rLoc1_137, out rRet0_71);
	ds->t01D3.u2 = (real32) rRet0_71;
	ds_bx_76 = (real32 *) bx_65;
	fn0C00_0192(ds_bx_76, rLoc3_139, rLoc2_138, rLoc1_137, out rRet0_84);
	rLoc4_143 = rRet0_84 + (real64) ds->t01D3;
	ds->t01D3.u0 = (int16) rLoc4_143;
	ax_90 = ds->t01D3;
	al_91 = (byte) ax_90;
	al_92 = al_91 - 0x0C;
	al_95 = 0x00;
	al_98 = 0x3F;
}

// 0C00:0192: Register word16 fn0C00_0192(Sequence (ptr32 real32) ds_bx, FpuStack real64 rArg0, FpuStack real64 rArg1, FpuStack real64 rArg2, FpuStack out Eq_137 rLoc1Out)
// Called from:
//      fn0C00_0100
word16 fn0C00_0192(real32 * ds_bx, real64 rArg0, real64 rArg1, real64 rArg2, union Eq_137 & rLoc1Out)
{
	struct Eq_180 * ds = SLICE(ds_bx, selector, 16);
	word16 bx = (word16) ds_bx;
	real64 rLoc1_44 = sqrt(fn0C00_01BA(ds_bx, rArg1) + fn0C00_01BA(bx + 0x0A, rArg0)) / (real64) ds->w01FB;
	__wait();
	__wait();
	if (1.0 > 1.0)
		rLoc1_44 *= rArg2;
	rLoc1Out = fabs(cos(rLoc1_44) * (real64) ds->w01DB);
	return bx + 0x0A;
}

// 0C00:01BA: FpuStack real64 fn0C00_01BA(Sequence (ptr32 real32) ds_bx, FpuStack real64 rArg1)
// Called from:
//      fn0C00_0192
real64 fn0C00_01BA(real32 * ds_bx, real64 rArg1)
{
	real64 rLoc1_17 = (real64) *ds_bx - rArg1;
	return rLoc1_17 * rLoc1_17;
}

// 0C00:01C3: void fn0C00_01C3(Sequence (ptr32 Eq_78) ds_bx, FpuStack real64 rArg0)
// Called from:
//      fn0C00_0100
void fn0C00_01C3(struct Eq_78 * ds_bx, real64 rArg0)
{
	ds_bx->r0000 = (real32) (sin((real64) ds_bx->w0004 * rArg0) * (real64) ds_bx->w0006 + (real64) ds_bx->w0008);
}

