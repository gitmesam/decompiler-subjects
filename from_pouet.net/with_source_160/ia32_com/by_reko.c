// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte al, Register word16 cx, Register word16 bx, Register (memptr (ptr16 Eq_11) Eq_5) di)
void fn0C00_0100(byte al, word16 cx, word16 bx, struct Eq_5 Eq_11::* di)
{
	bios_video_set_mode(0x13);
	struct Eq_11 * ax_6 = SEQ(0xA0, al);
	byte ah_124 = 0x00;
	word16 bx_153 = bx;
	do
	{
		bcu8 bl_14 = (byte) bx_157;
		__outb(969, bl_14 >> 0x02);
		__outb(969, bl_14 >> 0x02);
		__outb(969, bl_14 >> 0x02);
		bx_153 = bx_157 + 0x01;
		bx_157 = bx_153;
	} while (bx_157 != 0x01);
	do
	{
		do
		{
			word16 bx_24 = 0x00;
			word16 dx_27;
			struct Eq_5 Eq_11::* si_29 = di;
			for (dx_27 = 0x03; dx_27 != 0x00; --dx_27)
			{
				++si_29;
				bx_24 = bx_24 + SEQ(ah_124, ((ax_6 * 0x02)->*si_29).bFFFFFEBE) + SEQ(ah_124, si_29[318]) + SEQ(ah_124, ((ax_6 * 0x02)->*si_29).bFFFFFFFE);
			}
			cui16 ax_52 = SEQ(ah_124, ((ax_6 * 0x02)->*di).b0000);
			cu16 bx_55 = bx_24 - ax_52 - (ax_52 << 0x02);
			((ax_6 * 0x02)->*di).b0000 = (byte) ((bx_55 >> 0x02) - (bx_55 >> 0x0A));
			ah_124 = SLICE(bx_55 >> 0x0A, byte, 8);
			++di;
			--cx;
		} while (cx != 0x00);
		do
		{
			struct Eq_99 Eq_11::* si_104 = di + 1;
			((ax_6 * 0x02)->*di).b0000 = (byte) (SEQ(ah_124, ((ax_6 * 0x02)->*si_104).bFFFFFEC0) + SEQ(ah_124, ((ax_6 * 0x02)->*si_104).bFFFFFFFF) + SEQ(ah_124, si_104[1]) + SEQ(ah_124, si_104[320]) >> 0x02);
			++di;
			--cx;
		} while (cx != 0x00);
		for (--cx; cx != 0x00; --cx)
		{
			(ax_6->*di).b0000 = ((ax_6 * 0x02)->*si_104).b0000;
			++si_104;
			++di;
		}
	} while (__inb(0x60) != 0x01);
	__syscall(0x10);
}

