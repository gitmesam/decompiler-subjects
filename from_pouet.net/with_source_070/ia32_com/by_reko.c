// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte ch, Register (memptr (ptr16 Eq_6) Eq_4) bx, Register word16 si, Register (ptr16 Eq_6) ds)
void fn0C00_0100(byte ah, byte ch, struct Eq_4 Eq_6::* bx, word16 si, struct Eq_6 * ds)
{
	struct Eq_7 * es_90 = (ds->*bx).ptr0002;
	__syscall(0x10);
	byte bl_59 = (byte) (bx - 0x01);
	union Eq_22 Eq_6::* si_12 = ~si;
	Eq_22 ax_79 = SEQ(ah, 0x13);
	while (true)
	{
		byte al_58 = (byte) ax_79;
		byte Eq_7::* di_14 = &Eq_7::b0000;
		Eq_22 cx_57 = SEQ(ch, 0xCC);
		do
		{
			Eq_22 dx_17;
			for (dx_17 = 0x0140; dx_17 != 0x00; --dx_17)
			{
				ds->*si_12 = cx_57;
				Mem24[ds:si_12 + 0x00:word16] = Mem21[ds:si_12 + 0x00:word16] + ax_79;
				real64 rLoc1_98 = (real64) (ds->*si_12);
				ds->*si_12 = ax_79;
				real64 rLoc1_100 = sin(rLoc1_98 / (real64) (ds->*si_12));
				real64 rLoc2_101 = (real64) (ds->*si_12);
				ds->*si_12 = dx_17;
				real64 rLoc1_104 = rLoc1_100 * cos((real64) (ds->*si_12) / rLoc2_101);
				(ds->*si_12).u1 = ~0x00;
				(ds->*si_12).u0 = (int16) (rLoc1_104 * (real64) (ds->*si_12));
				ds->*si_12 &= dx_17;
				es_90->*di_14 = ds->*si_12;
				byte ah_83 = SLICE(ax_79, byte, 8);
				++di_14;
			}
			--cx_57;
			ch = SLICE(cx_57, byte, 8);
		} while (cx_57 != 0x00);
		while (true)
		{
			al_58 += bl_59;
			ax_79 = SEQ(ah_83, al_58);
			if (al_58 != 0x00)
				break;
			bl_59 = -bl_59;
		}
	}
}

