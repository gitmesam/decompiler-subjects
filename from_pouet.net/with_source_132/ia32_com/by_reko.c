// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence ui32 di_si, Register word16 cx, Register byte dh, Register byte dl, Register (memptr (ptr16 Eq_20) Eq_6) bx, Register int16 bp)
void fn0C00_0100(ui32 di_si, word16 cx, byte dh, byte dl, struct Eq_6 Eq_20::* bx, int16 bp)
{
	__syscall(0x10);
	__outw(0x03D4, 8211);
	struct Eq_20 * dx_9 = SEQ(dh + 0x13, dl);
	int16 ax_170 = 8211;
	ui32 di_si_253 = di_si;
	do
	{
		int32 dx_ax_20 = (int32) ax_170;
		ui32 di_si_192 = di_si_253 - dx_ax_20;
		word16 di_28 = SLICE(di_si_192, word16, 16);
		int16 ax_29 = (word16) dx_ax_20 + di_28;
		int16 bp_148 = bp;
		struct Eq_6 Eq_20::* bx_179 = bx;
		word16 cx_31 = cx - 0x01;
		word16 dx_54 = SLICE(bp *s ax_29, word16, 16);
		word16 di_57 = __shld(di_28, (word16) di_si_192, 0x03);
		cx_147 = cx_31;
		do
		{
			word16 cx_147;
			bp_122 = bp_148;
			bx_106 = bx_179;
			cx_118 = cx_147;
			do
			{
				word16 cx_118;
				struct Eq_6 Eq_20::* bx_106;
				int16 bp_122;
				byte ch_86 = SLICE(cx_118, byte, 8);
				byte ah_88 = SLICE(bp_122, byte, 8);
				byte al_91 = ch_86 & ah_88;
				byte bl_124 = (byte) bx_106;
				byte bh_184 = SLICE(bx_106, byte, 8);
				byte Eq_20::* ax_89 = SEQ(ah_88, ch_86);
				word16 ax_100 = SEQ(ah_88, al_91);
				if ((al_91 & 0x40) == 0x00)
					ax_100 = SEQ(ah_88, dx_9->*ax_89);
				bcu8 al_103 = (byte) (ax_100 - 0x01);
				(dx_9->*bx_106).b0000 = al_103;
				(0xA000->*bx_106).bFFFFFF20 = (al_103 >> 0x03) + 0x10;
				cx_118 += di_57;
				bp_122 += dx_54;
				bx_106 = SEQ(bh_184, bl_124 + 0x01);
			} while (bl_124 != 0x01);
			byte bh_150 = SLICE(bx_179, byte, 8);
			cx_147 -= dx_54;
			bp_148 += di_57;
			bx_179 = SEQ(bh_150 + 0x01, (byte) bx_179);
		} while (bh_150 != 0x01);
		cx = cx_31;
		ax_170 = ax_29;
		di_si_253 = di_si_192;
	} while (__inb(0x60) != 0x01);
}

