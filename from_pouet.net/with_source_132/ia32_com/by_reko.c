// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Sequence ui32 di_si, Register word16 cx, Register byte dh, Register byte dl, Register (memptr (ptr16 Eq_20) Eq_6) bx, Register int16 bp)
void fn0C00_0100(ui32 di_si, word16 cx, byte dh, byte dl, struct Eq_6 Eq_20::* bx, int16 bp)
{
	__syscall(0x10);
	__outw(0x03D4, 8211);
	struct Eq_20 * dx_9 = SEQ(dh + 0x13, dl);
	int16 ax_171 = 8211;
	ui32 di_si_252 = di_si;
	do
	{
		int32 dx_ax_20 = (int32) ax_171;
		ui32 di_si_191 = di_si_252 - dx_ax_20;
		word16 di_28 = SLICE(di_si_191, word16, 16);
		int16 ax_29 = (word16) dx_ax_20 + di_28;
		int16 bp_149 = bp;
		word16 cx_31 = cx - 0x01;
		word16 dx_54 = SLICE(bp *s ax_29, word16, 16);
		word16 di_57 = __shld(di_28, (word16) di_si_191, 0x03);
		cx_148 = cx_31;
		do
		{
			word16 cx_148;
			struct Eq_6 Eq_20::* bx_107 = bx;
			bp_123 = bp_149;
			cx_119 = cx_148;
			do
			{
				word16 cx_119;
				int16 bp_123;
				byte ch_86 = SLICE(cx_119, byte, 8);
				byte ah_88 = SLICE(bp_123, byte, 8);
				byte al_91 = ch_86 & ah_88;
				byte bl_125 = (byte) bx_107;
				byte bh_183 = SLICE(bx_107, byte, 8);
				byte Eq_20::* ax_89 = SEQ(ah_88, ch_86);
				word16 ax_100 = SEQ(SLICE(bp_123, byte, 8), al_91);
				if ((al_91 & 0x40) == 0x00)
					ax_100 = SEQ(ah_88, dx_9->*ax_89);
				bcu8 al_104 = (byte) (ax_100 - 0x01);
				(dx_9->*bx_107).b0000 = al_104;
				(0xA000->*bx_107).bFFFFFF20 = (al_104 >> 0x03) + 0x10;
				cx_119 += di_57;
				bp_123 += dx_54;
				bx_107 = SEQ(bh_183, bl_125 + 0x01);
			} while (bl_125 != 0x01);
			cx_148 -= dx_54;
			bp_149 += di_57;
		} while (SLICE(bx, byte, 8) != 0x01);
		cx = cx_31;
		ax_171 = ax_29;
		di_si_252 = di_si_191;
	} while (__inb(0x60) != 0x01);
}

