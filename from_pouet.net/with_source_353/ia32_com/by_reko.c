// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100()
void fn0C00_0100()
{
	Eq_2 Top_3 = 0;
	bios_video_set_mode(0x13);
	__outb(0x03C7, 0x00);
	byte Eq_20::* di_18 = Eq_20::a0103;
	word16 cx_19;
	for (cx_19 = 0x0300; cx_19 != 0x00; --cx_19)
	{
		cs->*di_18 = __in(969);
		++di_18;
	}
	0C00:0409 = cs->dw46C8;
	0C00:0403 = (word16 *) 0x013F;
	do
	{
		cui16 cx_36;
		for (cx_36 = 199; cx_36 != 0x00; --cx_36)
		{
			0C00:0405 = 0C00:0403 + cx_36;
			__wait();
			__fninit();
			--Top_3;
			*Top_3 = (real64) 0C00:0405;
			*Top_3 = sqrt(*Top_3);
			0C00:0405 = (int16 *) (int16) *Top_3;
			Mem74[0xA000:(cx_36 << 0x08) + (cx_36 << 0x06) + Mem47[0C00:0403:word16]:byte] = SLICE(Mem47[0C00:0405:word16] + CONVERT(CONVERT(SLICE(CONVERT(fn0C00_0520(), word16, uint32), word16, 0), word16, uint32) % 0x0C, word32, uint16) - 0x06 << 0x01, byte, 0);
		}
		word16 v22_77 = 0C00:0403 - 0x01;
		0C00:0403 = (word16 *) v22_77;
	} while (v22_77 != 0x00);
	bios_video_write_string(0x00, 0x00, 0x07, 0x10, 0x0C, 0x0C, cs->a0103 + 778);
	uint16 cx_100;
	for (cx_100 = 0xFF; cx_100 != 0x00; --cx_100)
	{
		__outb(0x03C8, (byte) cx_100);
		__outb(969, (byte) cx_100);
		__outb(969, (byte) (word16) (cx_100 * 0x05));
		__outb(969, (byte) (cx_100 - 100));
	}
	fn0C00_0542();
	fn0C00_0445();
	fn0C00_041D(0xA000);
	cui16 cx_661 = 0x3F;
	do
	{
		byte cl_154 = (byte) cx_664;
		__outb(0x03C8, cl_154);
		__outb(969, 0x00);
		__outb(969, 0x00);
		__outb(969, cl_154);
		cx_661 = cx_664 - 0x01;
		cx_664 = cx_661;
	} while (cx_664 != 0x01);
	byte Eq_95::* di_165 = Eq_95::a0000;
	word16 cx_168;
	for (cx_168 = ~0x00; cx_168 != 0x00; --cx_168)
	{
		0xA000->*di_165 = 0x3F;
		++di_165;
	}
	0C00:0688 = (word16 *) 0x78;
	__outb(0x43, 0xB0);
	__outb(66, ~0x00);
	__outb(66, ~0x00);
	__outb(0x61, __inb(0x61) | 0x01);
	do
	{
		byte al_187 = (byte) (uint32) fn0C00_0520();
		byte Eq_95::* di_199 = (word16) (uint32) fn0C00_0520() - 0x32;
		byte al_206 = (byte) (uint32) fn0C00_0520();
		uint16 cx_212;
		for (cx_212 = (uint16) (al_187 & 0x32); cx_212 != 0x00; --cx_212)
		{
			0xA000->*di_199 = (al_206 & 0x2B) + 0x0A;
			++di_199;
		}
		word16 cx_213;
		for (cx_213 = 0x0100; cx_213 != 0x00; --cx_213)
			;
		if ((__inb(0x60) & 0x80) == 0x00)
		{
			bios_video_set_mode(0x03);
			msdos_terminate(0x00);
		}
		if (((uint16) __inb(0x61) & 0x20) == 0x00)
			continue;
		__outb(0x43, 0xB0);
		__outb(66, ~0x00);
		__outb(66, ~0x00);
		__outb(0x61, __inb(0x61) | 0x01);
		word16 v35_240 = 0C00:0688 - 0x01;
		0C00:0688 = (word16 *) v35_240;
	} while (v35_240 != 0x00);
	fn0C00_0445();
	fn0C00_041D(0xA000);
	0C00:06FF = (word16 *) 0x78;
	__outb(0x43, 0xB0);
	__outb(66, ~0x00);
	__outb(66, ~0x00);
	__outb(0x61, __inb(0x61) | 0x01);
	do
	{
		Eq_368 ax_282 = (word16) (uint32) fn0C00_0520();
		cui16 cx_284;
		Eq_368 di_287 = ax_282;
		byte al_657 = (byte) (uint32) fn0C00_0520();
		for (cx_284 = ax_282 & 0x0A; cx_284 != 0x00; --cx_284)
		{
			0xA000->*di_287 = al_657;
			di_287 = (word16) di_287 + 1;
		}
		if ((__inb(0x60) & 0x80) == 0x00)
		{
			bios_video_set_mode(0x03);
			msdos_terminate(0x00);
		}
		if (((uint16) __inb(0x61) & 0x20) == 0x00)
			continue;
		__outb(0x43, 0xB0);
		__outb(66, ~0x00);
		__outb(66, ~0x00);
		__outb(0x61, __inb(0x61) | 0x01);
		word16 v38_317 = 0C00:06FF - 0x01;
		0C00:06FF = (word16 *) v38_317;
	} while (v38_317 != 0x00);
	fn0C00_0445();
	fn0C00_041D(0xA000);
	struct Eq_441 * dx_341 = 0x00;
	0C00:0767 = (word16 *) 100;
	__outb(0x43, 0xB0);
	__outb(66, ~0x00);
	__outb(66, ~0x00);
	__outb(0x61, __inb(0x61) | 0x01);
	do
	{
		byte Eq_441::* si_358 = Eq_441::a0000;
		byte Eq_95::* di_359 = Eq_95::a0000;
		word16 cx_362;
		for (cx_362 = ~0x00; cx_362 != 0x00; --cx_362)
		{
			0xA000->*di_359 = dx_341->*si_358;
			++si_358;
			++di_359;
		}
		dx_341 = (struct Eq_441 *) (dx_341->a0000 + 100);
		word16 cx_368;
		for (cx_368 = ~0x00; cx_368 != 0x00; --cx_368)
			;
		if ((__inb(0x60) & 0x80) == 0x00)
		{
			bios_video_set_mode(0x03);
			msdos_terminate(0x00);
		}
		if (((uint16) __inb(0x61) & 0x20) == 0x00)
			continue;
		__outb(0x43, 0xB0);
		__outb(66, ~0x00);
		__outb(66, ~0x00);
		__outb(0x61, __inb(0x61) | 0x01);
		word16 v43_394 = 0C00:0767 - 0x01;
		0C00:0767 = (word16 *) v43_394;
	} while (v43_394 != 0x00);
	fn0C00_0445();
	fn0C00_041D(0xA000);
	word16 ebx_16_16_637 = 0x00;
	uint32 ecx_640 = 0x013F;
	do
	{
		word16 ebx_16_16_635;
		uint32 ebx_431 = SEQ(ebx_16_16_637, 199);
		do
		{
			ebx_636 = SEQ(ebx_16_16_635, bx_437 - 0x01);
			cui16 bx_437 = (word16) ebx_431;
			Eq_564 cx_443 = (word16) ecx_640;
			Mem448[0xA000:(bx_437 << 0x08) + (bx_437 << 0x06) + cx_443:byte] = SLICE(SLICE(ecx_640 *u ebx_431, word16, 0) >>u 0x08, byte, 0);
			word16 ecx_16_16_643 = SLICE(ecx_640, word16, 16);
			ebx_16_16_635 = SLICE(ebx_431, word16, 16);
			ebx_431 = ebx_636;
		} while (bx_437 != 0x00);
		ecx_640 = SEQ(ecx_16_16_643, cx_443 - 0x01);
		ebx_16_16_637 = ebx_16_16_635;
	} while (cx_443 != 0x00);
	fn0C00_0542();
	fn0C00_0542();
	fn0C00_0445();
	fn0C00_041D(0xA000);
	word16 ebx_16_16_648 = 0x00;
	uint32 ecx_651 = 0x013F;
	do
	{
		word16 ebx_16_16_646;
		uint32 ebx_503 = SEQ(ebx_16_16_648, 199);
		do
		{
			ebx_647 = SEQ(ebx_16_16_646, bx_515 - 0x01);
			cui16 bx_515 = (word16) ebx_503;
			Eq_610 cx_521 = (word16) ecx_651;
			Mem526[0xA000:(bx_515 << 0x08) + (bx_515 << 0x06) + cx_521:byte] = SLICE(SLICE(SLICE(ecx_651 *u ecx_651 + ebx_503 *u ebx_503, word32, 0), word16, 0) >>u 0x02, byte, 0);
			word16 ecx_16_16_654 = SLICE(ecx_651, word16, 16);
			ebx_16_16_646 = SLICE(ebx_503, word16, 16);
			ebx_503 = ebx_647;
		} while (bx_515 != 0x00);
		ecx_651 = SEQ(ecx_16_16_654, cx_521 - 0x01);
		ebx_16_16_648 = ebx_16_16_646;
	} while (cx_521 != 0x00);
	fn0C00_0542();
	fn0C00_0445();
	fn0C00_041D(0xA000);
	bios_video_set_mode(0x03);
	msdos_terminate(0x00);
}

// 0C00:041D: void fn0C00_041D(Register (ptr16 Eq_95) es)
// Called from:
//      fn0C00_0100
void fn0C00_041D(struct Eq_95 * es)
{
	word32 Eq_95::* di_38 = Eq_95::a0000;
	word16 cx_41;
	for (cx_41 = 0x4000; cx_41 != 0x00; --cx_41)
	{
		es->*di_38 = 0x00;
		++di_38;
	}
	do
		;
	while ((__inb(0x03DA) & 0x08) != 0x00);
	do
		;
	while ((__inb(0x03DA) & 0x08) == 0x00);
	__outb(0x03C8, 0x00);
	word16 cx_29;
	for (cx_29 = 0x0300; cx_29 != 0x00; --cx_29)
		__outb(969, 0x00);
}

// 0C00:0445: void fn0C00_0445()
// Called from:
//      fn0C00_0100
void fn0C00_0445()
{
	while (true)
	{
		word16 bp_28 = 0x00;
		cui16 cx_116 = 0xFF;
		do
		{
			byte cl_9 = (byte) cx_119;
			__outb(0x03C7, cl_9);
			uint16 ax_15 = (uint16) __inb(969);
			uint16 ax_18 = (uint16) __inb(969);
			uint16 ax_21 = (uint16) __inb(969);
			uint16 bx_23 = ax_15;
			if (ax_15 != 0x00)
			{
				bx_23 = ax_15 - 0x01;
				++bp_28;
			}
			uint16 si_32 = ax_18;
			if (ax_18 != 0x00)
			{
				si_32 = ax_18 - 0x01;
				++bp_28;
			}
			uint16 di_42 = ax_21;
			if (ax_21 != 0x00)
			{
				di_42 = ax_21 - 0x01;
				++bp_28;
			}
			__outb(0x03C8, cl_9);
			__outb(969, (byte) bx_23);
			__outb(969, (byte) si_32);
			__outb(969, (byte) di_42);
			cx_116 = cx_119 - 0x01;
			cx_119 = cx_116;
		} while (cx_119 != 0x01);
		if (bp_28 == 0x00)
			break;
		__outb(0x43, 0xB0);
		__outb(66, ~0x00);
		__outb(66, ~0x00);
		__outb(0x61, __inb(0x61) | 0x01);
		do
			;
		while (((uint16) __inb(0x61) & 0x20) == 0x00);
	}
}

// 0C00:04AC: void fn0C00_04AC()
// Called from:
//      fn0C00_0542
void fn0C00_04AC()
{
	do
		;
	while ((__inb(0x03DA) & 0x08) != 0x00);
	do
		;
	while ((__inb(0x03DA) & 0x08) == 0x00);
	__outb(0x03C7, ~0x00);
	0C00:04AF = (uint16 *) (uint16) __inb(969);
	0C00:04B1 = (uint16 *) (uint16) __inb(969);
	0C00:04B3 = (uint16 *) (uint16) __inb(969);
	byte cl_36 = ~0x01;
	do
	{
		__outb(0x03C7, cl_36);
		uint16 ax_42 = (uint16) __inb(969);
		uint16 ax_45 = (uint16) __inb(969);
		uint16 ax_48 = (uint16) __inb(969);
		byte cl_50 = cl_36 + 0x01;
		__outb(0x03C8, cl_50);
		__outb(969, (byte) ax_42);
		__outb(969, (byte) ax_45);
		__outb(969, (byte) ax_48);
		cl_36 = cl_50 - 0x02;
	} while (cl_50 != 0x02);
	__outb(0x03C8, 0x01);
	__outb(969, 0C00:04AF);
	__outb(969, 0C00:04B1);
	__outb(969, 0C00:04B3);
}

// 0C00:0520: Register word16 fn0C00_0520()
// Called from:
//      fn0C00_0100
word16 fn0C00_0520()
{
	word32 eax_11 = (word32) (0C00:0409 * 0x00010003);
	0C00:0409 = eax_11 + 74565;
	return (word16) (eax_11 + 74565 >> 0x10);
}

// 0C00:0542: void fn0C00_0542()
// Called from:
//      fn0C00_0100
void fn0C00_0542()
{
	0C00:0544 = (word16 *) 0x78;
	__outb(0x43, 0xB0);
	__outb(66, ~0x00);
	__outb(66, ~0x00);
	__outb(0x61, __inb(0x61) | 0x01);
	do
	{
		fn0C00_04AC();
		fn0C00_04AC();
		if ((__inb(0x60) & 0x80) == 0x00)
		{
			bios_video_set_mode(0x03);
			msdos_terminate(0x00);
		}
		if (((uint16) __inb(0x61) & 0x20) == 0x00)
			continue;
		__outb(0x43, 0xB0);
		__outb(66, ~0x00);
		__outb(66, ~0x00);
		__outb(0x61, __inb(0x61) | 0x01);
		word16 v11_59 = 0C00:0544 - 0x01;
		0C00:0544 = (word16 *) v11_59;
	} while (v11_59 != 0x00);
}

