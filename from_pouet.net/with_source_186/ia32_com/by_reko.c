// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register ui16 edx_16_16, Register byte bl, Register word16 ebx_16_16, Register (ptr16 Eq_5) ds)
void fn0C00_0100(ui16 edx_16_16, byte bl, word16 ebx_16_16, struct Eq_5 * ds)
{
	__syscall(0x10);
	int16 cx_11 = 0x0100;
	union Eq_13 Eq_5::* bx_9 = SEQ(0xF0, bl);
	bx_22 = bx_9;
	do
	{
		union Eq_13 Eq_5::* bx_22;
		ss->w0200 = cx_11;
		ds->*bx_22 = (int16) (sin((real64) ss->w0200 * ds->r01AA) * ds->r01AC);
		--cx_11;
		bx_22 = (union Eq_13 Eq_5::*) ((char *) bx_22 + 2);
		byte cl_154 = (byte) cx_11;
	} while (cx_11 != 0x00);
	__outb(0x03C8, 0x00);
	cui16 di_34 = 0x00;
	byte bh_156 = 0x00;
	byte bl_157 = 0x00;
	word16 cx_226;
	do
	{
		cui16 di_39 = di_34 & 0x3F;
		cu8 cl_43 = (byte) cx_226;
		byte al_46 = (byte) di_39;
		byte ah_47 = SLICE(di_39, byte, 8);
		di_34 = di_39 + 0x02;
		if (cl_43 > 0xC1)
		{
			if (cl_43 >= 225)
				bh_156 = al_46;
			else
				bl_157 = al_46;
		}
		else
			ah_47 = al_46;
		__outb(969, bh_156);
		__outb(969, bl_157);
		__outb(969, ah_47);
		--cx_226;
	} while (cx_226 != 0x00);
	do
	{
		struct Eq_92 Eq_91::* di_122 = &Eq_91::t0000;
		uint16 dx_140;
		for (dx_140 = 200; dx_140 != 0x00; --dx_140)
		{
			cui16 cx_138;
			for (cx_138 = 0x0140; cx_138 != 0x00; --cx_138)
			{
				word32 ebx_105 = SEQ(ebx_16_16, *((char *) bx_9 + (cx_138 + ss->w0200) * 0x02)) + SEQ(edx_16_16, dx_140) * 0x08;
				ui16 ax_107 = (char *) *((char *) bx_9 + (dx_140 + ss->w0200) * 0x02) + (cx_138 << 0x03) ^ (word16) ebx_105;
				byte al_108 = (byte) ax_107;
				byte ah_113 = SLICE(ax_107, byte, 8);
				ebx_16_16 = SLICE(ebx_105, word16, 16);
				bcu8 al_109 = al_108 & 0x40;
				word16 ax_114 = SEQ(ah_113, al_108 & 0x40);
				if ((al_108 & 0x40) != 0x00)
				{
					al_109 = (byte) (ax_114 - 0x01);
					ah_113 = SLICE(ax_114 - 0x01, byte, 8);
				}
				(0xA000->*di_122).b0000 = (byte) (SEQ(ah_113, al_109 + (0xA000->*di_122).b0000 + di_122[1] + di_122[2] >> 0x02) + 0x01);
				++di_122;
			}
		}
		--ss->w0200;
	} while (__inb(0x60) != 0x01);
}

