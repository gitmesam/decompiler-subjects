// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_20) byte) bx, Register (memptr (ptr16 Eq_123) byte) di)
void fn0C00_0100(byte Eq_20::* bx, byte Eq_123::* di)
{
	__syscall(0x10);
	__outw(0x03D4, 8211);
	int16 dx_10 = 0x03D4;
	int16 ax_11 = 8211;
	struct Eq_20 * ds_8 = 8211;
	cui16 cx_187 = 0x20;
	do
	{
		word16 dx_245 = (word16) (dx_10 *s ax_11) + 0x01;
		do
		{
			bi8 dh_37 = SLICE(dx_245, byte, 8);
			bi8 dl_28 = (byte) dx_245;
			cu8 cl_21 = (byte) cx_252;
			if (cl_21 >= 0x1E)
				ds_8->*bx = cl_21;
			int16 ax_40 = dh_37 *s dh_37 + dl_28 *s dl_28;
			cu8 ah_41 = SLICE(ax_40, byte, 8);
			byte al_164 = (byte) ax_40;
			if (ah_41 > 0x1F)
				ah_41 = 0x1F;
			ds_8->*bx += ah_41;
			--bx;
			dx_10 = dx_245 + 0x01;
			byte bh_121 = SLICE(bx, byte, 8);
			byte bl_206 = (byte) bx;
			ax_11 = SEQ(ah_41, al_164);
			++dx_245;
		} while (bx != &Eq_20::b0000);
		cx_187 = cx_252 - 0x01;
		cx_252 = cx_187;
	} while (cx_252 != 0x01);
	Eq_75 bp_123 = 0x00;
	do
	{
		Eq_83 si_105;
		for (si_105 = 0x0300; si_105 != 0x00; --si_105)
		{
			cui16 cx_89 = cx_187 + 0x01;
			cu8 cl_100 = (byte) cx_89;
			byte ch_184 = SLICE(cx_89, byte, 8);
			if (cl_100 >= 0x03)
			{
				cl_100 = 0x00;
				ch_184 = 0x00;
			}
			uint8 cl_101 = cl_100 << 0x01;
			int16 ax_108 = (int16) (byte) ((word16) si_105 + (bp_123 >> cl_101));
			__outb(969, ((byte) ax_108 ^ SLICE(ax_108, byte, 8)) >> 0x01);
			cx_187 = SEQ(ch_184, cl_101 >> 0x01);
		}
		byte bh_122 = bh_121 - 0x01;
		bp_123 = (word16) bp_123 + 1;
		byte Eq_20::* bx_209 = SEQ(bh_122, bl_206);
		do
		{
			byte al_132 = Mem129[ds_8:bp_123 + si_105:byte] + Mem129[ds_8:bx_209 + si_105:byte];
			bh_121 = bh_122;
			if (SEQ(0x08, al_132) >= bp_123)
			{
				int16 ax_136 = (int16) al_132;
				uint8 al_139 = (byte) ax_136 ^ SLICE(ax_136, byte, 8);
				uint16 ax_143 = (word16) si_105 + SEQ(al_139 >> 0x02, al_139 >> 0x02);
				al_132 = (byte) ax_143 ^ SLICE(ax_143, byte, 8);
			}
			0xA000->*di = al_132;
			++di;
			--si_105;
		} while (si_105 != 0x00);
	} while (__inb(0x60) != 0x01);
}

