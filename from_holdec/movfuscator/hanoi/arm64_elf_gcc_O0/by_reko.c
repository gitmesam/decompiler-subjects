// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0000000000000820: Register ptr64 _init(Stack word64 qwArg00)
ptr64 _init(word64 qwArg00)
{
	call_weak_fn();
	return fp + 0x08;
}

// 0000000000000860: void fn0000000000000860()
void fn0000000000000860()
{
	<anonymous> * x17_4 = globals->ptr12000;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 0000000000000870: void fn0000000000000870()
void fn0000000000000870()
{
	<anonymous> * x17_4 = globals->ptr12008;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 0000000000000880: void fn0000000000000880()
void fn0000000000000880()
{
	<anonymous> * x17_4 = globals->ptr12010;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 0000000000000890: void fn0000000000000890()
void fn0000000000000890()
{
	<anonymous> * x17_4 = globals->ptr12018;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 00000000000008B0: void fn00000000000008B0()
void fn00000000000008B0()
{
	<anonymous> * x17_4 = globals->ptr12028;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 00000000000008C0: void fn00000000000008C0()
void fn00000000000008C0()
{
	<anonymous> * x17_4 = globals->ptr12030;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 00000000000008D0: void fn00000000000008D0()
void fn00000000000008D0()
{
	<anonymous> * x17_4 = globals->ptr12038;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 00000000000008E0: void fn00000000000008E0()
void fn00000000000008E0()
{
	<anonymous> * x17_4 = globals->ptr12040;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 00000000000008F0: void fn00000000000008F0()
void fn00000000000008F0()
{
	<anonymous> * x17_4 = globals->ptr12048;
	word64 sp_6;
	word64 x16_7;
	word64 x17_8;
	x17_4();
}

// 0000000000000900: void _start(Stack word64 qwArg00)
void _start(word64 qwArg00)
{
	fn0000000000000880();
	fn00000000000008B0();
	call_weak_fn();
}

// 0000000000000938: void call_weak_fn()
void call_weak_fn()
{
	word64 x0_4 = globals->qw11FB8;
	if (x0_4 == 0x00)
		return;
	<anonymous> * x17_10 = globals->ptr12020;
	word64 sp_12;
	word64 x0_13;
	word64 x16_14;
	word64 x17_15;
	x17_10();
}

// 0000000000000950: void deregister_tm_clones()
void deregister_tm_clones()
{
	if (73831 - 0x00012060 <= 0x0E)
		return;
	<anonymous> * x1_18 = globals->ptr11F98;
	if (x1_18 == null)
		return;
	word64 sp_19;
	word64 x1_20;
	word64 x0_21;
	byte NZCV_22;
	byte ZC_23;
	x1_18();
}

// 0000000000000988: void register_tm_clones()
void register_tm_clones()
{
	int64 x1_6 = 0x00012060 - 0x00012060;
	if ((x1_6 >> 0x03) + ((x1_6 >> 0x03) >>u 0x003F) >> 0x01 == 0x00)
		return;
	<anonymous> * x2_18 = globals->ptr11FE0;
	if (x2_18 == null)
		return;
	word64 sp_19;
	word64 x1_20;
	word64 x0_21;
	word64 x2_22;
	x2_18();
}

// 00000000000009C8: void __do_global_dtors_aux()
void __do_global_dtors_aux()
{
	if ((word32) globals->b12060 == 0x00)
	{
		if (globals->qw11FA0 != 0x00)
			fn0000000000000860();
		deregister_tm_clones();
		globals->b12060 = 0x01;
	}
}

// 0000000000000A10: void frame_dummy(Stack word64 qwArg00)
void frame_dummy(word64 qwArg00)
{
	if (globals->qw11DA0 != 0x00)
	{
		<anonymous> * x1_21 = globals->ptr11FD8;
		if (x1_21 != null)
		{
			word64 sp_27;
			word64 x0_28;
			word64 x1_29;
			word64 x29_30;
			word64 x30_31;
			word64 x2_32;
			x1_21();
			register_tm_clones();
			return;
		}
	}
	register_tm_clones();
}

// 0000000000000A48: Register word64 new_tower(Stack word64 qwArg00, Register out ptr64 x30Out)
word64 new_tower(word64 qwArg00, ptr64 & x30Out)
{
	fn0000000000000890();
	(word64 *) 0x01 = 0x11;
	word64 x30_28;
	*x30Out = qwLoc20;
	return x30;
}

// 0000000000000A8C: Register word64 text(Register word32 w0, Register word32 w1, Register int32 w2, Stack word32 dwArg00, Stack word32 dwArg04, Register out ptr64 spOut)
word64 text(word32 w0, word32 w1, int32 w2, word32 dwArg00, word32 dwArg04, ptr64 & spOut)
{
	fn00000000000008F0();
	int32 dwLoc04_14 = w2;
	while (true)
	{
		--dwLoc04_14;
		if (dwLoc04_14 == 0x00)
			break;
		fn00000000000008F0();
	}
	word64 sp_52;
	*spOut = fp + 0x08;
	return x30;
}

// 0000000000000B2C: Register word64 add_disk(Register word32 w0, Register int32 w1, Register word64 x30, Stack word32 dwArg00, Stack word32 dwArg04, Register out ptr64 x30Out, Register out ptr64 spOut)
word64 add_disk(word32 w0, int32 w1, word64 x30, word32 dwArg00, word32 dwArg04, ptr64 & x30Out, ptr64 & spOut)
{
	struct Eq_242 * x0_27 = globals->ptr11FA8[(word64) dwLoc0A];
	int32 x2_22[] = *globals->ptr11FA8[(word64) dwLoc0A];
	word32 w1_28 = x0_27->dw0008;
	x0_27->dw0008 = w1_28 + 0x01;
	x2_22[(int64) (int32) w1_28] = w1;
	struct Eq_278 * sp_48;
	text(globals->ptr11FA8[(word64) dwLoc0A]->dw0008, w0, w1, (word32) x30, SLICE(x30, word32, 32), out sp_48);
	fn00000000000008E0();
	fn00000000000008D0();
	word64 x30_58;
	*x30Out = sp_48->qw0008;
	word64 sp_59;
	*spOut = &sp_48->qw0008 + 0x03;
	return sp_48->qw0000;
}

// 0000000000000BD8: Register word32 remove_disk(Register word32 w0, Register word64 x30, Stack word32 dwArg04, Register out ptr64 x29Out, Register out ptr64 x30Out)
word32 remove_disk(word32 w0, word64 x30, word32 dwArg04, ptr64 & x29Out, ptr64 & x30Out)
{
	struct Eq_319 * x0_25 = globals->ptr11FA8[(word64) dwLoc1A];
	int32 x1_20[] = *globals->ptr11FA8[(word64) dwLoc1A];
	--x0_25->dw0008;
	struct Eq_349 * sp_48;
	word32 w0_50 = text(globals->ptr11FA8[(word64) dwLoc1A]->dw0008 + 0x01, w0, x1_20[(int64) (int32) x0_25->dw0008], (word32) x30, SLICE(x30, word32, 32), out sp_48)->dw002C;
	word64 x29_53;
	*x29Out = sp_48->qw0000;
	word64 x30_55;
	*x30Out = sp_48->qw0008;
	return w0_50;
}

// 0000000000000C6C: void move(Register word32 w0, Register word32 w1, Register word64 x30, Stack word32 dwArg00, Stack word32 dwArg04)
void move(word32 w0, word32 w1, word64 x30, word32 dwArg00, word32 dwArg04)
{
	if (w0 != 0x00)
	{
		move(w0 - 0x01, w1, x30, dwLoc18, dwLoc14);
		struct Eq_404 * x29_39;
		word64 x30_40;
		int32 w0_41 = remove_disk(w1, x30, dwLoc14, out x29_39, out x30_40);
		word64 x30_44;
		word64 sp_45;
		struct Eq_414 * x29_46 = add_disk(x29_39->dw0014, w0_41, x30_40, w1, w0, out x30_44, out sp_45);
		move(x29_46->dw001C - 0x01, x29_46->dw0010, x30_44, w1, w0);
	}
}

// 0000000000000CE4: void main(Register int32 w0, Register (ptr64 Eq_434) x1, Register word64 x30, Stack word32 dwArg04)
void main(int32 w0, Eq_434 * x1, word64 x30, word32 dwArg04)
{
	fn00000000000008C0();
	struct Eq_414 * x29_30 = fp + -0x0018;
	if (w0 > 0x01)
	{
		word32 w0_101 = (word32) x1->qw0008;
		fn0000000000000870();
		*globals->ptr11FD0 = w0_101;
		if (*globals->ptr11FD0 > 0x00)
		{
l0000000000000D50:
			while (x29_30->dw001C <= 0x02)
			{
				x29_30 = new_tower(qwArg00, out x30);
				globals->ptr11FA8[(word64) x29_30->dw000E] = 0x01;
				++x29_30->dw001C;
			}
			x29_30->dw001C = *globals->ptr11FD0;
			while (x29_30->dw001C != 0x00)
			{
				word64 sp_71;
				x29_30 = add_disk(0x00, x29_30->dw001C, x30, dwArg00, 0x00, out x30, out sp_71);
				--x29_30->dw001C;
			}
			move(*globals->ptr11FD0, 0x00, x30, dwArg00, 0x00);
			word64 sp_60;
			text(0x01, 0x00, 0x01, dwArg00, 0x00, out sp_60);
			return;
		}
	}
	*globals->ptr11FD0 = 0x08;
	goto l0000000000000D50;
}

// 0000000000000E10: void __libc_csu_init(Register word64 x30, Stack word64 qwArg00)
void __libc_csu_init(word64 x30, word64 qwArg00)
{
	<anonymous> * x21_23[] = globals->a11D90;
	word64 sp_38 = _init(x30);
	if (0x00011D98 - 0x00011D90 >> 0x03 != 0x00)
	{
		ui64 x19_71 = 0x00;
		do
		{
			<anonymous> * x3_77 = x21_23[x19_71];
			word64 sp_82;
			word64 x29_83;
			word64 x30_84;
			word64 x22_86;
			word64 x20_88;
			word64 x23_89;
			word64 x24_90;
			word64 x2_91;
			word32 w0_92;
			word32 w24_93;
			word64 x1_94;
			word64 x3_95;
			word64 x31_96;
			byte NZCV_97;
			bool Z_98;
			x3_77();
		} while (x20_88 - x19_71 != 0x00);
	}
}

// 0000000000000E88: void __libc_csu_fini()
void __libc_csu_fini()
{
}

// 0000000000000E8C: void _fini(Stack word64 qwArg00)
void _fini(word64 qwArg00)
{
}

