//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

void copy1_eight_times(int16_t * to, int16_t * from, int32_t count);
void copy1_four_times(int16_t * to, int16_t * from, int32_t count);
void copy2_eight_times(int16_t * to, int16_t * from, int32_t n);
void copy2_four_times(int16_t * to, int16_t * from, int32_t n);

// --------------------- Global Variables ---------------------

int32_t g1;
int32_t g2;

// ------------------------ Functions -------------------------

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x80483f4 - 0x8048498
// Line range:    4 - 19
void copy1_four_times(int16_t * to, int16_t * from, int32_t count) {
    int32_t v1 = count / 64; // 0x8048408
    int32_t v2 = count % 4; // 0x804841e
    int32_t v3 = v1; // 0x8048423
    int16_t * v4 = from; // 0x8048423
    int16_t * v5 = to; // 0x8048423
    int16_t * v6; // 0x80483f4
    int16_t * v7; // 0x80483f4
    int16_t * v8; // 0x80483f4
    int16_t * v9; // 0x80483f4
    int16_t * v10; // 0x80483f4
    int16_t * v11; // 0x80483f4
    int32_t v12; // 0x80483f4
    int32_t v13; // 0x80483f4
    if (v2 == 1) {
        goto lab_0x8048478;
    } else {
        if (v2 > 1) {
            // 0x8048430
            v13 = v1;
            v10 = from;
            v7 = to;
            v3 = v1;
            v11 = from;
            v8 = to;
            switch (v2) {
                case 2: {
                    goto lab_0x8048464;
                }
                case 3: {
                    goto lab_0x8048450;
                }
                default: {
                    return;
                }
            }
        } else {
            // 0x804842a
            v12 = v1;
            v9 = from;
            v6 = to;
            if (v2 != 0) {
                // 0x8048496
                return;
            }
            goto lab_0x804843c;
        }
    }
  lab_0x8048478:
    // 0x8048478
    *v5 = *v4;
    int32_t v14 = v3 - 1; // 0x804848c
    v12 = v14;
    v9 = (int16_t *)((int32_t)v4 + 2);
    v6 = (int16_t *)((int32_t)v5 + 2);
    if (v14 >= 0 != v14 != 0) {
        // 0x8048496
        return;
    }
    goto lab_0x804843c;
  lab_0x804843c:
    // 0x804843c
    *v6 = *v9;
    v13 = v12;
    v10 = (int16_t *)((int32_t)v9 + 2);
    v7 = (int16_t *)((int32_t)v6 + 2);
    goto lab_0x8048450;
  lab_0x8048450:
    // 0x8048450
    *v7 = *v10;
    v3 = v13;
    v11 = (int16_t *)((int32_t)v10 + 2);
    v8 = (int16_t *)((int32_t)v7 + 2);
    goto lab_0x8048464;
  lab_0x8048464:
    // 0x8048464
    *v8 = *v11;
    v4 = (int16_t *)((int32_t)v11 + 2);
    v5 = (int16_t *)((int32_t)v8 + 2);
    goto lab_0x8048478;
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048498 - 0x8048586
// Line range:    21 - 44
void copy1_eight_times(int16_t * to, int16_t * from, int32_t count) {
    int32_t v1 = count % 8; // 0x80484c2
    g1 = v1;
    switch (v1) {
        default: {
            // 0x8048584
            return;
        }
    }
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048586 - 0x8048612
// Line range:    46 - 76
void copy2_four_times(int16_t * to, int16_t * from, int32_t n) {
    int16_t * v1 = to; // 0x804858d
    int16_t * v2 = from; // 0x804858d
    if (n < 1) {
        // 0x804860f
        return;
    }
    int32_t v3 = n; // 0x804858d
    int16_t * v4; // 0x8048586
    int16_t * v5; // 0x8048586
    int16_t * v6; // 0x8048586
    int16_t * v7; // 0x8048586
    int16_t * v8; // 0x8048586
    int16_t * v9; // 0x8048586
    while (true) {
      lab_0x8048595:;
        int16_t * v10 = v2;
        int16_t * v11 = v1;
        v7 = v10;
        v4 = v11;
        v8 = v10;
        v5 = v11;
        v9 = v10;
        v6 = v11;
        int32_t v12; // 0x8048586
        switch (4 - v12) {
            case 2: {
                goto lab_0x804860f;
            }
            case 3: {
                goto lab_0x80485f1;
            }
            case 1: {
                goto lab_0x80485c3;
            }
            default: {
                // 0x80485ac
                *v11 = *v10;
                v7 = (int16_t *)((int32_t)v10 + 2);
                v4 = (int16_t *)((int32_t)v11 + 2);
                goto lab_0x80485c3;
            }
        }
    }
  lab_0x804860f:
    // 0x80485da
    *v5 = *v8;
    v9 = (int16_t *)((int32_t)v8 + 2);
    v6 = (int16_t *)((int32_t)v5 + 2);
    goto lab_0x80485f1;
  lab_0x80485f1:
    // 0x80485f1
    *v6 = *v9;
    v3 -= 4;
    v1 = (int16_t *)((int32_t)v6 + 2);
    v2 = (int16_t *)((int32_t)v9 + 2);
    if (v3 == 0) {
        // break -> 0x804860f
        goto lab_0x804860f;
    }
    goto lab_0x8048595;
  lab_0x80485c3:
    // 0x80485c3
    *v4 = *v7;
    v8 = (int16_t *)((int32_t)v7 + 2);
    v5 = (int16_t *)((int32_t)v4 + 2);
    goto lab_0x804860f;
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048612 - 0x8048704
// Line range:    79 - 113
void copy2_eight_times(int16_t * to, int16_t * from, int32_t n) {
    int16_t * v1 = to; // 0x8048619
    int16_t * v2 = from; // 0x8048619
    if (n < 1) {
        // 0x8048701
        return;
    }
    int32_t v3 = n; // 0x8048619
    int16_t * v4; // 0x8048612
    int16_t * v5; // 0x8048612
    int16_t * v6; // 0x8048612
    int16_t * v7; // 0x8048612
    int16_t * v8; // 0x8048612
    int16_t * v9; // 0x8048612
    int16_t * v10; // 0x8048612
    int16_t * v11; // 0x8048612
    int16_t * v12; // 0x8048612
    int16_t * v13; // 0x8048612
    int16_t * v14; // 0x8048612
    int16_t * v15; // 0x8048612
    int16_t * v16; // 0x8048612
    int16_t * v17; // 0x8048612
    while (true) {
      lab_0x8048629:;
        int16_t * v18 = v2;
        int16_t * v19 = v1;
        int32_t v20 = 8 - v3; // 0x804862e
        g2 = v20;
        v11 = v18;
        v4 = v19;
        v12 = v18;
        v5 = v19;
        v13 = v18;
        v6 = v19;
        v14 = v18;
        v7 = v19;
        v15 = v18;
        v8 = v19;
        v16 = v18;
        v9 = v19;
        v17 = v18;
        v10 = v19;
        switch (v20) {
            case 1: {
                goto lab_0x8048701;
            }
            case 2: {
                goto lab_0x804866d;
            }
            case 3: {
                goto lab_0x8048684;
            }
            case 4: {
                goto lab_0x804869b;
            }
            case 5: {
                goto lab_0x80486b2;
            }
            case 6: {
                goto lab_0x80486c9;
            }
            case 7: {
                goto lab_0x80486e0;
            }
            default: {
                // 0x804863f
                *v19 = *v18;
                v11 = (int16_t *)((int32_t)v18 + 2);
                v4 = (int16_t *)((int32_t)v19 + 2);
                goto lab_0x8048701;
            }
        }
    }
  lab_0x8048701:
    // 0x8048656
    *v4 = *v11;
    v12 = (int16_t *)((int32_t)v11 + 2);
    v5 = (int16_t *)((int32_t)v4 + 2);
    goto lab_0x804866d;
  lab_0x804866d:
    // 0x804866d
    *v5 = *v12;
    v13 = (int16_t *)((int32_t)v12 + 2);
    v6 = (int16_t *)((int32_t)v5 + 2);
    goto lab_0x8048684;
  lab_0x8048684:
    // 0x8048684
    *v6 = *v13;
    v14 = (int16_t *)((int32_t)v13 + 2);
    v7 = (int16_t *)((int32_t)v6 + 2);
    goto lab_0x804869b;
  lab_0x804869b:
    // 0x804869b
    *v7 = *v14;
    v15 = (int16_t *)((int32_t)v14 + 2);
    v8 = (int16_t *)((int32_t)v7 + 2);
    goto lab_0x80486b2;
  lab_0x80486b2:
    // 0x80486b2
    *v8 = *v15;
    v16 = (int16_t *)((int32_t)v15 + 2);
    v9 = (int16_t *)((int32_t)v8 + 2);
    goto lab_0x80486c9;
  lab_0x80486c9:
    // 0x80486c9
    *v9 = *v16;
    v17 = (int16_t *)((int32_t)v16 + 2);
    v10 = (int16_t *)((int32_t)v9 + 2);
    goto lab_0x80486e0;
  lab_0x80486e0:
    // 0x80486e0
    *v10 = *v17;
    v3 -= 8;
    v1 = (int16_t *)((int32_t)v10 + 2);
    v2 = (int16_t *)((int32_t)v17 + 2);
    if (v3 == 0) {
        // break -> 0x8048701
        goto lab_0x8048701;
    }
    goto lab_0x8048629;
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048704 - 0x80487c3
// Line range:    115 - 124
int main(int argc, char ** argv) {
    int32_t * mem = malloc(200); // 0x804871c
    int32_t * mem2 = malloc(200); // 0x804872c
    copy1_four_times((int16_t *)mem2, (int16_t *)mem, 100);
    copy1_eight_times((int16_t *)mem2, (int16_t *)mem, 100);
    copy2_four_times((int16_t *)mem2, (int16_t *)mem, 100);
    copy2_eight_times((int16_t *)mem2, (int16_t *)mem, 100);
    return memcmp(mem, mem2, 200);
}

// --------------- Dynamically Linked Functions ---------------

// void * malloc(size_t size);
// int memcmp(const void * s1, const void * s2, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.6.3)
// Detected functions: 5

