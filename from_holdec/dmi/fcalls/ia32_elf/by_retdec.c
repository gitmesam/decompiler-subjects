//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

// ------------------------ Structures ------------------------

struct struct1 {
    int32_t e0;
    int32_t e1;
    int32_t e2;
    int32_t e3;
};

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int32_t a_vararg(void);
int32_t advanced_1_pass_in_flags_reg(int32_t a1);
int32_t advanced_1_pass_in_flags_reg_helper(void);
int32_t advanced_2_return_in_flags_reg(int32_t a1);
int32_t advanced_2_return_in_flags_reg_helper(int32_t a1);
int32_t advanced_3_uneven_stack(int32_t a1);
int32_t basic_1_multiple_calling_conventions_3_ints(int32_t a1);
int32_t basic_2_calling_varargs(int32_t a1);
int32_t basic_3_accessing_all_registers(void);
int32_t basic_4_tail_call(int32_t a1);
int32_t crude_printf(char * a1, int32_t a2, char * a3);
int32_t even_more_crude(char * c, int32_t a2, char * a3);
int32_t intermediate_1_accessing_varargs(void);
int32_t intermediate_2_use_uncommon_registers_for_parameters(int32_t a1);
int32_t intermediate_3_calling_noreturn(int32_t a1);
int32_t intermediate_4_asm_instr_with_multiple_results(int32_t a1, int32_t a2);
int32_t intermediate_5_pushs_in_different_blocks(int32_t a1);
int32_t sum3_cdecl(int32_t a1, int32_t a2, int32_t a3);
int32_t sum3_fastcall(int32_t a1);
int32_t sum3_ms_abi(int32_t a1, int32_t a2, int32_t a3);
int32_t sum3_stdcall(int32_t a1, int32_t a2, int32_t a3);
int32_t sum3_sysv_abi(int32_t a1, int32_t a2, int32_t a3);
int32_t sum3_thiscall(int32_t a1, int32_t a2);
int32_t sum3_uncommon(void);

// --------------------- Global Variables ---------------------

struct _IO_FILE * g1 = NULL; // 0x804b02c
int32_t g2;

// ------------------------ Functions -------------------------

// Address range: 0x8048420 - 0x80484bf
int main(int argc, char ** argv) {
    int32_t v1 = (int32_t)argv; // 0x804843a
    basic_1_multiple_calling_conventions_3_ints(v1);
    basic_2_calling_varargs(v1);
    basic_3_accessing_all_registers();
    basic_4_tail_call(v1);
    intermediate_1_accessing_varargs();
    intermediate_2_use_uncommon_registers_for_parameters(v1);
    intermediate_3_calling_noreturn((int32_t)&g2);
    // UNREACHABLE
}

// Address range: 0x80485c0 - 0x80485d7
int32_t sum3_cdecl(int32_t a1, int32_t a2, int32_t a3) {
    // 0x80485c0
    return a1 + 1 + 2 * a2 + 3 * a3;
}

// Address range: 0x80485e0 - 0x80485f1
int32_t sum3_fastcall(int32_t a1) {
    // 0x80485e0
    int32_t v1; // 0x80485e0
    return 3 * a1 + 2 + 2 * v1 + v1;
}

// Address range: 0x8048600 - 0x8048615
int32_t sum3_thiscall(int32_t a1, int32_t a2) {
    // 0x8048600
    int32_t v1; // 0x8048600
    return 2 * a1 + 3 + 3 * a2 + v1;
}

// Address range: 0x8048620 - 0x8048637
int32_t sum3_ms_abi(int32_t a1, int32_t a2, int32_t a3) {
    // 0x8048620
    return a1 + 4 + 2 * a2 + 3 * a3;
}

// Address range: 0x8048640 - 0x8048657
int32_t sum3_sysv_abi(int32_t a1, int32_t a2, int32_t a3) {
    // 0x8048640
    return a1 + 5 + 2 * a2 + 3 * a3;
}

// Address range: 0x8048660 - 0x8048679
int32_t sum3_stdcall(int32_t a1, int32_t a2, int32_t a3) {
    // 0x8048660
    return a1 + 6 + 2 * a2 + 3 * a3;
}

// Address range: 0x8048680 - 0x80487a5
int32_t basic_1_multiple_calling_conventions_3_ints(int32_t a1) {
    int32_t time_val = time(NULL); // 0x804868b
    if (sum3_cdecl(a1, time_val, 42) > 123) {
        // 0x8048790
        puts("cdecl");
    }
    // 0x80486aa
    if (sum3_fastcall(42) > 123) {
        // 0x8048778
        puts("fastcall");
    }
    // 0x80486c4
    if (sum3_thiscall(time_val, 42) > 123) {
        // 0x8048760
        puts("thiscall");
    }
    // 0x80486dc
    if (sum3_ms_abi(a1, time_val, 42) > 123) {
        // 0x8048748
        puts("ms_abi");
    }
    // 0x80486f0
    if (sum3_sysv_abi(a1, time_val, 42) > 123) {
        // 0x8048730
        puts("sysv_abi");
    }
    // 0x8048704
    if (sum3_stdcall(a1, time_val, 42) >= 124) {
        // 0x8048716
        puts("stdcall");
    }
    // 0x8048726
    return 0;
}

// Address range: 0x80487b0 - 0x80487c3
int32_t a_vararg(void) {
    // 0x80487b0
    puts("a_vararg called");
    return 0;
}

// Address range: 0x80487d0 - 0x804880e
int32_t basic_2_calling_varargs(int32_t a1) {
    // 0x80487d0
    a_vararg();
    a_vararg();
    a_vararg();
    a_vararg();
    a_vararg();
    return 0;
}

// Address range: 0x8048810 - 0x804881d
int32_t basic_4_tail_call(int32_t a1) {
    // 0x8048810
    return time(NULL);
}

// Address range: 0x8048820 - 0x8048900
int32_t crude_printf(char * a1, int32_t a2, char * a3) {
    char v1 = *a1; // 0x804882b
    int32_t result = 0; // 0x8048831
    if (v1 == 0) {
      lab_0x8048892:
        // 0x8048892
        return result;
    }
    // 0x8048837
    int32_t v2; // bp-28, 0x8048820
    int32_t v3 = &v2; // 0x8048824
    int32_t * v4 = (int32_t *)(v3 - 16);
    int32_t v5; // 0x8048820
    int32_t v6 = &v5;
    int32_t v7 = (int32_t)a1;
    int32_t v8 = 0;
    char v9 = v1;
    int32_t v10; // 0x804887b
    int32_t v11; // 0x804887f
    char v12; // 0x8048887
    while (v9 != 37) {
        // 0x8048876
        v10 = v8 + 1;
        *v4 = (int32_t)v9;
        v11 = v7 + 1;
        putchar((int32_t)&g2);
        v12 = *(char *)v11;
        result = v10;
        if (v12 == 0) {
            return result;
        }
        v7 = v11;
        v8 = v10;
        v9 = v12;
    }
    // 0x8048840
    int32_t v13; // 0x8048820
    int32_t v14; // 0x8048820
    int32_t v15; // 0x80488a8
    switch (*(char *)(v7 + 1)) {
        case 37: {
            // 0x80488c8
            *v4 = 37;
            putchar((int32_t)&g2);
            v13 = v8 + 1;
            v14 = v6;
            // break -> 0x8048867
            break;
        }
        case 99: {
            // 0x80488e0
            *v4 = (int32_t)*(char *)v6;
            putchar((int32_t)&g2);
            v13 = v8 + 1;
            v14 = v6 + 4;
            // break -> 0x8048867
            break;
        }
        case 115: {
            // 0x80488a0
            v15 = *(int32_t *)v6;
            *(int32_t *)(v3 - 12) = (int32_t)g1;
            *v4 = v15;
            fputs((char *)&g2, (struct _IO_FILE *)&g2);
            *v4 = v15;
            v13 = strlen((char *)&g2) + v8;
            v14 = v6 + 4;
            // break -> 0x8048867
            break;
        }
        default: {
            // 0x8048857
            *v4 = (int32_t)"Not implemented";
            puts((char *)&g2);
            v13 = v8;
            v14 = v6;
            // break -> 0x8048867
            break;
        }
    }
    int32_t result2 = v13;
    int32_t v16 = v7 + 2; // 0x8048867
    char v17 = *(char *)v16; // 0x8048867
    while (v17 != 0) {
        // 0x8048872
        v6 = v14;
        v7 = v16;
        v8 = result2;
        v9 = v17;
        while (v9 != 37) {
            // 0x8048876
            v10 = v8 + 1;
            *v4 = (int32_t)v9;
            v11 = v7 + 1;
            putchar((int32_t)&g2);
            v12 = *(char *)v11;
            result = v10;
            if (v12 == 0) {
                return result;
            }
            v7 = v11;
            v8 = v10;
            v9 = v12;
        }
        // 0x8048840
        switch (*(char *)(v7 + 1)) {
            case 37: {
                // 0x80488c8
                *v4 = 37;
                putchar((int32_t)&g2);
                v13 = v8 + 1;
                v14 = v6;
                // break -> 0x8048867
                break;
            }
            case 99: {
                // 0x80488e0
                *v4 = (int32_t)*(char *)v6;
                putchar((int32_t)&g2);
                v13 = v8 + 1;
                v14 = v6 + 4;
                // break -> 0x8048867
                break;
            }
            case 115: {
                // 0x80488a0
                v15 = *(int32_t *)v6;
                *(int32_t *)(v3 - 12) = (int32_t)g1;
                *v4 = v15;
                fputs((char *)&g2, (struct _IO_FILE *)&g2);
                *v4 = v15;
                v13 = strlen((char *)&g2) + v8;
                v14 = v6 + 4;
                // break -> 0x8048867
                break;
            }
            default: {
                // 0x8048857
                *v4 = (int32_t)"Not implemented";
                puts((char *)&g2);
                v13 = v8;
                v14 = v6;
                // break -> 0x8048867
                break;
            }
        }
        // 0x8048867
        result2 = v13;
        v16 = v7 + 2;
        v17 = *(char *)v16;
    }
    // 0x8048892
    return result2;
}

// Address range: 0x8048900 - 0x8048931
int32_t even_more_crude(char * c, int32_t a2, char * a3) {
    // 0x8048900
    putchar((int32_t)c);
    char * str = (char *)a2; // 0x804891b
    fputs(str, g1);
    return strlen(str) + 1;
}

// Address range: 0x8048940 - 0x804896f
int32_t intermediate_1_accessing_varargs(void) {
    // 0x8048940
    even_more_crude("low: a %c b %s c\n", 48, "hello");
    return crude_printf("higher: a %c b %s c\n", 48, "hello") + 42;
}

// Address range: 0x8048970 - 0x8048988
int32_t intermediate_4_asm_instr_with_multiple_results(int32_t a1, int32_t a2) {
    struct struct1 v1; // 0x8048979
    // 0x8048970
    v1 = __asm_cpuid(a1);
    return 2 * v1.e1 + v1.e0 + 3 * v1.e2 + 4 * v1.e3;
}

// Address range: 0x8048990 - 0x80489b1
int32_t basic_3_accessing_all_registers(void) {
    // 0x8048990
    int32_t v1; // 0x8048990
    return v1 + 8 * v1;
}

// Address range: 0x80489b1 - 0x80489c1
int32_t sum3_uncommon(void) {
    // 0x80489b1
    int32_t v1; // 0x80489b1
    return v1 + 10 + 2 * v1 + 3 * v1;
}

// Address range: 0x80489d0 - 0x80489fb
int32_t intermediate_2_use_uncommon_registers_for_parameters(int32_t a1) {
    // 0x80489d0
    time(NULL);
    if ((uint32_t)sum3_uncommon() >= 124) {
        // 0x80489ed
        puts("un common");
    }
    // 0x80489f8
    return 0;
}

// Address range: 0x8048a00 - 0x8048a21
int32_t intermediate_3_calling_noreturn(int32_t a1) {
    // 0x8048a00
    puts("before");
    exit(1);
    // UNREACHABLE
}

// Address range: 0x8048a30 - 0x8048a4e
int32_t intermediate_5_pushs_in_different_blocks(int32_t a1) {
    // 0x8048a30
    puts(a1 == 42 ? "is 42" : "it not 42");
    return 0;
}

// Address range: 0x8048a50 - 0x8048a62
int32_t advanced_1_pass_in_flags_reg_helper(void) {
    // 0x8048a50
    bool v1; // 0x8048a50
    if (!v1 && true) {
        // 0x8048a52
        puts("is above 2");
    }
    // 0x8048a5f
    return 0;
}

// Address range: 0x8048a62 - 0x8048a75
int32_t advanced_1_pass_in_flags_reg(int32_t a1) {
    // 0x8048a62
    advanced_1_pass_in_flags_reg_helper();
    return 0;
}

// Address range: 0x8048a75 - 0x8048a83
int32_t advanced_2_return_in_flags_reg_helper(int32_t a1) {
    // 0x8048a75
    return 0;
}

// Address range: 0x8048a83 - 0x8048a9a
int32_t advanced_2_return_in_flags_reg(int32_t a1) {
    // 0x8048a83
    advanced_2_return_in_flags_reg_helper((int32_t)&g2);
    bool v1; // 0x8048a83
    if (!v1 && true) {
        // 0x8048a8a
        puts("is above 2");
    }
    // 0x8048a97
    return 0;
}

// Address range: 0x8048a9a - 0x8048ac8
int32_t advanced_3_uneven_stack(int32_t a1) {
    // 0x8048a9a
    puts(a1 == 42 ? "you should not see this" : "it not 42");
    return 0;
}

// --------------- Dynamically Linked Functions ---------------

// void exit(int status);
// int fputs(const char * restrict s, FILE * restrict stream);
// int putchar(int c);
// int puts(const char * s);
// size_t strlen(const char * s);
// time_t time(time_t * timer);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (6.4.1)
// Detected functions: 25

