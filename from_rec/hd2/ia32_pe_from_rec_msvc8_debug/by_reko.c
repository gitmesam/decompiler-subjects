// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00411023: Register Eq_2 fn00411023(Register Eq_2 eax, Register ui32 ecx, Register Eq_2 edx, Register Eq_2 ebx, Register ptr32 ebp, Register Eq_2 esi, Register Eq_2 edi, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Register out ptr32 edxOut)
Eq_2 fn00411023(Eq_2 eax, ui32 ecx, Eq_2 edx, Eq_2 ebx, ptr32 ebp, Eq_2 esi, Eq_2 edi, Eq_9 * es, Eq_10 * ds, ptr32 & edxOut)
{
	word32 edx_12;
	return fn00411970(eax, ecx, edx, ebx, ebp, esi, edi, es, ds, dwLoc04, out edx_12);
}

// 0041103C: Register word32 fn0041103C()
word32 fn0041103C()
{
	return fn00412CA0();
}

// 00411055: void fn00411055()
void fn00411055()
{
	fn00413000();
}

// 00411096: void fn00411096(Register Eq_2 ecx, Register Eq_2 edx, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack Eq_2 dwArg00)
void fn00411096(Eq_2 ecx, Eq_2 edx, Eq_9 * es, Eq_10 * ds, Eq_2 dwArg00)
{
	Eq_2 edi_19 = 0x00;
	int32 dwLoc08_26 = 0x00;
	if (*edx > 0x00)
	{
		do
		{
			struct Eq_50 * eax_56 = *((word32) edx + 0x04);
			word32 ecx_57 = Mem0[eax_56 + edi_19:word32];
			word32 eax_58 = eax_56 + edi_19;
			if (*((word32) ecx + (ecx_57 - 0x04)) != 0xCCCCCCCC || Mem0[(Mem0[eax_58 + 0x04:word32] + ecx_57) + ecx:word32] != 0xCCCCCCCC)
				fn004110F0(dwArg00, ecx, edx, edi_19, es, ds, dwArg00, *((word32) edi_19 + ((word32) (*((word32) edx + 0x04)) + 0x08)));
			int32 eax_68 = dwLoc08_26 + 0x01;
			edi_19 = (word32) edi_19 + 0x0C;
			dwLoc08_26 = eax_68;
		} while (eax_68 < *edx);
	}
}

// 004110AA: void fn004110AA(Stack (ptr char) ptrArg04, Stack (ptr Eq_101) ptrArg08)
void fn004110AA(char * ptrArg04, Eq_101 * ptrArg08)
{
	strcat(ptrArg04, ptrArg08);
}

// 004110B9: void fn004110B9()
void fn004110B9()
{
	word32 esp_3;
	initterm();
}

// 004110BE: Register Eq_110 fn004110BE(Stack (ptr char) ptrArg04)
size_t fn004110BE(char * ptrArg04)
{
	return strlen(ptrArg04);
}

// 004110C3: void fn004110C3(Register Eq_2 ebp, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack (ptr Eq_101) dwArg04, Stack (ptr char) dwArg08, Stack int32 dwArg0C)
void fn004110C3(Eq_2 ebp, Eq_9 * es, Eq_10 * ds, Eq_101 * dwArg04, char * dwArg08, int32 dwArg0C)
{
	word32 * edi_17 = fp - 0x013C;
	word32 ecx_18 = 0x4E;
	while (ecx_18 != 0x00)
	{
		*edi_17 = 0xCCCCCCCC;
		edi_17 = edi_17 + 0x01;
		ecx_18 = ecx_18 - 0x01;
	}
	word32 esp_44;
	word32 ebp_45;
	byte SCZO_46;
	word32 ebx_47;
	word32 esi_48;
	word32 edi_49;
	word32 ecx_50;
	word32 eax_51;
	byte SZO_52;
	byte C_53;
	byte SO_54;
	word32 edx_55;
	byte Z_56;
	byte cl_57;
	struct Eq_9 * es_58;
	struct Eq_10 * ds_59;
	MSVCR90D.dll!sprintf();
	ui32 eax_30 = globals->dw417000 ^ fp - 0x04;
	word32 edx_62;
	fn00411168(es_58, ds_59, out edx_62);
	ptr32 esp_123 = fp - 332;
	int32 dwLoc68_127 = 0x00;
	while (dwLoc68_127 < 0x10)
	{
		word32 ecx_91 = (word32) *((char *) dwArg04 + dwLoc68_127);
		word32 * esp_93 = esp_123 - 0x04;
		*esp_93 = ecx_91;
		*(esp_93 - 0x04) = 4282188;
		int32 edx_98 = dwLoc68_127 *s 0x03;
		ptr32 eax_100 = fp - 0x53 + edx_98;
		*(esp_93 - 0x08) = eax_100;
		word32 esp_103;
		word32 ebp_104;
		byte SCZO_105;
		word32 ebx_106;
		word32 esi_107;
		word32 edi_108;
		word32 ecx_109;
		word32 eax_110;
		byte SZO_111;
		byte C_112;
		byte SO_113;
		word32 edx_114;
		byte Z_115;
		byte cl_116;
		struct Eq_9 * es_117;
		struct Eq_10 * ds_118;
		MSVCR90D.dll!sprintf();
		word32 edx_121;
		fn00411168(es_117, ds_118, out edx_121);
		esp_123 = esp_103 + 0x08;
		dwLoc68_127 = dwLoc68_127 + 0x01;
	}
	while (true)
	{
		word32 dwLoc013C_138;
		dwLoc68_127 = dwLoc68_127 + 0x01;
		if (dwLoc68_127 < 0x10)
			dwLoc013C_138 = 0x01;
		else
			dwLoc013C_138 = 0x00;
		if (dwLoc013C_138 == 0x00)
			break;
		word32 * esp_141 = esp_123 - 0x04;
		*esp_141 = 4282184;
		*(esp_141 - 0x04) = fp - 0x5C;
		fn004110AA(ptrArg00, dwArg04);
	}
	ptr32 * esp_150 = esp_123 - 0x04;
	*esp_150 = fp - 0x5C;
	int32 eax_152 = fn004110BE(ptrArg00);
	*esp_150 = 0x00415744;
	*(esp_150 - 0x04) = fp - 0x5C + eax_152;
	fn004110C8(ptrArg00, dwArg04);
	int32 dwLoc68_167 = 0x00;
	while (dwLoc68_167 < 0x10)
	{
		if ((word32) *((char *) dwArg04 + dwLoc68_167) < 0x20 || (word32) (*((char *) dwArg04 + dwLoc68_167)) > 0x7E)
			;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x5C)[eax_152 + 0x03 + dwLoc68_167].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = bLoc013C;
		dwLoc68_167 = dwLoc68_167 + 0x01;
	}
	while (dwLoc68_167 < 0x10)
	{
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x5C)[eax_152 + 0x03 + dwLoc68_167].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = (Eq_400) 0x20;
		dwLoc68_167 = dwLoc68_167 + 0x01;
	}
	*esp_150 = 0x00415740;
	ptr32 ecx_227 = fp - 0x5C + (eax_152 + 0x03) + dwLoc68_167;
	*(esp_150 - 0x04) = ecx_227;
	fn004110C8(ptrArg00, dwArg04);
	*esp_150 = fp - 0x5C;
	*(esp_150 - 0x04) = 4282172;
	struct Eq_338 * esp_239;
	ptr32 ebp_240;
	byte SCZO_241;
	word32 ebx_242;
	word32 esi_243;
	word32 edi_244;
	word32 ecx_245;
	word32 eax_246;
	byte SZO_247;
	byte C_248;
	byte SO_249;
	word32 edx_250;
	byte Z_251;
	byte cl_252;
	struct Eq_9 * es_253;
	struct Eq_10 * ds_254;
	MSVCR90D.dll!printf();
	Eq_2 edx_257;
	word32 eax_258 = fn00411168(es_253, ds_254, out edx_257);
	esp_239->t0000 = edx_257;
	*(esp_239 - 0x04) = eax_258;
	fn00411096(fp - 0x04, 0x00411600, es_253, ds_254, ebp);
	word32 edx_280;
	fn00411023(*(esp_239 - 0x04), eax_30 ^ fp - 0x04, esp_239->t0000, esp_239->t000C, ebp_240, esp_239->t0008, esp_239->t0004, es_253, ds_254, out edx_280);
	word32 edx_285;
	fn00411168(es_253, ds_254, out edx_285);
}

// 004110C8: void fn004110C8(Stack (ptr char) ptrArg04, Stack (ptr Eq_101) ptrArg08)
void fn004110C8(char * ptrArg04, Eq_101 * ptrArg08)
{
	strcpy(ptrArg04, ptrArg08);
}

// 004110E1: Register (ptr Eq_416) fn004110E1(Stack (ptr Eq_417) dwArg04, Stack uint32 dwArg08)
Eq_416 * fn004110E1(Eq_417 * dwArg04, uint32 dwArg08)
{
}

// 004110F0: void fn004110F0(Register Eq_2 edx, Register Eq_2 ebx, Register Eq_2 esi, Register Eq_2 edi, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack Eq_2 dwArg04, Stack Eq_2 dwArg08)
void fn004110F0(Eq_2 edx, Eq_2 ebx, Eq_2 esi, Eq_2 edi, Eq_9 * es, Eq_10 * ds, Eq_2 dwArg04, Eq_2 dwArg08)
{
	Eq_2 edi_3 = edi;
	ui32 eax_11 = globals->dw417000 ^ fp - (struct Eq_462 *) 0x04;
	Eq_2 eax_136 = dwArg08;
	if (globals->dw417010 == ~0x00)
	{
l0041283E:
		word32 edx_54;
		fn00411023(eax_136, eax_11 ^ fp - (struct Eq_462 *) 0x04, edx, ebx, fp - (struct Eq_462 *) 0x04, esi, edi_3, es, ds, out edx_54);
		return;
	}
	Eq_477 ebx_104;
	if (*dwArg08 != 0x00)
	{
		Eq_2 ecx_105 = dwArg08;
		do
		{
			ecx_105 = (word32) ecx_236 + 0x01;
			Eq_2 ecx_236 = ecx_105;
		} while (*ecx_236 != 0x00);
		if (ecx_105 - (dwArg08 + 0x01) <=u ~0x03D2)
		{
			ebx_104 = fp - 0x0408;
			byte * ecx_121 = globals->a415B94;
			do
			{
				byte dl_127 = *ecx_121;
				Mem128[fp - 0x0408 + ecx_121:byte] = dl_127;
				ecx_121 = ecx_121 + 0x01;
			} while (dl_127 != 0x00);
			do
			{
				eax_136 = (word32) eax_237 + 0x01;
				Eq_2 eax_237 = eax_136;
			} while (*eax_237 != 0x00);
			uint32 eax_145 = eax_136 - dwArg08;
			word32 edi_147 = fp - 0x0409 + 0x01;
			do
			{
				edi_147 = edi_238 + 0x01;
				struct Eq_524 * edi_238 = edi_147;
			} while (edi_238->t0000 != 0x00);
			uint32 ecx_156 = eax_145 >> 0x02;
			Eq_2 esi_159 = dwArg08;
			while (ecx_156 != 0x00)
			{
				edi_147->t0000 = *esi_159;
				esi_159 = esi_159 + 0x04;
				edi_147 = edi_147 + 0x04;
				ecx_156 = ecx_156 - 0x01;
			}
			ui32 ecx_171 = eax_145 & 0x03;
			byte * eax_175 = &globals->t415BB0;
			while (ecx_171 != 0x00)
			{
				edi_147->t0000 = *esi_159;
				esi_159 = esi_159 + 0x01;
				edi_147 = edi_147 + 0x01;
				ecx_171 = ecx_171 - 0x01;
			}
			do
			{
				eax_175 = eax_239 + 0x01;
				byte * eax_239 = eax_175;
			} while (*eax_239 != 0x00);
			union Eq_582 * esi_196 = &globals->t415BB0;
			word32 edi_197 = fp - 0x0409 + 0x01;
			do
			{
				edi_197 = edi_240 + 0x01;
				struct Eq_584 * edi_240 = edi_197;
			} while (edi_240->t0000 != 0x00);
			uint32 ecx_206 = eax_175 - 0x00415BB0 >> 0x02;
			while (ecx_206 != 0x00)
			{
				edi_197->t0000 = *esi_196;
				esi_196 = (union Eq_582 *) ((char *) esi_196 + 0x04);
				edi_197 = edi_197 + 0x04;
				ecx_206 = ecx_206 - 0x01;
			}
			ui32 ecx_220 = eax_175 - 0x00415BB0 & 0x03;
			while (ecx_220 != 0x00)
			{
				edi_197->t0000 = *esi_196;
				esi_196 = (union Eq_582 *) ((char *) esi_196 + 0x01);
				edi_197 = edi_197 + 0x01;
				ecx_220 = ecx_220 - 0x01;
			}
l00412824:
			eax_136 = fn004123F0(fp - (struct Eq_462 *) 0x04, es, ds, dwArg04, globals->dw417010, (ui32 *) 0x02, ebx_104, out edx, out edi_3);
			goto l0041283E;
		}
	}
	ebx_104 = (Eq_477) &globals->t415D4C;
	goto l00412824;
}

// 004110FF: void fn004110FF()
void fn004110FF()
{
	word32 esp_3;
	crt_debugger_hook();
}

// 00411104: Register word32 fn00411104(Stack (ptr Eq_656) dwArg04)
word32 fn00411104(Eq_656 * dwArg04)
{
	word32 eax_23;
	if ((word32) dwArg04->w0000 != 23117)
		eax_23 = 0x00;
	else
	{
		struct Eq_664 * ecx_36 = dwArg04 + dwArg04->dw003C / 0x0040;
		if (ecx_36->dw0000 != 0x4550)
			eax_23 = 0x00;
		else if ((word32) ecx_36->w0018 != 0x010B)
			eax_23 = 0x00;
		else
			eax_23 = 0x01;
	}
	return eax_23;
}

// 0041111D: Register word32 fn0041111D()
word32 fn0041111D()
{
	return fn00412050();
}

// 00411136: Register Eq_688 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fn00411055();
	return fn00411D70(fp - 0x04, es, ds);
}

// 00411163: Register word32 fn00411163(Register Eq_2 ebp, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack (ptr char) dwArg04)
word32 fn00411163(Eq_2 ebp, Eq_9 * es, Eq_10 * ds, char * dwArg04)
{
}

// 00411168: Register word32 fn00411168(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Register out ptr32 edxOut)
word32 fn00411168(Eq_9 * es, Eq_10 * ds, ptr32 & edxOut)
{
	*edxOut = edx;
	fn00411990(es, ds, dwLoc04);
	return eax;
}

// 0041116D: Register word32 fn0041116D(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack int32 dwArg04, Stack (arr (ptr char)) dwArg08)
word32 fn0041116D(Eq_9 * es, Eq_10 * ds, int32 dwArg04, char * dwArg08[])
{
	word32 * edi_17 = fp - 220;
	word32 ecx_18 = 0x36;
	while (ecx_18 != 0x00)
	{
		*edi_17 = 0xCCCCCCCC;
		edi_17 = edi_17 + 0x01;
		ecx_18 = ecx_18 - 0x01;
	}
	int32 dwLoc0C_26 = 0x01;
	while (dwLoc0C_26 < dwArg04)
	{
		fn00411163(fp - 0x04, es, ds, dwArg08[dwLoc0C_26]);
		dwLoc0C_26 = dwLoc0C_26 + 0x01;
	}
	word32 edx_66;
	return fn00411168(es, ds, out edx_66);
}

// 00411190: Register word32 fn00411190(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack word32 dwArg04, Stack Eq_2 dwArg08, Stack (ptr ui32) dwArg10, Stack Eq_477 dwArg14, Stack Eq_688 dwArg18)
word32 fn00411190(Eq_9 * es, Eq_10 * ds, word32 dwArg04, Eq_2 dwArg08, ui32 * dwArg10, LPWSTR dwArg14, DWORD dwArg18)
{
}

// 0041119F: Register word32 fn0041119F(Stack int32 dwArg04)
word32 fn0041119F(int32 dwArg04)
{
	word32 eax_103;
	ptr32 eax_16 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	if (fn00411104(&globals->t400000) == 0x00)
		eax_103 = 0x00;
	else
	{
		struct Eq_1805 * eax_96 = fn004110E1(&globals->t400000, dwArg04 - 0x00400000);
		if (eax_96 == null)
			eax_103 = 0x00;
		else
			eax_103 = 0x00 - (-(eax_96->dw0024 & 0x80000000) == 0x00) + 0x01;
	}
	fs->ptr0000 = eax_16;
	return eax_103;
}

// 004111A9: void fn004111A9()
void fn004111A9()
{
	word32 esp_3;
	amsg_exit();
}

// 004111E0: void fn004111E0(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack Eq_2 dwArg04, Stack (ptr ui32) dwArg08)
void fn004111E0(Eq_9 * es, Eq_10 * ds, Eq_2 dwArg04, ui32 * dwArg08)
{
	if (dwArg08 > (ui32 *) 0x04)
	{
		word32 edx_72;
		word32 edi_73;
		fn004123F0(fp - 0x04, es, ds, dwArg04, 0x01, (ui32 *) 0x05, &globals->t415844, out edx_72, out edi_73);
	}
	else
	{
		word32 ecx_25 = globals->a417008[dwArg08 * 0x04];
		Eq_477 edx_26 = *((char *) globals->a415B64 + dwArg08 * 0x04);
		if (ecx_25 != ~0x00)
		{
			word32 edx_55;
			word32 edi_56;
			fn004123F0(fp - 0x04, es, ds, dwArg04, ecx_25, dwArg08, edx_26, out edx_55, out edi_56);
		}
	}
}

// 004111FE: void fn004111FE()
void fn004111FE()
{
	word32 esp_3;
	initterm_e();
}

// 00411203: Register word32 fn00411203()
word32 fn00411203()
{
	return fn00412C90();
}

// 00411860: Register word32 fn00411860(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack (ptr char) dwArg04, Stack ptr32 dwArg08)
word32 fn00411860(Eq_9 * es, Eq_10 * ds, char * dwArg04, ptr32 dwArg08)
{
	word32 * edi_17 = fp - 0xC4;
	word32 ecx_18 = 0x30;
	while (ecx_18 != 0x00)
	{
		*edi_17 = 0xCCCCCCCC;
		edi_17 = edi_17 + 0x01;
		ecx_18 = ecx_18 - 0x01;
	}
	word32 esp_34;
	word32 ebp_35;
	byte SCZO_36;
	word32 ebx_37;
	word32 esi_38;
	word32 edi_39;
	word32 ecx_40;
	word32 eax_41;
	struct Eq_9 * es_42;
	struct Eq_10 * ds_43;
	word32 edx_44;
	stat64i32();
	word32 edx_47;
	fn00411168(es_42, ds_43, out edx_47);
	word32 edx_58;
	return fn00411168(es_42, ds_43, out edx_58);
}

// 00411970: Register Eq_2 fn00411970(Register Eq_2 eax, Register ui32 ecx, Register Eq_2 edx, Register Eq_2 ebx, Register ptr32 ebp, Register Eq_2 esi, Register Eq_2 edi, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack word32 dwArg00, Register out ptr32 edxOut)
Eq_2 fn00411970(Eq_2 eax, ui32 ecx, Eq_2 edx, Eq_2 ebx, ptr32 ebp, Eq_2 esi, Eq_2 edi, Eq_9 * es, Eq_10 * ds, word32 dwArg00, ptr32 & edxOut)
{
	*edxOut = edx;
	if (ecx == globals->dw417000)
		return eax;
	globals->t417278 = eax;
	globals->dw417274 = ecx;
	globals->t417270 = edx;
	globals->t41726C = ebx;
	globals->t417268 = esi;
	globals->t417264 = edi;
	globals->ptr417290 = ss;
	globals->ptr417284 = cs;
	globals->ptr417260 = ds;
	globals->ptr41725C = es;
	globals->ptr417258 = fs;
	globals->ptr417254 = gs;
	globals->t417288 = cond(fp - 0x032C);
	globals->ptr41727C = ebp;
	globals->dw417280 = dwArg00;
	globals->ptr41728C = fp + 0x04;
	globals->dw4171C8 = 0x00010001;
	globals->dw41717C = globals->dw417280;
	globals->dw417170 = 0xC0000409;
	globals->dw417174 = 0x01;
	word32 edx_76;
	*edxOut = globals->dw417004;
	globals->t4171C0 = IsDebuggerPresent();
	fn004110FF();
	*(fp - 0x0330) = 0x00;
	SetUnhandledExceptionFilter(*(fp - 0x0330));
	*(fp - 0x0334) = 4282424;
	UnhandledExceptionFilter(*(fp - 0x0334));
	if (globals->t4171C0 == 0x00)
	{
		*(fp - 0x0338) = 0x01;
		fn004110FF();
	}
	*(fp - 0x0338) = 0xC0000409;
	*(fp - 0x033C) = (HANDLE *) GetCurrentProcess();
	return TerminateProcess(*(fp - 0x033C), *(fp - 0x0338));
}

// 00411990: void fn00411990(Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack Eq_2 dwArg00)
void fn00411990(Eq_9 * es, Eq_10 * ds, Eq_2 dwArg00)
{
	if (!Z)
		return;
	fn004111E0(es, ds, dwArg00, null);
}

// 00411D70: Register int32 fn00411D70(Register ptr32 ebp, Register (ptr Eq_695) es, Register (ptr Eq_696) ds)
int32 fn00411D70(ptr32 ebp, Eq_695 * es, Eq_696 * ds)
{
}

// 00412050: Register word32 fn00412050()
word32 fn00412050()
{
	return fs->dw0018;
}

// 004122D0: Register word32 fn004122D0(Stack word32 dwArg04, Register out ptr32 edxOut, Register out ptr32 ebxOut)
word32 fn004122D0(word32 dwArg04, ptr32 & edxOut, ptr32 & ebxOut)
{
	ptr32 eax_16 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	Eq_688 eax_38 = fp - 0x14 ^ fp - 0x14;
	RaiseException(1080890248, eax_38, 0x06, fp - 0x38);
	byte al_39 = (byte) eax_38;
	word32 edx_47;
	*edxOut = fp - 0x1D;
	fs->ptr0000 = eax_16;
	word32 ebx_70;
	*ebxOut = fp - 0x38;
	return (word32) al_39;
}

// 004123F0: Register word32 fn004123F0(Register (ptr Eq_636) ebp, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Stack Eq_2 dwArg04, Stack word32 dwArg08, Stack (ptr ui32) dwArg0C, Stack Eq_477 dwArg10, Register out ptr32 edxOut, Register out ptr32 ediOut)
word32 fn004123F0(Eq_636 * ebp, Eq_9 * es, Eq_10 * ds, Eq_2 dwArg04, word32 dwArg08, ui32 * dwArg0C, LPWSTR dwArg10, ptr32 & edxOut, ptr32 & ediOut)
{
	ui32 eax_11 = globals->dw417000 ^ fp - 0x04;
	ptr32 ebp_123 = fp - 0x04;
	<anonymous> * dwLoc0E3C_30 = null;
	word32 eax_31 = fn0041103C();
	ptr32 esp_33 = fp - 0x0E50;
	if (eax_31 == 0x00)
	{
		esp_33 = fp - 3668;
		dwLoc0E3C_30 = fn00411203();
	}
	Eq_2508 dwLoc0E38_341;
	int32 * esp_43 = esp_33 - 0x04;
	*esp_43 = 0x00;
	*(esp_43 - 0x04) = 0x00;
	*(esp_43 - 0x08) = ~0x00;
	*(esp_43 - 0x0C) = (LPWSTR *) dwArg10;
	*(esp_43 - 0x10) = 0x00;
	*(esp_43 - 0x14) = 65001;
	union Eq_2 * esp_340 = esp_43 - 0x14;
	Eq_2547 eax_55 = MultiByteToWideChar(*(esp_43 - 0x14), *(esp_43 - 0x10), *(esp_43 - 0x0C), *(esp_43 - 0x08), *(esp_43 - 0x04), *esp_43);
	if (eax_55 < 0x0200)
	{
		*(esp_43 - 0x18) = (union Eq_2547 *) eax_55;
		*(esp_43 - 0x1C) = fp + ~0x0E2F;
		*(esp_43 - 0x20) = ~0x00;
		*(esp_43 - 0x24) = (LPWSTR *) dwArg10;
		*(esp_43 - 0x28) = 0x00;
		*(esp_43 - 44) = 65001;
		esp_340 = esp_43 - 44;
		if (MultiByteToWideChar(*(esp_43 - 44), *(esp_43 - 0x28), *(esp_43 - 0x24), *(esp_43 - 0x20), *(esp_43 - 0x1C), *(esp_43 - 0x18)) != 0x00)
		{
			dwLoc0E38_341 = fp + ~0x0E2F;
l0041248D:
			Eq_2 eax_104;
			union Eq_2 * esp_106;
			byte al_105;
			LPBOOL * esp_62 = esp_340 - 0x04;
			*esp_62 = (LPBOOL *) (BOOL *) 0x1002;
			word32 ebx_102;
			Eq_2 edx_103;
			word32 eax_67 = fn004122D0(dwArg00, out edx_103, out ebx_102);
			if (eax_67 != 0x00)
			{
				word32 eax_313 = globals->a415B7C[dwArg0C * 0x04];
				*esp_62 = (LPBOOL *) dwLoc0E38_341;
				*(esp_62 - 0x04) = ebx_102;
				*(esp_62 - 0x08) = eax_313;
				*(esp_62 - 0x0C) = dwArg0C;
				eax_104 = fn00412680(dwArg00, dwArg04, dwArg08, dwArg0C, out edx_103, out ebx_102);
				esp_106 = (union Eq_2 *) ((char *) esp_62 + 0x04);
				if (eax_104 != 0x00)
					goto l004125E6;
				al_105 = 0x00;
				eax_104 = DPB(eax_104, 0x00, 0);
			}
			else
			{
				al_105 = 0x01;
				eax_104 = DPB(eax_67, 0x01, 0);
			}
			esp_106 = esp_340;
			if (dwLoc0E3C_30 != null || eax_31 != 0x00)
			{
				if (al_105 != 0x00)
				{
					eax_104 = IsDebuggerPresent();
					if (eax_104 != 0x00)
						goto l004125E0;
				}
				word32 esp_166;
				LPBOOL * esp_129 = esp_340 - 0x04;
				*esp_129 = (LPBOOL *) (BOOL *) 0x0104;
				*(esp_129 - 0x04) = fp - 0x0418;
				*(esp_129 - 0x08) = fp + ~0x0E33;
				*(esp_129 - 0x0C) = 0x0104;
				*(esp_129 - 0x10) = fp - 0x0210;
				word32 ebx_142 = ebx_102 + ~0x04;
				*(esp_129 - 0x14) = ebx_142;
				<anonymous> * esi_149 = fn00411190(es, ds, dwArg00, dwArg04, dwArg0C, dwArg10, dwArg14);
				if (esi_149 != null)
				{
					*esp_129 = (LPBOOL *) dwLoc0E38_341;
					*(esp_129 - 0x04) = dwArg0C;
					*(esp_129 - 0x08) = 4283512;
					*(esp_129 - 0x0C) = fp - 0x0418;
					*(esp_129 - 0x10) = eax_31;
					*(esp_129 - 0x14) = fp - 0x0210;
					*(esp_129 - 0x18) = dwArg08;
					word32 edi_192;
					byte SCZO_194;
					byte SZO_196;
					byte C_197;
					word32 ebx_198;
					word32 esi_199;
					byte Z_200;
					word32 ecx_201;
					byte al_203;
					esi_149();
				}
				else
				{
					*esp_129 = (LPBOOL *) null;
					*(esp_129 - 0x04) = 0x00;
					*(esp_129 - 0x08) = 778;
					*(esp_129 - 0x0C) = fp + ~0x0A2F;
					*(esp_129 - 0x10) = ~0x00;
					*(esp_129 - 0x14) = fp - 0x0210;
					*(esp_129 - 0x18) = 0x00;
					*(esp_129 - 0x1C) = 65001;
					ptr32 esi_257;
					*(esp_129 - 0x20) = 0x00;
					*(esp_129 - 0x24) = 0x00;
					*(esp_129 - 0x28) = 778;
					*(esp_129 - 44) = fp - 1828;
					*(esp_129 - 0x30) = ~0x00;
					*(esp_129 - 0x34) = fp - 0x0418;
					*(esp_129 - 0x38) = 0x00;
					*(esp_129 - 0x3C) = 65001;
					if (WideCharToMultiByte(*(esp_129 - 0x3C), *(esp_129 - 0x38), *(esp_129 - 0x34), *(esp_129 - 0x30), *(esp_129 - 44), *(esp_129 - 0x28), *(esp_129 - 0x24), *(esp_129 - 0x20)) != 0x00)
						esi_257 = fp - 1828;
					*(esp_249 - 0x04) = (LPWSTR *) dwArg10;
					*(esp_249 - 0x08) = dwArg0C;
					*(esp_249 - 0x0C) = 4283424;
					*(esp_249 - 0x10) = esi_257;
					*(esp_249 - 0x14) = eax_31;
					*(esp_249 - 0x18) = ebx_256;
					*(esp_249 - 0x1C) = dwArg08;
					word32 edi_288;
					byte SCZO_290;
					byte SZO_292;
					byte C_293;
					word32 ebx_294;
					word32 esi_295;
					byte Z_296;
					word32 ecx_297;
					byte al_299;
					dwLoc0E3C_30();
				}
				esp_106 = esp_166 + 0x1C;
				if (eax_104 != 0x01)
				{
l004125E6:
					struct Eq_2725 * esp_84 = (char *) esp_106 + 0x04;
					Eq_2 edi_83 = *esp_106;
					*ediOut = edi_83;
					word32 edx_92;
					return fn00411023(eax_104, eax_11 ^ fp - 0x04, edx_103, esp_84->t0004, ebp_123, esp_84->t0000, edi_83, es, ds, out edx_92);
				}
			}
l004125E0:
			DebugBreak();
			goto l004125E6;
		}
	}
	dwLoc0E38_341 = (Eq_2508) &globals->t415CC8;
	goto l0041248D;
}

// 00412680: Register word32 fn00412680(Stack word32 dwArg04, Stack Eq_2 dwArg08, Stack word32 dwArg0C, Stack (ptr ui32) dwArg10, Register out ptr32 edxOut, Register out ptr32 ebxOut)
word32 fn00412680(word32 dwArg04, Eq_2 dwArg08, word32 dwArg0C, ui32 * dwArg10, ptr32 & edxOut, ptr32 & ebxOut)
{
	ptr32 eax_16 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	Eq_688 eax_38 = fp - 0x14 ^ fp - 0x14;
	RaiseException(1080890248, eax_38, 0x06, fp - 0x38);
	byte al_39 = (byte) eax_38;
	word32 edx_59;
	*edxOut = fp - 0x38;
	fs->ptr0000 = eax_16;
	word32 ebx_79;
	*ebxOut = fp - 0x38;
	return (word32) al_39;
}

// 00412C90: Register word32 fn00412C90()
word32 fn00412C90()
{
	return globals->dw417538;
}

// 00412CA0: Register word32 fn00412CA0()
word32 fn00412CA0()
{
	return globals->dw41753C;
}

// 00413000: void fn00413000()
void fn00413000()
{
	if (globals->dw417000 != 0xBB40E64E && (globals->dw417000 & 0xFFFF0000) != 0x00)
		globals->dw417004 = ~globals->dw417000;
	else
	{
		GetSystemTimeAsFileTime(fp - 0x0C);
		ui32 eax_46 = GetTickCount() ^ (GetCurrentThreadId() ^ (GetCurrentProcessId() ^ 0x00));
		QueryPerformanceCounter(fp - 0x1C);
		ui32 ecx_58 = eax_46 ^ dwLoc1C ^ dwLoc18;
		ui32 dwLoc10_59 = ecx_58;
		if (ecx_58 == 0xBB40E64E)
			dwLoc10_59 = ~0x44BF19B0;
		else if ((ecx_58 & 0xFFFF0000) == 0x00)
			dwLoc10_59 = ecx_58 << 0x10 | ecx_58;
		globals->dw417000 = dwLoc10_59;
		globals->dw417004 = ~dwLoc10_59;
	}
}

// 00413770: Register word32 fn00413770(Register Eq_2 edx, Register Eq_2 ebx, Register Eq_2 esi, Register Eq_2 edi, Register (ptr Eq_9) es, Register (ptr Eq_10) ds, Register out ptr32 ebxOut)
word32 fn00413770(Eq_2 edx, Eq_2 ebx, Eq_2 esi, Eq_2 edi, Eq_9 * es, Eq_10 * ds, ptr32 & ebxOut)
{
	*ebxOut = ebx;
	Eq_2 edi_117 = edi;
	ptr32 ebp_121 = fp - (Eq_3458 (*)[]) 0x04;
	ui32 eax_11 = globals->dw417000 ^ fp - (Eq_3458 (*)[]) 0x04;
	if (globals->dw41755C != 0x00)
	{
		word32 edx_60;
		return fn00411023(0x00, eax_11 ^ fp - (Eq_3458 (*)[]) 0x04, edx, ebx, fp - (Eq_3458 (*)[]) 0x04, esi, edi, es, ds, out edx_60);
	}
	Eq_1131 eax_85 = globals->t417034;
	globals->dw41755C = 0x01;
	union Eq_2 * esp_122 = fp - 292;
	Eq_2 eax_120 = LoadLibraryA(eax_85);
	if (eax_120 != 0x00)
	{
l00413937:
		word32 edx_129;
		return fn00411023(eax_120, eax_11 ^ fp - (Eq_3458 (*)[]) 0x04, edx, ebx, ebp_121, *esp_122, edi_117, es, ds, out edx_129);
	}
	Eq_2 eax_137 = LoadLibraryA(&globals->t4161F4);
	if (eax_137 == 0x00)
	{
		word32 edx_149;
		return fn00411023(eax_137, eax_11 ^ fp - (Eq_3458 (*)[]) 0x04, edx, ebx, fp - (Eq_3458 (*)[]) 0x04, 0x004161F4, edi, es, ds, out edx_149);
	}
	Eq_2 eax_162 = GetProcAddress(eax_137, &globals->t4161E4);
	if (eax_162 == 0x00)
	{
		word32 ebx_168;
		*ebxOut = eax_137;
		word32 edx_176;
		return fn00411023(eax_162, eax_11 ^ fp - (Eq_3458 (*)[]) 0x04, edx, eax_137, fp - (Eq_3458 (*)[]) 0x04, 0x004161E4, edi, es, ds, out edx_176);
	}
	union Eq_2 * esp_186 = fp - 0x0140;
	if (GetProcAddress(eax_137, &globals->t4161D0) == 0x00)
	{
l00413933:
		word32 * esp_212 = (char *) esp_186 + 0x04;
		edi_117 = *esp_186;
		eax_120.u0 = 0x00;
		*ebxOut = *esp_212;
		esp_122 = (union Eq_2 *) (esp_212 + 0x01);
		goto l00413937;
	}
	else
	{
		esp_186 = fp - 0x0148;
		if (GetProcAddress(eax_137, &globals->t4161C0) == 0x00)
			goto l00413933;
		Eq_2 esi_249;
		ptr32 esp_240 = fp - 0x015C;
		if (eax_162() == 0x00)
		{
			<anonymous> * edi_295;
			byte SCZO_297;
			word32 eax_298;
			byte SZO_299;
			byte C_300;
			byte Z_301;
			word32 ecx_302;
			word32 ebx_304;
			byte al_306;
			byte dl_307;
			edi_241();
			if (eax_298 == 0x00)
			{
				edx = 0x7FFFFFFF - dwLoc0110;
				if (edx >= 0x0D && dwLoc0110 < 0xF7)
				{
					*(esp_240 - 0x04) = fp - 0x0110;
					*(esp_240 - 0x08) = fp - 0x010C;
					*(esp_240 - 0x0C) = fp - 0x011C;
					*(esp_240 - 0x10) = 0x00;
					*(esp_240 - 0x14) = 0x0041616C;
					*(esp_240 - 0x18) = dwLoc0114;
					ptr32 esp_340;
					word32 edi_341;
					word32 ebp_342;
					byte SCZO_343;
					word32 eax_344;
					byte SZO_345;
					byte C_346;
					byte Z_347;
					word32 ecx_348;
					word32 esi_349;
					<anonymous> * ebx_350;
					word32 edx_351;
					byte al_352;
					byte dl_353;
					struct Eq_3402 * es_354;
					struct Eq_3403 * ds_355;
					edi_295();
					*(esp_340 - 0x04) = dwLoc0114;
					union Eq_2 * esp_360;
					word32 edi_361;
					byte SCZO_363;
					word32 eax_364;
					byte SZO_365;
					byte C_366;
					byte Z_367;
					word32 ecx_368;
					word32 esi_369;
					word32 ebx_370;
					byte al_372;
					byte dl_373;
					ebx_350();
					*(esp_360 - 0x04) = esi_369;
					FreeLibrary(*(esp_360 - 0x04));
					esp_186 = esp_360 - 0x04;
					if (edi_361 == 0x00)
					{
						Eq_3343 ecx_382 = dwLoc0110;
						if (*((word32) dwLoc0110 + (fp - 0x010E)) != 0x5C)
							Mem423[fp - 0x010D + dwLoc0110:byte] = 0x5C;
						else
							ecx_382 = dwLoc0110 - 0x01;
						Eq_1131 esi_388 = globals->t417034;
						Eq_3458 (* eax_389)[] = null;
						word32 ecx_393 = fp - 0x010C + ecx_382;
						do
						{
							byte dl_396 = Mem377[esi_388 + eax_389:byte];
							Mem398[ecx_393 + eax_389:byte] = dl_396;
							edx = DPB(edx, dl_396, 0);
							eax_389 = eax_389 + 0x01;
						} while (eax_389 <= (Eq_3458 (*)[]) 11);
						*(esp_360 - 0x08) = (Eq_3458 (**)[]) (fp - (Eq_3458 (*)[]) 0x010C);
						Eq_2 eax_406 = LoadLibraryA(*(esp_360 - 0x08));
						Eq_2 ebx_409 = *(esp_360 - 0x04);
						*ebxOut = ebx_409;
						word32 edx_417;
						return fn00411023(eax_406, eax_11 ^ fp - (Eq_3458 (*)[]) 0x04, edx, ebx_409, ebp_121, *esp_360, *(esp_360 - 0x08), es, ds, out edx_417);
					}
					goto l00413933;
				}
			}
		}
		esp_186 = esp_240 - 0x04;
		*esp_186 = (union Eq_2 *) esi_249;
		FreeLibrary(*esp_186);
		goto l00413933;
	}
}

